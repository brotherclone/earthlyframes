!function(){"use strict";function c(n,e){var t={};for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function u(n,e,t){if(t||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||((o=o||Array.prototype.slice.call(e,0,r))[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function n(o){return function(n){return t=typeof(e=n),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===o;var e,t}}function e(e){return function(n){return typeof n===e}}function t(e){return function(n){return e===n}}function l(n){return!(null==n)}function Y(){}function i(t,o){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(o.apply(null,n))}}function w(n){return function(){return n}}function K(n){return n}function o(n,e){return n===e}function J(o){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=r.concat(n);return o.apply(null,t)}}function Q(e){return function(n){return!e(n)}}function h(n){return function(){throw new Error(n)}}function a(n){return n()}function r(){return Xc}function s(n){return n()}function f(t){var o,r=!1;return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r||(r=!0,o=t.apply(null,n)),o}}function b(n,e){return-1<Jc.call(n,e)}function d(n,e){for(var t=0,o=n.length;t<o;t++)if(e(n[t],t))return 1}function Z(n,e){for(var t=n.length,o=new Array(t),r=0;r<t;r++){var i=n[r];o[r]=e(i,r)}return o}function D(n,e){for(var t=0,o=n.length;t<o;t++)e(n[t],t)}function y(n,e){for(var t=[],o=0,r=n.length;o<r;o++){var i=n[o];e(i,o)&&t.push(i)}return t}function m(n,o,r){return function(n){for(var e,t=n.length-1;0<=t;t--)e=n[t],r=o(r,e,t)}(n),r}function g(n,t,o){return D(n,function(n,e){o=t(o,n,e)}),o}function x(n,e){return function(n,e,t){for(var o=0,r=n.length;o<r;o++){var i=n[o];if(e(i,o))return Yc.some(i);if(t(i,o))break}return Yc.none()}(n,e,Uc)}function S(n,e){for(var t=0,o=n.length;t<o;t++)if(e(n[t],t))return Yc.some(t);return Yc.none()}function p(n){for(var e=[],t=0,o=n.length;t<o;++t){if(!Pc(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);Qc.apply(e,n[t])}return e}function M(n,e){return p(Z(n,e))}function v(n,e){for(var t=0,o=n.length;t<o;++t)if(!0!==e(n[t],t))return!1;return!0}function O(n){var e=Kc.call(n,0);return e.reverse(),e}function k(n,e){return y(n,function(n){return!b(e,n)})}function T(n){return[n]}function C(n,e){for(var t=0;t<n.length;t++){var o=e(n[t],t);if(o.isSome())return o}return Yc.none()}function E(n,e){var t=String(e).toLowerCase();return x(n,function(n){return n.search(t)})}function _(n,e){return-1!==n.indexOf(e)}function R(e){return function(n){return _(n,e)}}function F(n){return window.matchMedia(n).matches}function I(n){return w("alloy."+n)}function V(n,e){Ua(n,n.element,e,{})}function B(n,e,t){Ua(n,n.element,e,t)}function A(n){V(n,Ba())}function N(n,e,t){Ua(n,e,t,{})}function H(n,e){var t=n.dom;if(1!==t.nodeType)return!1;var o=t;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function P(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function z(n,e){var t=void 0===e?document:e.dom;return P(t)?[]:Z(t.querySelectorAll(n),Wa.fromDom)}function j(n,e){var t=void 0===e?document:e.dom;return P(t)?Yc.none():Yc.from(t.querySelector(n)).map(Wa.fromDom)}function L(n,e){return n.dom===e.dom}function $(){return Zc(0,0)}function G(n){function e(n){return function(){return t===n}}var t=n.current,o=n.version;return{current:t,version:o,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(ra),isSafari:e("Safari")}}function U(n){function e(n){return function(){return t===n}}var t=n.current,o=n.version;return{current:t,version:o,isWindows:e(ca),isiOS:e("iOS"),isAndroid:e(aa),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(sa),isFreeBSD:e(fa),isChromeOS:e(la)}}function W(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}function X(n){return n.dom.nodeName.toLowerCase()}function q(e){return function(n){return n.dom.nodeType===e}}function nn(n){return Wa.fromDom(n.dom.ownerDocument)}function en(n){return Ja(n)?n:nn(n)}function tn(n){return Yc.from(n.dom.parentNode).map(Wa.fromDom)}function on(n,e){var t=n.dom.childNodes;return Yc.from(t[e]).map(Wa.fromDom)}function rn(e,t){tn(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})}function un(n,e){Yc.from(n.dom.nextSibling).map(Wa.fromDom).fold(function(){tn(n).each(function(n){ns(n,e)})},function(n){rn(n,e)})}function cn(e,t){on(e,0).fold(function(){ns(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})}function an(e,n){D(n,function(n){ns(e,n)})}function sn(n){n.dom.textContent="",D(Za(n),function(n){es(n)})}function fn(n){return Qa(n)&&l(n.dom.host)}function ln(n){return Wa.fromDom(n.dom.host)}function dn(){return cs(Wa.fromDom(document))}function mn(n,e){ns(n.element,e.element)}function gn(e){var n,t=tn(e.element).bind(function(n){return e.getSystem().getByDom(n).toOptional()});as(n=e),es(n.element),n.getSystem().removeFromWorld(n),t.each(function(n){n.syncComponents()})}function pn(n,e){for(var t=ls(n),o=0,r=t.length;o<r;o++){var i=t[o];e(n[i],i)}}function hn(n,t){return ms(n,function(n,e){return{k:e,v:t(n,e)}})}function vn(n,t){var o=[];return pn(n,function(n,e){o.push(t(n,e))}),o}function bn(n,e){return gs(n,e)?Yc.from(n[e]):Yc.none()}function yn(n,e){return gs(n,e)&&void 0!==n[e]&&null!==n[e]}function xn(n,e,t){if(!(Nc(t)||jc(t)||Gc(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")}function wn(n,e,t){xn(n.dom,e,t)}function Sn(n,e){var t=n.dom;pn(e,function(n,e){xn(t,e,n)})}function On(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t}function kn(n,e){return Yc.from(On(n,e))}function Tn(n,e){var t=n.dom;return!(!t||!t.hasAttribute)&&t.hasAttribute(e)}function Cn(n,e){n.dom.removeAttribute(e)}function En(n,e){var t=On(n,e);return void 0===t||""===t?[]:t.split(" ")}function Dn(n){return void 0!==n.dom.classList}function Mn(n,e){var t,o;Dn(n)?n.dom.classList.add(e):(o=e,wn(t,"class",En(t=n,"class").concat([o]).join(" ")))}function _n(n,e){var t,o,r,i;Dn(n)?n.dom.classList.remove(e):(r=e,0<(i=y(En(o=n,"class"),function(n){return n!==r})).length?wn(o,"class",i.join(" ")):Cn(o,"class")),0===(Dn(t=n)?t.dom.classList:En(t,"class")).length&&Cn(t,"class")}function Rn(n,e){return Dn(n)&&n.dom.classList.contains(e)}function Fn(n,e,t){_n(n,t),Mn(n,e)}function In(n,e,t){return n.stype===Xa.Error?e(n.serror):t(n.svalue)}function Vn(n){return{stype:Xa.Value,svalue:n}}function Bn(n){return{stype:Xa.Error,serror:n}}function An(n,e,t,o){return{tag:"field",key:n,newKey:e,presence:t,prop:o}}function Nn(n,e,t){switch(n.tag){case"field":return e(n.key,n.newKey,n.presence,n.prop);case"custom":return t(n.newKey,n.instantiator)}}function Hn(u){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0===n.length)throw new Error("Can't merge zero objects");for(var t={},o=0;o<n.length;o++){var r,i=n[o];for(r in i)gs(i,r)&&(t[r]=u(t[r],i[r]))}return t}}function Pn(){return{tag:"required",process:{}}}function zn(n){return{tag:"defaultedThunk",process:n}}function jn(n){return zn(w(n))}function Ln(){return{tag:"option",process:{}}}function $n(n){return{tag:"mergeWithThunk",process:n}}function Gn(n){return Hc(n)&&100<ls(n).length?" removed due to size":JSON.stringify(n,null,2)}function Un(n,e){return Ss([{path:n,getErrorInfo:e}])}function Wn(t){return{extract:function(e,n){return ks(t(n),function(n){return Un(e,w(n))})},toString:w("val")}}function Xn(n,e,t,o){return o(bn(n,e).getOrThunk(function(){return t(n)}))}function qn(e,t,o,r,i){function u(n){return i.extract(t.concat([r]),n)}function n(n){return n.fold(function(){return ws(Yc.none())},function(n){var e=i.extract(t.concat([r]),n);return Ts(e,Yc.some)})}var c,a,s,f,l,d;switch(e.tag){case"required":return s=t,d=u,bn(f=o,l=r).fold(function(){return n=l,e=f,Un(s,function(){return'Could not find valid *required* value for "'+n+'" in '+Gn(e)});var n,e},d);case"defaultedThunk":return Xn(o,r,e.process,u);case"option":return n(bn(o,r));case"defaultedOptionThunk":return a=e.process,n(bn(c=o,r).map(function(n){return!0===n?a(c):n}));case"mergeWithThunk":return Xn(o,r,w({}),function(n){return u(Ds(e.process(o),n))})}}function Yn(n){var s=Fs(n),f=m(n,function(t,n){return Nn(n,function(n){var e;return Ds(t,((e={})[n]=!0,e))},w(t))},{});return{extract:function(n,e){var t,o,r,i,u,c,a=y(jc(e)?[]:ls((r=l,i=o={},u=function(n,e){i[e]=n},c=Y,pn(e,function(n,e){(r(n,e)?u:c)(n,e)}),o)),function(n){return!yn(f,n)});return 0===a.length?s.extract(n,e):(t=a,Un(n,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))},toString:s.toString}}function Kn(c,a){return{extract:function(t,o){var r,n,i,e=ls(o),u=(i=Wn(c),r=t,n=Z(e,function(n,e){return i.extract(r.concat(["["+e+"]"]),n)}),_s(n));return Os(u,function(n){var e=Z(n,function(n){return An(n,n,Pn(),a)});return Fs(e).extract(t,o)})},toString:function(){return"setOf("+a.toString()+")"}}}function Jn(e,c){return{extract:function(i,u){return bn(u,e).fold(function(){return n=e,Un(i,function(){return'Choice schema did not contain choice key: "'+n+'"'});var n},function(n){return t=i,e=u,bn(o=c,r=n).fold(function(){return n=o,e=r,Un(t,function(){return'The chosen schema: "'+e+'" did not exist in branches: '+Gn(n)});var n,e},function(n){return n.extract(t.concat(["branch: "+r]),e)});var t,e,o,r})},toString:function(){return"chooseOn("+e+"). Possible values: "+ls(c)}}}function Qn(e){return Wn(function(n){return e(n).fold(Ss,ws)})}function Zn(e,n){return Kn(function(n){return e(n).fold(Bn,Vn)},n)}function ne(n,e,t){return xs((r=e.extract([n],o=t),Cs(r,function(n){return{input:o,errors:n}})));var o,r}function ee(n){return n.fold(function(n){throw new Error(Bs(n))},K)}function te(n,e,t){return ee(ne(n,e,t))}function oe(n,e){return Jn(n,hn(e,Fs))}function re(n){return As(n,n,Pn(),Is())}function ie(n,e){return As(n,n,Pn(),e)}function ue(n,e){return As(n,n,Pn(),Fs(e))}function ce(n){return As(n,n,Ln(),Is())}function ae(n,e){return As(n,n,Ln(),e)}function se(n,e){return ae(n,Fs(e))}function fe(n,e){return ae(n,Yn(e))}function le(n,e){return As(n,n,jn(e),Is())}function de(n,e,t){return As(n,n,jn(e),t)}function me(u){if(!Pc(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var c=[],t={};return D(u,function(n,o){var e=ls(n);if(1!==e.length)throw new Error("one and only one name per case");var r=e[0],i=n[r];if(void 0!==t[r])throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!Pc(i))throw new Error("case arguments must be an array");c.push(r),t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=t.length;if(e!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+e);return{fold:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+n.length);return n[o].apply(null,t)},match:function(n){var e=ls(n);if(c.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+e.join(","));if(!v(c,function(n){return b(e,n)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+c.join(", "));return n[r].apply(null,t)},log:function(n){console.log(n,{constructors:c,constructor:r,params:t})}}}}),t}function ge(n,e){return(t={})[n]=e,t;var t}function pe(n){return e={},D(n,function(n){e[n.key]=n.value}),e;var e}function he(n,e,t){return void 0===t&&(t=o),n.exists(function(n){return t(n,e)})}function ve(n){for(var e=[],t=function(n){e.push(n)},o=0;o<n.length;o++)n[o].each(t);return e}function be(n){return $c(n)?n:Uc}function ye(n,e){return L(n.element,e.event.target)}function xe(n){if(!yn(n,"can")&&!yn(n,"abort")&&!yn(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return Ac(Ac({},Ls),n)}function we(n,e){return{key:n,value:xe({abort:e})}}function Se(n,e){return{key:n,value:xe({run:e})}}function Oe(n,t,o){return{key:n,value:xe({run:function(n,e){t.apply(void 0,[n,e].concat(o))}})}}function ke(n){return function(t){return{key:n,value:xe({run:function(n,e){ye(n,e)&&t(n,e)}})}}}function Te(n,e,t){var i,o,r=e.partUids[t];return o=r,Se(i=n,function(n,r){n.getSystem().getByUid(o).each(function(n){var e=n.element,t=i,o=r;n.getSystem().triggerEvent(t,e,o.event)})})}function Ce(n){return Se(n,function(n,e){e.cut()})}function Ee(n,e){var t=n.toString(),o=t.indexOf(")")+1,r=t.indexOf("("),i=t.substring(r+1,o-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:e,parameters:qs(i)}},n}function De(n){return{classes:Lc(n.classes)?[]:n.classes,attributes:Lc(n.attributes)?{}:n.attributes,styles:Lc(n.styles)?{}:n.styles}}function Me(e,t,o){return Ws(function(n){o(n,e,t)})}function _e(n){return{key:n,value:void 0}}function Re(n){var e=te("Creating behaviour: "+n.name,Zs,n),t=e.fields,o=e.name,r=e.active,i=e.apis,u=e.extra,c=e.state,a=Yn(t),s=se(o,[fe("config",t)]);return Ys(a,s,o,r,i,u,c)}function Fe(n){var e=n;return{get:function(){return e},set:function(n){e=n}}}function Ie(n){return n.dom.focus()}function Ve(n){return n.dom.blur()}function Be(n){return void 0===n&&(n=Wa.fromDom(document)),Yc.from(n.dom.activeElement).map(Wa.fromDom)}function Ae(e){return Be(rs(e)).filter(function(n){return e.dom.contains(n.dom)})}function Ne(n){return n.dom.innerHTML}function He(n){if(fn(n))return"#shadow-root";var e=Wa.fromDom(n.dom.cloneNode(!1)),t=Wa.fromTag("div"),o=Wa.fromDom(e.dom.cloneNode(!0));return ns(t,o),Ne(t)}function Pe(e,n,t){var o,r,i,u;switch(bn(mf.get(),e).orThunk(function(){return C(ls(mf.get()),function(n){return-1<e.indexOf(n)?Yc.some(mf.get()[n]):Yc.none()})}).getOr(zs.NORMAL)){case zs.NORMAL:return t(pf());case zs.LOGGING:var c=(o=e,r=n,i=[],u=(new Date).getTime(),{logEventCut:function(n,e,t){i.push({outcome:"cut",target:e,purpose:t})},logEventStopped:function(n,e,t){i.push({outcome:"stopped",target:e,purpose:t})},logNoParent:function(n,e,t){i.push({outcome:"no-parent",target:e,purpose:t})},logEventNoHandlers:function(n,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(n,e,t){i.push({outcome:"response",purpose:t,target:e})},write:function(){var n=(new Date).getTime();b(["mousemove","mouseover","mouseout",Pa()],o)||console.log(o,{event:o,time:n-u,target:r.dom,sequence:Z(i,function(n){return b(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+He(n.target)+")":n.outcome})})}}),a=t(c);return c.write(),a;case zs.STOP:return!0}}function ze(n,e,t){return void 0!==(o=new Error).stack&&x(o.stack.split("\n"),function(e){return 0<e.indexOf("alloy")&&!d(gf,function(n){return-1<e.indexOf(n)})}).getOr(df),As(e,e,t,Qn(function(t){return bs.value(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.apply(void 0,n)})}));var o}function je(n){return ze(0,n,jn(Y))}function Le(n){return ze(0,n,jn(Yc.none))}function $e(n){return ze(0,n,Pn())}function Ge(n){return ze(0,n,Pn())}function Ue(n,e){return Ns(n,w(e))}function We(n){return Ns(n,K)}function Xe(n,e,t){var o=e.aria;o.update(n,o,t.get())}function qe(e,n,t){n.toggleClass.each(function(n){(t.get()?Mn:_n)(e.element,n)})}function Ye(n,e,t){pt(n,e,t,!t.get())}function Ke(n,e,t){t.set(!0),qe(n,e,t),Xe(n,e,t)}function Je(n,e,t){t.set(!1),qe(n,e,t),Xe(n,e,t)}function Qe(n,e,t){pt(n,e,t,e.selected)}function Ze(t,o){return Sf.config({channels:ge(af,{onReceive:function(n,e){e.command===t&&o(n,e.state)}})})}function nt(n){return Sf.config({channels:ge(sf,{onReceive:n})})}function et(n,e){return{key:n,value:{onReceive:e}}}function tt(){function n(n,e){e.stop(),A(n)}return[Se(Ea(),n),Se(Na(),n),Ce(ha()),Ce(ya())]}function ot(n,e){e.ignore||(Ie(n.element),e.onFocus(n))}function rt(n){return void 0!==n.style&&$c(n.style.getPropertyValue)}function it(n,e,t){if(!Nc(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);rt(n)&&n.style.setProperty(e,t)}function ut(n,e,t){it(n.dom,e,t)}function ct(n,e){var t=n.dom;pn(e,function(n,e){it(t,e,n)})}function at(n,e){var t=n.dom,o=window.getComputedStyle(t).getPropertyValue(e);return""!==o||us(n)?o:Rf(t,e)}function st(n,e){var t=n.dom,o=Rf(t,e);return Yc.from(o).filter(function(n){return 0<n.length})}function ft(n,e){var t,o=e;rt(t=n.dom)&&t.style.removeProperty(o),he(kn(n,"style").map(ea),"")&&Cn(n,"style")}function lt(n){return n.dom.offsetWidth}function dt(o,r){function n(n){var e=r(n);if(e<=0||null===e){var t=at(n,o);return parseFloat(t)||0}return e}function i(r,n){return g(n,function(n,e){var t=at(r,e),o=void 0===t?0:parseInt(t,10);return isNaN(o)?n:n+o},0)}return{set:function(n,e){if(!Gc(e)&&!e.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+e);var t=n.dom;rt(t)&&(t.style[o]=e+"px")},get:n,getOuter:n,aggregate:i,max:function(n,e,t){var o=i(n,t);return o<e?e-o:0}}}function mt(n){return Ff.get(n)}function gt(n,e){return z(e,n)}function pt(n,e,t,o){(o?Ke:Je)(n,e,t)}function ht(n,e,t){wn(n.element,"aria-expanded",t)}function vt(n,e,t,o,r){return n(t,o)?Yc.some(t):$c(r)&&r(t)?Yc.none():e(t,o,r)}function bt(n,e,t){for(var o=n.dom,r=$c(t)?t:Uc;o.parentNode;){o=o.parentNode;var i=Wa.fromDom(o);if(e(i))return Yc.some(i);if(r(i))break}return Yc.none()}function yt(n,e,t){return bt(n,function(n){return H(n,e)},t)}function xt(n,e){return j(e,n)}function wt(n,e,t){return vt(H,yt,n,e,t)}function St(n,e,t){var o=O(n.slice(0,e)),r=O(n.slice(e+1));return x(o.concat(r),t)}function Ot(n,e,t){return x(O(n.slice(0,e)),t)}function kt(n,e,t){var o=n.slice(0,e);return x(n.slice(e+1).concat(o),t)}function Tt(n,e,t){return x(n.slice(e+1),t)}function Ct(t){return function(n){var e=n.raw;return b(t,e.which)}}function Et(n){return function(e){return v(n,function(n){return n(e)})}}function Dt(n){return!0===n.raw.shiftKey}function Mt(n){return!0===n.raw.ctrlKey}function _t(n,e){return{matches:n,classification:e}}function Rt(n,e,t,o){var r=n+e;return o<r?t:r<t?o:r}function Ft(n,e,t){return Math.min(Math.max(n,e),t)}function It(t,o,n,r){D(gt(t.element,"."+o.highlightClass),function(e){d(r,function(n){return n.element===e})||(_n(e,o.highlightClass),t.getSystem().getByDom(e).each(function(n){o.onDehighlight(t,n),V(n,Ga())}))})}function Vt(n,e,t,o){It(n,e,0,[o]),Pt(0,e,0,o)||(Mn(o.element,e.highlightClass),e.onHighlight(n,o),V(o,$a()))}function Bt(t,e,n,o){var r=gt(t.element,"."+e.itemClass);return S(r,function(n){return Rn(n,e.highlightClass)}).bind(function(n){var e=Rt(n,o,0,r.length-1);return t.getSystem().getByDom(r[e]).toOptional()})}function At(n,e,t){e.exists(function(e){return t.exists(function(n){return L(n,e)})})||B(n,La(),{prevFocus:e,newFocus:t})}function Nt(){function o(n){return Ae(n.element)}return{get:o,set:function(n,e){var t=o(n);n.getSystem().triggerFocus(e,n.element),At(n,t,o(n))}}}function Ht(){function r(n){return Gf.getHighlighted(n).map(function(n){return n.element})}return{get:r,set:function(e,n){var t=r(e);e.getSystem().getByDom(n).fold(Y,function(n){Gf.highlight(e,n)});var o=r(e);At(e,t,o)}}}function Pt(n,e,t,o){return Rn(o.element,e.highlightClass)}function zt(e,n){return xt(e.element,"."+n.itemClass).bind(function(n){return e.getSystem().getByDom(n).toOptional()})}function jt(e,n){var t=gt(e.element,"."+n.itemClass);return(0<t.length?Yc.some(t[t.length-1]):Yc.none()).bind(function(n){return e.getSystem().getByDom(n).toOptional()})}function Lt(e,n){return ve(Z(gt(e.element,"."+n.itemClass),function(n){return e.getSystem().getByDom(n).toOptional()}))}function $t(n,e,t,o,c){function a(e,t,n,o,r){var i=n(e,t,o,r),u=t.event;return x(i,function(n){return n.matches(u)}).map(function(n){return n.classification}).bind(function(n){return n(e,t,o,r)})}var r={schema:function(){return n.concat([le("focusManager",Nt()),de("focusInside","onFocus",Qn(function(n){return b(["onFocus","onEnterOrSpace","onApi"],n)?bs.value(n):bs.error("Invalid value for focusInside")})),Ue("handler",r),Ue("state",e),Ue("sendFocusIn",c)])},processKey:a,toEvents:function(i,u){var n=i.focusInside!==bf.OnFocusMode?Yc.none():c(i).map(function(t){return Se(Ra(),function(n,e){t(n,i,u),e.stop()})}),e=[Se(Oa(),function(o,r){a(o,r,t,i,u).fold(function(){var e=o,t=r,n=Ct(Nf.concat(Bf))(t.event);i.focusInside===bf.OnEnterOrSpaceMode&&n&&ye(e,t)&&c(i).each(function(n){n(e,i,u),t.stop()})},function(){r.stop()})}),Se(ka(),function(n,e){a(n,e,o,i,u).each(function(){e.stop()})})];return $s(n.toArray().concat(e))}};return r}function Gt(n){function c(n,e){return 0<mt(n.visibilitySelector.bind(function(n){return wt(e,n)}).getOr(e))}function e(e,t){var o=t,n=y(gt(e.element,o.selector),function(n){return c(o,n)});Yc.from(n[o.firstTabstop]).each(function(n){t.focusManager.set(e,n)})}function o(t,n,r,i){var e,u=gt(t.element,r.selector);return(e=r).focusManager.get(t).bind(function(n){return wt(n,e.selector)}).bind(function(n){return S(u,J(L,n)).bind(function(n){return e=t,o=r,i(u,n,function(n){return c(e=o,t=n)&&e.useTabstopAt(t);var e,t}).fold(function(){return o.cyclic?Yc.some(!0):Yc.none()},function(n){return o.focusManager.set(e,n),Yc.some(!0)});var e,o})})}var t=[ce("onEscape"),ce("onEnter"),le("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),le("firstTabstop",0),le("useTabstopAt",Wc),ce("visibilitySelector")].concat([n]),r=w([_t(Et([Dt,Ct(Vf)]),function(n,e,t){return o(n,0,t,t.cyclic?St:Ot)}),_t(Ct(Vf),function(n,e,t){return o(n,0,t,t.cyclic?kt:Tt)}),_t(Ct(Af),function(e,t,n){return n.onEscape.bind(function(n){return n(e,t)})}),_t(Et([Lf,Ct(Bf)]),function(e,t,n){return n.onEnter.bind(function(n){return n(e,t)})})]),i=w([]);return $t(t,Ks.init,r,i,function(){return Yc.some(e)})}function Ut(n){return"input"===X(n)&&"radio"!==On(n,"type")||"textarea"===X(n)}function Wt(n,e,t){return Ut(t)&&Ct(Nf)(e.event)?Yc.none():(N(n,t,Ba()),Yc.some(!0))}function Xt(){return Yc.some(!0)}function qt(n,e,t){return t.execute(n,e,n.element)}function Yt(n){function e(){return t.get().each(n)}var t=Fe(Yc.none());return{clear:function(){e(),t.set(Yc.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(n){e(),t.set(Yc.some(n))}}}function Kt(){var e=Yt(function(n){return n.destroy()});return Ac(Ac({},e),{run:function(n){return e.get().each(n)}})}function Jt(){var e=Yt(Y);return Ac(Ac({},e),{on:function(n){return e.get().each(n)}})}function Qt(){var t=Jt();return Js({readState:function(){return t.get().map(function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(n,e){t.set({numRows:n,numColumns:e})},getNumRows:function(){return t.get().map(function(n){return n.numRows})},getNumColumns:function(){return t.get().map(function(n){return n.numColumns})}})}function Zt(e,t){return function(n){return"rtl"===il(n)?t:e}}function no(i){return function(n,e,t,o){var r=i(n.element);return ul(r,n,e,t,o)}}function eo(n,e){return no(Zt(n,e))}function to(n,e){return no(Zt(e,n))}function oo(r){return function(n,e,t,o){return ul(r,n,e,t,o)}}function ro(n){return!((e=n.dom).offsetWidth<=0&&e.offsetHeight<=0);var e}function io(n,e,t){var o,r=y(gt(n,t),ro);return S(o=r,function(n){return L(n,e)}).map(function(n){return{index:n,candidates:o}})}function uo(n,e){return S(n,function(n){return L(e,n)})}function co(t,n,o,e){return e(Math.floor(n/o),n%o).bind(function(n){var e=n.row*o+n.column;return 0<=e&&e<t.length?Yc.some(t[e]):Yc.none()})}function ao(r,n,i,u,c){return co(r,n,u,function(n,e){var t=n===i-1?r.length-n*u:u,o=Rt(e,c,0,t-1);return Yc.some({row:n,column:o})})}function so(r,n,i,u,c){return co(r,n,u,function(n,e){var t=Rt(n,c,0,i-1),o=Ft(e,0,(t===i-1?r.length-t*u:u)-1);return Yc.some({row:t,column:o})})}function fo(e,t){xt(e.element,t.selector).each(function(n){t.focusManager.set(e,n)})}function lo(r){return function(n,e,t,o){return io(n,e,t.selector).bind(function(n){return r(n.candidates,n.index,o.getNumRows().getOr(t.initSize.numRows),o.getNumColumns().getOr(t.initSize.numColumns))})}}function mo(n,e,t){return t.captureTab?Yc.some(!0):Yc.none()}function go(n,e,t,i){var u=function(n,e,t){var o,r=Rt(e,i,0,t.length-1);return r===n?Yc.none():"button"===X(o=t[r])&&"disabled"===On(o,"disabled")?u(n,r,t):Yc.from(t[r])};return io(n,t,e).bind(function(n){var e=n.index,t=n.candidates;return u(e,e,t)})}function po(e,t,o){return(r=o).focusManager.get(e).bind(function(n){return wt(n,r.selector)}).bind(function(n){return o.execute(e,t,n)});var r}function ho(e,t){t.getInitial(e).orThunk(function(){return xt(e.element,t.selector)}).each(function(n){t.focusManager.set(e,n)})}function vo(n,e,t){return go(n,t.selector,e,-1)}function bo(n,e,t){return go(n,t.selector,e,1)}function yo(r){return function(n,e,t,o){return r(n,e,t,o).bind(function(){return t.executeOnMove?po(n,e,t):Yc.some(!0)})}}function xo(n,e,t){return t.onEscape(n,e)}function wo(n,e,t){return Yc.from(n[e]).bind(function(n){return Yc.from(n[t]).map(function(n){return{rowIndex:e,columnIndex:t,cell:n}})})}function So(n,e,t,o){return wo(n,e,Rt(t,o,0,n[e].length-1))}function Oo(n,e,t,o){var r=Rt(t,o,0,n.length-1);return wo(n,r,Ft(e,0,n[r].length-1))}function ko(n,e,t,o){return wo(n,e,Ft(t+o,0,n[e].length-1))}function To(n,e,t,o){var r=Ft(t+o,0,n.length-1);return wo(n,r,Ft(e,0,n[r].length-1))}function Co(e,t){t.previousSelector(e).orThunk(function(){var n=t.selectors;return xt(e.element,n.cell)}).each(function(n){t.focusManager.set(e,n)})}function Eo(n,o){return function(e,t,i){var u=i.cycles?n:o;return wt(t,i.selectors.row).bind(function(n){return uo(gt(n,i.selectors.cell),t).bind(function(o){var r=gt(e,i.selectors.row);return uo(r,n).bind(function(n){var e,t=(e=i,Z(r,function(n){return gt(n,e.selectors.cell)}));return u(t,n,o).map(function(n){return n.cell})})})})}}function Do(e,t,o){return o.focusManager.get(e).bind(function(n){return o.execute(e,t,n)})}function Mo(e,t){xt(e.element,t.selector).each(function(n){t.focusManager.set(e,n)})}function _o(n,e,t){return go(n,t.selector,e,-1)}function Ro(n,e,t){return go(n,t.selector,e,1)}function Fo(o,n){return e=o,t={},r=Z(n,function(n){return e=n.name(),t="Cannot configure "+n.name()+" for "+o,As(e,e,Ln(),Wn(function(){return Ss("The field: "+e+" is forbidden. "+t)}));var e,t}).concat([Ns("dump",K)]),de(e,t,Fs(r));var e,t,r}function Io(n,e){return Ac(Ac({},Qs(e)),n.dump)}function Vo(n){return gs(n,"uiType")}function Bo(n){var e=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++ql+String(e)}function Ao(n){function e(n){return n.name}return n.fold(e,e,e,e)}function No(t,o){return function(n){var e=te("Converting part type",o,n);return t(e)}}function Ho(n,e,t,o){return Ds(e.defaults(n,t,o),t,{uid:n.partUids[e.name]},e.overrides(n,t,o))}function Po(n,e,t){return o=e,r={},i={},D(t,function(n){n.fold(function(o){r[o.pname]=Ul(!0,function(n,e,t){return o.factory.sketch(Ho(n,o,e,t))})},function(n){var e=o.parts[n.name];i[n.name]=w(n.factory.sketch(Ho(o,n,e[fd()]),e))},function(o){r[o.pname]=Ul(!1,function(n,e,t){return o.factory.sketch(Ho(n,o,e,t))})},function(o){r[o.pname]=Wl(!0,function(e,n,t){return Z(e[o.name],function(n){return o.factory.sketch(Ds(o.defaults(e,n,t),n,o.overrides(e,n)))})})})}),{internals:w(r),externals:w(i)};var o,r,i}function zo(n,e,t){return o=Yc.some(n),i=(r=e).components,s=hn(t,function(n,e){return o=n,r=!1,{name:w(t=e),required:function(){return o.fold(function(n){return n},function(n){return n})},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+t);return r=!0,o}};var t,o,r}),u=o,c=r,a=s,f=M(i,function(n){return Gl(u,c,n,a)}),pn(s,function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+o.getOr("none")+"\nComponents: "+JSON.stringify(r.components,null,2))}),f;var o,r,i,u,c,a,s,f}function jo(n,e,t){var o=e.partUids[t];return n.getSystem().getByUid(o).toOptional()}function Lo(n,e,t){return jo(n,e,t).getOrDie("Could not find part: "+t)}function $o(t){return As("partUids","partUids",$n(function(n){return e=n.uid,pe(Z(Z(t,Ao),function(n){return{key:n,value:e+"-"+n}}));var e}),Is())}function Go(n){return ge(dd,n)}function Uo(o){return n=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return o.apply(void 0,u([n.getApis(),n],e,!1))},t=(e=o.toString()).indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,t-1).split(/,\s*/),n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:qs(i.slice(1))}},n;var n,e,t,r,i}function Wo(n){var e=Ya(n)?n.dom[hd]:null;return Yc.from(e)}function Xo(n,e,t,o,r){var i;return te(n+" [SpecSchema]",Yn((i=r,(0<o.length?[ue("parts",o)]:[]).concat([re("uid"),le("dom",{}),le("components",[]),We("originalSpec"),le("debug.sketcher",{})]).concat(i)).concat(e)),t)}function qo(n,e,t,o,r){var i=yd(r),u=Xo(n,e,i,M(t,function(n){return n.fold(Yc.none,Yc.some,Yc.none,Yc.none).map(function(n){return ue(n.name,n.schema.concat([We(fd())]))}).toArray()}),[$o(t)]),c=Po(0,u,t);return o(u,zo(n,u,c.internals()),i,c.externals())}function Yo(n){var r=te("Sketcher for "+n.name,xd,n),e=hn(r.apis,Uo),t=hn(r.extraApis,Ee);return Ac(Ac({name:r.name,configFields:r.configFields,sketch:function(n){return e=r.name,t=r.configFields,(0,r.factory)(Xo(e,t,o=yd(n),[],[]),o);var e,t,o}},e),t)}function Ko(n){var r,e,i,t=te("Sketcher for "+n.name,wd,n),o=(r=t.name,e=t.partFields,i={},D(e,function(n){n.fold(Yc.some,Yc.none,Yc.some,Yc.some).each(function(t){var o=ld(r,t.pname);i[t.name]=function(n){var e=te("Part: "+t.name+" in "+r,Fs(t.schema),n);return Ac(Ac({},o),{config:n,validated:e})}})}),i),u=hn(t.apis,Uo),c=hn(t.extraApis,Ee);return Ac(Ac({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:function(n){return qo(t.name,t.configFields,t.partFields,t.factory,n)},parts:o},u),c)}function Jo(n){var r,e,t,o,i,u,c=(r={prefix:Cf},n.replace(/\$\{([^{}]*)\}/g,function(n,e){var t,o=r[e];return"string"==(t=typeof o)||"number"==t?o.toString():n}));return e=Wa.fromHtml(c),t=Za(e),o=g(void 0!==e.dom.attributes?e.dom.attributes:[],function(n,e){var t;return"class"===e.name?n:Ac(Ac({},n),((t={})[e.name]=e.value,t))},{}),i=Array.prototype.slice.call(e.dom.classList,0),u=0===t.length?{}:{innerHtml:Ne(e)},Ac({tag:X(e),classes:i,attributes:o},u)}function Qo(n){return{dom:Jo(n)}}function Zo(n){return Qs([Tf.config({toggleClass:Ef("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),Ze(n,function(n,e){(e?Tf.on:Tf.off)(n)})])}function nr(n,e,t,o){var r=Zo(t);return kd(e,o,r,n)}function er(n,e){var t=e.ui.registry.getAll().icons;return Yc.from(t[n]).fold(function(){return Jo('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+n+' ${prefix}-icon"></span>')},function(n){return Jo('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+n+"</span>")})}function tr(e){return ad({name:e+"-edge",overrides:function(n){return n.model.manager.edgeActions[e].fold(function(){return{}},function(o){return{events:$s([Oe(ha(),function(n,e,t){return o(n,t)},[n]),Oe(ya(),function(n,e,t){return o(n,t)},[n]),Oe(xa(),function(n,e,t){t.mouseIsDown.get()&&o(n,t)},[n])])}})}})}function or(n,e,t){e.store.manager.onLoad(n,e,t)}function rr(n,e,t){e.store.manager.onUnload(n,e,t)}function ir(){var n=Fe(null);return Js({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})}function ur(){var i=Fe({}),u=Fe({});return Js({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(n){return bn(i.get(),n).orThunk(function(){return bn(u.get(),n)})},update:function(n){var e=i.get(),t=u.get(),o={},r={};D(n,function(e){bn(o[e.value]=e,"meta").each(function(n){bn(n,"text"
).each(function(n){r[n]=e})})}),i.set(Ac(Ac({},e),o)),u.set(Ac(Ac({},t),r))},clear:function(){i.set({}),u.set({})}})}function cr(n,e,t,o){var r=e.store;t.update([o]),r.setValue(n,o),e.onSetValue(n,o)}function ar(n,e){return zd.set(n,e)}function sr(n){return zd.get(n)}function fr(n){var e=n.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?Yc.some(e).map(function(n){return Ld(n.clientX,n.clientY)}):Yc.none():void 0!==e.touches&&1===e.touches.length?Yc.some(e.touches[0]).map(function(n){return Ld(n.clientX,n.clientY)}):Yc.none()}function lr(n){return n.model.minX}function dr(n){return n.model.minY}function mr(n){return n.model.minX-1}function gr(n){return n.model.minY-1}function pr(n){return n.model.maxX}function hr(n){return n.model.maxY}function vr(n){return n.model.maxX+1}function br(n){return n.model.maxY+1}function yr(n,e,t){return e(n)-t(n)}function xr(n){return yr(n,pr,lr)}function wr(n){return yr(n,hr,dr)}function Sr(n){return xr(n)/2}function Or(n){return wr(n)/2}function kr(n){return n.stepSize}function Tr(n){return n.snapToGrid}function Cr(n){return n.snapStart}function Er(n){return n.rounded}function Dr(n,e){return void 0!==n[e+"-edge"]}function Mr(n){return Dr(n,"left")}function _r(n){return Dr(n,"right")}function Rr(n){return Dr(n,"top")}function Fr(n){return Dr(n,"bottom")}function Ir(n){return n.model.value.get()}function Vr(n,e){return{x:n,y:e}}function Br(n,e){B(n,$d(),{value:e})}function Ar(n,e,t,o){return n<e?n:t<n?t:n===e?e-1:Math.max(e,n-o)}function Nr(n,e,t,o){return t<n?n:n<e?e:n===t?t+1:Math.min(t,n+o)}function Hr(n,e,t){return Math.max(e,Math.min(t,n))}function Pr(n){var e=n.min,t=n.max,o=n.range,r=n.value,i=n.step,u=n.snap,c=n.snapStart,a=n.rounded,s=n.hasMinEdge,f=n.hasMaxEdge,l=n.minBound,d=n.maxBound,m=n.screenRange,g=s?e-1:e,p=f?t+1:t;if(r<l)return g;if(d<r)return p;var h,v,b,y,x,w=Hr((x=l,(Math.min(d,Math.max(r,x))-x)/m*o+e),g,p);return u&&e<=w&&w<=t?(h=w,v=e,b=t,y=i,c.fold(function(){var n=Math.round((h-v)/y)*y;return Hr(v+n,v-1,b+1)},function(n){var e=Math.round((h-n)%y/y),t=Math.floor((h-n)/y),o=Math.floor((b-n)/y),r=Math.min(o,t+e);return Math.max(n,n+r*y)})):a?Math.round(w):w}function zr(n){var e=n.min,t=n.max,o=n.range,r=n.value,i=n.hasMinEdge,u=n.hasMaxEdge,c=n.maxBound,a=n.maxOffset,s=n.centerMinEdge,f=n.centerMaxEdge;return r<e?i?0:s:t<r?u?c:f:(r-e)/o*a}function jr(n){return n.element.dom.getBoundingClientRect()}function Lr(n){return jr(n)[Gd]}function $r(n){return jr(n).right}function Gr(n){return jr(n).top}function Ur(n){return jr(n).bottom}function Wr(n){return jr(n).width}function Xr(n){return jr(n).height}function qr(n,e){var t=jr(n),o=jr(e);return(t[Gd]+t.right)/2-o[Gd]}function Yr(n,e){var t=jr(n),o=jr(e);return(t.top+t.bottom)/2-o.top}function Kr(n,e){B(n,$d(),{value:e})}function Jr(n,e,t){return Pr({min:lr(e),max:pr(e),range:xr(e),value:t,step:kr(e),snap:Tr(e),snapStart:Cr(e),rounded:Er(e),hasMinEdge:Mr(e),hasMaxEdge:_r(e),minBound:Lr(n),maxBound:$r(n),screenRange:Wr(n)})}function Qr(r){return function(n,e){return Kr(n,{x:o=(0<r?Nr:Ar)(Ir(t=e).x,lr(t),pr(t),kr(t))}),Yc.some(o).map(Wc);var t,o}}function Zr(n,e,t,o,r,i){var u,c,a,s,f,l,d,m,g=(c=i,a=t,s=o,f=r,l=Wr(u=e),d=s.bind(function(n){return Yc.some(qr(n,u))}).getOr(0),m=f.bind(function(n){return Yc.some(qr(n,u))}).getOr(l),zr({min:lr(c),max:pr(c),range:xr(c),value:a,hasMinEdge:Mr(c),hasMaxEdge:_r(c),minBound:Lr(u),minOffset:0,maxBound:$r(u),maxOffset:l,centerMinEdge:d,centerMaxEdge:m}));return Lr(e)-Lr(n)+g}function ni(n,e){B(n,$d(),{value:e})}function ei(n,e,t){return Pr({min:dr(e),max:hr(e),range:wr(e),value:t,step:kr(e),snap:Tr(e),snapStart:Cr(e),rounded:Er(e),hasMinEdge:Rr(e),hasMaxEdge:Fr(e),minBound:Gr(n),maxBound:Ur(n),screenRange:Xr(n)})}function ti(r){return function(n,e){return ni(n,{y:o=(0<r?Nr:Ar)(Ir(t=e).y,dr(t),hr(t),kr(t))}),Yc.some(o).map(Wc);var t,o}}function oi(n,e,t,o,r,i){var u,c,a,s,f,l,d,m,g=(c=i,a=t,s=o,f=r,l=Xr(u=e),d=s.bind(function(n){return Yc.some(Yr(n,u))}).getOr(0),m=f.bind(function(n){return Yc.some(Yr(n,u))}).getOr(l),zr({min:dr(c),max:hr(c),range:wr(c),value:a,hasMinEdge:Rr(c),hasMaxEdge:Fr(c),minBound:Gr(u),minOffset:0,maxBound:Ur(u),maxOffset:l,centerMinEdge:d,centerMaxEdge:m}));return Gr(e)-Gr(n)+g}function ri(n,e){B(n,$d(),{value:e})}function ii(n,e){return{x:n,y:e}}function ui(u,c){return function(n,e){return o=e,r=0<u?Nr:Ar,ri(n,ii(i=(t=c)?Ir(o).x:r(Ir(o).x,lr(o),pr(o),kr(o)),t?r(Ir(o).y,dr(o),hr(o),kr(o)):Ir(o).y)),Yc.some(i).map(Wc);var t,o,r,i}}function ci(e,t,o,n){return kd(t,function(){var n=o();e.setContextToolbar([{label:t+" group",items:n}])},{},n)}function ai(n,o){var e={onChange:function(n,e,t){o.undoManager.transact(function(){o.formatter.apply("forecolor",{value:t}),o.nodeChanged()})},getInitialValue:w(-1)};return ci(n,"color-levels",function(){function i(n){return n<0?"black":360<n?"white":"hsl("+n+", 100%, 50%)"}return[(r=e,dm.sketch({dom:Jo('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[dm.parts["left-edge"](Qo('<div class="${prefix}-hue-slider-black"></div>')),dm.parts.spectrum({dom:Jo('<div class="${prefix}-slider-gradient-container"></div>'),components:[Qo('<div class="${prefix}-slider-gradient"></div>')],behaviours:Qs([Tf.config({toggleClass:Ef("thumb-active")})])}),dm.parts["right-edge"](Qo('<div class="${prefix}-hue-slider-white"></div>')),dm.parts.thumb({dom:Jo('<div class="${prefix}-slider-thumb"></div>'),behaviours:Qs([Tf.config({toggleClass:Ef("thumb-active")})])})],onChange:function(n,e,t){var o=i(t.x());ut(e.element,"background-color",o),r.onChange(n,e,o)},onDragStart:function(n,e){Tf.on(e)},onDragEnd:function(n,e){Tf.off(e)},onInit:function(n,e,t,o){var r=i(o.x());ut(e.element,"background-color",r)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:r.getInitialValue()}}},sliderBehaviours:Qs([nt(dm.refresh)])}))];var r},o)}function si(n){var e,t,o=n.selection.getStart(),r=Wa.fromDom(o),i=Wa.fromDom(n.getBody()),u=(e=function(n){return L(i,n)},(Ya(t=r)?Yc.some(t):tn(t).filter(Ya)).map(function(n){return vt(function(n,e){return e(n)},bt,n,function(n){return st(n,"font-size").isSome()},e).bind(function(n){return st(n,"font-size")}).getOrThunk(function(){return at(n,"font-size")})}).getOr(""));return x(mm,function(n){return u===n}).getOr("medium")}function fi(n){return[Qo('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),(e={onChange:n.onChange,sizes:hm,category:"font",getInitialValue:n.getInitialValue},r=te("SizeSlider",pm,e),dm.sketch({dom:{tag:"div",classes:[Ef("slider-"+r.category+"-size-container"),Ef("slider"),Ef("slider-size-container")]},onChange:function(n,e,t){var o=t.x();0<=o&&o<r.sizes.length&&r.onChange(o)},onDragStart:function(n,e){Tf.on(e)},onDragEnd:function(n,e){Tf.off(e)},model:{mode:"x",minX:0,maxX:r.sizes.length-1,getInitialValue:function(){return{x:r.getInitialValue()}}},stepSize:1,snapToGrid:!0,sliderBehaviours:Qs([nt(dm.refresh)]),components:[dm.parts.spectrum({dom:Jo('<div class="${prefix}-slider-size-container"></div>'),components:[Qo('<div class="${prefix}-slider-size-line"></div>')]}),dm.parts.thumb({dom:Jo('<div class="${prefix}-slider-thumb"></div>'),behaviours:Qs([Tf.config({toggleClass:Ef("thumb-active")})])})]})),Qo('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')];var e,r}function li(n){var e=void 0!==n.uid&&yn(n,"uid")?n.uid:bd("memento");return{get:function(n){return n.getSystem().getByUid(e).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(e).toOptional()},asSpec:function(){return Ac(Ac({},n),{uid:e})}}}function di(u){var e=li({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:$s([Ce(Ea()),Se(Ca(),function(n,e){var t=e.event.raw,o=t.target.files||t.dataTransfer.files;Yc.from(o[0]).each(function(n){var r,t,i=u;t=r=n,new xm(function(n){var e=new FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(t)}).then(function(n){return n.split(",")[1]}).then(function(o){i.undoManager.transact(function(){var n=i.editorUpload.blobCache,e=n.create(Bo("mceu"),r,o);n.add(e);var t=i.dom.createHTML("img",{src:e.blobUri()});i.insertContent(t)})})})})])});return Sd.sketch({dom:er("image",u),components:[e.asSpec()],action:function(n){e.get(n).element.dom.click()}})}function mi(n){return n.dom.textContent}function gi(n){return 0<n.length}function pi(n){return null==n?"":n}function hi(t,u){u.url.toOptional().filter(gi).fold(function(){var n=t;u.link.bind(K).each(function(){n.execCommand("unlink")})},function(r){var n,e,i=(n=u,(e={}).href=r,n.title.toOptional().filter(gi).each(function(n){e.title=n}),n.target.toOptional().filter(gi).each(function(n){e.target=n}),e);u.link.bind(K).fold(function(){var n=u.text.toOptional().filter(gi).getOr(r);t.insertContent(t.dom.createHTML("a",i,t.dom.encode(n)))},function(e){var t,o,n=(t=e,o=r,u.text.toOptional().filter(gi).fold(function(){return On(n=t,"href")===mi(n)?Yc.some(o):Yc.none();var n},Yc.some));Sn(e,i),n.each(function(n){e.dom.textContent=n})})})}function vi(n,e){var t,o;return{key:n,value:{config:{},me:(t=n,o=$s(e),Re({fields:[re("enabled")],name:t,active:{events:w(o)}})),configAsRaw:w({}),initialConfig:{},state:Ks}}}function bi(n){return n.dom.value}function yi(n,e){if(void 0===e)throw new Error("Value.set was undefined");n.dom.value=e}function xi(n,e){var t=li(Em.sketch({inputAttributes:{placeholder:_m.translate(e)},onSetValue:function(n){V(n,Ta())},inputBehaviours:Qs([km.config({find:Yc.some}),Mm.config({}),Pl.config({mode:"execution"})]),selectOnFocus:!1})),o=li(Sd.sketch({dom:Jo('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var e=t.get(n);Pd.setValue(e,"")}}));return{name:n,spec:Tm.sketch({dom:Jo('<div class="${prefix}-input-container"></div>'),components:[t.asSpec(),o.asSpec()],containerBehaviours:Qs([Tf.config({toggleClass:Ef("input-container-empty")}),km.config({find:function(n){return Yc.some(t.get(n))}}),vi("input-clearing",[Se(Ta(),function(n){var e=t.get(n);(0<Pd.getValue(e).length?Tf.off:Tf.on)(n)})])])})}}function wi(n,e){(e.disabled()?Fm:Im)(n,e)}function Si(n,e){return!0===e.useNative&&b(Rm,X(n.element))}function Oi(n,e){return Si(n,e)?Tn(n.element,"disabled"):"true"===On(n.element,"aria-disabled")}function ki(n){return"<alloy.field."+n+">"}function Ti(o,r){return nr(r,"link","link",function(){var n,e,t=Pm(o,r);o.setContextToolbar(t),n=r,e=function(){o.focusToolbar()},(Sm.os.isAndroid()?function(n,e){var t=e.selection.getRng();n(),e.selection.setRng(t)}:a)(e,n),wm(r).each(function(n){r.selection.select(n.dom)})})}function Ci(e){function t(n){return"The component must be in a context to execute: "+n+(e?"\n"+He(e().element)+" is not in context.":"")}function n(n){return function(){throw new Error(t(n))}}function o(n){return function(){console.warn(t(n))}}return{debugInfo:w("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:Uc}}function Ei(n,r){var i={};return pn(n,function(n,o){pn(n,function(n,e){var t=bn(i,e).getOr([]);i[e]=t.concat([r(o,n)])})}),i}function Di(n){return n.cHandler}function Mi(n,e){return{name:n,handler:e}}function _i(n,e,t){var o=e[t];return o?function(u,c,n,a){try{var e=(t=function(n,e){var t=n[c],o=e[c],r=a.indexOf(t),i=a.indexOf(o);if(-1===r)throw new Error("The ordering for "+u+" does not have an entry for "+t+".\nOrder specified: "+JSON.stringify(a,null,2));if(-1===i)throw new Error("The ordering for "+u+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(a,null,2));return r<i?-1:i<r?1:0},(o=Kc.call(n,0)).sort(t),o);return bs.value(e)}catch(n){return bs.error([n])}var t,o}("Event: "+t,"name",n,o).map(function(n){var t,e,o,r,i=Z(n,function(n){return n.handler});return{can:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return g(e,function(n,e){return n&&e.can.apply(void 0,t)},!0)},abort:(o=e=t=i,r=function(n){return n.abort},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return g(o,function(n,e){return n||r(e).apply(void 0,t)},!1)}),run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];D(t,function(n){n.run.apply(void 0,e)})}}}):bs.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Z(n,function(n){return n.name}),null,2)])}function Ri(e,n){D(n,function(n){Mn(e,n)})}function Fi(e,n){D(n,function(n){_n(e,n)})}function Ii(n){var t,e,o,r,i=(t=bn(n,"behaviours").getOr({}),M(ls(t),function(n){var e=t[n];return l(e)?[e.me]:[]}));return e=n,r=Z(o=i,function(n){return se(n.name(),[re("config"),le("state",Ks)])}),{list:o,data:hn(ne("component.behaviours",Fs(r),e.behaviours).fold(function(n){throw new Error(Bs(n)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},K),function(n){return w(n.map(function(n){return{config:n.config,state:n.state.init(n.config)}}))})}}function Vi(n,e,t){var o,r,i=Ac(Ac({},(o=n).dom),{uid:o.uid,domChildren:Z(o.components,function(n){return n.element})}),c=n.domModification.fold(function(){return De({})},De),u=0<e.length?function(e,n,t,o){function r(n){return m(n,function(n,e){return Ac(Ac({},e.modification),n)},{})}var i=Ac({},{"alloy.base.modification":c});D(t,function(n){i[n.name()]=n.exhibit(e,o)});var u=Ei(i,function(n,e){return{name:n,modification:e}});return De({classes:m(u.classes,function(n,e){return e.modification.concat(n)},[]),attributes:r(u.attributes),styles:r(u.styles)})}(t,0,e,i):c;return Ac(Ac({},r=i),{attributes:Ac(Ac({},r.attributes),u.attributes),styles:Ac(Ac({},r.styles),u.styles),classes:r.classes.concat(u.classes)})}function Bi(n,e,t){var o,r,i,u,c,a={"alloy.base.behaviour":n.events},s=n.eventOrder;return r=t,i=e,o=Ei(Ac(Ac({},a),(u=r,c={},D(i,function(n){c[n.name()]=n.handlers(u)}),c)),Mi),Gm(o,s).getOrDie()}function Ai(t){function n(){return f}var e=Fe($m),o=ee(ne("custom.definition",Wm,t)),r=Ii(t),i=r.list,u=r.data,c=function(n){var c=Wa.fromTag(n.tag);Sn(c,n.attributes),Ri(c,n.classes),ct(c,n.styles),n.innerHtml.each(function(n){return t=n,i=nn(e=c).dom,an(u=Wa.fromDom(i.createDocumentFragment()),(o=t,(r=(i||document).createElement("div")).innerHTML=o,Za(Wa.fromDom(r)))),sn(e),void ns(e,u);var e,t,o,r,i,u});var e=n.domChildren;return an(c,e),n.value.each(function(n){yi(c,n)}),n.uid,vd(c,n.uid),c}(Vi(o,i,u)),a=Bi(o,i,u),s=Fe(o.components),f={uid:t.uid,getSystem:e.get,config:function(n){var e=u;return($c(e[n.name()])?e[n.name()]:function(){throw new Error("Could not find "+n.name()+" in "+JSON.stringify(t,null,2))})()},hasConfigured:function(n){return $c(u[n.name()])},spec:t,readState:function(n){return u[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},getApis:function(){return o.apis},connect:function(n){e.set(n)},disconnect:function(){e.set(Ci(n))},element:c,syncComponents:function(){var n=M(Za(c),function(n){return e.get().getByDom(n).fold(function(){return[]},T)});s.set(n)},components:s.get,events:a};return f}function Ni(n){return function(n){var e=te("external.component",Yn([re("element"),ce("uid")]),n),t=Fe(Ci()),o=e.uid.getOrThunk(function(){return bd("external")});vd(e.element,o);var r={uid:o,getSystem:t.get,config:Yc.none,hasConfigured:Uc,connect:function(n){t.set(n)},disconnect:function(){t.set(Ci(function(){return r}))},getApis:function(){return{}},element:e.element,spec:n,readState:w("No state"),syncComponents:Y,components:w([]),events:{}};return Go(r)}({element:Wa.fromText(n)})}function Hi(n){(Ae(n.element).isNone()||_f.isFocused(n))&&(_f.isFocused(n)||_f.focus(n),B(n,Km,{item:n}))}function Pi(n){B(n,Jm,{item:n})}function zi(n,e,t,o){var r=n.getSystem().build(o);fs(n,r,t)}function ji(n,e,t,o){x(sg(n),function(n){return L(o.element,n.element)}).each(gn)}function Li(e,n,t,r,o){var i=sg(e);return Yc.from(i[r]).map(function(n){return ji(e,0,0,n),o.each(function(n){zi(e,0,function(n,e){var t,o=e;on(t=n,r).fold(function(){ns(t,o)},function(n){rn(n,o)})},n)}),n})}function $i(n,e,t,o){return bn(e.routes,o.start).bind(function(n){return bn(n,o.destination)})}function Gi(t,o,n){var e,r,i=n;vg(e=t,r=o).bind(function(n){return hg(e,r,i,n)}).each(function(n){var e=n.transition;_n(t.element,e.transitionClass),Cn(t.element,o.destinationAttr)})}function Ui(n,e,t,o){Gi(n,e,t),Tn(n.element,e.stateAttr)&&On(n.element,e.stateAttr)!==o&&e.onFinish(n,o),wn(n.element,e.stateAttr,o)}function Wi(n){Mn(n,wg)}function Xi(n){_n(n,wg)}function qi(n){return bn(n,"format").getOr(n.title)}function Yi(n){return yn(n,"items")?(r=Ds((t=["items"],o={},pn(e=n,function(n,e){b(t,e)||(o[e]=n)}),o),{menu:!0}),i=Tg(e.items),{item:r,menus:Ds(i.menus,ge(e.title,i.items)),expansions:Ds(i.expansions,ge(e.title,e.title))}):{item:n,menus:{},expansions:{}};var t,o,e,r,i}function Ki(t,n,o){var e,r,i,u,c,a,s,f,l,d,m,g=(e=t,i=(r=function(n){return M(n,function(n){return void 0===n.items?!yn(n,"format")||e.formatter.canApply(n.format)?[n]:[]:0<r(n.items).length?[n]:[]})})(n),Tg(i));return c=(u={formats:g,handle:function(n,e){t.undoManager.transact(function(){Tf.isOn(n)?t.formatter.remove(e):t.formatter.apply(e)}),o()}}).formats,a=function(){return m},s=kg("Styles",[].concat(Z(c.items,function(n){return Og(qi(n),n.title,n.isSelected(),n.getPreview(),yn(c.expansions,qi(n)))})),a,!1),f=hn(c.menus,function(n,e){var t=Z(n,function(n){return Og(qi(n),n.title,void 0!==n.isSelected&&n.isSelected(),void 0!==n.getPreview?n.getPreview():"",yn(c.expansions,qi(n)))});return kg(e,t,a,!0)}),l=Ds(f,ge("styles",s)),d={tmenu:pg.tieredData("styles",l,c.expansions)},(m=li(pg.sketch({dom:{tag:"div",classes:[Ef("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(n,e){var t=Pd.getValue(e);return u.handle(e,t.value),Yc.none()},onEscape:function(){return Yc.none()},onOpenMenu:function(n,e){var t=sr(n.element);ar(e.element,t),xg.jumpTo(e,"current")},onOpenSubmenu:function(n,e,t){var o=sr(n.element),r=yt(e.element,'[role="menu"]').getOrDie("hacky"),i=n.getSystem().getByDom(r).getOrDie();ar(t.element,o),xg.progressTo(i,"before"),xg.jumpTo(t,"after"),xg.progressTo(t,"current")},onCollapseMenu:function(n,e,t){var o=yt(e.element,'[role="menu"]').getOrDie("hacky"),r=n.getSystem().getByDom(o).getOrDie();xg.progressTo(r,"after"),xg.progressTo(t,"current")},navigateOnHover:!1,highlightImmediately:!0,data:d.tmenu,markers:{backgroundMenu:Ef("styles-background-menu"),menu:Ef("styles-menu"),selectedMenu:Ef("styles-selected-menu"),item:Ef("styles-item"),selectedItem:Ef("styles-selected-item")}}))).asSpec()}function Ji(n){var e=n.replace(/\|/g," ").trim();return 0<e.length?e.split(/\s+/):[]}function Qi(e,r){function n(t){return function(){return kd(e=t,function(){n.execCommand(e)},{},n=r);var n,e}}function t(o){return function(){return n=r,t=Zo(e=o),kd(e,function(){n.execCommand(e)},t,n);var n,e,t}}function o(n,e,t){return function(){return nr(r,n,e,t)}}function i(){return Ki(r,x,function(){r.fire("scrollIntoView")})}function u(n,e){return{isSupported:function(){var e=r.ui.registry.getAll().buttons;return n.forall(function(n){return yn(e,n)})},sketch:e}}function c(n){return function(){return s.formatter.match(n)}}function a(n){return function(){return s.formatter.getCssText(n)}}var s,f,l=n("undo"),d=n("redo"),m=t("bold"),g=t("italic"),p=t("underline"),h=n("removeformat"),v=o("unlink","link",function(){r.execCommand("unlink",null,!1)}),b=o("unordered-list","ul",function(){r.execCommand("InsertUnorderedList",null,!1)}),y=o("ordered-list","ol",function(){r.execCommand("InsertOrderedList",null,!1)}),x=(f=function(n){return Z(n,function(n){if(yn(n,"items")){var e=f(n.items);return Ds(Ds(n,{isSelected:Uc,getPreview:w("")}),{items:e})}return yn(n,"format")?Ds(n,{isSelected:c(n.format),getPreview:a(n.format)}):(o=Bo((t=n).title),r=Ds(t,{format:o,isSelected:c(o),getPreview:a(o)}),s.formatter.register(o,r),r);var t,o,r})})((s=r).getParam("style_formats",uf,"array"));return{undo:u(Yc.none(),l),redo:u(Yc.none(),d),bold:u(Yc.none(),m),italic:u(Yc.none(),g),underline:u(Yc.none(),p),removeformat:u(Yc.none(),h),link:u(Yc.none(),function(){return Ti(e,r)}),unlink:u(Yc.none(),v),image:u(Yc.none(),function(){return di(r)}),bullist:u(Yc.some("bullist"),b),numlist:u(Yc.some("numlist"),y),fontsizeselect:u(Yc.none(),function(){return n={onChange:function(n){var o;o=t,Yc.from(mm[n]).each(function(n){var e,t=n;si(e=o)!==t&&e.execCommand("fontSize",!1,t)})},getInitialValue:function(){return e=si(t),S(mm,function(n){return n===e}).getOr(2);var e}},ci(e,"font-size",function(){return fi(n)},t=r);var t,n}),forecolor:u(Yc.none(),function(){return ai(e,r)}),styleselect:u(Yc.none(),function(){return kd("style-formats",function(n){r.fire("toReading"),e.dropup.appear(i,Tf.on,n)},Qs([Tf.config({toggleClass:Ef("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),Sf.config({channels:pe([et(sf,Tf.off),et(ff,Tf.off)])})]),r)})}}function Zi(n){function e(){return n.stopPropagation()}function t(){return n.preventDefault()}var o=i(t,e);return{target:Wa.fromDom(function(n){if(os()&&l(n.target)){var e=Wa.fromDom(n.target);if(Ya(e)&&is(e)&&n.composed&&n.composedPath){var t=n.composedPath();if(t)return 0<(o=t).length?Yc.some(o[0]):Yc.none()}}var o;return Yc.from(n.target)}(n).getOr(n.target)),x:n.clientX,y:n.clientY,stop:e,prevent:t,kill:o,raw:n}}function nu(n,e,t,o,r){var i,u,c=(i=t,u=o,function(n){i(n)&&u(Zi(n))});return n.dom.addEventListener(e,c,r),{unbind:J(Eg,n,e,c,r)}}function eu(n,e,t){return nu(n,e,Dg,t,!1)}function tu(n,e,t){return nu(n,e,Dg,t,!0)}function ou(n){return{isPortrait:w(n.matchMedia("(orientation: portrait)").matches)}}function ru(o,e){var n=Wa.fromDom(o),r=null,t=eu(n,"orientationchange",function(){Mg.clearInterval(r);var n=ou(o);e.onChange(n),i(function(){e.onReady(n)})}),i=function(n){Mg.clearInterval(r);var e=o.innerHeight,t=0;r=Mg.setInterval(function(){e!==o.innerHeight?(Mg.clearInterval(r),n(Yc.some(o.innerHeight))):20<t&&(Mg.clearInterval(r),n(Yc.none())),t++},50)};return{onAdjustment:i,destroy:function(){t.unbind()}}}function iu(n,e,t){var o,r=n.document.createRange(),i=r;return e.fold(function(n){i.setStartBefore(n.dom)},function(n,e){i.setStart(n.dom,e)},function(n){i.setStartAfter(n.dom)}),o=r,t.fold(function(n){o.setEndBefore(n.dom)},function(n,e){o.setEnd(n.dom,e)},function(n){o.setEndAfter(n.dom)}),r}function uu(n,e,t,o,r){var i=n.document.createRange();return i.setStart(e.dom,t),i.setEnd(o.dom,r),i}function cu(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function au(n,e,t){return e(Wa.fromDom(t.startContainer),t.startOffset,Wa.fromDom(t.endContainer),t.endOffset)}function su(n,e){var r,t,o,i=(r=n,e.match({domRange:function(n){return{ltr:w(n),rtl:Yc.none}},relative:function(n,e){return{ltr:f(function(){return iu(r,n,e)}),rtl:f(function(){return Yc.some(iu(r,e,n))})}},exact:function(n,e,t,o){return{ltr:f(function(){return uu(r,n,e,t,o)}),rtl:f(function(){return Yc.some(uu(r,t,o,n,e))})}}}));return(o=(t=i).ltr()).collapsed?t.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return _g.rtl(Wa.fromDom(n.endContainer),n.endOffset,Wa.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return au(0,_g.ltr,o)}):au(0,_g.ltr,o)}function fu(o,n){return{uid:o.uid,dom:o.dom,components:n,behaviours:Io(o.formBehaviours,[Pd.config({store:{mode:"manual",getValue:function(n){var e,t;return hn((e=o,t=n.getSystem(),hn(e.partUids,function(n){return w(t.getByUid(n))})),function(n,o){return n().bind(function(n){var e=km.getCurrent(n),t=new Error("Cannot find a current component to extract the value from for form part '"+o+"': "+He(n.element));return e.fold(function(){return bs.error(t)},bs.value)}).map(Pd.getValue)})},setValue:function(t,n){pn(n,function(e,n){jo(t,o,n).each(function(n){km.getCurrent(n).each(function(n){Pd.setValue(n,e)})})})}}})]),apis:{getField:function(n,e){return jo(n,o,e).bind(km.getCurrent)}}}}function lu(n){return"prepared"===n.type?Yc.some(n.menu):Yc.none()}function du(n,e){var t=X(n);return"input"===t?Hg.after(n):b(["br","img"],t)?0===e?Hg.before(n):Hg.after(n):Hg.on(n,e)}function mu(n){return Yc.from(n.getSelection())}function gu(n,e,t,o,r){var i=uu(n,e,t,o,r);mu(n).each(function(n){n.removeAllRanges(),n.addRange(i)})}function pu(n,e,t,o,r){var i,u,c,a,s,f=(i=o,u=r,c=du(e,t),a=du(i,u),zg.relative(c,a));su(s=n,f).match({ltr:function(n,e,t,o){gu(s,n,e,t,o)},rtl:function(r,i,u,c){mu(s).each(function(n){if(n.setBaseAndExtent)n.setBaseAndExtent(r.dom,i,u.dom,c);else if(n.extend)try{t=u,o=c,(e=n).collapse(r.dom,i),e.extend(t.dom,o)}catch(n){gu(s,u,c,r,i)}else gu(s,u,c,r,i);var e,t,o})}})}function hu(n){if(0<n.rangeCount){var e=n.getRangeAt(0),t=n.getRangeAt(n.rangeCount-1);return Yc.some(Bg(Wa.fromDom(e.startContainer),e.startOffset,Wa.fromDom(t.endContainer),t.endOffset))}return Yc.none()}function vu(n){if(null===n.anchorNode||null===n.focusNode)return hu(n);var e,t,o,r,i,u,c,a,s,f,l,d=Wa.fromDom(n.anchorNode),m=Wa.fromDom(n.focusNode);return e=d,u=t=n.anchorOffset,c=o=m,a=r=n.focusOffset,(s=nn(i=e).dom.createRange()).setStart(i.dom,u),s.setEnd(c.dom,a),f=s,l=L(e,o)&&t===r,f.collapsed&&!l?Yc.some(Bg(d,n.anchorOffset,m,n.focusOffset)):hu(n)}function bu(n){return mu(n).filter(function(n){return 0<n.rangeCount}).bind(vu)}function yu(n,e){var i,t,o,r=(t=su(i=n,e).match({ltr:function(n,e,t,o){var r=i.document.createRange();return r.setStart(n.dom,e),r.setEnd(t.dom,o),r},rtl:function(n,e,t,o){var r=i.document.createRange();return r.setStart(t.dom,o),r.setEnd(n.dom,e),r}})).getClientRects();return 0<(o=0<r.length?r[0]:t.getBoundingClientRect()).width||0<o.height?Yc.some(o).map(cu):Yc.none()}function xu(n){return Yc.from(n.dom.contentWindow)}function wu(n){return xu(n).bind(bu)}function Su(n){return n.getFrame()}function Ou(n,e,t,o){return n[t].getOrThunk(function(){return function(n){return eu(e,o,n)}})}function ku(c){var a=Su(c);return Yc.some(Wa.fromDom(a.dom.contentWindow.document.body)).bind(function(u){return Yc.some(Wa.fromDom(a.dom.contentWindow.document)).bind(function(i){return xu(a).map(function(r){var n=Wa.fromDom(i.dom.documentElement),e=c.getCursorBox.getOrThunk(function(){return function(){return bu(r).map(function(n){return zg.exact(n.start,n.soffset,n.finish,n.foffset)}).bind(function(n){return yu(r,n).orThunk(function(){return bu(r).filter(function(n){return L(n.start,n.finish)&&n.soffset===n.foffset}).bind(function(n){var e=n.start.dom.getBoundingClientRect();return 0<e.width||0<e.height?Yc.some(e):Yc.none()})})})}}),t=c.setSelection.getOrThunk(function(){return function(n,e,t,o){pu(r,n,e,t,o)}}),o=c.clearSelection.getOrThunk(function(){return function(){mu(r).each(function(n){return n.removeAllRanges()})}});return{body:u,doc:i,win:r,html:n,getSelection:J(wu,a),setSelection:t,clearSelection:o,frame:a,onKeyup:Ou(c,i,"onKeyup","keyup"),onNodeChanged:Ou(c,i,"onNodeChanged","SelectionChange"),onDomChanged:c.onDomChanged,onScrollToCursor:c.onScrollToCursor,onScrollToElement:c.onScrollToElement,onToReading:c.onToReading,onToEditing:c.onToEditing,onToolbarScrollStart:c.onToolbarScrollStart,onTouchContent:c.onTouchContent,onTapContent:c.onTapContent,onTouchToolstrip:c.onTouchToolstrip,getCursorBox:e}})})})}function Tu(){var e=j("head").getOrDie(),n=j('meta[name="viewport"]').getOrThunk(function(){var n=Wa.fromTag("meta");return wn(n,"name","viewport"),ns(e,n),n}),t=On(n,"content");return{maximize:function(){wn(n,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=t&&0<t.length?wn(n,"content",t):wn(n,"content","user-scalable=yes")}}}function Cu(n,e){function t(o){return function(n){var e=On(n,"style"),t=void 0===e?"no-styles":e.trim();t===o||(wn(n,Lg,t),wn(n,"style",o))}}var o,r,i=(r=function(n){return H(n,"*")},y(function(n,e){for(var t=$c(e)?e:Uc,o=n.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var i=o.parentNode,u=Wa.fromDom(i);if(r.push(u),!0===t(u))break;o=i}return r}(n,void 0),r)),u=M(i,function(n){return e=function(n){return H(n,"*")},y(tn(t=n).map(Za).map(function(n){return y(n,function(n){return!L(t,n)})}).getOr([]),e);var e,t}),c=void 0!==(o=at(e,"background-color"))&&""!==o?"background-color:"+o+"!important":"background-color:rgb(255,255,255)!important;";D(u,t("display:none!important;")),D(i,t($g+Gg+c)),t((!0===Ug?"":$g)+Gg+c)(n)}function Eu(){D(z("["+Lg+"]"),function(n){var e=On(n,Lg);"no-styles"!==e?wn(n,"style",e):Cn(n,"style"),Cn(n,Lg)})}function Du(n){var e=n.raw;return void 0===e.touches||1!==e.touches.length?Yc.none():Yc.some(e.touches[0])}function Mu(t){var o,r,u=Jt(),i=Fe(!1),c=(o=function(n){t.triggerEvent(Ha(),n),i.set(!0)},r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];r=setTimeout(function(){o.apply(null,n),r=null},400)}}),a=pe([{key:ha(),value:function(t){return Du(t).each(function(n){c.cancel();var e={x:n.clientX,y:n.clientY,target:t.target};c.schedule(t),i.set(!1),u.set(e)}),Yc.none()}},{key:va(),value:function(n){return c.cancel(),Du(n).each(function(i){u.on(function(n){var e=i,t=n,o=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);(5<o||5<r)&&u.clear()})}),Yc.none()}},{key:ba(),value:function(e){return c.cancel(),u.get().filter(function(n){return L(n.target,e.target)}).map(function(){return i.get()?(e.prevent(),!1):t.triggerEvent(Na(),e)})}}]);return{fireIfReady:function(e,n){return bn(a,n).bind(function(n){return n(e)})}}}function _u(t){var e=Mu({triggerEvent:function(n,e){t.onTapContent(e)}});return{fireTouchstart:function(n){e.fireIfReady(n,"touchstart")},onTouchend:function(){return eu(t.body,"touchend",function(n){e.fireIfReady(n,"touchend")})},onTouchmove:function(){return eu(t.body,"touchmove",function(n){e.fireIfReady(n,"touchmove")})}}}function Ru(n,e){var t=parseInt(On(n,e),10);return isNaN(t)?0:t}function Fu(n){return Ac(Ac({},n),{width:2})}function Iu(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function Vu(n){var e=n.getSelection();return void 0!==e&&0<e.rangeCount?function(o){if(o.collapsed){var r=Wa.fromDom(o.startContainer);return tn(r).bind(function(n){var e,t=zg.exact(r,o.startOffset,n,"img"===X(e=n)?1:Ag.getOption(e).fold(function(){return Za(e).length},function(n){return n.length}));return yu(o.startContainer.ownerDocument.defaultView,t).map(Fu).map(T)}).getOr([])}return Z(o.getClientRects(),Iu)}(e.getRangeAt(0)):[]}function Bu(n,e){wn(n,Xg,e)}function Au(n){return{top:n.top,bottom:n.top+n.height}}function Nu(o,r){var i=Wa.fromDom(r.document.body),n=eu(Wa.fromDom(o),"resize",function(){var n,e,t;n=o,e=Ru(i,Xg),((t=n.innerHeight)<e?Yc.some(e-t):Yc.none()).each(function(t){var n;(0<(n=Vu(r)).length?Yc.some(n[0]).map(Au):Yc.none()).each(function(n){var e=n.top>r.innerHeight||n.bottom>r.innerHeight?Math.min(t,n.bottom-r.innerHeight+50):0;0!==e&&r.scrollTo(r.pageXOffset,r.pageYOffset+e)})}),Bu(i,o.innerHeight)});return Bu(i,o.innerHeight),{toEditing:function(){!function(n){n.focus();var e=Wa.fromDom(n.document.body);(Be().exists(function(n){return b(["input","textarea"],X(n))})?function(n){Mg.setTimeout(function(){n()},0)}:a)(function(){Be().each(Ve),Ie(e)})}(r)},destroy:function(){n.unbind()}}}function Hu(t,o){function r(){zc(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:r,throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];r(),i=setTimeout(function(){i=null,t.apply(null,n)},o)}}}function Pu(n){var t,o,e=li(Tm.sketch({dom:Jo('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:Qs([Tf.config({toggleClass:Ef("mask-tap-icon-selected"),toggleOnExecute:!1})])})),r=(t=n,o=null,{cancel:function(){zc(o)||(clearTimeout(o),o=null)},throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];zc(o)&&(o=setTimeout(function(){o=null,t.apply(null,n)},200))}});return Tm.sketch({dom:Jo('<div class="${prefix}-disabled-mask"></div>'),components:[Tm.sketch({dom:Jo('<div class="${prefix}-content-container"></div>'),components:[Sd.sketch({dom:Jo('<div class="${prefix}-content-tap-section"></div>'),components:[e.asSpec()],action:function(){r.throttle()},buttonBehaviours:Qs([Tf.config({toggleClass:Ef("mask-tap-icon-selected")})])})]})]})}function zu(n){var e=te("Getting AndroidWebapp schema",Yg,n);ut(e.toolstrip,"width","100%");var t=qm(Pu(
function(){e.setReadOnly(e.readOnlyOnInit()),c.enter()},e.translate));e.alloy.add(t);var o={show:function(){e.alloy.add(t)},hide:function(){e.alloy.remove(t)}};ns(e.container,t.element);var s,r,i,u,f,c=(s=e,r=o,i=Tu(),u=Kt(),f=Kt(),{enter:function(){r.hide(),Mn(s.container,Ef("fullscreen-maximized")),Mn(s.container,Ef("android-maximized")),i.maximize(),Mn(s.body,Ef("android-scroll-reload")),u.set(Nu(s.win,jg(s.editor).getOrDie("no"))),ku(s.editor).each(function(n){function e(n){return!L(n.start,n.finish)||n.soffset!==n.foffset}function t(){var n=o.doc.dom.hasFocus()&&o.getSelection().exists(e);i.getByDom(r).each(!0===(n||Be(c).filter(function(n){return"input"===X(n)}).exists(function(n){return n.dom.selectionStart!==n.dom.selectionEnd}))?Tf.on:Tf.off)}var o,r,i,u,c,a;Cu(s.container,n.body),f.set((o=n,r=s.toolstrip,i=s.alloy,u=_u(o),c=nn(r),a=[eu(o.body,"touchstart",function(n){o.onTouchContent(),u.fireTouchstart(n)}),u.onTouchmove(),u.onTouchend(),eu(r,"touchstart",function(){o.onTouchToolstrip()}),o.onToReading(function(){Ve(o.body)}),o.onToEditing(Y),o.onScrollToCursor(function(n){n.preventDefault(),o.getCursorBox().each(function(n){var e=o.win,t=n.top>e.innerHeight||n.bottom>e.innerHeight?n.bottom-e.innerHeight+50:0;0!=t&&e.scrollTo(e.pageXOffset,e.pageYOffset+t)})})].concat(1==Wg?[]:[eu(Wa.fromDom(o.win),"blur",function(){i.getByDom(r).each(Tf.off)}),eu(c,"select",t),eu(o.doc,"selectionchange",t)]),{destroy:function(){D(a,function(n){n.unbind()})}}))})},exit:function(){i.restore(),r.show(),_n(s.container,Ef("fullscreen-maximized")),_n(s.container,Ef("android-maximized")),Eu(),_n(s.body,Ef("android-scroll-reload")),f.clear(),u.clear()}});return{setReadOnly:e.setReadOnly,refreshStructure:Y,enter:c.enter,exit:c.exit,destroy:Y}}function ju(n){return"true"===On(n,tp)?0<n.dom.scrollLeft||function(n){n.dom.scrollLeft=1;var e=0!==n.dom.scrollLeft;return n.dom.scrollLeft=0,e}(n):0<n.dom.scrollTop||function(n){n.dom.scrollTop=1;var e=0!==n.dom.scrollTop;return n.dom.scrollTop=0,e}(n)}function Lu(){function e(n){var e=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:Jo('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+e+'"></div>'),tgroupBehaviours:Qs([vi("adhoc-scrollable-toolbar",!0===n.scrollable?[Ws(function(n){ut(n.element,"overflow-x","auto"),wn(n.element,tp,"true"),Wi(n.element)})]:[])]),components:[Tm.sketch({components:[ep.parts.items({})]})],markers:{itemSelector:"."+Ef("toolbar-group-item")},items:n.items}}function t(){Qg.setGroups(o,r.get()),Tf.off(o)}var o=qm(Qg.sketch({dom:Jo('<div class="${prefix}-toolbar"></div>'),components:[Qg.parts.groups({})],toolbarBehaviours:Qs([Tf.config({toggleClass:Ef("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),Pl.config({mode:"cyclic"})]),shell:!0})),n=qm(Tm.sketch({dom:{classes:[Ef("toolstrip")]},components:[Ym(o)],containerBehaviours:Qs([Tf.config({toggleClass:Ef("android-selection-context-toolbar"),toggleOnExecute:!1})])})),r=Fe([]);return{wrapper:n,toolbar:o,createGroups:function(n){return Z(n,i(ep.sketch,e))},setGroups:function(n){r.set(n),t()},setContextToolbar:function(n){Tf.on(o),Qg.setGroups(o,n)},restoreToolbar:function(){Tf.isOn(o)&&t()},refresh:function(){},focus:function(){Pl.focusIn(o)}}}function $u(n){return qm(Sd.sketch({dom:Jo('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run(function(n){n.setReadOnly(!1)})}}))}function Gu(){return qm(Tm.sketch({dom:Jo('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:Qs([fg.config({})])}))}function Uu(n,e,t,o){(!0===t?tf.toAlpha:tf.toOmega)(o),(t?function(n,e){fg.append(n,Ym(e))}:function(n,e){fg.remove(n,e)})(n,e)}function Wu(e,n){return n.getAnimationRoot.fold(function(){return e.element},function(n){return n(e)})}function Xu(n){return n.dimension.property}function qu(n,e){return n.dimension.getDimension(e)}function Yu(n,e){Fi(Wu(n,e),[e.shrinkingClass,e.growingClass])}function Ku(n,e){_n(n.element,e.openClass),Mn(n.element,e.closedClass),ut(n.element,Xu(e),"0px"),lt(n.element)}function Ju(n,e){_n(n.element,e.closedClass),Mn(n.element,e.openClass),ft(n.element,Xu(e))}function Qu(n,e,t){t.setCollapsed(),ut(n.element,Xu(e),qu(e,n.element)),lt(n.element),Yu(n,e),Ku(n,e),e.onStartShrink(n),e.onShrunk(n)}function Zu(n,e,t){var o=qu(e,n.element);("0px"===o?Qu:function(n,e,t,o){var r=o.getOrThunk(function(){return qu(e,n.element)});t.setCollapsed(),ut(n.element,Xu(e),r),lt(n.element);var i=Wu(n,e);_n(i,e.growingClass),Mn(i,e.shrinkingClass),Ku(n,e),e.onStartShrink(n)})(n,e,t,Yc.some(o))}function nc(n,e,t){var o=Wu(n,e),r=Rn(o,e.shrinkingClass),i=qu(e,n.element);Ju(n,e);var u=qu(e,n.element);(r?function(){ut(n.element,Xu(e),i),lt(n.element)}:function(){Ku(n,e)})(),_n(o,e.shrinkingClass),Mn(o,e.growingClass),Ju(n,e),ut(n.element,Xu(e),u),t.setExpanded(),e.onStartGrow(n)}function ec(n,e){return!0===Rn(Wu(n,e),e.growingClass)}function tc(n,e){return!0===Rn(Wu(n,e),e.shrinkingClass)}function oc(e,t){var o=qm(Tm.sketch({dom:{tag:"div",classes:[Ef("dropup")]},components:[],containerBehaviours:Qs([fg.config({}),ip.config({closedClass:Ef("dropup-closed"),openClass:Ef("dropup-open"),shrinkingClass:Ef("dropup-shrinking"),growingClass:Ef("dropup-growing"),dimension:{property:"height"},onShrunk:function(n){e(),t(),fg.set(n,[])},onGrown:function(){e(),t()}}),nt(function(){n(Y)})])})),n=function(n){window.requestAnimationFrame(function(){n(),ip.shrink(o)})};return{appear:function(n,e,t){!0===ip.hasShrunk(o)&&!1===ip.isTransitioning(o)&&window.requestAnimationFrame(function(){e(t),fg.set(o,[n()]),ip.grow(o)})},disappear:n,component:o,element:o.element}}function rc(){return ga().browser.isFirefox()}function ic(e,n){var t,o,r,i,u=Ac({stopBackspace:!0},n),c=Mu(u),a=Z(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(n){return eu(e,n,function(e){c.fireIfReady(e,n).each(function(n){n&&e.kill()}),u.triggerEvent(n,e)&&e.kill()})}),s=Jt(),f=eu(e,"paste",function(e){c.fireIfReady(e,"paste").each(function(n){n&&e.kill()}),u.triggerEvent("paste",e)&&e.kill(),s.set(setTimeout(function(){u.triggerEvent(Ia(),e)},0))}),l=eu(e,"keydown",function(n){var e;u.triggerEvent("keydown",n)?n.kill():!u.stopBackspace||(e=n).raw.which!==If[0]||b(["input","textarea"],X(e.target))||wt(e.target,'[contenteditable="true"]',void 0).isSome()||n.prevent()}),d=(t=e,o=function(n){u.triggerEvent("focusin",n)&&n.kill()},rc()?tu(t,"focus",o):eu(t,"focusin",o)),m=Jt(),g=(r=e,i=function(n){u.triggerEvent("focusout",n)&&n.kill(),m.set(setTimeout(function(){u.triggerEvent(Fa(),n)},0))},rc()?tu(r,"blur",i):eu(r,"focusout",i));return{unbind:function(){D(a,function(n){n.unbind()}),l.unbind(),d.unbind(),g.unbind(),f.unbind(),s.on(clearTimeout),m.on(clearTimeout)}}}function uc(n,e){return Fe(bn(n,"target").getOr(e))}function cc(n,o,e,t,r,i){var u,c,a=n(o,t),s=(u=Fe(!1),c=Fe(!1),{stop:function(){u.set(!0)},cut:function(){c.set(!0)},isStopped:u.get,isCut:c.get,event:e,setSource:r.set,getSource:r.get});return a.fold(function(){return i.logEventNoHandlers(o,t),up.complete()},function(e){var t=e.descHandler;return Di(t)(s),s.isStopped()?(i.logEventStopped(o,e.element,t.purpose),up.stopped()):s.isCut()?(i.logEventCut(o,e.element,t.purpose),up.complete()):tn(e.element).fold(function(){return i.logNoParent(o,e.element,t.purpose),up.complete()},function(n){return i.logEventResponse(o,e.element,t.purpose),up.resume(n)})})}function ac(){var u={};return{registerId:function(r,i,n){pn(n,function(n,e){var t,o=void 0!==u[e]?u[e]:{};o[i]={cHandler:J.apply(void 0,[(t=n).handler].concat(r)),purpose:t.purpose},u[e]=o})},unregisterId:function(e){pn(u,function(n){gs(n,e)&&delete n[e]})},filterByType:function(n){return bn(u,n).map(function(n){return vn(n,function(n,e){return{id:e,descHandler:n}})}).getOr([])},find:function(r,n,c){return bn(u,n).bind(function(o){return e=r,t=(n=function(n){return e=o,Wo(t=n).bind(function(n){return bn(e,n)}).map(function(n){return{element:t,descHandler:n}});var e,t})(i=c),u=be(e),t.orThunk(function(){return u(i)?Yc.none():function(n){for(var e=i.dom,t=be(u);e.parentNode;){e=e.parentNode;var o=Wa.fromDom(e),r=n(o);if(r.isSome())return r;if(t(o))break}return Yc.none()}(n)});var i,n,e,t,u})}}}function sc(){function r(n){Wo(n.element).each(function(n){delete u[n],i.unregisterId(n)})}var i=ac(),u={};return{find:function(n,e,t){return i.find(n,e,t)},filter:function(n){return i.filterByType(n)},register:function(n){var t,o=Wo((t=n).element).getOrThunk(function(){return n=t.element,e=Bo(pd+"uid-"),vd(n,e),e;var n,e});yn(u,o)&&function(n){var e=u[o];if(e!==n)throw new Error('The tagId "'+o+'" is already used by: '+He(e.element)+"\nCannot use it for: "+He(n.element)+"\nThe conflicting element is"+(us(e.element)?" ":" not ")+"already in the DOM");r(n)}(n),i.registerId([n],o,n.events),u[o]=n},unregister:r,getById:function(n){return bn(u,n)}}}function fc(n,e,t,o,r){var i=uc(t,o);return cp(n,e,t,o,i,r)}function lc(n){var e=qm(Tm.sketch({dom:{classes:[Ef("outer-container")].concat(n.classes)},containerBehaviours:Qs([tf.config({alpha:sp,omega:fp})])}));return ap(e)}function dc(n,e){var t=Wa.fromTag("input");ct(t,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),ns(n,t),Ie(t),e(t),es(t)}function mc(n){var e,t,o=n.getSelection();0<o.rangeCount&&(e=o.getRangeAt(0),(t=n.document.createRange()).setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),o.removeAllRanges(),o.addRange(t))}function gc(n,e){Be().each(function(n){L(n,e)||Ve(n)}),n.focus(),Ie(Wa.fromDom(n.document.body)),mc(n)}function pc(n,e,t,o){function r(){gc(e,o)}var i=eu(t,"keydown",function(n){b(["input","textarea"],X(n.target))||r()});return{toReading:function(){dc(n,Ve)},toEditing:r,onToolbarTouch:Y,destroy:function(){i.unbind()}}}function hc(n){setTimeout(function(){throw n},0)}function vc(n){var o,r,e=ou(n).isPortrait(),t=(o=n.screen.width,r=n.screen.height,C([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(n){return e=o<=n.width&&r<=n.height,t=n.keyboard,e?Yc.some(t):Yc.none();var e,t}).getOr({portrait:r/5,landscape:o/4})),i=e?t.portrait:t.landscape;return(e?n.screen.height:n.screen.width)-n.innerHeight>i?0:i}function bc(n,e){var t=nn(n).dom.defaultView;return mt(n)+mt(e)-vc(t)}function yc(n,e,t){var o=bc(e,t);ut(n,"padding-bottom",mt(e)+mt(t)-o+"px")}function xc(n){return Ru(n,vp)}function wc(n,e){var t=On(n,bp);return hp.fixed(n,t,e)}function Sc(n,e){return hp.scroller(n,e)}function Oc(n){var e=xc(n);return("true"===On(n,yp)?Sc:wc)(n,e)}function kc(n,e,t){var o=nn(n).dom.defaultView.innerHeight;return wn(n,xp,o+"px"),o-e-t}function Tc(n){var e=st(n,"top").getOr("0");return parseInt(e,10)}function Cc(n){return parseInt(n.dom.scrollTop,10)}function Ec(r,i){return gp(function(n){var e=J(Cc,r);wn(r,Sp,e());var t=Math.abs(i-e()),o=Math.ceil(t/10);wp.animate(e,i,o,function(n,e){Ru(r,Sp)!==r.dom.scrollTop?e(r.dom.scrollTop):(r.dom.scrollTop=n,wn(r,Sp,n))},function(){r.dom.scrollTop=i,wn(r,Sp,i),n(i)},10)})}function Dc(n,e){ut(n,"top",e+xc(n)+"px")}function Mc(n,l){return n.fold(function(n,e,t){return ut(n,e,l+(o=t)+"px"),pp(o);var o},function(n,e){return r=l+(o=e),i=st(t=n,"top").getOr(o),u=r-parseInt(i,10),c=t.dom.scrollTop+u,a=t,s=c,f=r,gp(function(n){var e=J(Cc,a);wp.animate(e,s,15,function(n){a.dom.scrollTop=n,ut(a,"top",Tc(a)+15+"px")},function(){a.dom.scrollTop=s,ut(a,"top",f+"px"),n(s)},10)});var t,o,r,i,u,c,a,s,f})}function _c(n,e){var u,t=Z(Z(gt(n,"["+vp+"]"),Oc),function(n){return Mc(n,e)});return u=t,gp(function(o){var r=[],i=0;0===u.length?o([]):D(u,function(n,e){var t;n.get((t=e,function(n){r[t]=n,++i>=u.length&&o(r)}))})})}function Rc(n){function e(){var n=h.innerHeight;return Ru(r,xp)<n}function t(){var n,e,t;S&&(n=mt(u),e=mt(c),t=kc(r,n,e),wn(r,vp,n+"px"),ut(r,"height",t+"px"),yc(i,r,c))}function o(){q.clear()}var r,i,u,c,a,s,f,l,d,m,g,p,h,v,b,y,x,w,S,O=n.cWin,k=n.ceBody,T=n.socket,C=n.toolstrip,E=n.contentElement,D=n.keyboardType,M=n.outerWindow,_=n.dropup,R=n.outerBody,F=(i=k,u=C,c=_,h=nn(r=T).dom.defaultView,p=On(g=u,"style"),ct(g,{position:"absolute",top:"0px"}),wn(g,vp,"0px"),wn(g,bp,"top"),v={restore:function(){wn(g,"style",p||""),Cn(g,vp),Cn(g,bp)}},b=mt(u),y=mt(c),l=kc(r,f=b,y),m=On(d=r,"style"),Wi(d),ct(d,{position:"absolute",height:l+"px",width:"100%",top:f+"px"}),wn(d,vp,f+"px"),wn(d,yp,"true"),wn(d,bp,"top"),x={restore:function(){Xi(d),wn(d,"style",m||""),Cn(d,vp),Cn(d,yp),Cn(d,bp)}},s=On(a=c,"style"),ct(a,{position:"absolute",bottom:"0px"}),wn(a,vp,"0px"),wn(a,bp,"bottom"),w={restore:function(){wn(a,"style",s||""),Cn(a,vp),Cn(a,bp)}},S=!0,yc(i,r,c),{setViewportOffset:function(n){wn(r,vp,n+"px"),t()},isExpanding:e,isShrinking:Q(e),refresh:t,restore:function(){S=!1,v.restore(),x.restore(),w.restore()}}),I=D(R,O,dn(),E),V=ru(M,{onChange:Y,onReady:F.refresh});V.onAdjustment(function(){F.refresh()});var B,A,N,H,P,z,j,L,$,G,U,W=eu(Wa.fromDom(M),"resize",function(){F.isExpanding()&&F.refresh()}),X=(B=C,A=T,N=R,H=M,P=F,z=O,j=function(n){return t=A,o=n,r=nn(e=B).dom.defaultView,gp(function(n){Dc(e,o),Dc(t,o),r.scrollTo(0,o),n(o)});var e,t,o,r},L=Fe(dp.pure({})),$={start:function(e){var n=dp.nu(function(n){return j(e).get(n)});L.set(n)},idle:function(n){L.get().get(function(){n()})}},G=Hu(function(){$.idle(function(){_c(N,H.pageYOffset).get(function(){var n=Vu(z);Yc.from(n[0]).bind(function(n){var e=n.top-A.dom.scrollTop;return e>H.innerHeight+5||e<-5?Yc.some({top:e,bottom:e+n.height}):Yc.none()}).each(function(n){A.dom.scrollTop=A.dom.scrollTop+n.top}),$.start(0),P.refresh()})})},1e3),U=eu(Wa.fromDom(H),"scroll",function(){H.pageYOffset<0||G.throttle()}),_c(N,H.pageYOffset).get(K),{unbind:U.unbind}),q=function(e,t){function o(n){var e=Wa.fromTag("span");return Ri(e,[Ef("layer-editor"),Ef("unfocused-selection")]),ct(e,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),e}var n=e.document,r=Wa.fromTag("div");Mn(r,Ef("unfocused-selections")),ns(Wa.fromDom(n.documentElement),r);var i=eu(r,"touchstart",function(n){n.prevent(),gc(e,t),u()}),u=function(){sn(r)};return{update:function(){u();var n=Z(Vu(e),o);an(r,n)},isActive:function(){return 0<Za(r).length},destroy:function(){i.unbind(),es(r)},clear:u}}(O,E);return{toEditing:function(){I.toEditing(),o()},toReading:function(){I.toReading()},onToolbarTouch:function(){I.onToolbarTouch()},refreshSelection:function(){q.isActive()&&q.update()},clearSelection:o,highlightSelection:function(){q.update()},scrollIntoView:function(n,e){var t,o=O,r=n,i=e,u=bc(t=T,_),c=J(mc,o);u<r||u<i?Ec(t,t.dom.scrollTop-u+i).get(c):r<0&&Ec(t,t.dom.scrollTop+r).get(c)},updateToolbarPadding:Y,setViewportOffset:function(n){var i,u;F.setViewportOffset(n),i=T,u=n,gp(function(n){function e(n){ut(i,"top",n+"px")}var t=J(Tc,i),o=Math.abs(u-t()),r=Math.ceil(o/10);wp.animate(t,u,r,e,function(){e(u),n(u)},10)}).get(K)},syncHeight:function(){ut(E,"height",E.dom.contentWindow.document.body.scrollHeight+"px")},refreshStructure:F.refresh,destroy:function(){F.restore(),V.destroy(),X.unbind(),W.unbind(),I.destroy(),q.destroy(),dc(dn(),Ve)}}}function Fc(g,n){var p=Tu(),h=Jt(),v=Jt(),b=Kt(),y=Kt();return{enter:function(){n.hide();var m=Wa.fromDom(document);ku(g.editor).each(function(n){function t(){c.run(function(n){n.refreshSelection()})}function e(n,e){var t=n-s.dom.scrollTop;c.run(function(n){n.scrollIntoView(t,t+e)})}function o(){c.run(function(n){n.clearSelection()})}function r(){u.getCursorBox().each(function(n){e(n.top,n.height)}),c.run(function(n){n.syncHeight()})}var i,u,c,a,s,f,l,d;h.set({socketHeight:st(g.socket,"height"),iframeHeight:st(n.frame,"height"),outerScroll:document.body.scrollTop}),v.set({exclusives:(i="."+Sg,eu(m,"touchmove",function(n){wt(n.target,i).filter(ju).fold(function(){n.prevent()},Y)}))}),Mn(g.container,Ef("fullscreen-maximized")),Cu(g.container,n.body),p.maximize(),ut(g.socket,"overflow","scroll"),ut(g.socket,"-webkit-overflow-scrolling","touch"),Ie(n.body),b.set(Rc({cWin:n.win,ceBody:n.body,socket:g.socket,toolstrip:g.toolstrip,dropup:g.dropup.element,contentElement:n.frame,outerBody:g.body,outerWindow:g.win,keyboardType:pc})),b.run(function(n){n.syncHeight()}),y.set((u=n,c=b,a=g.toolstrip,s=g.socket,g.dropup,f=_u(u),l=Hu(r,300),d=[u.onKeyup(function(){o(),l.throttle()}),u.onNodeChanged(t),u.onDomChanged(l.throttle),u.onDomChanged(t),u.onScrollToCursor(function(n){n.preventDefault(),l.throttle()}),u.onScrollToElement(function(n){n.element,e(c,s)}),u.onToEditing(function(){c.run(function(n){n.toEditing()})}),u.onToReading(function(){c.run(function(n){n.toReading()})}),eu(u.doc,"touchend",function(n){L(u.html,n.target)||L(u.body,n.target)}),eu(a,"transitionend",function(n){var e;"height"===n.raw.propertyName&&(e=mt(a),c.run(function(n){n.setViewportOffset(e)}),t(),r())}),tu(a,"touchstart",function(n){var e;c.run(function(n){n.highlightSelection()}),e=n,c.run(function(n){n.onToolbarTouch(e)}),u.onTouchToolstrip()}),eu(u.body,"touchstart",function(n){o(),u.onTouchContent(),f.fireTouchstart(n)}),f.onTouchmove(),f.onTouchend(),eu(u.body,"click",function(n){n.kill()}),eu(a,"touchmove",function(){u.onToolbarScrollStart()})],{destroy:function(){D(d,function(n){n.unbind()})}}))})},refreshStructure:function(){b.run(function(n){n.refreshStructure()})},exit:function(){p.restore(),y.clear(),b.clear(),n.show(),h.on(function(n){n.socketHeight.each(function(n){ut(g.socket,"height",n)}),n.iframeHeight.each(function(n){ut(g.editor.getFrame(),"height",n)}),document.body.scrollTop=n.scrollTop}),h.clear(),v.on(function(n){n.exclusives.unbind()}),v.clear(),_n(g.container,Ef("fullscreen-maximized")),Eu(),Xi(g.toolbar),ft(g.socket,"overflow"),ft(g.socket,"-webkit-overflow-scrolling"),Ve(g.editor.getFrame()),ku(g.editor).each(function(n){n.clearSelection()})}}}function Ic(n,e,t){n.system.broadcastOn([af],{command:e,state:t})}function Vc(e){return function(){function n(){e._skinLoaded=!0,e.fire("SkinLoaded")}e.initialized?n():e.on("init",n)}}var Bc,Ac=function(){return(Ac=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)},Nc=n("string"),Hc=n("object"),Pc=n("array"),zc=t(null),jc=e("boolean"),Lc=t(void 0),$c=e("function"),Gc=e("number"),Uc=w(!1),Wc=w(!0),Xc={fold:function(n){return n()},isSome:Uc,isNone:Wc,getOr:K,getOrThunk:s,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:w(null),getOrUndefined:w(void 0),or:K,orThunk:s,map:r,each:Y,bind:r,exists:Uc,forall:Wc,filter:function(){return Xc},toArray:function(){return[]},toString:w("none()")},qc=function(t){function n(){return r}function e(n){return n(t)}var o=w(t),r={fold:function(n,e){return e(t)},isSome:Wc,isNone:Uc,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:n,orThunk:n,map:function(n){return qc(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?r:Xc},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return r},Yc={some:qc,none:r,from:function(n){return null==n?Xc:qc(n)}},Kc=Array.prototype.slice,Jc=Array.prototype.indexOf,Qc=Array.prototype.push,Zc=function(n,e){return{major:n,minor:e}},na={nu:Zc,detect:function(n,e){function t(n){return Number(o.replace(r,"$"+n))}var o,r,i=String(e).toLowerCase();return 0===n.length?$():(r=function(n,e){for(var t=0;t<n.length;t++){var o=n[t];if(o.test(e))return o}}(n,o=i))?Zc(t(1),t(2)):{major:0,minor:0}},unknown:$},ea=(Bc=/^\s+|\s+$/g,function(n){return n.replace(Bc,"")}),ta=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,oa={browsers:w([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return _(n,"edge/")&&_(n,"chrome")&&_(n,"safari")&&_(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ta],search:function(n){return _(n,"chrome")&&!_(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return _(n,"msie")||_(n,"trident")}},{name:"Opera",versionRegexes:[ta,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:R("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:R("firefox")},{name:"Safari",versionRegexes:[ta,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(_(n,"safari")||_(n,"mobile/"))&&_(n,"applewebkit")}}]),oses:w([{name:"Windows",search:R("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return _(n,"iphone")||_(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:R("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:R("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:R("linux"),versionRegexes:[]},{name:"Solaris",search:R("sunos"),versionRegexes:[]},{name:"FreeBSD",search:R("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:R("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},ra="Firefox",ia=function(){return G({current:void 0,version:na.unknown()})},ua=G,ca=(w("Edge"),w("Chrome"),w("IE"),w("Opera"),w(ra),w("Safari"),"Windows"),aa="Android",sa="Solaris",fa="FreeBSD",la="ChromeOS",da=function(){return U({current:void 0,version:na.unknown()})},ma=U,ga=(w(ca),w("iOS"),w(aa),w("Linux"),w("OSX"),w(sa),w(fa),w(la),f(function(){return n=navigator.userAgent,e=Yc.from(navigator.userAgentData),t=F,p=oa.browsers(),h=oa.oses(),{browser:v=e.bind(function(n){return o=p,C(n.brands,function(e){var t=e.brand.toLowerCase();return x(o,function(n){var e;return t===(null===(e=n.brand)||void 0===e?void 0:e.toLowerCase())}).map(function(n){return{current:n.name,version:na.nu(parseInt(e.version,10),0)}})});var o}).orThunk(function(){return E(p,t=n).map(function(n){var e=na.detect(n.versionRegexes,t);return{current:n.name,version:e}});var t}).fold(ia,ua),os:b=E(h,o=n).map(function(n){var e=na.detect(n.versionRegexes,o);return{current:n.name,version:e}}).fold(da,ma),deviceType:(i=v,u=n,c=t,a=(r=b).isiOS()&&!0===/ipad/i.test(u),s=r.isiOS()&&!a,l=(f=r.isiOS()||r.isAndroid())||c("(pointer:coarse)"),d=a||!s&&f&&c("(min-device-width:768px)"),m=s||f&&!d,g=i.isSafari()&&r.isiOS()&&!1===/safari/i.test(u),{isiPad:w(a),isiPhone:w(s),isTablet:w(d),isPhone:w(m),isTouch:w(l),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:w(g),isDesktop:w(!m&&!d&&!g)})};var n,e,t,o,r,i,u,c,a,s,f,l,d,m,g,p,h,v,b})),pa=w,ha=pa("touchstart"),va=pa("touchmove"),ba=pa("touchend"),ya=pa("mousedown"),xa=pa("mousemove"),wa=pa("mouseup"),Sa=pa("mouseover"),Oa=pa("keydown"),ka=pa("keyup"),Ta=pa("input"),Ca=pa("change"),Ea=pa("click"),Da=pa("transitionend"),Ma=pa("selectstart"),_a={tap:I("tap")},Ra=I("focus"),Fa=I("blur.post"),Ia=I("paste.post"),Va=I("receive"),Ba=I("execute"),Aa=I("focus.item"),Na=_a.tap,Ha=I("longpress"),Pa=I("system.init"),za=I("system.attached"),ja=I("system.detached"),La=I("focusmanager.shifted"),$a=I("highlight"),Ga=I("dehighlight"),Ua=function(n,e,t,o){var r=Ac({target:e},o);n.getSystem().triggerEvent(t,e,r)},Wa={fromHtml:function(n,e){var t=(e||document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return W(t.childNodes[0])},fromTag:function(n,e){return W((e||document).createElement(n))},fromText:function(n,e){return W((e||document).createTextNode(n))},fromDom:W,fromPoint:function(n,e,t){return Yc.from(n.dom.elementFromPoint(e,t)).map(W)}};"undefined"!=typeof window||Function("return this;")();var Xa,qa,Ya=q(1),Ka=q(3),Ja=q(9),Qa=q(11),Za=function(n){return Z(n.dom.childNodes,Wa.fromDom)},ns=function(n,e){n.dom.appendChild(e.dom)},es=function(n){var e=n.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},ts=$c(Element.prototype.attachShadow)&&$c(Node.prototype.getRootNode),os=w(ts),rs=ts?function(n){return Wa.fromDom(n.dom.getRootNode())}:en,is=function(n){return l(n.dom.shadowRoot)},us=function(n){var e=Ka(n)?n.dom.parentNode:n.dom;if(null==e||null===e.ownerDocument)return!1;var t,o,r=e.ownerDocument,i=Wa.fromDom(e),u=rs(i);return(fn(u)?Yc.some(u):Yc.none()).fold(function(){return r.body.contains(e)},(t=us,o=ln,function(n){return t(o(n))}))},cs=function(n){var e=n.dom.body;if(null==e)throw new Error("Body is not available yet");return Wa.fromDom(e)},as=function(n){V(n,ja()),D(n.components(),as)},ss=function(n){D(n.components(),ss),V(n,za())},fs=function(n,e,t){n.getSystem().addToWorld(e),t(n.element,e.element),us(n.element)&&ss(e),n.syncComponents()},ls=Object.keys,ds=Object.hasOwnProperty,ms=function(n,o){var r={};return pn(n,function(n,e){var t=o(n,e);r[t.k]=t.v}),r},gs=function(n,e){return ds.call(n,e)},ps=Object.freeze({__proto__:null,toAlpha:function(n,e){Fn(n.element,e.alpha,e.omega)},toOmega:function(n,e){Fn(n.element,e.omega,e.alpha)},isAlpha:function(n,e){return Rn(n.element,e.alpha)},isOmega:function(n,e){return Rn(n.element,e.omega)},clear:function(n,e){_n(n.element,e.alpha),_n(n.element,e.omega)}}),hs=function(t){return{isValue:Wc,isError:Uc,getOr:w(t),getOrThunk:w(t),getOrDie:w(t),or:function(){return hs(t)},orThunk:function(){return hs(t)},fold:function(n,e){return e(t)},map:function(n){return hs(n(t))},mapError:function(){return hs(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return Yc.some(t)}}},vs=function(e){return{isValue:Uc,isError:Wc,getOr:K,getOrThunk:function(n){return n()},getOrDie:function(){return h(String(e))()},or:K,orThunk:function(n){return n()},fold:function(n){return n(e)},map:function(){return vs(e)},mapError:function(n){return vs(n(e))},each:Y,bind:function(){return vs(e)},exists:Uc,forall:Wc,toOptional:Yc.none}},bs={value:hs,error:vs,fromOption:function(n,e){return n.fold(function(){return vs(e)},hs)}};(qa=Xa={})[qa.Error=0]="Error",qa[qa.Value=1]="Value";var ys,xs=function(n){return In(n,bs.error,bs.value)},ws=Vn,Ss=Bn,Os=function(n,e){return n.stype===Xa.Value?e(n.svalue):n},ks=function(n,e){return n.stype===Xa.Error?e(n.serror):n},Ts=function(n,e){return n.stype===Xa.Value?{stype:Xa.Value,svalue:e(n.svalue)}:n},Cs=function(n,e){return n.stype===Xa.Error?{stype:Xa.Error,serror:e(n.serror)}:n},Es=In,Ds=Hn(function(n,e){return Hc(n)&&Hc(e)?Ds(n,e):e}),Ms=Hn(function(n,e){return e}),_s=function(n){var e,t,o=(e=[],t=[],D(n,function(n){In(n,function(n){return t.push(n)},function(n){return e.push(n)})}),{values:e,errors:t});return 0<o.errors.length?i(Ss,p)(o.errors):ws(o.values)},Rs=Wn(ws),Fs=function(t){return{extract:function(i,u){for(var c={},a=[],n=0,e=t;n<e.length;n++)Nn(e[n],function(n,e,t,o){var r=qn(t,i,u,n,o);Es(r,function(n){a.push.apply(a,n)},function(n){c[e]=n})},function(n,e){c[n]=e(u)});return 0<a.length?Ss(a):ws(c)},toString:function(){return"obj{\n"+Z(t,function(n){return Nn(n,function(n,e,t,o){return n+" -> "+o.toString()},function(n){return"state("+n+")"})}).join("\n")+"}"}}},Is=w(Rs),Vs=(ys=$c,Wn(function(n){var e=typeof n;return ys(n)?ws(n):Ss("Expected type: function but got: "+e)})),Bs=function(n){return"Errors: \n"+Z(10<(e=n.errors).length?e.slice(0,10).concat([{path:[],getErrorInfo:w("... (only showing first ten failures)")}]):e,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}).join("\n")+"\n\nInput object: "+Gn(n.input);var e},As=An,Ns=function(n,e){return{tag:"custom",newKey:n,instantiator:e}},Hs=[re("alpha"),re("omega")];me([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Ps,zs,js,Ls={can:Wc,abort:Uc,run:Y},$s=pe,Gs=ke(za()),Us=ke(ja()),Ws=ke(Pa()),Xs=(Ps=Ba(),function(n){return Se(Ps,n)}),qs=function(n){return Z(n,function(n){return e=n.length-"/*".length,n.length>="/*".length&&"/*"===n.substr(e,e+"/*".length)?n.substring(0,n.length-"/*".length):n;var e})},Ys=function(t,n,l,i,e,o,r){function u(n){return yn(n,l)?n[l]():Yc.none()}var c=hn(e,function(n,e){return r=l,t=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var o=[t].concat(n);return t.config({name:w(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+u)},function(n){var e=Array.prototype.slice.call(o,1);return i.apply(void 0,[t,n.config,n.state].concat(e))})},o=u=e,a=(c=(i=n).toString()).indexOf(")")+1,s=c.indexOf("("),f=c.substring(s+1,a-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:o,parameters:qs(f.slice(0,1).concat(f.slice(3)))}},t;var r,i,u,t,o,c,a,s,f}),a=hn(o,Ee),s=Ac(Ac(Ac({},a),c),{revoke:J(_e,l),config:function(n){var e=te(l+"-config",t,n);return{key:l,value:{config:e,me:s,configAsRaw:f(function(){return te(l+"-config",t,n)}),initialConfig:n,state:r}}},schema:w(n),exhibit:function(n,t){return e=u(n),o=bn(i,"exhibit"),r=function(n,e){return e(t,n.config,n.state)},(e.isSome()&&o.isSome()?Yc.some(r(e.getOrDie(),o.getOrDie())):Yc.none()).getOrThunk(function(){return De({})});var e,o,r},name:w(l),handlers:function(n){return u(n).map(function(n){return bn(i,"events").getOr(function(){return{}})(n.config,n.state)}).getOr({})}});return s},Ks={init:function(){return Js({readState:w("No State required")})}},Js=function(n){return n},Qs=pe,Zs=Yn([re("fields"),re("name"),le("active",{}),le("apis",{}),le("state",Ks),le("extra",{})]),nf=Yn([re("branchKey"),re("branches"),re("name"),le("active",{}),le("apis",{}),le("state",Ks),le("extra",{})]),ef=w(void 0),tf=Re({fields:Hs,name:"swapping",apis:ps}),of=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),rf=tinymce.util.Tools.resolve("tinymce.ThemeManager"),uf=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],cf=["undo","bold","italic","link","image","bullist","styleselect"],af="formatChanged",sf="orientationChanged",ff="dropupDismissed",lf=Object.freeze({__proto__:null,events:function(o){return $s([Se(Va(),function(r,n){var e,i=o.channels,t=ls(i),u=n;D((e=u).universal?t:y(t,function(n){return b(e.channels,n)}),function(n){var e=i[n],t=e.schema,o=te("channel["+n+"] data\nReceiver: "+He(r.element),t,u.data);e.onReceive(r,o)})})])}}),df="unknown";(js=zs={})[js.STOP=0]="STOP",js[js.NORMAL=1]="NORMAL",js[js.LOGGING=2]="LOGGING";var mf=Fe({}),gf=["alloy/data/Fields","alloy/debugging/Debugging"],pf=w({logEventCut:Y,logEventStopped:Y,logNoParent:Y,logEventNoHandlers:Y,logEventResponse:Y,write:Y}),hf=w([re("menu"),re("selectedMenu")]),vf=w([re("item"),re("selectedItem")]);w(Fs(vf().concat(hf())));var bf,yf,xf=w(Fs(vf())),wf=w(ue("initSize",[re("numColumns"),re("numRows")])),Sf=Re({fields:[ie("channels",Zn(bs.value,Yn([$e("onReceive"),le("schema",Is())])))],name:"receiving",active:lf}),Of=Object.freeze({__proto__:null,onLoad:Qe,toggle:Ye,isOn:function(n,e,t){return t.get()},on:Ke,off:Je,set:pt}),kf=Object.freeze({__proto__:null,exhibit:function(){return De({})},events:function(n,e){var t,o,r,i=(t=n,o=e,r=Ye,Xs(function(n){r(n,t,o)})),u=Me(n,e,Qe);return $s(p([n.toggleOnExecute?[i]:[],[u]]))}}),Tf=Re({fields:[le("selected",!1),ce("toggleClass"),le("toggleOnExecute",!0),de("aria",{mode:"none"},oe("mode",{pressed:[le("syncWithExpanded",!1),Ue("update",function(n,e,t){wn(n.element,"aria-pressed",t),e.syncWithExpanded&&ht(n,0,t)})],
checked:[Ue("update",function(n,e,t){wn(n.element,"aria-checked",t)})],expanded:[Ue("update",ht)],selected:[Ue("update",function(n,e,t){wn(n.element,"aria-selected",t)})],none:[Ue("update",Y)]}))],name:"toggling",active:kf,apis:Of,state:{init:function(){var e=Fe(!1);return{get:function(){return e.get()},set:function(n){return e.set(n)},clear:function(){return e.set(!1)},readState:function(){return e.get()}}}}}),Cf="tinymce-mobile",Ef=function(n){return Cf+"-"+n},Df=Object.freeze({__proto__:null,focus:ot,blur:function(n,e){e.ignore||Ve(n.element)},isFocused:function(n){return e=n.element,t=rs(e).dom,e.dom===t.activeElement;var e,t}}),Mf=Object.freeze({__proto__:null,exhibit:function(n,e){return De(e.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(t){return $s([Se(Ra(),function(n,e){ot(n,t),e.stop()})].concat(t.stopMousedown?[Se(ya(),function(n,e){e.event.prevent()})]:[]))}}),_f=Re({fields:[je("onFocus"),le("stopMousedown",!1),le("ignore",!1)],name:"focusing",active:Mf,apis:Df}),Rf=function(n,e){return rt(n)?n.style.getPropertyValue(e):""},Ff=dt("height",function(n){var e=n.dom;return us(n)?e.getBoundingClientRect().height:e.offsetHeight}),If=[8],Vf=[9],Bf=[13],Af=[27],Nf=[32],Hf=[37],Pf=[38],zf=[39],jf=[40],Lf=Q(Dt),$f=Object.freeze({__proto__:null,dehighlightAll:function(n,e){return It(n,e,0,[])},dehighlight:function(n,e,t,o){Pt(0,e,0,o)&&(_n(o.element,e.highlightClass),e.onDehighlight(n,o),V(o,Ga()))},highlight:Vt,highlightFirst:function(e,t){zt(e,t).each(function(n){Vt(e,t,0,n)})},highlightLast:function(e,t){jt(e,t).each(function(n){Vt(e,t,0,n)})},highlightAt:function(e,t,n,o){var r,i,u;i=o,u=gt((r=e).element,"."+t.itemClass),Yc.from(u[i]).fold(function(){return bs.error(new Error("No element found with index "+i))},r.getSystem().getByDom).fold(function(n){throw n},function(n){Vt(e,t,0,n)})},highlightBy:function(e,t,n,o){x(Lt(e,t),o).each(function(n){Vt(e,t,0,n)})},isHighlighted:Pt,getHighlighted:function(e,n){return xt(e.element,"."+n.highlightClass).bind(function(n){return e.getSystem().getByDom(n).toOptional()})},getFirst:zt,getLast:jt,getPrevious:function(n,e){return Bt(n,e,0,-1)},getNext:function(n,e){return Bt(n,e,0,1)},getCandidates:Lt}),Gf=Re({fields:[re("highlightClass"),re("itemClass"),je("onHighlight"),je("onDehighlight")],name:"highlighting",apis:$f});(yf=bf=bf||{}).OnFocusMode="onFocus",yf.OnEnterOrSpaceMode="onEnterOrSpace",yf.OnApiMode="onApi";var Uf,Wf,Xf,qf,Yf,Kf,Jf,Qf,Zf,nl,el=Gt(Ns("cyclic",Uc)),tl=Gt(Ns("cyclic",Wc)),ol=$t([le("execute",Wt),le("useSpace",!1),le("useEnter",!0),le("useControlEnter",!1),le("useDown",!1)],Ks.init,function(n,e,t){var o=t.useSpace&&!Ut(n.element)?Nf:[],r=t.useEnter?Bf:[],i=t.useDown?jf:[];return[_t(Ct(o.concat(r).concat(i)),qt)].concat(t.useControlEnter?[_t(Et([Mt,Ct(Bf)]),qt)]:[])},function(n,e,t){return t.useSpace&&!Ut(n.element)?[_t(Ct(Nf),Xt)]:[]},function(){return Yc.none()}),rl=Object.freeze({__proto__:null,flatgrid:Qt,init:function(n){return n.state(n)}}),il=function(n){return"rtl"===at(n,"direction")?"rtl":"ltr"},ul=function(e,t,n,o,r){return o.focusManager.get(t).bind(function(n){return e(t.element,n,o,r)}).map(function(n){return o.focusManager.set(t,n),!0})},cl=oo,al=oo,sl=oo,fl=lo(function(n,e,t,o){return ao(n,e,t,o,-1)}),ll=lo(function(n,e,t,o){return ao(n,e,t,o,1)}),dl=lo(function(n,e,t,o){return so(n,e,t,o,-1)}),ml=lo(function(n,e,t,o){return so(n,e,t,o,1)}),gl=$t([re("selector"),le("execute",Wt),Le("onEscape"),le("captureTab",!1),wf()],Qt,w([_t(Ct(Hf),eo(fl,ll)),_t(Ct(zf),to(fl,ll)),_t(Ct(Pf),cl(dl)),_t(Ct(jf),al(ml)),_t(Et([Dt,Ct(Vf)]),mo),_t(Et([Lf,Ct(Vf)]),mo),_t(Ct(Af),function(n,e,t){return t.onEscape(n,e)}),_t(Ct(Nf.concat(Bf)),function(e,t,o){return(r=o).focusManager.get(e).bind(function(n){return wt(n,r.selector)}).bind(function(n){return o.execute(e,t,n)});var r})]),w([_t(Ct(Nf),Xt)]),function(){return Yc.some(fo)}),pl=[re("selector"),le("getInitial",Yc.none),le("execute",Wt),Le("onEscape"),le("executeOnMove",!1),le("allowVertical",!0)],hl=w([_t(Ct(Nf),Xt)]),vl=$t(pl,Ks.init,function(n,e,t){var o=Hf.concat(t.allowVertical?Pf:[]),r=zf.concat(t.allowVertical?jf:[]);return[_t(Ct(o),yo(eo(vo,bo))),_t(Ct(r),yo(to(vo,bo))),_t(Ct(Bf),po),_t(Ct(Nf),po),_t(Ct(Af),xo)]},hl,function(){return Yc.some(ho)}),bl=[ue("selectors",[re("row"),re("cell")]),le("cycles",!0),le("previousSelector",Yc.none),le("execute",Wt)],yl=Eo(function(n,e,t){return So(n,e,t,-1)},function(n,e,t){return ko(n,e,t,-1)}),xl=Eo(function(n,e,t){return So(n,e,t,1)},function(n,e,t){return ko(n,e,t,1)}),wl=Eo(function(n,e,t){return Oo(n,t,e,-1)},function(n,e,t){return To(n,t,e,-1)}),Sl=Eo(function(n,e,t){return Oo(n,t,e,1)},function(n,e,t){return To(n,t,e,1)}),Ol=w([_t(Ct(Hf),eo(yl,xl)),_t(Ct(zf),to(yl,xl)),_t(Ct(Pf),cl(wl)),_t(Ct(jf),al(Sl)),_t(Ct(Nf.concat(Bf)),function(e,t,o){return Ae(e.element).bind(function(n){return o.execute(e,t,n)})})]),kl=w([_t(Ct(Nf),Xt)]),Tl=$t(bl,Ks.init,Ol,kl,function(){return Yc.some(Co)}),Cl=[re("selector"),le("execute",Wt),le("moveOnTab",!1)],El=w([_t(Ct(Pf),sl(_o)),_t(Ct(jf),sl(Ro)),_t(Et([Dt,Ct(Vf)]),function(n,e,t,o){return t.moveOnTab?sl(_o)(n,e,t,o):Yc.none()}),_t(Et([Lf,Ct(Vf)]),function(n,e,t,o){return t.moveOnTab?sl(Ro)(n,e,t,o):Yc.none()}),_t(Ct(Bf),Do),_t(Ct(Nf),Do)]),Dl=w([_t(Ct(Nf),Xt)]),Ml=$t(Cl,Ks.init,El,Dl,function(){return Yc.some(Mo)}),_l=$t([Le("onSpace"),Le("onEnter"),Le("onShiftEnter"),Le("onLeft"),Le("onRight"),Le("onTab"),Le("onShiftTab"),Le("onUp"),Le("onDown"),Le("onEscape"),le("stopSpaceKeyup",!1),ce("focusIn")],Ks.init,function(n,e,t){return[_t(Ct(Nf),t.onSpace),_t(Et([Lf,Ct(Bf)]),t.onEnter),_t(Et([Dt,Ct(Bf)]),t.onShiftEnter),_t(Et([Dt,Ct(Vf)]),t.onShiftTab),_t(Et([Lf,Ct(Vf)]),t.onTab),_t(Ct(Pf),t.onUp),_t(Ct(jf),t.onDown),_t(Ct(Hf),t.onLeft),_t(Ct(zf),t.onRight),_t(Ct(Nf),t.onSpace),_t(Ct(Af),t.onEscape)]},function(n,e,t){return t.stopSpaceKeyup?[_t(Ct(Nf),Xt)]:[]},function(n){return n.focusIn}),Rl=el.schema(),Fl=tl.schema(),Il=vl.schema(),Vl=gl.schema(),Bl=Tl.schema(),Al=ol.schema(),Nl=Ml.schema(),Hl=_l.schema(),Pl=(Wf=oe((nl=te("Creating behaviour: "+(Uf={branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Rl,cyclic:Fl,flow:Il,flatgrid:Vl,matrix:Bl,execution:Al,menu:Nl,special:Hl}),name:"keying",active:{events:function(n,e){return n.handler.toEvents(n,e)}},apis:{focusIn:function(e,t,o){t.sendFocusIn(t).fold(function(){e.getSystem().triggerFocus(e.element,e.element)},function(n){n(e,t,o)})},setGridSize:function(n,e,t,o,r){yn(t,"setGridSize")?t.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:rl}).name,nf,Uf)).branchKey,nl.branches),Xf=nl.name,qf=nl.active,Yf=nl.apis,Kf=nl.extra,Jf=nl.state,Zf=se(Xf,[ae("config",Qf=Wf)]),Ys(Qf,Zf,Xf,qf,Yf,Kf,Jf)),zl=Fo,jl=Io,Ll="placeholder",$l=me([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Gl=function(r,i,u,c){return n=r,t=c,(Vo(e=u)&&e.uiType===Ll?(a=e,s=t,(o=n).exists(function(n){return n!==a.owner})?$l.single(!0,w(a)):bn(s,a.name).fold(function(){throw new Error("Unknown placeholder component: "+a.name+"\nKnown: ["+ls(s)+"]\nNamespace: "+o.getOr("none")+"\nSpec: "+JSON.stringify(a,null,2))},function(n){return n.replace()})):$l.single(!1,w(e))).fold(function(n,e){var t=Vo(u)?e(i,u.config,u.validated):e(i),o=M(bn(t,"components").getOr([]),function(n){return Gl(r,i,n,c)});return[Ac(Ac({},t),{components:o})]},function(n,e){if(Vo(u)){var t=e(i,u.config,u.validated);return u.validated.preprocess.getOr(K)(t)}return e(i)});var n,e,t,o,a,s},Ul=$l.single,Wl=$l.multiple,Xl=w(Ll),ql=0,Yl=me([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Kl=le("factory",{sketch:K}),Jl=le("schema",[]),Ql=re("name"),Zl=As("pname","pname",zn(function(n){return"<alloy."+Bo(n.name)+">"}),Is()),nd=Ns("schema",function(){return[ce("preprocess")]}),ed=le("defaults",w({})),td=le("overrides",w({})),od=Fs([Kl,Jl,Ql,Zl,ed,td]),rd=Fs([Kl,Jl,Ql,ed,td]),id=Fs([Kl,Jl,Ql,Zl,ed,td]),ud=Fs([Kl,nd,Ql,re("unit"),Zl,ed,td]),cd=No(Yl.required,od);No(Yl.external,rd);var ad=No(Yl.optional,id),sd=No(Yl.group,ud),fd=w("entirety"),ld=function(n,e){return{uiType:Xl(),owner:n,name:e}},dd=Bo("alloy-premade"),md=w("alloy-id-"),gd=w("data-alloy-id"),pd=md(),hd=gd(),vd=function(n,e){Object.defineProperty(n.dom,hd,{value:e,writable:!0})},bd=Bo,yd=function(n){return gs(n,"uid")?n:Ac(Ac({},n),{uid:bd("uid")})},xd=Yn([re("name"),re("factory"),re("configFields"),le("apis",{}),le("extraApis",{})]),wd=Yn([re("name"),re("factory"),re("configFields"),re("partFields"),le("apis",{}),le("extraApis",{})]),Sd=Yo({name:"Button",factory:function(n){function t(e){return bn(n.dom,"attributes").bind(function(n){return bn(n,e)})}var e,o=(e=n.action,$s(p([e.map(function(t){return Xs(function(n,e){t(n),e.stop()})}).toArray(),tt()]))),r=n.dom.tag;return{uid:n.uid,dom:n.dom,components:n.components,events:o,behaviours:jl(n.buttonBehaviours,[_f.config({}),Pl.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==r)return{role:t("role").getOr("button")};var n=t("type").getOr("button"),e=t("role").map(function(n){return{role:n}}).getOr({});return Ac({type:n},e)}()},eventOrder:n.eventOrder}},configFields:[le("uid",void 0),re("dom"),le("components",[]),zl("buttonBehaviours",[_f,Pl]),ce("action"),ce("role"),le("eventOrder",{})]}),Od=Re({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return $s([we(Ma(),Wc)])},exhibit:function(){return De({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),kd=function(n,e,t,o){return Sd.sketch({dom:er(n,o),action:e,buttonBehaviours:Ds(Qs([Od.config({})]),t)})},Td=ad({schema:[re("dom")],name:"label"}),Cd=tr("top-left"),Ed=tr("top"),Dd=tr("top-right"),Md=tr("right"),_d=tr("bottom-right"),Rd=tr("bottom"),Fd=tr("bottom-left"),Id=[Td,tr("left"),Md,Ed,Rd,Cd,Dd,Fd,_d,cd({name:"thumb",defaults:w({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:$s([Te(ha(),n,"spectrum"),Te(va(),n,"spectrum"),Te(ba(),n,"spectrum"),Te(ya(),n,"spectrum"),Te(xa(),n,"spectrum"),Te(wa(),n,"spectrum")])}}}),cd({schema:[Ns("mouseIsDown",function(){return Fe(!1)})],name:"spectrum",overrides:function(t){function o(e,n){return r.getValueFromEvent(n).map(function(n){return r.setValueFrom(e,t,n)})}var r=t.model.manager;return{behaviours:Qs([Pl.config({mode:"special",onLeft:function(n){return r.onLeft(n,t)},onRight:function(n){return r.onRight(n,t)},onUp:function(n){return r.onUp(n,t)},onDown:function(n){return r.onDown(n,t)}}),_f.config({})]),events:$s([Se(ha(),o),Se(va(),o),Se(ya(),o),Se(xa(),function(n,e){t.mouseIsDown.get()&&o(n,e)})])}}})],Vd=Object.freeze({__proto__:null,onLoad:or,onUnload:rr,setValue:function(n,e,t,o){e.store.manager.setValue(n,e,t,o)},getValue:function(n,e,t){return e.store.manager.getValue(n,e,t)},getState:function(n,e,t){return t}}),Bd=Object.freeze({__proto__:null,events:function(e,t){var n=e.resetOnDom?[Gs(function(n){or(n,e,t)}),Us(function(n){rr(n,e,t)})]:[Me(e,t,or)];return $s(n)}}),Ad=Object.freeze({__proto__:null,memory:ir,dataset:ur,manual:function(){return Js({readState:Y})},init:function(n){return n.store.manager.state(n)}}),Nd=[ce("initialValue"),re("getFallbackEntry"),re("getDataKey"),re("setValue"),Ue("manager",{setValue:cr,getValue:function(n,e,t){var o=e.store,r=o.getDataKey(n);return t.lookup(r).getOrThunk(function(){return o.getFallbackEntry(r)})},onLoad:function(e,t,o){t.store.initialValue.each(function(n){cr(e,t,o,n)})},onUnload:function(n,e,t){t.clear()},state:ur})],Hd=[re("getValue"),le("setValue",Y),ce("initialValue"),Ue("manager",{setValue:function(n,e,t,o){e.store.setValue(n,o),e.onSetValue(n,o)},getValue:function(n,e){return e.store.getValue(n)},onLoad:function(e,t){t.store.initialValue.each(function(n){t.store.setValue(e,n)})},onUnload:Y,state:Ks.init})],Pd=Re({fields:[de("store",{mode:"memory"},oe("mode",{memory:[ce("initialValue"),Ue("manager",{setValue:function(n,e,t,o){t.set(o),e.onSetValue(n,o)},getValue:function(n,e,t){return t.get()},onLoad:function(n,e,t){e.store.initialValue.each(function(n){t.isNotSet()&&t.set(n)})},onUnload:function(n,e,t){t.clear()},state:ir})],manual:Hd,dataset:Nd})),je("onSetValue"),le("resetOnDom",!1)],name:"representing",active:Bd,apis:Vd,extra:{setValueFrom:function(n,e){var t=Pd.getValue(e);Pd.setValue(n,t)}},state:Ad}),zd=dt("width",function(n){return n.dom.offsetWidth}),jd=function(t,o){return{left:t,top:o,translate:function(n,e){return jd(t+n,o+e)}}},Ld=jd,$d=w("slider.change.value"),Gd="left",Ud=Qr(-1),Wd=Qr(1),Xd=Yc.none,qd=Yc.none,Yd={"top-left":Yc.none(),top:Yc.none(),"top-right":Yc.none(),right:Yc.some(function(n,e){Br(n,{x:vr(e)})}),"bottom-right":Yc.none(),bottom:Yc.none(),"bottom-left":Yc.none(),left:Yc.some(function(n,e){Br(n,{x:mr(e)})})},Kd=Object.freeze({__proto__:null,setValueFrom:function(n,e,t){var o=Jr(n,e,t);return Kr(n,{x:o}),o},setToMin:function(n,e){Kr(n,{x:lr(e)})},setToMax:function(n,e){Kr(n,{x:pr(e)})},findValueOfOffset:Jr,getValueFromEvent:function(n){return fr(n).map(function(n){return n.left})},findPositionOfValue:Zr,setPositionFromValue:function(n,e,t,o){var r=Ir(t),i=Zr(n,o.getSpectrum(n),r.x,o.getLeftEdge(n),o.getRightEdge(n),t),u=sr(e.element)/2;ut(e.element,"left",i-u+"px")},onLeft:Ud,onRight:Wd,onUp:Xd,onDown:qd,edgeActions:Yd}),Jd=Yc.none,Qd=Yc.none,Zd=ti(-1),nm=ti(1),em={"top-left":Yc.none(),top:Yc.some(function(n,e){Br(n,{y:gr(e)})}),"top-right":Yc.none(),right:Yc.none(),"bottom-right":Yc.none(),bottom:Yc.some(function(n,e){Br(n,{y:br(e)})}),"bottom-left":Yc.none(),left:Yc.none()},tm=Object.freeze({__proto__:null,setValueFrom:function(n,e,t){var o=ei(n,e,t);return ni(n,{y:o}),o},setToMin:function(n,e){ni(n,{y:dr(e)})},setToMax:function(n,e){ni(n,{y:hr(e)})},findValueOfOffset:ei,getValueFromEvent:function(n){return fr(n).map(function(n){return n.top})},findPositionOfValue:oi,setPositionFromValue:function(n,e,t,o){var r=Ir(t),i=oi(n,o.getSpectrum(n),r.y,o.getTopEdge(n),o.getBottomEdge(n),t),u=mt(e.element)/2;ut(e.element,"top",i-u+"px")},onLeft:Jd,onRight:Qd,onUp:Zd,onDown:nm,edgeActions:em}),om=fr,rm=ui(-1,!1),im=ui(1,!1),um=ui(-1,!0),cm=ui(1,!0),am={"top-left":Yc.some(function(n,e){Br(n,Vr(mr(e),gr(e)))}),top:Yc.some(function(n,e){Br(n,Vr(Sr(e),gr(e)))}),"top-right":Yc.some(function(n,e){Br(n,Vr(vr(e),gr(e)))}),right:Yc.some(function(n,e){Br(n,Vr(vr(e),Or(e)))}),"bottom-right":Yc.some(function(n,e){Br(n,Vr(vr(e),br(e)))}),bottom:Yc.some(function(n,e){Br(n,Vr(Sr(e),br(e)))}),"bottom-left":Yc.some(function(n,e){Br(n,Vr(mr(e),br(e)))}),left:Yc.some(function(n,e){Br(n,Vr(mr(e),Or(e)))})},sm=Object.freeze({__proto__:null,setValueFrom:function(n,e,t){var o=ii(Jr(n,e,t.left),ei(n,e,t.top));return ri(n,o),o},setToMin:function(n,e){ri(n,ii(lr(e),dr(e)))},setToMax:function(n,e){ri(n,ii(pr(e),hr(e)))},getValueFromEvent:om,setPositionFromValue:function(n,e,t,o){var r=Ir(t),i=Zr(n,o.getSpectrum(n),r.x,o.getLeftEdge(n),o.getRightEdge(n),t),u=oi(n,o.getSpectrum(n),r.y,o.getTopEdge(n),o.getBottomEdge(n),t),c=sr(e.element)/2,a=mt(e.element)/2;ut(e.element,"left",i-c+"px"),ut(e.element,"top",u-a+"px")},onLeft:rm,onRight:im,onUp:um,onDown:cm,edgeActions:am}),fm=[le("stepSize",1),le("onChange",Y),le("onChoose",Y),le("onInit",Y),le("onDragStart",Y),le("onDragEnd",Y),le("snapToGrid",!1),le("rounded",!0),ce("snapStart"),ie("model",oe("mode",{x:[le("minX",0),le("maxX",100),Ns("value",function(n){return Fe(n.mode.minX)}),re("getInitialValue"),Ue("manager",Kd)],y:[le("minY",0),le("maxY",100),Ns("value",function(n){return Fe(n.mode.minY)}),re("getInitialValue"),Ue("manager",tm)],xy:[le("minX",0),le("maxX",100),le("minY",0),le("maxY",100),Ns("value",function(n){return Fe({x:n.mode.minX,y:n.mode.minY})}),re("getInitialValue"),Ue("manager",sm)]})),Fo("sliderBehaviours",[Pl,Pd]),Ns("mouseIsDown",function(){return Fe(!1)})],lm=w("mouse.released"),dm=Ko({name:"Slider",configFields:fm,partFields:Id,factory:function(r,n){function i(n){return Lo(n,r,"thumb")}function u(n){return Lo(n,r,"spectrum")}function t(n){return jo(n,r,"left-edge")}function o(n){return jo(n,r,"right-edge")}function c(n){return jo(n,r,"top-edge")}function a(n){return jo(n,r,"bottom-edge")}function s(n,e){p.setPositionFromValue(n,e,r,{getLeftEdge:t,getRightEdge:o,getTopEdge:c,getBottomEdge:a,getSpectrum:u})}function f(n,e){g.value.set(e),s(n,i(n))}function l(t){var n=r.mouseIsDown.get();r.mouseIsDown.set(!1),n&&jo(t,r,"thumb").each(function(n){var e=g.value.get();r.onChoose(t,n,e)})}function e(n,e){e.stop(),r.mouseIsDown.set(!0),r.onDragStart(n,i(n))}function d(n,e){e.stop(),r.onDragEnd(n,i(n)),l(n)}var m,g=r.model,p=g.manager;return{uid:r.uid,dom:r.dom,components:n,behaviours:Io(r.sliderBehaviours,[Pl.config({mode:"special",focusIn:function(n){return jo(n,r,"spectrum").map(Pl.focusIn).map(Wc)}}),Pd.config({store:{mode:"manual",getValue:function(){return g.value.get()}}}),Sf.config({channels:((m={})[lm()]={onReceive:l},m)})]),events:$s([Se($d(),function(n,e){!function(n,e){f(n,e);var t=i(n);r.onChange(n,t,e),Yc.some(!0)}(n,e.event.value)}),Gs(function(n){var e=g.getInitialValue();g.value.set(e);var t=i(n);s(n,t);var o=u(n);r.onInit(n,t,o,g.value.get())}),Se(ha(),e),Se(ba(),d),Se(ya(),e),Se(wa(),d)]),apis:{resetToMin:function(n){p.setToMin(n,r)},resetToMax:function(n){p.setToMax(n,r)},setValue:f,refresh:s},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(n,e,t){n.setValue(e,t)},resetToMin:function(n,e){n.resetToMin(e)},resetToMax:function(n,e){n.resetToMax(e)},refresh:function(n,e){n.refresh(e)}}}),mm=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],gm=w(mm),pm=Yn([re("getInitialValue"),re("onChange"),re("category"),re("sizes")]),hm=gm(),vm={},bm={exports:vm};!function(){var n=this,e=function(){function o(){}function i(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(n,this)}function r(t,o){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var n,e=1===t._state?o.onFulfilled:o.onRejected;if(null!==e){try{n=e(t._value)}catch(n){return void c(o.promise,n)}u(o.promise,n)}else(1===t._state?u:c)(o.promise,t._value)})):t._deferreds.push(o)}function u(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof i)return n._state=3,n._value=e,void a(n);if("function"==typeof t)return void f((o=t,r=e,function(){o.apply(r,arguments)}),n)}n._state=1,n._value=e,a(n)}catch(e){c(n,e)}var o,r}function c(n,e){n._state=2,n._value=e,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&i._immediateFn(function(){n._handled||i._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)r(n,n._deferreds[e]);n._deferreds=null}function s(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function f(n,e){var t=!1;try{n(function(n){t||(t=!0,u(e,n))},function(n){t||(t=!0,c(e,n))})}catch(n){if(t)return;t=!0,c(e,n)}}var n,e,t,l={exports:{}};n=l,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=setTimeout,i.prototype["catch"]=function(n){return this.then(null,n)},i.prototype.then=function(n,e){var t=new this.constructor(o);return r(this,new s(n,e,t)),t},i.all=function(n){var c=Array.prototype.slice.call(n);return new i(function(o,r){if(0===c.length)return o([]);for(var i=c.length,n=0;n<c.length;n++)!function u(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if("function"==typeof t)return t.call(n,function(n){u(e,n)},r),0}c[e]=n,0==--i&&o(c)}catch(n){r(n)}}(n,c[n])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(n){n(e)})},i.reject=function(t){return new i(function(n,e){e(t)})},i.race=function(r){return new i(function(n,e){for(var t=0,o=r.length;t<o;t++)r[t].then(n,e)})},i._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){t(n,0)},i._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},i._setImmediateFn=function(n){i._immediateFn=n},i._setUnhandledRejectionFn=function(n){i._unhandledRejectionFn=n},n.exports?n.exports=i:e.Promise||(e.Promise=i);var d=l.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||d}};"object"==typeof vm&&void 0!==bm?bm.exports=e():(n="undefined"!=typeof globalThis?globalThis:n||self).EphoxContactWrapper=e()}();var ym,xm=bm.exports.boltExport,wm=function(n){return wt(Wa.fromDom(n.selection.getStart()),"a")},Sm=ga(),Om=Object.freeze({__proto__:null,getCurrent:function(n,e){return e.find(n)}}),km=Re({fields:[re("find")],name:"composing",apis:Om}),Tm=Yo({name:"Container",factory:function(n){var e=n.dom,t=e.attributes,o=c(e,["attributes"]);return{uid:n.uid,dom:Ac({tag:"div",attributes:Ac({role:"presentation"},t)},o),components:n.components,behaviours:n.containerBehaviours.dump,events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[le("components",[]),Fo("containerBehaviours",[]),le("events",{}),le("domModification",{}),le("eventOrder",{})]}),Cm=Yo({name:"DataField",factory:function(e){return{uid:e.uid,dom:e.dom,behaviours:jl(e.dataBehaviours,[Pd.config({store:{mode:"memory",initialValue:e.getInitialValue()}}),km.config({find:Yc.some})]),events:$s([Gs(function(n){Pd.setValue(n,e.getInitialValue())})])}},configFields:[re("uid"),re("dom"),re("getInitialValue"),zl("dataBehaviours",[Pd,km])]}),Em=Yo({name:"Input",configFields:w([ce("data"),le("inputAttributes",{}),le("inputStyles",{}),le("tag","input"),le("inputClasses",[]),je("onSetValue"),le("styles",{}),le("eventOrder",{}),Fo("inputBehaviours",[Pd,_f]),le("selectOnFocus",!0)])(),factory:function(n){return{uid:n.uid,dom:{tag:(t=n).tag,attributes:Ac({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses},components:[],behaviours:(e=n,Ac(Ac({},Qs([_f.config({onFocus:e.selectOnFocus?function(n){var e=n.element,t=bi(e);e.dom.setSelectionRange(0,t.length)}:Y})])),Io(e.inputBehaviours,[Pd.config({store:Ac(Ac({mode:"manual"},e.data.map(function(n){return{initialValue:n}}).getOr({})),{getValue:function(n){return bi(n.element)},setValue:function(n,e){bi(n.element)!==e&&yi(n.element,e)}}),onSetValue:e.onSetValue})]))),eventOrder:n.eventOrder};var e,t}}),Dm=Object.freeze({__proto__:null,exhibit:function(n,e){return De({attributes:pe([{key:e.tabAttr,value:"true"}])})}}),Mm=Re({fields:[le("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:Dm}),_m=tinymce.util.Tools.resolve("tinymce.util.I18n"),Rm=["input","button","textarea","select"],Fm=function(e,n){n.disableClass.each(function(n){Mn(e.element,n)}),(Si(e,n)?function(n){wn(n.element,"disabled","disabled")}:function(n){wn(n.element,"aria-disabled","true")})(e),n.onDisabled(e)},Im=function(e,n){n.disableClass.each(function(n){_n(e.element,n)}),(Si(e,n)?function(n){Cn(n.element,"disabled")}:function(n){wn(n.element,"aria-disabled","false")})(e),n.onEnabled(e)},Vm=Object.freeze({__proto__:null,enable:Im,disable:Fm,isDisabled:Oi,onLoad:wi,set:function(n,e,t,o){(o?Fm:Im)(n,e)}}),Bm=Object.freeze({__proto__:null,exhibit:function(n,e){return De({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(e,n){return $s([we(Ba(),function(n){return Oi(n,e)}),Me(e,n,wi)])}}),Am=Re({fields:[de("disabled",Uc,Vs),le("useNative",!0),ce("disableClass"),je("onDisabled"),je("onEnabled")],name:"disabling",active:Bm,apis:Vm}),Nm=[Fo("formBehaviours",[Pd])],Hm=(Uo(function(n,e,t){return n.getField(e,t)}),function(n){var r,e={field:function(n,e){return r.push(n),t=ki(n),o=e,{uiType:Xl(),owner:"form",name:t,config:o,validated:{}};var t,o},record:w(r=[])},t=n(e),o=Z(e.record(),function(n){return cd({name:n,pname:ki(n)})});return qo("form",Nm,o,fu,t)}),Pm=f(function(t,o){function r(e,n,t){return Sd.sketch({dom:Jo('<span class="${prefix}-icon-'+n+' ${prefix}-icon"></span>'),action:function(n){B(n,c,{direction:e})},buttonBehaviours:Qs([Am.config({disableClass:Ef("toolbar-navigation-disabled"),disabled:function(){return!t}})])})}function i(n,r){var i=gt(n.element,"."+Ef("serialised-dialog-screen"));xt(n.element,"."+Ef("serialised-dialog-chain")).each(function(o){0<=a.state.currentScreen.get()+r&&a.state.currentScreen.get()+r<i.length&&(st(o,"left").each(function(n){var e=parseInt(n,10),t=sr(i[0]);ut(o,"left",e-r*t+"px")}),a.state.currentScreen.set(a.state.currentScreen.get()+r))})}function u(o){var n=gt(o.element,"input");Yc.from(n[a.state.currentScreen.get()]).each(function(n){o.getSystem().getByDom(n).each(function(n){var e=o,t=n.element;e.getSystem().triggerFocus(t,e.element)})});var e=f.get(o);Gf.highlightAt(e,a.state.currentScreen.get())}return[{label:"the link group",items:[(n={fields:[xi("url","Type or paste URL"),xi("text","Link text"),xi("title","Link title"),xi("target","Link target"),{name:"link",spec:Cm.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return Yc.none()}})}],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return Yc.some(wm(n=o).fold(function(){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:Yc.none()}},function(n){return t=mi(e=n),o=On(e,"href"),r=On(e,"title"),i=On(e,"target"),{url:pi(o),text:t!==o?pi(t):"",title:pi(r),target:pi(i),link:Yc.some(e)};var e,t,o,r,i}));var n},onExecute:function(n){var e=Pd.getValue(n);hi(o,e),t.restoreToolbar(),o.focus()}},c="navigateEvent",a=te("SerialisedDialog",Fs([re("fields"),le("maxFieldIndex",n.fields.length-1),re("onExecute"),re("getInitialValue"),Ns("state",function(){return{dialogSwipeState:Jt(),currentScreen:Fe(0)}})]),n),s=li(Hm(function(t){return{dom:Jo('<div class="${prefix}-serialised-dialog"></div>'),components:[Tm.sketch({dom:Jo('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:Z(a.fields,function(n,e){return e<=a.maxFieldIndex?Tm.sketch({dom:Jo('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[r(-1,"previous",0<e),t.field(n.name,n.spec),r(1,"next",e<a.maxFieldIndex)]}):t.field(n.name,n.spec)})})],formBehaviours:Qs([nt(function(n,e){var t=e;xt(n.element,"."+Ef("serialised-dialog-chain")).each(function(n){ut(n,"left",-a.state.currentScreen.get()*t.width+"px")})}),Pl.config({mode:"special",focusIn:function(n){u(n)},onTab:function(n){return i(n,1),Yc.some(!0)},onShiftTab:function(n){return i(n,-1),Yc.some(!0)}}),vi("form-events",[Gs(function(e){a.state.currentScreen.set(0),a.state.dialogSwipeState.clear();var n=f.get(e);Gf.highlightFirst(n),a.getInitialValue(e).each(function(n){Pd.setValue(e,n)})}),Xs(a.onExecute),Se(Da(),function(n,e){"left"===e.event.raw.propertyName&&u(n)}),Se(c,function(n,e){i(n,e.event.direction)})])])}})),f=li({dom:Jo('<div class="${prefix}-dot-container"></div>'),behaviours:Qs([Gf.config({highlightClass:Ef("dot-active"),itemClass:Ef("dot-item")})]),components:M(a.fields,function(n,e){return e<=a.maxFieldIndex?[Qo('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})}),{dom:Jo('<div class="${prefix}-serializer-wrapper"></div>'),components:[s.asSpec(),f.asSpec()],behaviours:Qs([Pl.config({mode:"special",focusIn:function(n){var e=s.get(n);Pl.focusIn(e)}}),vi("serializer-wrapper-events",[Se(ha(),function(n,e){var t=e.event;a.state.dialogSwipeState.set({xValue:t.raw.touches[0].clientX,points:[]})}),Se(va(),function(n,e){var t=e.event;a.state.dialogSwipeState.on(function(n){e.event.prevent(),a.state.dialogSwipeState.set(function(n,e){if(e===n.xValue)return n;var t=0<e-n.xValue?1:-1,o={direction:t,xValue:e};return{xValue:e,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===t?n.points.slice(0,n.points.length-1):n.points).concat([o])}}(n,t.raw.touches[0].clientX))})}),Se(ba(),function(n){a.state.dialogSwipeState.on(function(t){i(s.get(n),-1*function(){if(0===t.points.length)return 0;var n=t.points[0].direction,e=t.points[t.points.length-1].direction;return-1===n&&-1===e?-1:1===n&&1===e?1:0}())})})])])})]}];var n,c,a,s,f}),zm=$s([{key:Ra(),value:xe({can:function(n,e){var t,o=e.event,r=o.originator,i=o.target;return!(L(t=r,n.element)&&!L(t,i)&&(console.warn(Ra()+" did not get interpreted by the desired target. \nOriginator: "+He(r)+"\nTarget: "+He(i)+"\nCheck the "+Ra()+" event handlers"),1))}})}]),jm=Object.freeze({__proto__:null,events:zm}),Lm=K,$m=Ci(),Gm=function(n,c){var e,t,o,r,i,u,a=vn(n,function(r,u){return(1===r.length?bs.value(r[0].handler):_i(r,c,u)).map(function(n){var e,i,t=(i=$c(e=n)?{can:Wc,abort:Uc,run:e}:e,function(n,e){for(var t=[],o=2;o<arguments.length;o++)t[o-2]=arguments[o];var r=[n,e].concat(t);i.abort.apply(void 0,r)?e.stop():i.can.apply(void 0,r)&&i.run.apply(void 0,r)}),o=1<r.length?y(c[u],function(e){return d(r,function(n){return n.name===e})}).join(" > "):r[0].name;return ge(u,{handler:t,purpose:o})})});return e={},t=[],o=[],D(a,function(n){n.fold(function(n){t.push(n)},function(n){o.push(n)})}),0<(u={errors:t,values:o}).errors.length?bs.error(p(u.errors)):(i=e,0===(r=u.values).length?bs.value(i):bs.value(Ds(i,Ms.apply(void 0,r))))},Um="alloy.base.behaviour",Wm=Fs([As("dom","dom",Pn(),Fs([re("tag"),le("styles",{}),le("classes",[]),le("attributes",{}),ce("value"),ce("innerHtml")])),re("components"),re("uid"),le("events",{}),le("apis",{}),As("eventOrder","eventOrder",((ym={})[Ba()]=["disabling",Um,"toggling","typeaheadevents"],ym[Ra()]=[Um,"focusing","keying"],ym[Pa()]=[Um,"disabling","toggling","representing"],ym[Ta()]=[Um,"representing","streaming","invalidating"],ym[ja()]=[Um,"representing","item-events","tooltipping"],ym[ya()]=["focusing",Um,"item-type-events"],ym[ha()]=["focusing",Um,"item-type-events"],ym[Sa()]=["item-type-events","tooltipping"],ym[Va()]=["receiving","reflecting","tooltipping"],$n(w(ym))),Is()),ce("domModification")]),Xm=bd,qm=function(u){return bn(u,dd).getOrThunk(function(){var n,e,t,o,r,i=gs(u,"uid")?u:Ac({uid:Xm("")},u);return e=(n=Lm(i)).events,o=Z(bn(t=c(n,["events"]),"components").getOr([]),qm),r=Ac(Ac({},t),{events:Ac(Ac({},jm),e),components:o}),bs.value(Ai(r)).getOrDie()})},Ym=Go,Km="alloy.item-hover",Jm="alloy.item-focus",Qm=w(Km),Zm=w(Jm),ng=[re("data"),re("components"),re("dom"),le("hasSubmenu",!1),ce("toggling"),zl("itemBehaviours",[Tf,_f,Pl,Pd]),le("ignoreFocus",!1),le("domModification",{}),Ue("builder",function(n){return{dom:n.dom,domModification:Ac(Ac({},n.domModification),{attributes:Ac(Ac(Ac({role:n.toggling.isSome()?"menuitemcheckbox":"menuitem"},n.domModification.attributes),{"aria-haspopup":n.hasSubmenu}),n.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:jl(n.itemBehaviours,[n.toggling.fold(Tf.revoke,function(n){return Tf.config(Ac({aria:{mode:"checked"}},n))}),_f.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:function(n){Pi(n)}}),Pl.config({mode:"execution"}),Pd.config({store:{mode:"memory",initialValue:n.data}}),vi("item-type-events",u(u([],tt(),!0),[Se(Sa(),Hi),Se(Aa(),_f.focus)],!1))]),components:n.components,eventOrder:n.eventOrder}}),le("eventOrder",{})],eg=[re("dom"),re("components"),Ue("builder",function(n){return{dom:n.dom,components:n.components,events:$s([Se(Aa(),function(n,e){e.stop()})])}})],tg=w("item-widget"),og=w([cd({name:"widget",overrides:function(n){return{behaviours:Qs([Pd.config({store:{mode:"manual",getValue:function(){return n.data},setValue:Y}})])}}})]),rg=oe("type",{widget:[re("uid"),re("data"),re("components"),re("dom"),le("autofocus",!1),le("ignoreFocus",!1),zl("widgetBehaviours",[Pd,_f,Pl]),le("domModification",{}),$o(og()),Ue("builder",function(t){function o(n){return jo(n,t,"widget").map(function(n){return Pl.focusIn(n),n})}function n(n,e){return Ut(e.event.target)||t.autofocus&&e.setSource(n.element),Yc.none()}var e=Po(tg(),t,og()),r=zo(tg(),t,e.internals());return{dom:t.dom,components:r,domModification:t.domModification,events:$s([Xs(function(n,e){o(n).each(function(){e.stop()})}),Se(Sa(),Hi),Se(Aa(),function(n){t.autofocus?o(n):_f.focus(n)})]),behaviours:jl(t.widgetBehaviours,[Pd.config({store:{mode:"memory",initialValue:t.data}}),_f.config({ignore:t.ignoreFocus,onFocus:function(n){Pi(n)}}),Pl.config({mode:"special",focusIn:t.autofocus?function(n){o(n)}:ef(),onLeft:n,onRight:n,onEscape:function(n,e){return _f.isFocused(n)||t.autofocus?(t.autofocus&&e.setSource(n.element),Yc.none()):(_f.focus(n),Yc.some(!0))}})])}})],item:ng,separator:eg}),ig=w([sd({factory:{sketch:function(n){var e=te("menu.spec item",rg,n);return e.builder(e)}},
name:"items",unit:"item",defaults:function(n,e){return gs(e,"uid")?e:Ac(Ac({},e),{uid:bd("item")})},overrides:function(n,e){return{type:e.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),ug=w([re("value"),re("items"),re("dom"),re("components"),le("eventOrder",{}),Fo("menuBehaviours",[Gf,Pd,km,Pl]),de("movement",{mode:"menu",moveOnTab:!0},oe("mode",{grid:[wf(),Ue("config",function(n,e){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:n.focusManager}})],matrix:[Ue("config",function(n,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}}),re("rowSelector")],menu:[le("moveOnTab",!0),Ue("config",function(n,e){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:e.moveOnTab,focusManager:n.focusManager}})]})),ie("markers",xf()),le("fakeFocus",!1),le("focusManager",Nt()),je("onHighlight")]),cg=w("alloy.menu-focus"),ag=Ko({name:"Menu",configFields:ug(),partFields:ig(),factory:function(n,e){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Io(n.menuBehaviours,[Gf.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),Pd.config({store:{mode:"memory",initialValue:n.value}}),km.config({find:Yc.some}),Pl.config(n.movement.config(n,n.movement))]),events:$s([Se(Zm(),function(e,t){var n=t.event;e.getSystem().getByDom(n.target).each(function(n){Gf.highlight(e,n),t.stop(),B(e,cg(),{menu:e,item:n})})}),Se(Qm(),function(n,e){var t=e.event.item;Gf.highlight(n,t)})]),components:e,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}}}),sg=function(n){return n.components()},fg=Re({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(n,e,t,o){zi(n,0,ns,o)},prepend:function(n,e,t,o){zi(n,0,cn,o)},remove:ji,replaceAt:Li,replaceBy:function(e,n,t,o,r){return S(sg(e),o).bind(function(n){return Li(e,0,0,n,r)})},set:function(r,n,e,i){var t,o,u,c;t=function(){var e,n,t,o;n=Z(i,r.getSystem().build),o=(e=r).components(),D((t=e).components(),function(n){return es(n.element)}),sn(t.element),t.syncComponents(),D(k(o,n),function(n){as(n),e.getSystem().removeFromWorld(n)}),D(n,function(n){n.getSystem().isConnected()?mn(e,n):(e.getSystem().addToWorld(n),mn(e,n),us(e.element)&&ss(n)),e.syncComponents()})},o=r.element,c=Be(u=rs(o)).bind(function(e){function n(n){return L(e,n)}var r,i;return n(o)?Yc.some(o):(r=n,(i=function(n){for(var e=0;e<n.childNodes.length;e++){var t=Wa.fromDom(n.childNodes[e]);if(r(t))return Yc.some(t);var o=i(n.childNodes[e]);if(o.isSome())return o}return Yc.none()})(o.dom))}),t(o),c.each(function(e){Be(u).filter(function(n){return L(n,e)}).fold(function(){Ie(e)},Y)})},contents:sg})}),lg=function(t,o,r,n){return bn(r,n).bind(function(n){return bn(t,n).bind(function(n){var e=lg(t,o,r,n);return Yc.some([n].concat(e))})}).getOr([])},dg=function(){function c(i){return function(n){for(var e=ls(n),t=0,o=e.length;t<o;t++){var r=n[e[t]];if(r===i)return Yc.some(r)}return Yc.none()}(r.get())}function a(n){return e(n).bind(lu)}function t(n){return bn(r.get(),n)}var r=Fe({}),i=Fe({}),s=Fe({}),f=Jt(),l=Fe({}),e=function(n){return bn(i.get(),n)};return{setMenuBuilt:function(n,e){var t;i.set(Ac(Ac({},i.get()),((t={})[n]={type:"prepared",menu:e},t)))},setContents:function(n,e,t,u){f.set(n),r.set(t),i.set(e),l.set(u);var o=function(n,e){var t={};pn(u,function(n,e){D(n,function(n){t[n]=e})});var o=e,r=ms(e,function(n,e){return{k:n,v:e}}),i=hn(r,function(n,e){return[e].concat(lg(t,o,r,e))});return hn(t,function(n){return bn(i,n).getOr([n])})}(0,t);s.set(o)},expand:function(t){return bn(r.get(),t).map(function(n){var e=bn(s.get(),t).getOr([]);return[n].concat(e)})},refresh:function(n){return bn(s.get(),n)},collapse:function(n){return bn(s.get(),n).bind(function(n){return 1<n.length?Yc.some(n.slice(1)):Yc.none()})},lookupMenu:e,lookupItem:t,otherMenus:function(n){var e=l.get();return k(ls(e),n)},getPrimary:function(){return f.get().bind(a)},getMenus:function(){return i.get()},clear:function(){r.set({}),i.set({}),s.set({}),f.clear()},isClear:function(){return f.get().isNone()},getTriggeringPath:function(n,u){var e=y(t(n).toArray(),function(n){return a(n).isSome()});return bn(s.get(),n).bind(function(n){var i=O(e.concat(n));return function(n){for(var e=[],t=0;t<n.length;t++){var o=n[t];if(!o.isSome())return Yc.none();e.push(o.getOrDie())}return Yc.some(e)}(M(i,function(n,e){return t=n,o=u,r=i.slice(0,e+1),a(t).bind(function(e){return c(t).bind(function(n){return o(n).map(function(n){return{triggeredMenu:e,triggeringItem:n,triggeringPath:r}})})}).fold(function(){return he(f.get(),n)?[]:[Yc.none()]},function(n){return[Yc.some(n)]});var t,o,r}))})}}},mg=lu,gg=w("collapse-item"),pg=Yo({name:"TieredMenu",configFields:[Ge("onExecute"),Ge("onEscape"),$e("onOpenMenu"),$e("onOpenSubmenu"),je("onRepositionMenu"),je("onCollapseMenu"),le("highlightImmediately",!0),ue("data",[re("primary"),re("menus"),re("expansions")]),le("fakeFocus",!1),je("onHighlight"),je("onHover"),ue("markers",[re("backgroundMenu")].concat(hf()).concat(vf())),re("dom"),le("navigateOnHover",!0),le("stayInDom",!1),Fo("tmenuBehaviours",[Pl,Gf,km,fg]),le("eventOrder",{})],apis:{collapseMenu:function(n,e){n.collapseMenu(e)},highlightPrimary:function(n,e){n.highlightPrimary(e)},repositionMenus:function(n,e){n.repositionMenus(e)}},factory:function(c){function n(n){var o,r,e=(o=n,r=c.data.primary,hn(c.data.menus,function(n,e){function t(){return ag.sketch(Ac(Ac({},n),{value:e,markers:c.markers,fakeFocus:c.fakeFocus,onHighlight:c.onHighlight,focusManager:(c.fakeFocus?Ht:Nt)()}))}return e===r?{type:"prepared",menu:o.getSystem().build(t())}:{type:"notbuilt",nbMenu:t}})),t=hn(c.data.menus,function(n){return M(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})});return p.setContents(c.data.primary,e,c.data.expansions,t),p.getPrimary()}function a(n){return Pd.getValue(n).value}function i(e,n){Gf.highlight(e,n),Gf.getHighlighted(n).orThunk(function(){return Gf.getFirst(n)}).each(function(n){N(e,n.element,Aa())})}function u(e,n){return ve(Z(n,function(n){return e.lookupMenu(n).bind(function(n){return"prepared"===n.type?Yc.some(n.menu):Yc.none()})}))}function s(e,n,t){D(u(n,n.otherMenus(t)),function(n){Fi(n.element,[c.markers.backgroundMenu]),c.stayInDom||fg.remove(e,n)})}function f(n,o){var e;pn((e=n,g.get().getOrThunk(function(){var t={};return D(y(gt(e.element,"."+c.markers.item),function(n){return"true"===On(n,"aria-haspopup")}),function(n){e.getSystem().getByDom(n).each(function(n){var e=a(n);t[e]=n})}),g.set(t),t})),function(n,e){var t=b(o,e);wn(n.element,"aria-expanded",t)})}function l(t,o,r){return Yc.from(r[0]).bind(function(n){return o.lookupMenu(n).bind(function(n){if("notbuilt"===n.type)return Yc.none();var e=n.menu;return D(u(o,r.slice(1)),function(n){Mn(n.element,c.markers.backgroundMenu)}),us(e.element)||fg.append(t,Ym(e)),Fi(e.element,[c.markers.backgroundMenu]),i(t,e),s(t,o,r),Yc.some(e)})})}function d(r,i,u){if(void 0===u&&(u=m.HighlightSubmenu),i.hasConfigured(Am)&&Am.isDisabled(i))return Yc.some(i);var n=a(i);return p.expand(n).bind(function(o){return f(r,o),Yc.from(o[0]).bind(function(t){return p.lookupMenu(t).bind(function(n){var e=function(n,e,t){if("notbuilt"!==t.type)return t.menu;var o=n.getSystem().build(t.nbMenu());return p.setMenuBuilt(e,o),o}(r,t,n);return us(e.element)||fg.append(r,Ym(e)),c.onOpenSubmenu(r,i,e,O(o)),u===m.HighlightSubmenu?(Gf.highlightFirst(e),l(r,p,o)):(Gf.dehighlightAll(e),Yc.some(i))})})})}function o(e,t){var n=a(t);return p.collapse(n).bind(function(n){return f(e,n),l(e,p,n).map(function(n){return c.onCollapseMenu(e,t,n),n})})}function e(t){return function(e,n){return wt(n.getSource(),"."+c.markers.item).bind(function(n){return e.getSystem().getByDom(n).toOptional().bind(function(n){return t(e,n).map(Wc)})})}}function t(n){return Gf.getHighlighted(n).bind(Gf.getHighlighted)}var m,r,g=Jt(),p=dg();(r=m={})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var h=$s([Se(cg(),function(t,o){var n=o.event.item;p.lookupItem(a(n)).each(function(){var n=o.event.menu;Gf.highlight(t,n);var e=a(o.event.item);p.refresh(e).each(function(n){return s(t,p,n)})})}),Xs(function(e,n){var t=n.event.target;e.getSystem().getByDom(t).each(function(n){0===a(n).indexOf("collapse-item")&&o(e,n),d(e,n,m.HighlightSubmenu).fold(function(){c.onExecute(e,n)},Y)})}),Gs(function(e){n(e).each(function(n){fg.append(e,Ym(n)),c.onOpenMenu(e,n),c.highlightImmediately&&i(e,n)})})].concat(c.navigateOnHover?[Se(Qm(),function(n,e){var t=e.event.item,o=n,r=a(t);p.refresh(r).bind(function(n){return f(o,n),l(o,p,n)}),d(n,t,m.HighlightParent),c.onHover(n,t)})]:[])),v={collapseMenu:function(e){t(e).each(function(n){o(e,n)})},highlightPrimary:function(e){p.getPrimary().each(function(n){i(e,n)})},repositionMenus:function(o){p.getPrimary().bind(function(e){return t(o).bind(function(n){var e=a(n),t=ve(Z(vn(p.getMenus(),K),mg));return p.getTriggeringPath(e,function(n){return e=n,C(t,function(n){return n.getSystem().isConnected()?x(Gf.getCandidates(n),function(n){return a(n)===e}):Yc.none()});var e})}).map(function(n){return{primary:e,triggeringPath:n}})}).fold(function(){Yc.from(o.components()[0]).filter(function(n){return"menu"===On(n.element,"role")}).each(function(n){c.onRepositionMenu(o,n,[])})},function(n){var e=n.primary,t=n.triggeringPath;c.onRepositionMenu(o,e,t)})}};return{uid:c.uid,dom:c.dom,markers:c.markers,behaviours:Io(c.tmenuBehaviours,[Pl.config({mode:"special",onRight:e(function(n,e){return Ut(e.element)?Yc.none():d(n,e,m.HighlightSubmenu)}),onLeft:e(function(n,e){return Ut(e.element)?Yc.none():o(n,e)}),onEscape:e(function(n,e){return o(n,e).orThunk(function(){return c.onEscape(n,e).map(function(){return n})})}),focusIn:function(e){p.getPrimary().each(function(n){N(e,n.element,Aa())})}}),Gf.config({highlightClass:c.markers.selectedMenu,itemClass:c.markers.menu}),km.config({find:function(n){return Gf.getHighlighted(n)}}),fg.config({})]),eventOrder:c.eventOrder,apis:v,events:h}},extraApis:{tieredData:function(n,e,t){return{primary:n,menus:e,expansions:t}},singleData:function(n,e){return{primary:n,menus:ge(n,e),expansions:{}}},collapseItem:function(n){return{value:Bo(gg()),meta:{text:n}}}}}),hg=function(n,e,t,o){return $i(0,e,0,o).bind(function(e){return e.transition.map(function(n){return{transition:n,route:e}})})},vg=function(e,t){return kn(e.element,t.destinationAttr).map(function(n){return{start:On(e.element,t.stateAttr),destination:n}})},bg=Object.freeze({__proto__:null,findRoute:$i,disableTransition:Gi,getCurrentRoute:vg,jumpTo:Ui,progressTo:function(t,o,r,i){var e,u=o;Tn((e=t).element,u.destinationAttr)&&(kn(e.element,u.destinationAttr).each(function(n){wn(e.element,u.stateAttr,n)}),Cn(e.element,u.destinationAttr));var n,c=(n=i,{start:On(t.element,o.stateAttr),destination:n});hg(t,o,r,c).fold(function(){Ui(t,o,r,i)},function(n){Gi(t,o,r);var e=n.transition;Mn(t.element,e.transitionClass),wn(t.element,o.destinationAttr,i)})},getState:function(n,e){return kn(n.element,e.stateAttr)}}),yg=Object.freeze({__proto__:null,events:function(r,i){return $s([Se(Da(),function(t,n){var o=n.event.raw;vg(t,r).each(function(e){$i(0,r,0,e).each(function(n){n.transition.each(function(n){o.propertyName===n.property&&(Ui(t,r,i,e.destination),r.onTransition(t,e))})})})}),Gs(function(n){Ui(n,r,i,r.initialState)})])}}),xg=Re({fields:[le("destinationAttr","data-transitioning-destination"),le("stateAttr","data-transitioning-state"),re("initialState"),je("onTransition"),je("onFinish"),ie("routes",Zn(bs.value,Zn(bs.value,Yn([fe("transition",[re("property"),re("transitionClass")])]))))],name:"transitioning",active:yg,apis:bg,extra:{createRoutes:function(n){var o={};return pn(n,function(n,e){var t=e.split("<->");o[t[0]]=ge(t[1],n),o[t[1]]=ge(t[0],n)}),o},createBistate:function(n,e,t){return pe([{key:n,value:ge(e,t)},{key:e,value:ge(n,t)}])},createTristate:function(n,e,t,o){return pe([{key:n,value:pe([{key:e,value:o},{key:t,value:o}])},{key:e,value:pe([{key:n,value:o},{key:t,value:o}])},{key:t,value:pe([{key:n,value:o},{key:e,value:o}])}])}}}),wg=Ef("scrollable"),Sg=wg,Og=function(n,e,t,o,r){return{data:{value:n,text:e},type:"item",dom:{tag:"div",classes:r?[Ef("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:Ef("format-matches"),selected:t},itemBehaviours:Qs(r?[]:[Ze(n,function(n,e){(e?Tf.on:Tf.off)(n)})]),components:[{dom:{tag:"div",attributes:{style:o},innerHtml:e}}]}},kg=function(n,e,t,o){return{value:n,dom:{tag:"div"},components:[Sd.sketch({dom:{tag:"div",classes:[Ef("styles-collapser")]},components:o?[{dom:{tag:"span",classes:[Ef("styles-collapse-icon")]}},Ni(n)]:[Ni(n)],action:function(n){var e;o&&(e=t().get(n),pg.collapseMenu(e))}}),{dom:{tag:"div",classes:[Ef("styles-menu-items-container")]},components:[ag.parts.items({})],behaviours:Qs([vi("adhoc-scrollable-menu",[Gs(function(n){ut(n.element,"overflow-y","auto"),ut(n.element,"-webkit-overflow-scrolling","touch"),Wi(n.element)}),Us(function(n){ft(n.element,"overflow-y"),ft(n.element,"-webkit-overflow-scrolling"),Xi(n.element)})])])}],items:e,menuBehaviours:Qs([xg.config({initialState:"after",routes:xg.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Tg=function(n){return m(n,function(n,e){var t=Yi(e);return{menus:Ds(n.menus,t.menus),items:[t.item].concat(n.items),expansions:Ds(n.expansions,t.expansions)}},{menus:{},expansions:{},items:[]})},Cg=function(n){return M(n,function(n){return(Pc(n)?Cg:Ji)(n)})},Eg=function(n,e,t,o){n.dom.removeEventListener(e,t,o)},Dg=Wc,Mg=tinymce.util.Tools.resolve("tinymce.util.Delay"),_g=me([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);_g.ltr,_g.rtl;var Rg,Fg,Ig,Vg,Bg=function(n,e,t,o){return{start:n,soffset:e,finish:t,foffset:o}},Ag=(Rg=Ka,{get:function(n){if(!Rg(n))throw new Error("Can only get text value of a text node");return Fg(n).getOr("")},getOption:Fg=function(n){return Rg(n)?Yc.from(n.dom.nodeValue):Yc.none()},set:function(n,e){if(!Rg(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=e}}),Ng=me([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Hg={before:Ng.before,on:Ng.on,after:Ng.after,cata:function(n,e,t,o){return n.fold(e,t,o)},getStart:function(n){return n.fold(K,K,K)}},Pg=me([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),zg={domRange:Pg.domRange,relative:Pg.relative,exact:Pg.exact,exactFromRange:function(n){return Pg.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){var e=n.match({domRange:function(n){return Wa.fromDom(n.startContainer)},relative:function(n){return Hg.getStart(n)},exact:function(n){return n}});return Wa.fromDom(en(e).dom.defaultView)},range:Bg},jg=(Ig=xu,function(e){return e.getWin.getOrThunk(function(){var n=Su(e);return function(){return Ig(n)}})()}),Lg="data-ephox-mobile-fullscreen-style",$g="position:absolute!important;",Gg="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ug=ga().os.isAndroid(),Wg=6<=ga().os.version.major,Xg="data-"+Ef("last-outer-height"),qg=w({unbind:Y}),Yg=Fs([ue("editor",[re("getFrame"),ce("getBody"),ce("getDoc"),ce("getWin"),ce("getSelection"),ce("setSelection"),ce("clearSelection"),ce("cursorSaver"),ce("onKeyup"),ce("onNodeChanged"),ce("getCursorBox"),re("onDomChanged"),le("onTouchContent",Y),le("onTapContent",Y),le("onTouchToolstrip",Y),le("onScrollToCursor",qg),le("onScrollToElement",qg),le("onToEditing",qg),le("onToReading",qg),le("onToolbarScrollStart",K)]),re("socket"),re("toolstrip"),re("dropup"),re("toolbar"),re("container"),re("alloy"),Ns("win",function(n){return nn(n.socket).dom.defaultView}),Ns("body",function(n){return Wa.fromDom(n.socket.dom.ownerDocument.body)}),le("translate",K),le("setReadOnly",Y),le("readOnlyOnInit",Wc)]),Kg=w([re("dom"),le("shell",!0),Fo("toolbarBehaviours",[fg])]),Jg=w([ad({name:"groups",overrides:function(){return{behaviours:Qs([fg.config({})])}}})]),Qg=Ko({name:"Toolbar",configFields:Kg(),partFields:Jg(),factory:function(o,n){var e=o.shell?{behaviours:[fg.config({})],components:[]}:{behaviours:[],components:n};return{uid:o.uid,dom:o.dom,components:e.components,behaviours:Io(o.toolbarBehaviours,e.behaviours),apis:{setGroups:function(n,e){var t;t=n,(o.shell?Yc.some(t):jo(t,o,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(n){fg.set(n,e)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,e,t){n.setGroups(e,t)}}}),Zg=w([re("items"),ue("markers",Z(["itemSelector"],re)),Fo("tgroupBehaviours",[Pl])]),np=w([sd({name:"items",unit:"item"})]),ep=Ko({name:"ToolbarGroup",configFields:Zg(),partFields:np(),factory:function(n,e){return{uid:n.uid,dom:n.dom,components:e,behaviours:Io(n.tgroupBehaviours,[Pl.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),tp="data-"+Ef("horizontal-scroll"),op=Object.freeze({__proto__:null,refresh:function(n,e,t){var o;t.isExpanded()&&(ft(n.element,Xu(e)),o=qu(e,n.element),ut(n.element,Xu(e),o))},grow:function(n,e,t){t.isExpanded()||nc(n,e,t)},shrink:function(n,e,t){t.isExpanded()&&Zu(n,e,t)},immediateShrink:function(n,e,t){t.isExpanded()&&Qu(n,e,t)},hasGrown:function(n,e,t){return t.isExpanded()},hasShrunk:function(n,e,t){return t.isCollapsed()},isGrowing:ec,isShrinking:tc,isTransitioning:function(n,e){return ec(n,e)||tc(n,e)},toggleGrow:function(n,e,t){(t.isExpanded()?Zu:nc)(n,e,t)},disableTransitions:Yu}),rp=Object.freeze({__proto__:null,exhibit:function(n,e){return De(e.expanded?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:ge(e.dimension.property,"0px")})},events:function(t,o){return $s([ke(Da())(function(n,e){e.event.raw.propertyName===t.dimension.property&&(Yu(n,t),o.isExpanded()&&ft(n.element,t.dimension.property),(o.isExpanded()?t.onGrown:t.onShrunk)(n))})])}}),ip=Re({fields:[re("closedClass"),re("openClass"),re("shrinkingClass"),re("growingClass"),ce("getAnimationRoot"),je("onShrunk"),je("onStartShrink"),je("onGrown"),je("onStartGrow"),le("expanded",!1),ie("dimension",oe("property",{width:[Ue("property","width"),Ue("getDimension",function(n){return sr(n)+"px"})],height:[Ue("property","height"),Ue("getDimension",function(n){return mt(n)+"px"})]}))],name:"sliding",active:rp,apis:op,state:Object.freeze({__proto__:null,init:function(n){var e=Fe(n.expanded);return Js({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:J(e.set,!1),setExpanded:J(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),up=me([{stopped:[]},{resume:["element"]},{complete:[]}]),cp=function(e,t,o,n,r,i){return cc(e,t,o,n,r,i).fold(Wc,function(n){return cp(e,t,o,n,r,i)},Uc)},ap=function(t){function o(e){return tn(t.element).fold(Wc,function(n){return L(e,n)})}function u(n,e){return i.find(o,n,e)}function r(e){D(i.filter(Va()),function(n){Di(n.descHandler)(e)})}var i=sc(),n=ic(t.element,{triggerEvent:function(e,t){return Pe(e,t.target,function(n){return fc(u,e,t,t.target,n)})}}),c={debugInfo:w("real"),triggerEvent:function(e,t,o){Pe(e,t,function(n){return fc(u,e,o,t,n)})},triggerFocus:function(r,i){Wo(r).fold(function(){Ie(r)},function(){Pe(Ra(),r,function(n){var e,t,o=n;return cc(u,Ra(),e,t,uc(e={originator:i,kill:Y,prevent:Y,target:r},t=r),o),!1})})},triggerEscape:function(n,e){c.triggerEvent("keydown",n.element,e.event)},getByUid:function(n){return g(n)},getByDom:function(n){return p(n)},build:qm,addToGui:function(n){s(n)},removeFromGui:function(n){f(n)},addToWorld:function(n){e(n)},removeFromWorld:function(n){a(n)},broadcast:function(n){l(n)},broadcastOn:function(n,e){d(n,e)},broadcastEvent:function(n,e){m(n,e)},isConnected:Wc},e=function(n){n.connect(c),Ka(n.element)||(i.register(n),D(n.components(),e),c.triggerEvent(Pa(),n.element,{target:n.element}))},a=function(n){Ka(n.element)||(D(n.components(),a),i.unregister(n)),n.disconnect()},s=function(n){fs(t,n,ns)},f=function(n){gn(n)},l=function(n){r({universal:!0,data:n})},d=function(n,e){r({universal:!1,channels:n,data:e})},m=function(n,e){var t,o,r=i.filter(n);return o={stop:function(){t.set(!0)},cut:Y,isStopped:(t=Fe(!1)).get,isCut:Uc,event:e,setSource:h("Cannot set source of a broadcasted event"),getSource:h("Cannot get source of a broadcasted event")},D(r,function(n){Di(n.descHandler)(o)}),o.isStopped()},g=function(n){return i.getById(n).fold(function(){return bs.error(new Error('Could not find component with uid: "'+n+'" in system.'))},bs.value)},p=function(n){var e=Wo(n).getOr("not found");return g(e)};return e(t),{root:t,element:t.element,destroy:function(){n.unbind(),es(t.element)},add:s,remove:f,getByUid:g,getByDom:p,addToWorld:e,removeFromWorld:a,broadcast:l,broadcastOn:d,broadcastEvent:m}},sp=Ef("readonly-mode"),fp=Ef("edit-mode"),lp=function(n){function o(n){r()?i(n):e.push(n)}var t=Yc.none(),e=[],r=function(){return t.isSome()},i=function(e){t.each(function(n){setTimeout(function(){e(n)},0)})};return n(function(n){r()||(t=Yc.some(n),D(e,i),e=[])}),{get:o,map:function(t){return lp(function(e){o(function(n){e(t(n))})})},isReady:r}},dp={nu:lp,pure:function(e){return lp(function(n){n(e)})}},mp=function(t){function n(n){t().then(n,hc)}return{map:function(n){return mp(function(){return t().then(n)})},bind:function(e){return mp(function(){return t().then(function(n){return e(n).toPromise()})})},anonBind:function(n){return mp(function(){return t().then(function(){return n.toPromise()})})},toLazy:function(){return dp.nu(n)},toCached:function(){var n=null;return mp(function(){return n=null===n?t():n})},toPromise:t,get:n}},gp=function(n){return mp(function(){return new xm(n)})},pp=function(n){return mp(function(){return xm.resolve(n)})},hp=me([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),vp="data-"+Ef("position-y-fixed"),bp="data-"+Ef("y-property"),yp="data-"+Ef("scrolling"),xp="data-"+Ef("last-window-height"),wp=(Vg=null,{animate:function(r,i,u,c,e,n){function a(n){f=!0,e(n)}function s(n){Mg.clearInterval(Vg),a(n)}var f=!1;Mg.clearInterval(Vg),Vg=Mg.setInterval(function(){var t=r(),n=t,e=i,o=u;(Math.abs(n-e)<=o?Yc.none():n<e?Yc.some(n+o):Yc.some(n-o)).fold(function(){Mg.clearInterval(Vg),a(i)},function(n){var e;c(n,s),f||((e=r())!==n||Math.abs(e-i)>Math.abs(t-i))&&(Mg.clearInterval(Vg),a(i))})},n)}}),Sp="data-"+Ef("last-scroll-top"),Op=tinymce.util.Tools.resolve("tinymce.EditorManager"),kp="toReading",Tp="toEditing";rf.add("mobile",function(E){return{getNotificationManagerImpl:function(){return{open:w({progressBar:{value:Y},close:Y,text:Y,getEl:w(null),moveTo:Y,moveRel:Y,settings:{}}),close:Y,reposition:Y,getArgs:w({})}},renderUI:function(){function n(){E.fire("ScrollIntoView")}function g(n,e,t,o){!1===o&&E.selection.collapse();var r,i,u,c=(r=e,i=t,{readOnly:(u=n.get()).backToMask.concat(r.get()),main:u.backToMask.concat(i.get())});O.setToolbarGroups(!0===o?c.readOnly:c.main),E.setMode(!0===o?"readonly":"design"),E.fire(!0===o?kp:Tp),O.updateMode(o)}function p(n,e){return E.on(n,e),{unbind:function(){E.off(n)}}}var e,t,o=E.getElement(),r={content:(e=Yc.from(E.getParam("skin_url")).getOrThunk(function(){return Op.baseURL+"/skins/ui/oxide"}))+"/content.mobile.min.css",ui:e+"/skin.mobile.min.css"};!1===E.getParam("skin")==0?(t=of.DOM.styleSheetLoader,E.contentCSS.push(r.content),t.load(r.ui,Vc(E)),E.on("remove",function(){return t.unload(r.ui)})):Vc(E)();var i,u,c,a,s,f,l,d,m,h,v,b,y,x,w,S,O=ga().os.isAndroid()?(i=n,u=lc({classes:[Ef("android-container")]}),c=Lu(),a=Kt(),s=$u(a),f=Gu(),l=oc(Y,i),u.add(c.wrapper),u.add(f),u.add(l.component),{system:u,element:u.element,init:function(n){a.set(zu(n))},exit:function(){a.run(function(n){n.exit(),fg.remove(f,s)})},setToolbarGroups:function(n){var e=c.createGroups(n);c.setGroups(e)},setContextToolbar:function(n){var e=c.createGroups(n);c.setContextToolbar(e)},focusToolbar:function(){c.focus()},restoreToolbar:function(){c.restoreToolbar()},updateMode:function(n){Uu(f,s,n,u.root)},socket:f,dropup:l}):(m=n,h=lc({classes:[Ef("ios-container")]}),v=Lu(),b=Kt(),y=$u(b),x=Gu(),w=oc(function(){b.run(function(n){n.refreshStructure()})},m),h.add(v.wrapper),h.add(x),h.add(w.component),{system:h,element:h.element,init:function(o){b.set(function(){var n=te("Getting IosWebapp schema",Yg,o);ut(n.toolstrip,"width","100%"),ut(n.container,"position","relative");var e=qm(Pu(function(){n.setReadOnly(n.readOnlyOnInit()),t.enter()},n.translate));n.alloy.add(e);var t=Fc(n,{show:function(){n.alloy.add(e)},hide:function(){n.alloy.remove(e)}});return{setReadOnly:n.setReadOnly,refreshStructure:t.refreshStructure,enter:t.enter,exit:t.exit,destroy:Y}}())},exit:function(){b.run(function(n){fg.remove(x,y),n.exit()})},setToolbarGroups:function(n){var e=v.createGroups(n);v.setGroups(e)},setContextToolbar:function(n){var e=v.createGroups(n);v.setContextToolbar(e)},focusToolbar:function(){v.focus()},restoreToolbar:function(){v.restoreToolbar()},updateMode:function(n){Uu(x,y,n,h.root)},socket:x,dropup:w}),k=Wa.fromDom(o);d=O.system,un(k,(S=d).element),D(Za(S.element),function(n){S.getByDom(n).each(ss)});var T=o.ownerDocument.defaultView,C=ru(T,{onChange:function(){var n,e,t;O.system.broadcastOn([sf],{width:(n=T,e=ga().os.isiOS(),t=ou(n).isPortrait(),e&&!t?n.screen.height:n.screen.width)})},onReady:Y});return E.on("init",function(){O.init({editor:{getFrame:function(){return Wa.fromDom(E.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:Y}},onToReading:function(n){return p(kp,n)},onToEditing:function(n){return p(Tp,n)},onScrollToCursor:function(e){return E.on("ScrollIntoView",function(n){e(n)}),{unbind:function(){E.off("ScrollIntoView"),C.destroy()}}},onTouchToolstrip:function(){i()},onTouchContent:function(){Ae(Wa.fromDom(E.editorContainer.querySelector("."+Ef("toolbar")))).bind(function(n){return O.system.getByDom(n).toOptional()}).each(A),O.restoreToolbar(),i()},onTapContent:function(n){var e=n.target;"img"===X(e)?(E.selection.select(e.dom),n.kill()):"a"===X(e)&&O.system.getByDom(Wa.fromDom(E.editorContainer)).each(function(n){tf.isAlpha(n)&&function(n){var e=document.createElement("a");e.target="_blank",e.href=n.href,e.rel="noreferrer noopener";var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(e.dom)})}},container:Wa.fromDom(E.editorContainer),socket:Wa.fromDom(E.contentAreaContainer),toolstrip:Wa.fromDom(E.editorContainer.querySelector("."+Ef("toolstrip"))),toolbar:Wa.fromDom(E.editorContainer.querySelector("."+Ef("toolbar"))),dropup:O.dropup,alloy:O.system,translate:Y,setReadOnly:function(n){g(d,l,f,n)},readOnlyOnInit:function(){return!1}});var t,n,o,r,e,i=function(){O.dropup.disappear(function(){O.system.broadcastOn([ff],{})})},u={label:"The first group",scrollable:!1,items:[kd("back",function(){E.selection.collapse(),O.exit()},{},E)]},c={label:"Back to read only",scrollable:!1,items:[kd("readonly-back",function(){g(d,l,f,!0)},{},E)]},a=Qi(O,E),s={label:"The extra group",scrollable:!1,items:[]},f=Fe([{label:"the action group",scrollable:!0,items:(t=a,e=E.getParam("toolbar",cf,"array"),n=(Pc(e)?Cg:Ji)(e),o={},M(n,function(n){var e=!yn(o,n)&&yn(t,n)&&t[n].isSupported()?[t[n].sketch()]:[];return o[n]=!0,e}))},s]),l=Fe([{label:"The read only mode group",scrollable:!0,items:[]},s]),d=Fe({backToMask:[u],backToReadOnly:[c]}),m=O;D(ls((r=E).formatter.get()),function(e){r.formatter.formatChanged(e,function(n){Ic(m,e,n)})}),D(["ul","ol"],function(e){r.selection.selectorChanged(e,function(n){Ic(m,e,n)})})}),E.on("remove",function(){O.exit()}),E.on("detach",function(){var e=O.system;D(Za(e.element),function(n){e.getByDom(n).each(as)}),es(e.element),O.system.destroy()}),{iframeContainer:O.socket.element.dom,editorContainer:O.element.dom}}}})}();