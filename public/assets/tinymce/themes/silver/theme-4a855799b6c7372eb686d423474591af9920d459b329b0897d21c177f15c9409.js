!function(v){"use strict";function Q(){}function d(e,o){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(o.apply(null,t))}}function f(t){return t}function m(o){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=r.concat(t);return o.apply(null,e)}}function b(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}}function i(t){return function(){throw new Error(t)}}function h(t,n){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(e[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(e[o[r]]=t[o[r]])}return e}function y(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var o=Array(t),r=0;for(n=0;n<e;n++)for(var i=arguments[n],u=0,a=i.length;u<a;u++,r++)o[r]=i[u];return o}function t(){return bh}function c(t){return t.isNone()}function n(t){return t()}function e(t){return t}function o(n){return function(t){return function(t){if(null===t)return"null";var n=typeof t;return"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(t)===n}}function s(t,n){if(_h(t)){for(var e=0,o=t.length;e<o;++e)if(!0!==n(t[e]))return!1;return!0}return!1}function u(t,n){return Ah.call(t,n)}function l(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return!0;return!1}function g(t,n){for(var e=[],o=0;o<t.length;o+=n){var r=Dh.call(t,o,o+n);e.push(r)}return e}function x(t,n){for(var e=t.length,o=new Array(e),r=0;r<e;r++){var i=t[r];o[r]=n(i,r)}return o}function w(t,n){for(var e=[],o=0,r=t.length;o<r;o++){var i=t[o];n(i,o)&&e.push(i)}return e}function p(t,n,e){return function(t,n){for(var e=t.length-1;0<=e;e--)n(t[e],e)}(t,function(t){e=n(e,t)}),e}function S(t,n,e){return Ih(t,function(t){e=n(e,t)}),e}function C(t,n){for(var e=0,o=t.length;e<o;e++){var r=t[e];if(n(r,e))return xh.some(r)}return xh.none()}function k(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return xh.some(e);return xh.none()}function N(t){for(var n=[],e=0,o=t.length;e<o;++e){if(!_h(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);Mh.apply(n,t[e])}return n}function O(t,n){return N(x(t,n))}function _(t,n){for(var e=0,o=t.length;e<o;++e)if(!0!==n(t[e],e))return!1;return!0}function T(t){var n=Dh.call(t,0);return n.reverse(),n}function E(t,n){return w(t,function(t){return!Fh(n,t)})}function r(t){return[t]}function B(t,n){var e=Dh.call(t,0);return e.sort(n),e}function D(t){return 0===t.length?xh.none():xh.some(t[t.length-1])}function A(t,n){for(var e=0;e<t.length;e++){var o=n(t[e],e);if(o.isSome())return o}return xh.none()}function P(t,e){return zh(t,function(t,n){return{k:n,v:e(t,n)}})}function M(t,n){for(var e=Hh(t),o=0,r=e.length;o<r;o++){var i=e[o],u=t[i];if(n(u,i,t))return xh.some(u)}return xh.none()}function F(t){return Lh(t,function(t){return t})}function I(t,n){return Uh(t,n)&&t[n]!==undefined&&null!==t[n]}function a(u){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var e={},o=0;o<t.length;o++){var r=t[o];for(var i in r)Gh.call(r,i)&&(e[i]=u(e[i],r[i]))}return e}}function R(e){var o,r=!1;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r||(r=!0,o=e.apply(null,t)),o}}function V(t,n,e){return t.stype===fh.Error?n(t.serror):e(t.svalue)}function H(t){return{stype:fh.Value,svalue:t}}function z(t){return{stype:fh.Error,serror:t}}function L(t){return _v.defaultedThunk(mh(t))}function j(t,n){var e;return(e={})[t]=n,e}function U(t,n){return e=n,o={},Ph(t,function(t,n){Fh(e,n)||(o[n]=t)}),o;var e,o}function W(t,n){return j(t,n)}function G(t){return n={},Ih(t,function(t){n[t.key]=t.value}),n;var n}function X(t,n){var e,o,r,i,u,a=(e=[],o=[],Ih(t,function(t){t.fold(function(t){e.push(t)},function(t){o.push(t)})}),{errors:e,values:o});return 0<a.errors.length?(u=a.errors,Ch.error(N(u))):(r=a.values,i=n,0===r.length?Ch.value(i):Ch.value(Xh(i,Yh.apply(undefined,r))))}function Y(t){return d(wv,N)(t)}function q(t){return Oh(t)&&100<Hh(t).length?" removed due to size":JSON.stringify(t,null,2)}function K(t,n){return wv([{path:t,getErrorInfo:n}])}function J(e,o,r){return jh(o,r).fold(function(){return t=r,n=o,K(e,function(){return'Could not find valid *strict* value for "'+t+'" in '+q(n)});var t,n},yv)}function $(t,n,e){var o=jh(t,n).fold(function(){return e(t)},f);return yv(o)}function Z(a,c,t,s){return t.fold(function(r,e,t,o){function i(t){var n=o.extract(a.concat([r]),s,t);return kv(n,function(t){return j(e,s(t))})}function u(t){return t.fold(function(){var t=j(e,s(xh.none()));return yv(t)},function(t){var n=o.extract(a.concat([r]),s,t);return kv(n,function(t){return j(e,s(xh.some(t)))})})}return t.fold(function(){return Sv(J(a,c,r),i)},function(t){return Sv($(c,r,t),i)},function(){return Sv(yv(jh(c,r)),u)},function(t){return Sv((e=t,o=jh(n=c,r).map(function(t){return!0===t?e(n):t}),yv(o)),u);var n,e,o},function(t){var n=t(c),e=kv($(c,r,mh({})),function(t){return Xh(n,t)});return Sv(e,i)})},function(t,n){var e=n(c);return yv(j(t,s(e)))})}function tt(o){return{extract:function(e,t,n){return Cv(o(n,t),function(t){return n=t,K(e,function(){return n});var n})},toString:function(){return"val"}}}function nt(t){var u=Iv(t),a=p(t,function(n,t){return t.fold(function(t){return Xh(n,W(t,!0))},mh(n))},{});return{extract:function(t,n,e){var o,r,i=w(Th(e)?[]:w(Hh(o=e),function(t){return I(o,t)}),function(t){return!I(a,t)});return 0===i.length?u.extract(t,n,e):(r=i,K(t,function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"}))},toString:u.toString}}function et(r){return{extract:function(e,o,t){var n=x(t,function(t,n){return r.extract(e.concat(["["+n+"]"]),o,t)});return Mv(n)},toString:function(){return"array("+r.toString()+")"}}}function ot(a,c){return{extract:function(e,o,r){var t,n,i=Hh(r),u=(t=e,n=i,et(tt(a)).extract(t,f,n));return Sv(u,function(t){var n=x(t,function(t){return Fv.field(t,t,Tv(),c)});return Iv(n).extract(e,o,r)})},toString:function(){return"setOf("+c.toString()+")"}}}function rt(e,n,o,r,i){return jh(r,i).fold(function(){return t=r,n=i,K(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+q(t)});var t,n},function(t){return t.extract(e.concat(["branch: "+i]),n,o)})}function it(r,i){return{extract:function(n,e,o){return jh(o,r).fold(function(){return t=r,K(n,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(t){return rt(n,e,o,i,t)})},toString:function(){return"chooseOn("+r+"). Possible values: "+Hh(i)}}}function ut(t){return Vv(t)}function at(n){return tt(function(t){return n(t).fold(wv,yv)})}function ct(n,t){return ot(function(t){return vv(n(t))},t)}function st(t,n,e){return bv((o=t,r=f,i=e,u=n.extract([o],r,i),Ov(u,function(t){return{input:i,errors:t}})));var o,r,i,u}function lt(t){return t.fold(function(t){throw new Error(Lv(t))},f)}function ft(t,n,e){return lt(st(t,n,e))}function dt(t,n){return it(t,n)}function mt(t,n){return it(t,P(n,Iv))}function gt(e,o){return tt(function(t){var n=typeof t;return e(t)?yv(t):wv("Expected type: "+o+" but got: "+n)})}function pt(n){return at(function(t){return Fh(n,t)?Ch.value(t):Ch.error('Unsupported value: "'+t+'", choose one of "'+n.join(", ")+'".')})}function ht(t){return Nv(t,t,Tv(),Rv())}function vt(t,n){return Nv(t,t,Tv(),n)}function bt(t){return vt(t,Wv)}function yt(t,n){return Nv(t,t,Tv(),pt(n))}function xt(t){return vt(t,Xv)}function wt(t,n){return Nv(t,t,Tv(),Iv(n))}function St(t,n){return Nv(t,t,Tv(),Vv(n))}function Ct(t,n){return Nv(t,t,Tv(),et(n))}function kt(t){return Nv(t,t,Ev(),Rv())}function Ot(t,n){return Nv(t,t,Ev(),n)}function _t(t){return Ot(t,Uv)}function Tt(t){return Ot(t,Wv)}function Et(t){return Ot(t,Xv)}function Bt(t,n){return Ot(t,Iv(n))}function Dt(t,n){return Nv(t,t,L(n),Rv())}function At(t,n,e){return Nv(t,t,L(n),e)}function Mt(t,n){return At(t,n,Uv)}function Ft(t,n){return At(t,n,Wv)}function It(t,n,e){return At(t,n,pt(e))}function Rt(t,n){return At(t,n,Gv)}function Vt(t,n){return At(t,n,Xv)}function Ht(t,n,e){return At(t,n,Iv(e))}function Nt(t,n){return Hv(t,n)}function Pt(t,n,e){return 0!=(t.compareDocumentPosition(n)&e)}function zt(t,n){function e(t){return Number(n.replace(o,"$"+t))}var o=function(t,n){for(var e=0;e<t.length;e++){var o=t[e];if(o.test(n))return o}return undefined}(t,n);return o?tb(e(1),e(2)):{major:0,minor:0}}function Lt(t,n){return function(){return n===t}}function jt(t,n){return function(){return n===t}}function Ut(t,n){var e=String(n).toLowerCase();return C(t,function(t){return t.search(e)})}function Wt(t,n){return-1!==t.indexOf(n)}function Gt(n){return function(t){return Wt(t,n)}}function Xt(){return bb.get()}function Yt(t,n){var e=t.dom();if(e.nodeType!==Sb)return!1;var o=e;if(o.matches!==undefined)return o.matches(n);if(o.msMatchesSelector!==undefined)return o.msMatchesSelector(n);if(o.webkitMatchesSelector!==undefined)return o.webkitMatchesSelector(n);if(o.mozMatchesSelector!==undefined)return o.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function qt(t){return t.nodeType!==Sb&&t.nodeType!==Cb||0===t.childElementCount}function Kt(t,n){var e=n===undefined?v.document:n.dom();return qt(e)?[]:x(e.querySelectorAll(t),$v.fromDom)}function Jt(t,n){return t.dom()===n.dom()}function $t(t,n,e){for(var o=t.dom(),r=Eh(e)?e:mh(!1);o.parentNode;){o=o.parentNode;var i=$v.fromDom(o),u=n(i);if(u.isSome())return u;if(r(i))break}return xh.none()}function Qt(t,n){return Jt(t.element(),n.event().target())}function Zt(t){if(!I(t,"can")&&!I(t,"abort")&&!I(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return ft("Extracting event.handler",nt([Dt("can",mh(!0)),Dt("abort",mh(!1)),Dt("run",Q)]),t)}function tn(e){var n,o,r,i;return Zt({can:(r=e,i=function(t){return t.can},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(r,function(t,n){return t&&i(n).apply(undefined,e)},!0)}),abort:(n=e,o=function(t){return t.abort},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(n,function(t,n){return t||o(n).apply(undefined,e)},!1)}),run:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];Ih(e,function(t){t.run.apply(undefined,n)})}})}function nn(t,n){hy(t,t.element(),n,{})}function en(t,n,e){hy(t,t.element(),n,e)}function on(t){nn(t,Kb())}function rn(t,n,e){hy(t,n,e,{})}function un(t,n,e,o){t.getSystem().triggerEvent(e,n,o.event())}function an(t){return G(t)}function cn(t,n){return{key:t,value:Zt({abort:n})}}function sn(t){return{key:t,value:Zt({run:function(t,n){n.event().prevent()}})}}function ln(t,n){return{key:t,value:Zt({run:n})}}function fn(t,e,o){return{key:t,value:Zt({run:function(t,n){e.apply(undefined,[t,n].concat(o))}})}}function dn(t){return function(e){return{key:t,value:Zt({run:function(t,n){Qt(t,n)&&e(t,n)}})}}}function mn(t,n,e){return o=t,r=n.partUids[e],ln(o,function(t,n){t.getSystem().getByUid(r).each(function(t){un(t,t.element(),o,n)})});var o,r}function gn(t,r){return ln(t,function(n,t){var e=t.event(),o=n.getSystem().getByDom(e.target()).fold(function(){return Ob(e.target(),function(t){return n.getSystem().getByDom(t).toOption()},mh(!1)).getOr(n)},function(t){return t});r(n,o,t)})}function pn(t){return ln(t,function(t,n){n.cut()})}function hn(t,n){return dn(t)(n)}function vn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(n.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+e.length+" arguments");var o={};return Ih(n,function(t,n){o[t]=mh(e[n])}),o}}function bn(t){return t.slice(0).sort()}function yn(n,t){if(!_h(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");Ih(t,function(t){if(!kh(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")})}function xn(r,i){var e,u=r.concat(i);if(0===u.length)throw new Error("You must specify at least one required or optional field.");return yn("required",r),yn("optional",i),C(e=bn(u),function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}),function(n){var e=Hh(n);_(r,function(t){return Fh(e,t)})||function(t,n){throw new Error("All required keys ("+bn(r).join(", ")+") were not specified. Specified keys were: "+bn(n).join(", ")+".")}(0,e);var t=w(e,function(t){return!Fh(u,t)});0<t.length&&function(){throw new Error("Unsupported keys for object: "+bn(t).join(", "))}();var o={};return Ih(r,function(t){o[t]=mh(n[t])}),Ih(i,function(t){o[t]=mh(Object.prototype.hasOwnProperty.call(n,t)?xh.some(n[t]):xh.none())}),o}}function wn(t){return $v.fromDom(t.dom().ownerDocument)}function Sn(t){return $v.fromDom(t.dom().ownerDocument.documentElement)}function Cn(t){return $v.fromDom(t.dom().ownerDocument.defaultView)}function kn(t){return xh.from(t.dom().parentNode).map($v.fromDom)}function On(t){return xh.from(t.dom().offsetParent).map($v.fromDom)}function _n(t){return x(t.dom().childNodes,$v.fromDom)}function Tn(t,n){var e=t.dom().childNodes;return xh.from(e[n]).map($v.fromDom)}function En(n,e){kn(n).each(function(t){t.dom().insertBefore(e.dom(),n.dom())})}function Bn(t,n){var e;(e=t,xh.from(e.dom().nextSibling).map($v.fromDom)).fold(function(){kn(t).each(function(t){wy(t,n)})},function(t){En(t,n)})}function Dn(n,e){Tn(n,0).fold(function(){wy(n,e)},function(t){n.dom().insertBefore(e.dom(),t.dom())})}function An(n,t){Ih(t,function(t){wy(n,t)})}function Mn(t){t.dom().textContent="",Ih(_n(t),function(t){Sy(t)})}function Fn(t){var n,e=_n(t);0<e.length&&(n=t,Ih(e,function(t){En(n,t)})),Sy(t)}function In(t){return t.dom().innerHTML}function Rn(t,n){var e,o,r=wn(t).dom(),i=$v.fromDom(r.createDocumentFragment());An(i,(e=n,(o=(r||v.document).createElement("div")).innerHTML=e,_n($v.fromDom(o)))),Mn(t),wy(t,i)}function Vn(t){return t.dom().nodeName.toLowerCase()}function Hn(n){return function(t){return t.dom().nodeType===n}}function Nn(t,n,e){if(!(kh(e)||Th(e)||Bh(e)))throw v.console.error("Invalid call to Attr.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")}function Pn(t,n,e){Nn(t.dom(),n,e)}function zn(t,n){var e=t.dom().getAttribute(n);return null===e?undefined:e}function Ln(t,n){var e=t.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(n)}function jn(t,n){t.dom().removeAttribute(n)}function Un(t){return n=t,e=!1,$v.fromDom(n.dom().cloneNode(e));var n,e}function Wn(t){return n=Un(t),e=$v.fromTag("div"),o=$v.fromDom(n.dom().cloneNode(!0)),wy(e,o),In(e);var n,e,o}function Gn(t){return Wn(t)}function Xn(t){var n=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++Ty+String(n)}function Yn(t){return Xn(t)}function qn(n){function t(t){return function(){throw new Error("The component must be in a context to send: "+t+(n?"\n"+Gn(n().element())+" is not in context.":""))}}return{debugInfo:mh("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:mh(!1)}}function Kn(t,n){var e=t.toString(),o=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:n,parameters:Vy(i)}},t}function Jn(t){return W(Hy,t)}function $n(o){return t=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return o.apply(undefined,[t.getApis()].concat([t].concat(n)))},n=o.toString(),e=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,e-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Vy(i.slice(1))}},t;var t,n,e,r,i}function Qn(t,r){var i={};return Ph(t,function(t,o){Ph(t,function(t,n){var e=jh(i,n).getOr([]);i[n]=e.concat([r(o,t)])})}),i}function Zn(t){return{classes:t.classes!==undefined?t.classes:[],attributes:t.attributes!==undefined?t.attributes:{},styles:t.styles!==undefined?t.styles:{}}}function te(t){return t.cHandler}function ne(t,n){return{name:mh(t),handler:mh(n)}}function ee(t,n,e){var o,r;return Qn(vh(vh({},e),(o=t,r={},Ih(n,function(t){r[t.name()]=t.handlers(o)}),r)),ne)}function oe(t){var n,i=Eh(n=t)?{can:mh(!0),abort:mh(!1),run:n}:n;return function(t,n){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];var r=[t,n].concat(e);i.abort.apply(undefined,r)?n.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}}function re(t,n,e){var o,r,i=n[e];return i?function(u,a,t,c){try{var n=B(t,function(t,n){var e=t[a](),o=n[a](),r=c.indexOf(e),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+u+" does not have an entry for "+e+".\nOrder specified: "+JSON.stringify(c,null,2));if(-1===i)throw new Error("The ordering for "+u+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(c,null,2));return r<i?-1:i<r?1:0});return Ch.value(n)}catch(e){return Ch.error([e])}}("Event: "+e,"name",t,i).map(function(t){return tn(x(t,function(t){return t.handler()}))}):(o=e,r=t,Ch.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(x(r,function(t){return t.name()}),null,2)]))}function ie(t){return st("custom.definition",Iv([Nv("dom","dom",Tv(),Iv([ht("tag"),Dt("styles",{}),Dt("classes",[]),Dt("attributes",{}),kt("value"),kt("innerHtml")])),ht("components"),ht("uid"),Dt("events",{}),Dt("apis",{}),Nv("eventOrder","eventOrder",(n={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing","item-events","tooltipping"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],touchstart:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]},_v.mergeWithThunk(mh(n))),jv()),kt("domModification")]),t);var n}function ue(t,n){var e=zn(t,n);return e===undefined||""===e?[]:e.split(" ")}function ae(t){return t.dom().classList!==undefined}function ce(t,n){return o=n,Pn(t,e="class",ue(t,e).concat([o]).join(" ")),!0;var e,o}function se(t,n){return r=n,0<(i=w(ue(e=t,o="class"),function(t){return t!==r})).length?Pn(e,o,i.join(" ")):jn(e,o),!1;var e,o,r,i}function le(t,n){ae(t)?t.dom().classList.add(n):ce(t,n)}function fe(t){0===(ae(t)?t.dom().classList:ue(t,"class")).length&&jn(t,"class")}function de(t,n){ae(t)?t.dom().classList.remove(n):se(t,n),fe(t)}function me(t,n){return ae(t)&&t.dom().classList.contains(n)}function ge(n,t){Ih(t,function(t){le(n,t)})}function pe(n,t){Ih(t,function(t){de(n,t)})}function he(t){return t.style!==undefined&&Eh(t.style.getPropertyValue)}function ve(t){var n=ky(t)?t.dom().parentNode:t.dom();return n!==undefined&&null!==n&&n.ownerDocument.body.contains(n)}function be(t,n,e){if(!kh(e))throw v.console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e);he(t)&&t.style.setProperty(n,e)}function ye(t,n){he(t)&&t.style.removeProperty(n)}function xe(t,n,e){be(t.dom(),n,e)}function we(t,n){var e=t.dom();Ph(n,function(t,n){be(e,n,t)})}function Se(t,n){var e=t.dom();Ph(n,function(t,n){t.fold(function(){ye(e,n)},function(t){be(e,n,t)})})}function Ce(t,n){var e=t.dom(),o=v.window.getComputedStyle(e).getPropertyValue(n),r=""!==o||ve(t)?o:Wy(e,n);return null===r?undefined:r}function ke(t,n){var e=t.dom(),o=Wy(e,n);return xh.from(o).filter(function(t){return 0<t.length})}function Oe(t,n,e){var o=$v.fromTag(t);return xe(o,n,e),ke(o,n).isSome()}function _e(t,n){ye(t.dom(),n),Ln(t,"style")&&""===zn(t,"style").replace(/^\s+|\s+$/g,"")&&jn(t,"style")}function Te(t){return t.dom().offsetWidth}function Ee(t){return t.dom().value}function Be(t,n){if(n===undefined)throw new Error("Value.set was undefined");t.dom().value=n}function De(t){var n,e,o,r=$v.fromTag(t.tag);n=r,e=t.attributes,o=n.dom(),Ph(e,function(t,n){Nn(o,n,t)}),ge(r,t.classes),we(r,t.styles),t.innerHtml.each(function(t){return Rn(r,t)});var i=t.domChildren;return An(r,i),t.value.each(function(t){Be(r,t)}),t.uid,My(r,t.uid),r}function Ae(t,n){return e=t,r=x(o=n,function(t){return Bt(t.name(),[ht("config"),Dt("state",Ny)])}),{list:o,data:P(st("component.behaviours",Iv(r),e.behaviours).fold(function(t){throw new Error(Lv(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},function(t){return t}),function(t){var n=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return function(){return n}})};var e,o,r}function Me(t){var n;return Ae(t,(n=jh(t,"behaviours").getOr({}),x(w(Hh(n),function(t){return n[t]!==undefined}),function(t){return n[t].me})))}function Fe(t,n,e){var o,r,i,u=vh(vh({},(o=t).dom),{uid:o.uid,domChildren:x(o.components,function(t){return t.element()})}),a=t.domModification.fold(function(){return Zn({})},Zn),c={"alloy.base.modification":a};return r=u,i=0<n.length?function(n,t,e,o){function r(t){return p(t,function(t,n){return vh(vh({},n.modification),t)},{})}var i=vh({},c);Ih(e,function(t){i[t.name()]=t.exhibit(n,o)});var u=Qn(i,function(t,n){return{name:t,modification:n}});return Zn({classes:p(u.classes,function(t,n){return n.modification.concat(t)},[]),attributes:r(u.attributes),styles:r(u.styles)})}(e,0,n,u):a,vh(vh({},r),{attributes:vh(vh({},r.attributes),i.attributes),styles:vh(vh({},r.styles),i.styles),classes:r.classes.concat(i.classes)})}function Ie(t,n,e){var o,r,i,u={"alloy.base.behaviour":t.events};return(o=e,r=t.eventOrder,i=ee(o,n,u),Ly(i,r)).getOrDie()}function Re(t){var n=Iy(t),e=n.events,o=h(n,["events"]),r=x(jh(o,"components").getOr([]),Yy),i=vh(vh({},o),{events:vh(vh({},_y),e),components:r});return Ch.value(function(e){function t(){return l}var n=Kv(Ry),o=lt(ie(e)),r=Me(e),i=r.list,u=r.data,a=De(Fe(o,i,u)),c=Ie(o,i,u),s=Kv(o.components),l={getSystem:n.get,config:function(t){var n=u;return(Eh(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(t){return Eh(u[t.name()])},spec:mh(e),readState:function(t){return u[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return o.apis},connect:function(t){n.set(t)},disconnect:function(){n.set(qn(t))},element:mh(a),syncComponents:function(){var t=O(_n(a),function(t){return n.get().getByDom(t).fold(function(){return[]},function(t){return[t]})});s.set(t)},components:s.get,events:mh(c)};return l}(i))}function Ve(t){var n=$v.fromText(t);return Gy({element:n})}function He(o,r){function t(t){var n=r(t);if(n<=0||null===n){var e=Ce(t,o);return parseFloat(e)||0}return n}function i(r,t){return S(t,function(t,n){var e=Ce(r,n),o=e===undefined?0:parseInt(e,10);return isNaN(o)?t:t+o},0)}return{set:function(t,n){if(!Bh(n)&&!n.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+n);var e=t.dom();he(e)&&(e.style[o]=n+"px")},get:t,getOuter:t,aggregate:i,max:function(t,n,e){var o=i(t,e);return o<n?n-o:0}}}function Ne(t){return Ky.get(t)}function Pe(t){return Ky.getOuter(t)}function ze(t,n){return t!==undefined?t:n!==undefined?n:0}function Le(t){var n=t.dom().ownerDocument,e=n.body,o=n.defaultView,r=n.documentElement;if(e===t.dom())return $y(e.offsetLeft,e.offsetTop);var i=ze(o.pageYOffset,r.scrollTop),u=ze(o.pageXOffset,r.scrollLeft),a=ze(r.clientTop,e.clientTop),c=ze(r.clientLeft,e.clientLeft);return Qy(t).translate(u-c,i-a)}function je(t){return Zy.get(t)}function Ue(t){return Zy.getOuter(t)}function We(t){function n(){t.stopPropagation()}function e(){t.preventDefault()}var o,r,i,u,a,c,s,l=$v.fromDom(t.target),f=d(e,n);return o=l,r=t.clientX,i=t.clientY,u=n,a=e,c=f,s=t,{target:mh(o),x:mh(r),y:mh(i),stop:u,prevent:a,kill:c,raw:mh(s)}}function Ge(t,n,e,o,r){var i,u,a=(i=e,u=o,function(t){i(t)&&u(We(t))});return t.dom().addEventListener(n,a,r),{unbind:m(tx,t,n,a,r)}}function Xe(t){var n=t!==undefined?t.dom():v.document,e=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return $y(e,o)}function Ye(t,n,e){(e!==undefined?e.dom():v.document).defaultView.scrollTo(t,n)}function qe(t,n,e,o){return{x:mh(t),y:mh(n),width:mh(e),height:mh(o),right:mh(t+e),bottom:mh(n+o)}}function Ke(t){var n,e,o=t===undefined?v.window:t,r=o.document,i=Xe($v.fromDom(r));return(n=o,e=n===undefined?v.window:n,xh.from(e.visualViewport)).fold(function(){var t=o.document.documentElement,n=t.clientWidth,e=t.clientHeight;return qe(i.left(),i.top(),n,e)},function(t){return qe(Math.max(t.pageLeft,i.left()),Math.max(t.pageTop,i.top()),t.width,t.height)})}function Je(o){var t,n,e,r,i=Xe($v.fromDom(v.document));return(t=o,n=ex,e=n.owner(t),r=nx(n,e),xh.some(r)).fold(m(Le,o),function(t){var n=Qy(o),e=p(t,function(t,n){var e=Qy(n);return{left:t.left+e.left(),top:t.top+e.top()}},{left:0,top:0});return $y(e.left+n.left()+i.left(),e.top+n.top()+i.top())})}function $e(t,n,e,o){return{x:mh(t),y:mh(n),width:mh(e),height:mh(o),right:mh(t+e),bottom:mh(n+o)}}function Qe(t){var n=Le(t),e=Ue(t),o=Pe(t);return $e(n.left(),n.top(),e,o)}function Ze(t){var n=Je(t),e=Ue(t),o=Pe(t);return $e(n.left(),n.top(),e,o)}function to(){return Ke(v.window)}function no(t,n,e,o,r){return t(e,o)?xh.some(e):Eh(r)&&r(e)?xh.none():n(e,o,r)}function eo(t,n,e){for(var o=t.dom(),r=Eh(e)?e:mh(!1);o.parentNode;){o=o.parentNode;var i=$v.fromDom(o);if(n(i))return xh.some(i);if(r(i))break}return xh.none()}function oo(t,n,e){return no(function(t,n){return n(t)},eo,t,n,e)}function ro(t,n,e){return oo(t,n,e).isSome()}function io(t,n,e){return eo(t,function(t){return Yt(t,n)},e)}function uo(t,n){return e=n,qt(r=(o=t)===undefined?v.document:o.dom())?xh.none():xh.from(r.querySelector(e)).map($v.fromDom);var e,o,r}function ao(t,n,e){return no(Yt,io,t,n,e)}function co(){var n=Xn("aria-owns");return{id:mh(n),link:function(t){Pn(t,"aria-owns",n)},unlink:function(t){jn(t,"aria-owns")}}}function so(n,t){return oo(t,function(t){if(!Cy(t))return!1;var n=zn(t,"id");return n!==undefined&&-1<n.indexOf("aria-owns")}).bind(function(t){var n=zn(t,"id");return uo(wn(t),'[aria-owns="'+n+'"]')}).exists(function(t){return ix(n,t)})}function lo(n,t,e){switch(jh(sx.get(),n).orThunk(function(){return A(Hh(sx.get()),function(t){return-1<n.indexOf(t)?xh.some(sx.get()[t]):xh.none()})}).getOr(pv.NORMAL)){case pv.NORMAL:return e(fx());case pv.LOGGING:var o=(i=n,u=t,a=[],c=(new Date).getTime(),{logEventCut:function(t,n,e){a.push({outcome:"cut",target:n,purpose:e})},logEventStopped:function(t,n,e){a.push({outcome:"stopped",target:n,purpose:e})},logNoParent:function(t,n,e){a.push({outcome:"no-parent",target:n,purpose:e})},logEventNoHandlers:function(t,n){a.push({outcome:"no-handlers-left",target:n})},logEventResponse:function(t,n,e){a.push({outcome:"response",purpose:e,target:n})},write:function(){var t=(new Date).getTime();Fh(["mousemove","mouseover","mouseout",ny()],i)||v.console.log(i,{event:i,time:t-c,target:u.dom(),sequence:x(a,function(t){return Fh(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Gn(t.target)+")":t.outcome})})}}),r=e(o);return o.write(),r;case pv.STOP:return!0}var i,u,a,c}function fo(t,n,e){return lo(t,n,e)}function mo(){return wt("markers",[ht("backgroundMenu")].concat(dx()).concat(mx()))}function go(t){return wt("markers",x(t,ht))}function po(t,n,e){return(o=new Error).stack!==undefined&&C(o.stack.split("\n"),function(n){return 0<n.indexOf("alloy")&&!l(lx,function(t){return-1<n.indexOf(t)})}).getOr(ux),Nv(n,n,e,at(function(e){return Ch.value(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(undefined,t)})}));var o}function ho(t){return po(0,t,L(Q))}function vo(t){return po(0,t,L(xh.none))}function bo(t){return po(0,t,Tv())}function yo(t){return po(0,t,Tv())}function xo(t,n){return Nt(t,mh(n))}function wo(t){return Nt(t,f)}function So(t){return t.x()}function Co(t,n){return t.x()+t.width()/2-n.width()/2}function ko(t,n){return t.x()+t.width()-n.width()}function Oo(t,n){return t.y()-n.height()}function _o(t){return t.y()+t.height()}function To(t,n){return t.y()+t.height()/2-n.height()/2}function Eo(t,n,e){return vx(So(t),_o(t),e.southeast(),yx(),"layout-se")}function Bo(t,n,e){return vx(ko(t,n),_o(t),e.southwest(),xx(),"layout-sw")}function Do(t,n,e){return vx(So(t),Oo(t,n),e.northeast(),wx(),"layout-ne")}function Ao(t,n,e){return vx(ko(t,n),Oo(t,n),e.northwest(),Sx(),"layout-nw")}function Mo(t,n,e){return vx((o=t).x()+o.width(),To(t,n),e.east(),Ox(),"layout-e");var o}function Fo(t,n,e){return vx((o=n,t.x()-o.width()),To(t,n),e.west(),_x(),"layout-w");var o}function Io(){return[Eo,Bo,Do,Ao,Ex,Tx,Mo,Fo]}function Ro(){return[Bo,Eo,Ao,Do,Ex,Tx,Mo,Fo]}function Vo(){return[Do,Ao,Eo,Bo,Tx,Ex]}function Ho(){return[Eo,Bo,Do,Ao,Ex,Tx]}function No(){return[Bo,Eo,Ao,Do,Ex,Tx]}function Po(n,e,o){return yy(function(t){o(t,n,e)})}function zo(t,n,e,o,r,i){var u=nt(t),a=Bt(n,[Ot("config",nt(t))]);return Bx(u,a,n,e,o,r,i)}function Lo(r,i,u){return t=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=[e].concat(t);return e.config({name:mh(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+u)},function(t){var n=Array.prototype.slice.call(o,1);return i.apply(undefined,[e,t.config,t.state].concat(n))})},n=u,e=i.toString(),o=e.indexOf(")")+1,a=e.indexOf("("),c=e.substring(a+1,o-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:n,parameters:Vy(c.slice(0,1).concat(c.slice(3)))}},t;var t,n,e,o,a,c}function jo(t){return{key:t,value:undefined}}function Uo(t){return G(t)}function Wo(t){var n=ft("Creating behaviour: "+t.name,Dx,t);return zo(n.fields,n.name,n.active,n.apis,n.extra,n.state)}function Go(t){var n,e,o,r,i,u,a,c,s=ft("Creating behaviour: "+t.name,Ax,t);return n=mt(s.branchKey,s.branches),e=s.name,o=s.active,r=s.apis,i=s.extra,u=s.state,c=Bt(e,[Ot("config",a=n)]),Bx(a,c,e,o,r,i,u)}function Xo(t){t.dom().focus()}function Yo(t){var n=t!==undefined?t.dom():v.document;return xh.from(n.activeElement).map($v.fromDom)}function qo(n){return Yo(wn(n)).filter(function(t){return n.dom().contains(t.dom())})}function Ko(t,e){var o=wn(e),n=Yo(o).bind(function(n){function t(t){return Jt(n,t)}return t(e)?xh.some(e):(r=t,(i=function(t){for(var n=0;n<t.childNodes.length;n++){var e=$v.fromDom(t.childNodes[n]);if(r(e))return xh.some(e);var o=i(t.childNodes[n]);if(o.isSome())return o}return xh.none()})(e.dom()));var r,i}),r=t(e);return n.each(function(n){Yo(o).filter(function(t){return Jt(t,n)}).fold(function(){Xo(n)},Q)}),r}function Jo(t,n){function e(t){return t+"px"}Se(t,{position:xh.some(n.position()),left:n.left().map(e),top:n.top().map(e),right:n.right().map(e),bottom:n.bottom().map(e)})}function $o(t,n,e,o,r,i){var u,a,c,s,l,f,d,m,g=n.x()-e,p=n.y()-o,h=r-(g+n.width()),v=i-(p+n.height()),b=xh.some(g),y=xh.some(p),x=xh.some(h),w=xh.some(v),S=xh.none();return u=function(){return Vx(t,b,y,S,S)},a=function(){return Vx(t,S,y,x,S)},c=function(){return Vx(t,b,S,S,w)},s=function(){return Vx(t,S,S,x,w)},l=function(){return Vx(t,b,y,S,S)},f=function(){return Vx(t,b,S,S,w)},d=function(){return Vx(t,b,y,S,S)},m=function(){return Vx(t,S,y,x,S)},n.direction().fold(u,a,c,s,l,f,d,m)}function Qo(t,n){var e=m(Je,n),o=t.fold(e,e,function(){var t=Xe();return Je(n).translate(-t.left(),-t.top())}),r=Ue(n),i=Pe(n);return $e(o.left(),o.top(),r,i)}function Zo(t,n,e,o){var r=t+n;return o<r?e:r<e?o:r}function tr(t,n,e){return Math.min(Math.max(t,n),e)}function nr(t,n,e,o){var r,i,u,a,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,C,k,O,_,T=t.x(),E=t.y(),B=t.bubble().offset().left(),D=t.bubble().offset().top(),A=o.y(),M=o.bottom(),F=o.x(),I=o.right(),R=E+D,V=(d=T+B,m=R,g=n,p=e,v=(h=o).x(),b=h.y(),y=h.width(),x=h.height(),S=b<=m,C=(w=v<=d)&&S,k=d+g<=v+y&&m+p<=b+x,O=Math.abs(Math.min(g,w?v+y-d:v-(d+g))),_=Math.abs(Math.min(p,S?b+x-m:b-(m+p))),{originInBounds:C,
sizeInBounds:k,limitX:tr(d,h.x(),h.right()),limitY:tr(m,h.y(),h.bottom()),deltaW:O,deltaH:_}),H=V.originInBounds,N=V.sizeInBounds,P=V.limitX,z=V.limitY,L=V.deltaW,j=V.deltaH,U=mh(z+j-A),W=mh(M-z),G=(c=t.direction(),l=s=W,f=U,c.fold(s,s,f,f,s,f,l,l)),X=mh(P+L-F),Y=mh(I-P),q=(r=t.direction(),u=i=Y,a=X,r.fold(i,a,i,a,u,u,i,a)),K=jx({x:P,y:z,width:L,height:j,maxHeight:G,maxWidth:q,direction:t.direction(),classes:{on:t.bubble().classesOn(),off:t.bubble().classesOff()},label:t.label(),candidateYforTest:R});return H&&N?Ux.fit(K):Ux.nofit(K,L,j)}function er(t,n,e,o){_e(n,"max-height"),_e(n,"max-width");var r,i={width:mh(Ue(r=n)),height:mh(Pe(r))};return function(t,n,e,u,a){function o(t,o,r,i){return nr(t(n,e,u),c,s,a).fold(Ux.fit,function(t,n,e){return i<e||r<n?Ux.nofit(t,n,e):Ux.nofit(o,r,i)})}var c=e.width(),s=e.height();return S(t,function(t,n){var e=m(o,n);return t.fold(Ux.fit,e)},Ux.nofit(jx({x:n.x(),y:n.y(),width:e.width(),height:e.height(),maxHeight:e.height(),maxWidth:e.width(),direction:yx(),classes:{on:[],off:[]},label:"none",candidateYforTest:n.y()}),-1,-1)).fold(f,f)}(o.preference(),t,i,e,o.bounds())}function or(t,n,e){var o,r;Jo(t,(o=e.origin(),r=n,o.fold(function(){return Vx("absolute",xh.some(r.x()),xh.some(r.y()),xh.none(),xh.none())},function(t,n,e,o){return $o("absolute",r,t,n,e,o)},function(t,n,e,o){return $o("fixed",r,t,n,e,o)})))}function rr(t,n){var e,o;e=t,o=Math.floor(n),xe(e,"max-height",Ky.max(e,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function ir(t,n,e){return t[n]===undefined?e:t[n]}function ur(t,n,e,o,r,i){var u,a=ir(i,"maxHeightFunction",Wx()),c=ir(i,"maxWidthFunction",Q),s=t.anchorBox(),l=t.origin(),f=Xx({bounds:(u=l,r.fold(function(){return u.fold(to,to,$e)},function(e){return u.fold(e,e,function(){var t=e(),n=Nx(u,t.x(),t.y());return $e(n.left(),n.top(),t.width(),t.height())})})),origin:l,preference:o,maxHeightFunction:a,maxWidthFunction:c});Yx(s,n,e,f)}function ar(t,n,e){function r(t){return jh(e,t).getOr([])}function o(t,n,e){var o=E(qx,e);return{offset:function(){return $y(t,n)},classesOn:function(){return O(e,r)},classesOff:function(){return O(o,r)}}}return{southeast:function(){return o(-t,n,["top","alignLeft"])},southwest:function(){return o(t,n,["top","alignRight"])},south:function(){return o(-t/2,n,["top","alignCentre"])},northeast:function(){return o(-t,-n,["bottom","alignLeft"])},northwest:function(){return o(t,-n,["bottom","alignRight"])},north:function(){return o(-t/2,-n,["bottom","alignCentre"])},east:function(){return o(t,-n/2,["valignCentre","left"])},west:function(){return o(-t,-n/2,["valignCentre","right"])},innerNorthwest:function(){return o(-t,n,["top","alignRight"])},innerNortheast:function(){return o(t,n,["top","alignLeft"])},innerNorth:function(){return o(-t/2,n,["top","alignCentre"])},innerSouthwest:function(){return o(-t,-n,["bottom","alignRight"])},innerSoutheast:function(){return o(t,-n,["bottom","alignLeft"])},innerSouth:function(){return o(-t/2,-n,["bottom","alignCentre"])},innerWest:function(){return o(t,-n/2,["valignCentre","right"])},innerEast:function(){return o(-t,-n/2,["valignCentre","left"])}}}function cr(){return ar(0,0,{})}function sr(t){return t}function lr(n,e){return function(t){return"rtl"===Kx(t)?e:n}}function fr(t){return ro(t,function(t){return Cy(t)&&zn(t,Jx)===ax.BottomToTop})}function dr(){return Bt("layouts",[ht("onLtr"),ht("onRtl"),kt("onBottomLtr"),kt("onBottomRtl")])}function mr(n,t,e,o,r,i,u){var a=u.map(fr).getOr(!1),c=t.layouts.map(function(t){return t.onLtr(n)}),s=t.layouts.map(function(t){return t.onRtl(n)});return lr(a?t.layouts.bind(function(t){return t.onBottomLtr.map(function(t){return t(n)})}).or(c).getOr(r):c.getOr(e),a?t.layouts.bind(function(t){return t.onBottomRtl.map(function(t){return t(n)})}).or(s).getOr(i):s.getOr(o))(n)}function gr(t,n,e){var o,r,i=t.document.createRange();return r=i,n.fold(function(t){r.setStartBefore(t.dom())},function(t,n){r.setStart(t.dom(),n)},function(t){r.setStartAfter(t.dom())}),o=i,e.fold(function(t){o.setEndBefore(t.dom())},function(t,n){o.setEnd(t.dom(),n)},function(t){o.setEndAfter(t.dom())}),i}function pr(t,n,e,o,r){var i=t.document.createRange();return i.setStart(n.dom(),e),i.setEnd(o.dom(),r),i}function hr(t){return{left:mh(t.left),top:mh(t.top),right:mh(t.right),bottom:mh(t.bottom),width:mh(t.width),height:mh(t.height)}}function vr(t,n,e){return n($v.fromDom(e.startContainer),e.startOffset,$v.fromDom(e.endContainer),e.endOffset)}function br(t,n){return r=t,e=n.match({domRange:function(t){return{ltr:mh(t),rtl:xh.none}},relative:function(t,n){return{ltr:R(function(){return gr(r,t,n)}),rtl:R(function(){return xh.some(gr(r,n,t))})}},exact:function(t,n,e,o){return{ltr:R(function(){return pr(r,t,n,e,o)}),rtl:R(function(){return xh.some(pr(r,e,o,t,n))})}}}),(o=e.ltr()).collapsed?e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return rw.rtl($v.fromDom(t.endContainer),t.endOffset,$v.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return vr(0,rw.ltr,o)}):vr(0,rw.ltr,o);var e,o,r}function yr(t){return aw.getOption(t)}function xr(t){return yr(t).filter(function(t){return 0!==t.trim().length||-1<t.indexOf("\xa0")}).isSome()||Fh(cw,Vn(t))}function wr(t,n){return Kt(n,t)}function Sr(t,n,e,o){var r,i,u,a,c,s=(i=n,u=e,a=o,(c=wn(r=t).dom().createRange()).setStart(r.dom(),i),c.setEnd(u.dom(),a),c),l=Jt(t,e)&&n===o;return s.collapsed&&!l}function Cr(t){var n=$v.fromDom(t.anchorNode),e=$v.fromDom(t.focusNode);return Sr(n,t.anchorOffset,e,t.focusOffset)?xh.some(Zx.create(n,t.anchorOffset,e,t.focusOffset)):function(t){if(0<t.rangeCount){var n=t.getRangeAt(0),e=t.getRangeAt(t.rangeCount-1);return xh.some(Zx.create($v.fromDom(n.startContainer),n.startOffset,$v.fromDom(e.endContainer),e.endOffset))}return xh.none()}(t)}function kr(t,n){return e=br(i=t,n).match({ltr:function(t,n,e,o){var r=i.document.createRange();return r.setStart(t.dom(),n),r.setEnd(e.dom(),o),r},rtl:function(t,n,e,o){var r=i.document.createRange();return r.setStart(e.dom(),o),r.setEnd(t.dom(),n),r}}),o=e.getClientRects(),0<(r=0<o.length?o[0]:e.getBoundingClientRect()).width||0<r.height?xh.some(r).map(hr):xh.none();var e,o,r,i}function Or(t,n){var e=_n(t);if(0===e.length)return lw(t,n);if(n<e.length)return lw(e[n],0);var o,r=e[e.length-1],i=ky(r)?(o=r,aw.get(o)).length:_n(r).length;return lw(r,i)}function _r(t){return t.fold(f,function(t,n,e){return t.translate(-n,-e)})}function Tr(t){return t.fold(f,f)}function Er(t){return S(t,function(t,n){return t.translate(n.left(),n.top())},$y(0,0))}function Br(t){return Er(x(t,Tr))}function Dr(t,n,e){var o,r,i=Xe(wn(t.element())),u=(o=t,r=Cn(e.root).dom(),xh.from(r.frameElement).map($v.fromDom).filter(function(t){return Jt(wn(t),wn(o.element()))}).map(Le)).getOr(i);return mw(u,i.left(),i.top())}function Ar(t,n){return ky(t)?hw(t,n):Or(t,n)}function Mr(n,t){return t.getSelection.getOrThunk(function(){return function(){return t=n,xh.from(t.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(Cr);var t}})().map(function(t){var n=Ar(t.start(),t.soffset()),e=Ar(t.finish(),t.foffset());return ow.range(n.element(),n.offset(),e.element(),e.offset())})}function Fr(t){return t.x()+t.width()}function Ir(t,n){return t.x()-n.width()}function Rr(t,n){return t.y()-n.height()+t.height()}function Vr(t){return t.y()}function Hr(t,n,e){return vx(Fr(t),Vr(t),e.southeast(),yx(),"link-layout-se")}function Nr(t,n,e){return vx(Ir(t,n),Vr(t),e.southwest(),xx(),"link-layout-sw")}function Pr(t,n,e){return vx(Fr(t),Rr(t,n),e.northeast(),wx(),"link-layout-ne")}function zr(t,n,e){return vx(Ir(t,n),Rr(t,n),e.northwest(),Sx(),"link-layout-nw")}function Lr(){return[Hr,Nr,Pr,zr]}function jr(){return[Nr,Hr,zr,Pr]}function Ur(t,n,e,o,r){var i;ur((i=e.anchorBox,Lx(i,n)),r.element(),e.bubble,e.layouts,o,e.overrides)}function Wr(t,n){wy(t.element(),n.element())}function Gr(n,t){var e,o=n.components();Ih((e=n).components(),function(t){return Sy(t.element())}),Mn(e.element()),e.syncComponents();var r=E(o,t);Ih(r,function(t){Sw(t),n.getSystem().removeFromWorld(t)}),Ih(t,function(t){t.getSystem().isConnected()?Wr(n,t):(n.getSystem().addToWorld(t),Wr(n,t),ve(n.element())&&Cw(t)),n.syncComponents()})}function Xr(t,n){kw(t,n,wy)}function Yr(t){Sw(t),Sy(t.element()),t.getSystem().removeFromWorld(t)}function qr(n){var t=kn(n.element()).bind(function(t){return n.getSystem().getByDom(t).toOption()});Yr(n),t.each(function(t){t.syncComponents()})}function Kr(t){var n=t.components();Ih(n,Yr),Mn(t.element()),t.syncComponents()}function Jr(t,n){Ow(t,n,wy)}function $r(n){var t=_n(n.element());Ih(t,function(t){n.getByDom(t).each(Sw)}),Sy(n.element())}function Qr(t,n,e,o){e.get().each(function(){Kr(t)}),Xr(n.getAttachPoint(t),t);var r=t.getSystem().build(o);return Xr(t,r),e.set(r),r}function Zr(t,n,e,o){var r=Qr(t,n,e,o);return n.onOpen(t,r),r}function ti(n,e,o){o.get().each(function(t){Kr(n),qr(n),e.onClose(n,t),o.clear()})}function ni(t,n,e){return e.isOpen()}function ei(t){var n,e=ft("Dismissal",Iw,t);return(n={})[Aw()]={schema:nt([ht("target")]),onReceive:function(n,t){Dw.isOpen(n)&&(Dw.isPartOf(n,t.target)||e.isExtraPart(n,t.target)||e.fireEventInstead.fold(function(){return Dw.close(n)},function(t){return nn(n,t.event)}))}},n}function oi(t){var n,e=ft("Reposition",Rw,t);return(n={})[Mw()]={onReceive:function(n){Dw.isOpen(n)&&e.fireEventInstead.fold(function(){return e.doReposition(n)},function(t){return nn(n,t.event)})}},n}function ri(t,n,e){n.store.manager.onLoad(t,n,e)}function ii(t,n,e){n.store.manager.onUnload(t,n,e)}function ui(){var t=Kv(null);return Py({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function ai(){var i=Kv({}),u=Kv({});return Py({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(t){return jh(i.get(),t).orThunk(function(){return jh(u.get(),t)})},update:function(t){var n=i.get(),e=u.get(),o={},r={};Ih(t,function(n){o[n.value]=n,jh(n,"meta").each(function(t){jh(t,"text").each(function(t){r[t]=n})})}),i.set(vh(vh({},n),o)),u.set(vh(vh({},e),r))},clear:function(){i.set({}),u.set({})}})}function ci(t,n,e,o){var r=n.store;e.update([o]),r.setValue(t,o),n.onSetValue(t,o)}function si(o,t){return Ht(o,{},x(t,function(t){return n=t.name(),e="Cannot configure "+t.name()+" for "+o,Nv(n,n,Ev(),tt(function(){return wv("The field: "+n+" is forbidden. "+e)}));var n,e}).concat([Nt("dump",f)]))}function li(t){return t.dump}function fi(t,n){return vh(vh({},t.dump),Uo(n))}function di(t){return Uh(t,"uiType")}function mi(t,n,e,o){return di(e)&&e.uiType===Ww?(i=e,u=o,(r=t).exists(function(t){return t!==i.owner})?Gw.single(!0,mh(i)):jh(u,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+Hh(u)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+JSON.stringify(i,null,2))},function(t){return t.replace()})):Gw.single(!1,mh(e));var r,i,u}function gi(n,e,t,o){var r,i,u,a=P(o,function(t,n){return o=t,r=!1,{name:mh(e=n),required:function(){return o.fold(function(t){return t},function(t){return t})},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+e);return r=!0,o}};var e,o,r}),c=(r=n,i=e,u=a,O(t,function(t){return Xw(r,i,t,u)}));return Ph(a,function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))}),c}function pi(t){return t.fold(xh.some,xh.none,xh.some,xh.some)}function hi(t){function n(t){return t.name}return t.fold(n,n,n,n)}function vi(e,o){return function(t){var n=ft("Converting part type",o,t);return e(n)}}function bi(t,n,e,o){return Xh(n.defaults(t,e,o),e,{uid:t.partUids[n.name]},n.overrides(t,e,o))}function yi(r,t){var n={};return Ih(t,function(t){pi(t).each(function(e){var o=gS(r,e.pname);n[e.name]=function(t){var n=ft("Part: "+e.name+" in "+r,Iv(e.schema),t);return vh(vh({},o),{config:t,validated:n})}})}),n}function xi(t,n,e){return{uiType:Kw(),owner:t,name:n,config:e,validated:{}}}function wi(t){return O(t,function(t){return t.fold(xh.none,xh.some,xh.none,xh.none).map(function(t){return wt(t.name,t.schema.concat([wo(dS())]))}).toArray()})}function Si(t){return x(t,hi)}function Ci(t,n,e){return o=n,r={},i={},Ih(e,function(t){t.fold(function(o){r[o.pname]=Yw(!0,function(t,n,e){return o.factory.sketch(bi(t,o,n,e))})},function(t){var n=o.parts[t.name];i[t.name]=mh(t.factory.sketch(bi(o,t,n[dS()]),n))},function(o){r[o.pname]=Yw(!1,function(t,n,e){return o.factory.sketch(bi(t,o,n,e))})},function(o){r[o.pname]=qw(!0,function(n,t,e){return x(n[o.name],function(t){return o.factory.sketch(Xh(o.defaults(n,t,e),t,o.overrides(n,t)))})})})}),{internals:mh(r),externals:mh(i)};var o,r,i}function ki(t,n,e){return gi(xh.some(t),n,n.components,e)}function Oi(t,n,e){var o=n.partUids[e];return t.getSystem().getByUid(o).toOption()}function _i(t,n,e){return Oi(t,n,e).getOrDie("Could not find part: "+e)}function Ti(t,n,e){var o={},r=n.partUids,i=t.getSystem();return Ih(e,function(t){o[t]=mh(i.getByUid(r[t]))}),o}function Ei(t,n){var e=t.getSystem();return P(n.partUids,function(t){return mh(e.getByUid(t))})}function Bi(t){return Hh(t.partUids)}function Di(t,n,e){var o={},r=n.partUids,i=t.getSystem();return Ih(e,function(t){o[t]=mh(i.getByUid(r[t]).getOrDie())}),o}function Ai(n,t){return G(x(Si(t),function(t){return{key:t,value:n+"-"+t}}))}function Mi(n){return Nv("partUids","partUids",Dv(function(t){return Ai(t.uid,n)}),jv())}function Fi(t,n,e,o,r){var i,u;return ft(t+" [SpecSchema]",nt((u=r,(0<(i=o).length?[wt("parts",i)]:[]).concat([ht("uid"),Dt("dom",{}),Dt("components",[]),wo("originalSpec"),Dt("debug.sketcher",{})]).concat(u)).concat(n)),e)}function Ii(t,n,e,o,r){var i=hS(r),u=Fi(t,n,i,wi(e),[Mi(e)]),a=Ci(0,u,e);return o(u,ki(t,u,a.internals()),i,a.externals())}function Ri(t){var i=ft("Sketcher for "+t.name,vS,t),n=P(i.apis,$n),e=P(i.extraApis,function(t,n){return Kn(t,n)});return vh(vh({name:mh(i.name),configFields:mh(i.configFields),sketch:function(t){return n=i.name,e=i.configFields,o=i.factory,r=hS(t),o(Fi(n,e,r,[],[]),r);var n,e,o,r}},n),e)}function Vi(t){var n=ft("Sketcher for "+t.name,bS,t),e=yi(n.name,n.partFields),o=P(n.apis,$n),r=P(n.extraApis,function(t,n){return Kn(t,n)});return vh(vh({name:mh(n.name),partFields:mh(n.partFields),configFields:mh(n.configFields),sketch:function(t){return Ii(n.name,n.configFields,n.partFields,n.factory,t)},parts:mh(e)},o),r)}function Hi(t){for(var n=[],e=function(t){n.push(t)},o=0;o<t.length;o++)t[o].each(e);return n}function Ni(t){return"input"===Vn(t)&&"radio"!==zn(t,"type")||"textarea"===Vn(t)}function Pi(e,o,t,r){var n=wr(e.element(),"."+o.highlightClass);Ih(n,function(n){l(r,function(t){return t.element()===n})||(de(n,o.highlightClass),e.getSystem().getByDom(n).each(function(t){o.onDehighlight(e,t),nn(t,py())}))})}function zi(t,n,e,o){Pi(t,n,0,[o]),wS(t,n,e,o)||(le(o.element(),n.highlightClass),n.onHighlight(t,o),nn(o,gy()))}function Li(e,n,t,o){var r=wr(e.element(),"."+n.itemClass);return k(r,function(t){return me(t,n.highlightClass)}).bind(function(t){var n=Zo(t,o,0,r.length-1);return e.getSystem().getByDom(r[n]).toOption()})}function ji(t,n,e){var o=T(t.slice(0,n)),r=T(t.slice(n+1));return C(o.concat(r),e)}function Ui(t,n,e){return C(T(t.slice(0,n)),e)}function Wi(t,n,e){var o=t.slice(0,n);return C(t.slice(n+1).concat(o),e)}function Gi(t,n,e){return C(t.slice(n+1),e)}function Xi(e){return function(t){var n=t.raw();return Fh(e,n.which)}}function Yi(t){return function(n){return _(t,function(t){return t(n)})}}function qi(t){return!0===t.raw().shiftKey}function Ki(t){return!0===t.raw().ctrlKey}function Ji(t,n){return{matches:t,classification:n}}function $i(t,n,e){n.exists(function(n){return e.exists(function(t){return Jt(t,n)})})||en(t,ly(),{prevFocus:n,newFocus:e})}function Qi(){function o(t){return qo(t.element())}return{get:o,set:function(t,n){var e=o(t);t.getSystem().triggerFocus(n,t.element()),$i(t,e,o(t))}}}function Zi(){function r(t){return TS.getHighlighted(t).map(function(t){return t.element()})}return{get:r,set:function(n,t){var e=r(n);n.getSystem().getByDom(t).fold(Q,function(t){TS.highlight(n,t)});var o=r(n);$i(n,e,o)}}}function tu(t,n,e,o,a){function c(n,e,t,o,r){return(i=t(n,e,o,r),u=e.event(),C(i,function(t){return t.matches(u)}).map(function(t){return t.classification})).bind(function(t){return t(n,e,o,r)});var i,u}var r={schema:function(){return t.concat([Dt("focusManager",Qi()),At("focusInside","onFocus",at(function(t){return Fh(["onFocus","onEnterOrSpace","onApi"],t)?Ch.value(t):Ch.error("Invalid value for focusInside")})),xo("handler",r),xo("state",n),xo("sendFocusIn",a)])},processKey:c,toEvents:function(i,u){return an((i.focusInside!==iw.OnFocusMode?xh.none():a(i).map(function(e){return ln(Gb(),function(t,n){e(t,i,u),n.stop()})})).toArray().concat([ln(Hb(),function(o,r){c(o,r,e,i,u).fold(function(){var n,e,t;n=o,e=r,t=Xi([32].concat([13]))(e.event()),i.focusInside===iw.OnEnterOrSpaceMode&&t&&Qt(n,e)&&a(i).each(function(t){t(n,i,u),e.stop()})},function(){r.stop()})}),ln(Nb(),function(t,n){c(t,n,o,i,u).each(function(){n.stop()})})]))}};return r}function nu(t){function i(t,n){return 0<Ne(t.visibilitySelector.bind(function(t){return ao(n,t)}).getOr(n))}function n(n,e){var o,t;(o=e,t=w(wr(n.element(),o.selector),function(t){return i(o,t)}),xh.from(t[o.firstTabstop])).each(function(t){e.focusManager.set(n,t)})}function a(n,t,e,o,r){return r(t,e,function(t){return i(n=o,e=t)&&n.useTabstopAt(e);var n,e}).fold(function(){return o.cyclic?xh.some(!0):xh.none()},function(t){return o.focusManager.set(n,t),xh.some(!0)})}function o(n,t,e,o){var r,i,u=wr(n.element(),e.selector);return(r=n,i=e,i.focusManager.get(r).bind(function(t){return ao(t,i.selector)})).bind(function(t){return k(u,m(Jt,t)).bind(function(t){return a(n,u,t,e,o)})})}var e=[kt("onEscape"),kt("onEnter"),Dt("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Dt("firstTabstop",0),Dt("useTabstopAt",mh(!0)),kt("visibilitySelector")].concat([t]),r=mh([Ji(Yi([qi,Xi([9])]),function(t,n,e){return o(t,0,e,e.cyclic?ji:Ui)}),Ji(Xi([9]),function(t,n,e){return o(t,0,e,e.cyclic?Wi:Gi)}),Ji(Xi([27]),function(n,e,t){return t.onEscape.bind(function(t){return t(n,e)})}),Ji(Yi([ES,Xi([13])]),function(n,e,t){return t.onEnter.bind(function(t){return t(n,e)})})]),u=mh([]);return tu(e,Ny.init,r,u,function(){return xh.some(n)})}function eu(t,n,e){return Ni(e)&&Xi([32])(n.event())?xh.none():(rn(t,e,Kb()),xh.some(!0))}function ou(){return xh.some(!0)}function ru(t,n,e){return e.execute(t,n,t.element())}function iu(){var e=Kv(xh.none());return Py({readState:function(){return e.get().map(function(t){return{numRows:String(t.numRows()),numColumns:String(t.numColumns())}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,n){e.set(xh.some({numRows:mh(t),numColumns:mh(n)}))},getNumRows:function(){return e.get().map(function(t){return t.numRows()})},getNumColumns:function(){return e.get().map(function(t){return t.numColumns()})}})}function uu(i){return function(t,n,e,o){var r=i(t.element());return NS(r,t,n,e,o)}}function au(t,n){return uu(lr(t,n))}function cu(t,n){return uu(lr(n,t))}function su(r){return function(t,n,e,o){return NS(r,t,n,e,o)}}function lu(t){return!((n=t.dom()).offsetWidth<=0&&n.offsetHeight<=0);var n}function fu(t,n,e){var o,r=wr(t,e);return k(o=w(r,lu),function(t){return Jt(t,n)}).map(function(t){return{index:mh(t),candidates:mh(o)}})}function du(t,n){return k(t,function(t){return Jt(n,t)})}function mu(e,t,o,n){return n(Math.floor(t/o),t%o).bind(function(t){var n=t.row()*o+t.column();return 0<=n&&n<e.length?xh.some(e[n]):xh.none()})}function gu(r,t,i,u,a){return mu(r,t,u,function(t,n){var e=t===i-1?r.length-t*u:u,o=Zo(n,a,0,e-1);return xh.some({row:mh(t),column:mh(o)})})}function pu(r,t,i,u,a){return mu(r,t,u,function(t,n){var e=Zo(t,a,0,i-1),o=tr(n,0,(e===i-1?r.length-e*u:u)-1);return xh.some({row:mh(e),column:mh(o)})})}function hu(n,e){uo(n.element(),e.selector).each(function(t){e.focusManager.set(n,t)})}function vu(r){return function(t,n,e,o){return fu(t,n,e.selector).bind(function(t){return r(t.candidates(),t.index(),o.getNumRows().getOr(e.initSize.numRows),o.getNumColumns().getOr(e.initSize.numColumns))})}}function bu(t,n,e){return e.captureTab?xh.some(!0):xh.none()}function yu(t,n,e,i){var u=function(t,n,e){var o,r=Zo(n,i,0,e.length-1);return r===t?xh.none():"button"===Vn(o=e[r])&&"disabled"===zn(o,"disabled")?u(t,r,e):xh.from(e[r])};return fu(t,e,n).bind(function(t){var n=t.index(),e=t.candidates();return u(n,n,e)})}function xu(n,e,o){return(t=n,r=o,r.focusManager.get(t).bind(function(t){return ao(t,r.selector)})).bind(function(t){return o.execute(n,e,t)});var t,r}function wu(n,e){e.getInitial(n).orThunk(function(){return uo(n.element(),e.selector)}).each(function(t){e.focusManager.set(n,t)})}function Su(t,n,e){return yu(t,e.selector,n,-1)}function Cu(t,n,e){return yu(t,e.selector,n,1)}function ku(r){return function(t,n,e,o){return r(t,n,e,o).bind(function(){return e.executeOnMove?xu(t,n,e):xh.some(!0)})}}function Ou(t,n,e){return e.onEscape(t,n)}function _u(t,n,e){return xh.from(t[n]).bind(function(t){return xh.from(t[e]).map(function(t){return $S({rowIndex:n,columnIndex:e,cell:t})})})}function Tu(t,n,e,o){return _u(t,n,Zo(e,o,0,t[n].length-1))}function Eu(t,n,e,o){var r=Zo(e,o,0,t.length-1);return _u(t,r,tr(n,0,t[r].length-1))}function Bu(t,n,e,o){return _u(t,n,tr(e+o,0,t[n].length-1))}function Du(t,n,e,o){var r=tr(e+o,0,t.length-1);return _u(t,r,tr(n,0,t[r].length-1))}function Au(n,e){e.previousSelector(n).orThunk(function(){var t=e.selectors;return uo(n.element(),t.cell)}).each(function(t){e.focusManager.set(n,t)})}function Mu(t,o){return function(n,e,i){var u=i.cycles?t:o;return ao(e,i.selectors.row).bind(function(t){return du(wr(t,i.selectors.cell),e).bind(function(o){var r=wr(n,i.selectors.row);return du(r,t).bind(function(t){var n,e=(n=i,x(r,function(t){return wr(t,n.selectors.cell)}));return u(e,t,o).map(function(t){return t.cell()})})})})}}function Fu(n,e,o){return o.focusManager.get(n).bind(function(t){return o.execute(n,e,t)})}function Iu(n,e){uo(n.element(),e.selector).each(function(t){e.focusManager.set(n,t)})}function Ru(t,n,e){return yu(t,e.selector,n,-1)}function Vu(t,n,e){return yu(t,e.selector,n,1)}function Hu(t,n,e,o){var r=t.getSystem().build(o);kw(t,r,e)}function Nu(t,n,e,o){C(xC(t),function(t){return Jt(o.element(),t.element())}).each(qr)}function Pu(n,t,e,r,o){var i=xC(n);return xh.from(i[r]).map(function(t){return Nu(n,0,0,t),o.each(function(t){Hu(n,0,function(t,n){var e,o;o=n,Tn(e=t,r).fold(function(){wy(e,o)},function(t){En(t,o)})},t)}),t})}function zu(t,n){return{key:t,value:{config:{},me:(e=t,o=an(n),Wo({fields:[ht("enabled")],name:e,active:{events:mh(o)}})),configAsRaw:mh({}),initialConfig:{},state:Ny}};var e,o}function Lu(t,n){n.ignore||(Xo(t.element()),n.onFocus(t))}function ju(t,n,e){var o=n.aria;o.update(t,o,e.get())}function Uu(n,t,e){t.toggleClass.each(function(t){e.get()?le(n.element(),t):de(n.element(),t)})}function Wu(t,n,e){OC(t,n,e,!e.get())}function Gu(t,n,e){e.set(!0),Uu(t,n,e),ju(t,n,e)}function Xu(t,n,e){e.set(!1),Uu(t,n,e),ju(t,n,e)}function Yu(t,n,e){OC(t,n,e,n.selected)}function qu(){function t(t,n){n.stop(),on(t)}return[ln(Lb(),t),ln($b(),t),pn(_b()),pn(Db())]}function Ku(t){return an(N([t.map(function(e){return xy(function(t,n){e(t),n.stop()})}).toArray(),qu()]))}function Ju(t){(qo(t.element()).isNone()||kC.isFocused(t))&&(kC.isFocused(t)||kC.focus(t),en(t,DC,{item:t}))}function $u(t){en(t,AC,{item:t})}function Qu(t,n){var e={};Ph(t,function(t,n){Ih(t,function(t){e[t]=n})});var o=n,r=zh(n,function(t,n){return{k:t,v:n}}),i=P(r,function(t,n){return[n].concat(jC(e,o,r,n))});return P(e,function(t){return jh(i,t).getOr([t])})}function Zu(t){return t.x()}function ta(t,n){return t.x()+t.width()/2-n.width()/2}function na(t,n){return t.x()+t.width()-n.width()}function ea(t){return t.y()}function oa(t,n){return t.y()+t.height()-n.height()}function ra(t,n,e){return vx(Zu(t),oa(t,n),e.innerSoutheast(),yx(),"layout-se")}function ia(t,n,e){return vx(na(t,n),oa(t,n),e.innerSouthwest(),xx(),"layout-sw")}function ua(t,n,e){return vx(Zu(t),ea(t),e.innerNortheast(),wx(),"layout-ne")}function aa(t,n,e){return vx(na(t,n),ea(t),e.innerNorthwest(),Sx(),"layout-nw")}function ca(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function sa(t){return t.getParam("width",$C.DOM.getStyle(t.getElement(),"width"))}function la(t){return xh.from(t.settings.min_width).filter(Bh)}function fa(t){return xh.from(t.settings.min_height).filter(Bh)}function da(t){return xh.from(t.getParam("max_width")).filter(Bh)}function ma(t){return xh.from(t.getParam("max_height")).filter(Bh)}function ga(t){return!1!==t.getParam("menubar",!0,"boolean")}function pa(t){var n=t.getParam("toolbar",!0),e=!0===n,o=kh(n),r=_h(n)&&0<n.length;return!ZC(t)&&(r||o||e)}function ha(n){var t=w(x(w(Hh(n.settings),function(t){return/^toolbar([1-9])$/.test(t)}),function(t){return n.getParam(t,!1,"string")}),function(t){return"string"==typeof t});return 0<t.length?xh.some(t):xh.none()}function va(t){return t.getParam("toolbar_mode","","string")}function ba(t){var n=t.getParam("fixed_toolbar_container","","string");return 0<n.length&&t.inline?uo(jy(),n):xh.none()}function ya(t){return t.inline&&ba(t).isSome()}function xa(t){return t.inline&&!ga(t)&&!pa(t)&&!ZC(t)}function wa(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!ya(t)&&!xa(t)}function Sa(t){var n=function lh(n){return n.uid!==undefined}(t)&&I(t,"uid")?t.uid:Yn("memento");return{get:function(t){return t.getSystem().getByUid(n).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(n).toOption()},asSpec:function(){return vh(vh({},t),{uid:n})}}}function Ca(t){return xh.from(t()["temporary-placeholder"]).getOr("!not found!")}function ka(t,n){return xh.from(n()[t]).getOrThunk(function(){return Ca(n)})}function Oa(t,u,a){var c=u.backstage,s=ek(t);return{open:function(t,n){function e(){n(),YC.hide(i)}var o=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),r=Yy(ik.sketch({text:t.text,level:Fh(["success","error","warning","warn","info"],t.type)?t.type:undefined,progress:!0===t.progressBar,icon:xh.from(t.icon),closeButton:!o,onAction:e,iconProvider:c.shared.providers.icons,translationProvider:c.shared.providers.translate})),i=Yy(YC.sketch(vh({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:u.backstage.shared.getSink,fireDismissalEventInstead:{}},s?{}:{fireRepositionEventInstead:{}})));return a.add(i),0<t.timeout&&JC.setTimeout(function(){e()},t.timeout),{close:e,moveTo:function(t,n){YC.showAt(i,{anchor:"makeshift",x:t,y:n},qy(r))},moveRel:function(t,n){if("banner"!==n){var e=function(){switch(n){case"bc-bc":return KC;case"tc-tc":return qC;case"tc-bc":return Tx;case"bc-tc":default:return Ex}}(),o={anchor:"node",root:jy(),node:xh.some($v.fromDom(t)),layouts:{onRtl:function(){return[e]},onLtr:function(){return[e]}}};YC.showAt(i,o,qy(r))}else YC.showAt(i,u.backstage.shared.anchors.banner(),qy(r))},text:function(t){ik.updateText(r,t)},settings:t,getEl:function(){return r.element().dom()},progressBar:{value:function(t){ik.updateProgress(r,t)}}}},close:function(t){t.close()},reposition:function(t){var e;Ih(t,function(t){return t.moveTo(0,0)}),0<(e=t).length&&(Rh(e).each(function(t){return t.moveRel(null,"banner")}),Ih(e,function(t,n){0<n&&t.moveRel(e[n-1].getEl(),"bc-tc")}))},getArgs:function(t){return t.settings}}}function _a(e,o){var r=null;return{cancel:function(){null!==r&&(v.clearTimeout(r),r=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==r&&v.clearTimeout(r),r=v.setTimeout(function(){e.apply(null,t),r=null},o)}}}function Ta(o,t,n,e,r){var i=uk(o,function(t){return e=t,(n=o).isBlock(e)||Fh(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===n.getContentEditable(e);var n,e});return xh.from(i.backwards(t,n,e,r))}function Ea(e,n){return ak($v.fromDom(e.selection.getNode())).getOrThunk(function(){var t=$v.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());return wy(t,$v.fromDom(n.extractContents())),n.insertNode(t.dom()),kn(t).each(function(t){return t.dom().normalize()}),sw(t,xr).map(function(t){var n;e.selection.setCursorLocation(t.dom(),"img"===Vn(n=t)?1:yr(n).fold(function(){return _n(n).length},function(t){return t.length}))}),t})}function Ba(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function Da(t){return""!==t&&-1!==" \xa0\f\n\r\t\x0B".indexOf(t)}function Aa(t,n){return t.substring(n.length)}function Ma(t,o,r,i){if(void 0===i&&(i=0),!(n=o).collapsed||3!==n.startContainer.nodeType)return xh.none();var n,e=t.getParent(o.startContainer,t.isBlock)||t.getRoot();return Ta(t,o.startContainer,o.startOffset,function(t,i,n){return function(t,n,e){var o;for(o=i-1;0<=o;o--){var r=t.charAt(o);if(Da(r))return xh.none();if(r===e)break}return xh.some(o)}(n,0,r).getOr(i)},e).bind(function(t){var n=o.cloneRange();if(n.setStart(t.container,t.offset),n.setEnd(o.endContainer,o.endOffset),n.collapsed)return xh.none();var e=Ba(n);return 0!==e.lastIndexOf(r)||Aa(e,r).length<i?xh.none():xh.some({text:Aa(e,r),range:n,triggerChar:r})})}function Fa(o,t,r,n){return void 0===n&&(n=0),ak($v.fromDom(t.startContainer)).fold(function(){return Ma(o,t,r,n)},function(t){var n=o.createRng();n.selectNode(t.dom());var e=Ba(n);return xh.some({range:n,text:Aa(e,r),triggerChar:r})})}function Ia(t,n){return{container:t,offset:n}}function Ra(r){return function(t){var n,e,o=fk(t.startContainer,t.startOffset);return!Ta(n=r,(e=o).container,e.offset,function(t,n){return 0===n?-1:n},n.getRoot()).filter(function(t){return!Da(t.container.data.charAt(t.offset-1))}).isSome()}}function Va(n,e){var o,r,t=e(),i=n.selection.getRng();return(o=n.dom,r=i,A(t.triggerChars,function(t){return Fa(o,r,t)})).bind(function(t){return dk(n,e,t)})}function Ha(t){var n,e,o=P(t.ui.registry.getAll().popups,function(t){return st("Autocompleter",pk,t).fold(function(t){throw new Error(Lv(t))},function(t){return t})}),r=(n=Lh(o,function(t){return t.ch}),e={},Ih(n,function(t){e[t]={}}),Hh(e)),i=F(o);return{dataset:o,triggerChars:r,lookupByChar:function(n){return w(i,function(t){return t.ch===n})}}}function Na(t,o,n){var r=wr(t.element(),"."+n);if(0<r.length){var e=k(r,function(t){var n=t.dom().getBoundingClientRect().top,e=r[0].dom().getBoundingClientRect().top;return Math.abs(n-e)>o}).getOr(r.length);return xh.some({numColumns:e,numRows:Math.ceil(r.length/e)})}return xh.none()}function Pa(t,n){return Uo([zu(t,n)])}function za(t){t.getSystem().broadcastOn([Ok],{})}function La(t){return jh(Ik,t).getOr(Ak)}function ja(t){return{dom:{tag:"div",classes:[Vk],innerHtml:t}}}function Ua(t){return{dom:{tag:"div",classes:[Hk]},components:[Ve(Dk.translate(t))]}}function Wa(t,n){return{dom:{tag:"div",classes:[Hk]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Ve(Dk.translate(n))]}]}}function Ga(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:Lk(t)}}}function Xa(t){return{dom:{tag:"div",classes:[Vk,"tox-collection__item-checkmark"],innerHtml:ka("checkmark",t)}}}function Ya(t,n,e,o,r){var i=e?t.checkMark.orThunk(function(){return n.or(xh.some("")).map(ja)}):xh.none(),u=t.ariaLabel.map(function(t){return{attributes:{title:Dk.translate(t)}}}).getOr({});return{dom:vh({tag:"div",classes:[Ak,Mk].concat(r?["tox-collection__item-icon-rtl"]:[])},u),optComponents:[i,t.htmlContent.fold(function(){return t.textContent.map(o)},function(t){return xh.some({dom:{tag:"div",classes:[Hk],innerHtml:t}})}),t.shortcutContent.map(Ga),t.caret]}}function qa(t,r,n,i){void 0===i&&(i=xh.none());var e,o,u,a,c,s=Dk.isRtl()&&t.iconContent.exists(function(t){return Fh(Uk,t)}),l=t.iconContent.map(function(t){return Dk.isRtl()&&Fh(jk,t)?t+"-rtl":t}).map(function(t){return n=t,e=r.icons,o=i,xh.from(e()[n]).or(o).getOrThunk(function(){return Ca(e)});var n,e,o}),f=xh.from(t.meta).fold(function(){return Ua},function(t){return Uh(t,"style")?m(Wa,t.style):Ua});return"color"===t.presets?(e=t.ariaLabel,o=t.value,u=r,{dom:(a=l.getOr(""),c={tag:"div",attributes:e.map(function(t){return{title:u.translate(t)}}).getOr({}),classes:["tox-swatch"]},vh(vh({},c),"custom"===o?{tag:"button",classes:y(c.classes,["tox-swatches__picker-btn"]),innerHtml:a}:"remove"===o?{classes:y(c.classes,["tox-swatch--remove"]),innerHtml:a}:{attributes:vh(vh({},c.attributes),{"data-mce-color":o}),styles:{"background-color":o}})),optComponents:[]}):Ya(t,l,n,f,s)}function Ka(t,n){n.disabled&&Gk(t,n)}function Ja(t,n){return!0===n.useNative&&Fh(Wk,Vn(t.element()))}function $a(t){Pn(
t.element(),"disabled","disabled")}function Qa(t){jn(t.element(),"disabled")}function Za(t){Pn(t.element(),"aria-disabled","true")}function tc(t){Pn(t.element(),"aria-disabled","false")}function nc(n,t){t.disableClass.each(function(t){de(n.element(),t)}),(Ja(n,t)?Qa:tc)(n),t.onEnabled(n)}function ec(t,n){return Ja(t,n)?Ln(t.element(),"disabled"):"true"===zn(t.element(),"aria-disabled")}function oc(t,n){var e=t.getApi(n);return function(t){t(e)}}function rc(e,o){return vy(function(t){oc(e,t)(function(t){var n=e.onSetup(t);null!==n&&n!==undefined&&o.set(n)})})}function ic(n,e){return by(function(t){return oc(n,t)(e.get())})}function uc(t){return O(t,function(t){return t.toArray()})}function ac(t,n,e){var o,r,i=Kv(Q);return{type:"item",dom:n.dom,components:uc(n.optComponents),data:t.data,eventOrder:eO,hasSubmenu:t.triggersSubmenu,itemBehaviours:Uo([zu("item-events",[(o=t,r=e,xy(function(t,n){oc(o,t)(o.onAction),o.triggersSubmenu||r!==nO.CLOSE_ON_EXECUTE||(nn(t,Zb()),n.stop())})),rc(t,i),ic(t,i)]),Kk(t.disabled),wC.config({})].concat(t.itemBehaviours))}}function cc(t){return{value:t.value,meta:vh({text:t.text.getOr("")},t.meta)}}function sc(t,n){var e,o=(e=Dk.translate(t),$C.DOM.encode(e));if(0<n.length){var r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return o.replace(r,function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"})}return o}function lc(n,e,t){function o(t){return en(t,iO,{row:n,col:e})}function r(t,n){n.stop(),o(t)}var i;return Yy({dom:{tag:"div",attributes:(i={role:"button"},i["aria-labelledby"]=t,i)},behaviours:Uo([zu("insert-table-picker-cell",[ln(Ib(),kC.focus),ln(Kb(),o),ln(Lb(),r),ln($b(),r)]),BC.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),kC.config({onFocus:function(t){return en(t,rO,{row:n,col:e})}})])})}function fc(t){return{value:mh(t)}}function dc(t){return uO.test(t)||aO.test(t)}function mc(t){var n,e=(n=t.value().replace(uO,function(t,n,e,o){return n+n+e+e+o+o}),{value:mh(n)}),o=aO.exec(e.value());return null===o?["FFFFFF","FF","FF","FF"]:o}function gc(t){var n=t.toString(16);return 1===n.length?"0"+n:n}function pc(t){return fc(gc(t.red())+gc(t.green())+gc(t.blue()))}function hc(t,n,e,o){return{red:mh(t),green:mh(n),blue:mh(e),alpha:mh(o)}}function vc(t){var n=parseInt(t,10);return n.toString()===t&&0<=n&&n<=255}function bc(t){var n,e,o,r=(t.hue()||0)%360,i=t.saturation()/100,u=t.value()/100;if(i=sO(0,cO(i,1)),u=sO(0,cO(u,1)),0===i)return hc(n=e=o=lO(255*u),e,o,1);var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),l=u-c;switch(Math.floor(a)){case 0:n=c,e=s,o=0;break;case 1:n=s,e=c,o=0;break;case 2:n=0,e=c,o=s;break;case 3:n=0,e=s,o=c;break;case 4:n=s,e=0,o=c;break;case 5:n=c,e=0,o=s;break;default:n=e=o=0}return hc(n=lO(255*(n+l)),e=lO(255*(e+l)),o=lO(255*(o+l)),1)}function yc(t){var n=mc(t);return hc(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1)}function xc(t,n,e,o){return hc(parseInt(t,10),parseInt(n,10),parseInt(e,10),parseFloat(o))}function wc(t){return"rgba("+t.red()+","+t.green()+","+t.blue()+","+t.alpha()+")"}function Sc(t){var n=[],u=v.document.createElement("canvas");u.height=1,u.width=1;for(var a=u.getContext("2d"),c=function(t,n){var e=n/255;return("0"+Math.round(t*e+255*(1-e)).toString(16)).slice(-2).toUpperCase()},e=function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();a.clearRect(0,0,u.width,u.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);var n=a.getImageData(0,0,1,1).data,e=n[0],o=n[1],r=n[2],i=n[3];return"#"+c(e,i)+c(o,i)+c(r,i)},o=0;o<t.length;o+=2)n.push({text:t[o+1],value:e(t[o]),type:"choiceitem"});return n}function Cc(t){return t.getParam("color_map")}function kc(t,e){var o;return t.dom.getParents(t.selection.getStart(),function(t){var n;(n=t.style["forecolor"===e?"color":"background-color"])&&(o=o||n)}),o}function Oc(t){return Math.max(5,Math.ceil(Math.sqrt(t)))}function _c(t){var n=Oc(wO(t).length);return yO(t,n)}function Tc(n,e,t,o){"custom"===t?DO(n)(function(t){t.each(function(t){CO(t),n.execCommand("mceApplyTextcolor",e,t),o(t)})},"#000000"):"remove"===t?(o(""),n.execCommand("mceRemoveTextcolor",e)):(o(t),n.execCommand("mceApplyTextcolor",e,t))}function Ec(t,n){return t.concat(SO().concat((o={type:e="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},n?[o,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var e,o}function Bc(n,e){return function(t){t(Ec(n,e))}}function Dc(t,n,e){var o,r;o="forecolor"===n?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=e,t.setIconFill(o,r),t.setIconStroke(o,r)}function Ac(o,e,r,t,i){o.ui.registry.addSplitButton(e,{tooltip:t,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){return xh.from(kc(o,r)).bind(function(t){return function(t){if("transparent"===t)return xh.some(hc(0,0,0,0));var n=fO.exec(t);if(null!==n)return xh.some(xc(n[1],n[2],n[3],"1"));var e=dO.exec(t);return null!==e?xh.some(xc(e[1],e[2],e[3],e[4])):xh.none()}(t).map(function(t){var n=pc(t).value();return Wt(e.toLowerCase(),n)})}).getOr(!1)},columns:_c(o),fetch:Bc(wO(o),xO(o)),onAction:function(){null!==i.get()&&Tc(o,r,i.get(),function(){})},onItemAction:function(t,n){Tc(o,r,n,function(t){i.set(t),BO(o,{name:e,color:t})})},onSetup:function(n){function t(t){t.name===e&&Dc(n,t.name,t.color)}return null!==i.get()&&Dc(n,e,i.get()),o.on("TextColorChange",t),function(){o.off("TextColorChange",t)}}})}function Mc(n,t,e,o){n.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(t){Tc(n,e,t.value,Q)}}]}})}function Fc(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function Ic(t){var n=Fc(t);return{backgroundMenu:n.backgroundMenu,selectedMenu:n.selectedMenu,menu:n.menu,selectedItem:n.selectedItem,item:La(t)}}function Rc(t,n,e){return{dom:{tag:"div",classes:N([[Fc(e).tieredMenu]])},markers:Ic(e)}}function Vc(n,e){return function(t){return x(g(t,e),function(t){return{dom:n,components:t}})}}function Hc(t,e){var o=[],r=[];return Ih(t,function(t,n){e(t,n)?(0<r.length&&o.push(r),r=[],Uh(t.dom,"innerHtml")&&r.push(t)):r.push(t)}),0<r.length&&o.push(r),x(o,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}})}function Nc(n,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===n?["tox-collection--list"]:["tox-collection--grid"])},components:[LC.parts().items({preprocess:function(t){return"auto"!==n&&1<n?Vc({tag:"div",classes:["tox-collection__group"]},n)(t):Hc(t,function(t,n){return"separator"===e[n].type})}})]}}function Pc(t){return t.icon!==undefined||"togglemenuitem"===t.type||"choicemenuitem"===t.type}function zc(t){return v.console.error(Lv(t)),v.console.log(t),xh.none()}function Lc(t,n,e){var o,r=(o=e,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[LC.parts().items({preprocess:function(t){return Hc(t,function(t,n){return"separator"===o[n].type})}})]});return{value:t,dom:r.dom,components:r.components,items:e}}function jc(t,n,e,o,r){var i,u,a,c,s,l;return"color"===r?{value:t,dom:(l=o,i={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[LC.parts().items({preprocess:"auto"!==l?Vc({tag:"div",classes:["tox-swatches__row"]},l):f})]}]}).dom,components:i.components,items:e}:"normal"===r&&"auto"===o?{value:t,dom:(i=Nc(o,e)).dom,components:i.components,items:e}:"normal"===r&&1===o?{value:t,dom:(i=Nc(1,e)).dom,components:i.components,items:e}:"normal"===r?{value:t,dom:(i=Nc(o,e)).dom,components:i.components,items:e}:"listpreview"!==r||"auto"===o?{value:t,dom:(a=n,c=o,s=Fc(r),{tag:"div",classes:N([[s.menu,"tox-menu-"+c+"-column"],a?[s.hasIcons]:[]])}),components:MO,items:e}:{value:t,dom:(u=o,i={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[LC.parts().items({preprocess:Vc({tag:"div",classes:["tox-collection__group"]},u)})]}).dom,components:i.components,items:e}}function Uc(t,n,e,o,r,i,u,a){return jc(t,l(n,Pc),FO(n,e,o,"color"!==r?"normal":"color",i,u,a),o,r)}function Wc(t,n){var e=Ic(n);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===n?"tox-swatches__row":"tox-collection__group")}}function Gc(t){return t.icon!==undefined||"togglemenuitem"===t.type||"choicemenuitem"===t.type}function Xc(t){return l(t,Gc)}function Yc(t,n,e,o,r){function i(t){return r?vh(vh({},t),{shortcut:xh.none(),icon:t.text.isSome()?xh.none():t.icon}):t}var u=e.shared.providers;switch(t.type){case"menuitem":return st("menuitem",vk,t).fold(zc,function(t){return xh.some(HO(i(t),n,u,o))});case"nestedmenuitem":return st("nestedmenuitem",bk,t).fold(zc,function(t){return xh.some(NO(i(t),n,u,o,r))});case"togglemenuitem":return st("togglemenuitem",yk,t).fold(zc,function(t){return xh.some(PO(i(t),n,u))});case"separator":return st("separatormenuitem",mk,t).fold(zc,function(t){return xh.some(VO(t))});case"fancymenuitem":return st("fancymenuitem",wk,t).fold(zc,function(t){return zO(i(t),e)});default:return v.console.error("Unknown item in general menu",t),xh.none()}}function qc(t,n,e,o,r,i){var u=1===o,a=!u||Xc(t);return Hi(x(t,function(t){return"separator"===t.type?st("Autocompleter.Separator",mk,t).fold(zc,function(t){return xh.some(VO(t))}):st("Autocompleter.Item",gk,t).fold(zc,function(t){return xh.some(RO(t,n,u,"normal",e,r,i,a))})}))}function Kc(t,n,e,o,r){var i=Xc(n),u=Hi(x(n,function(t){function n(t){return Yc(t,e,o,r?!t.hasOwnProperty("text"):i,r)}return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?n(vh(vh({},t),{disabled:!0})):n(t)}));return(r?Lc:jc)(t,i,u,1,"normal")}function Jc(t){return XC.singleData(t.value,t)}function $c(t,n,e){return Ge(t,n,XO,e,!1)}function Qc(t,n,e){return Ge(t,n,XO,e,!0)}function Zc(t,n,e){return ao(t,n,e).isSome()}function ts(e,o){var r=null;return{cancel:function(){null!==r&&(v.clearTimeout(r),r=null)},schedule:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r=v.setTimeout(function(){e.apply(null,t),r=null},o)}}}function ns(t){var n=t.raw();return n.touches===undefined||1!==n.touches.length?xh.none():xh.some(n.touches[0])}function es(e){var u=Kv(xh.none()),o=Kv(!1),r=ts(function(t){e.triggerEvent(Qb(),t),o.set(!0)},400),i=G([{key:_b(),value:function(e){return ns(e).each(function(t){r.cancel();var n={x:mh(t.clientX),y:mh(t.clientY),target:e.target};r.schedule(e),o.set(!1),u.set(xh.some(n))}),xh.none()}},{key:Tb(),value:function(t){return r.cancel(),ns(t).each(function(i){u.get().each(function(t){var n,e,o,r;n=i,e=t,o=Math.abs(n.clientX-e.x()),r=Math.abs(n.clientY-e.y()),!(5<o||5<r)||u.set(xh.none())})}),xh.none()}},{key:Eb(),value:function(n){return r.cancel(),u.get().filter(function(t){return Jt(t.target(),n.target())}).map(function(){return o.get()?(n.prevent(),!1):e.triggerEvent($b(),n)})}}]);return{fireIfReady:function(n,t){return jh(i,t).bind(function(t){return t(n)})}}}function os(n,t){var e,o,r,i,u=ft("Getting GUI events settings",KO,t),a=es(u),c=x(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return $c(n,t,function(n){a.fireIfReady(n,t).each(function(t){t&&n.kill()}),u.triggerEvent(t,n)&&n.kill()})}),s=Kv(xh.none()),l=$c(n,"paste",function(n){a.fireIfReady(n,"paste").each(function(t){t&&n.kill()}),u.triggerEvent("paste",n)&&n.kill(),s.set(xh.some(v.setTimeout(function(){u.triggerEvent(Yb(),n)},0)))}),f=$c(n,"keydown",function(t){var n;u.triggerEvent("keydown",t)?t.kill():!0===u.stopBackspace&&(8===(n=t).raw().which&&!Fh(["input","textarea"],Vn(n.target()))&&!Zc(n.target(),'[contenteditable="true"]'))&&t.prevent()}),d=(r=n,i=function(t){u.triggerEvent("focusin",t)&&t.kill()},qO?Qc(r,"focus",i):$c(r,"focusin",i)),m=Kv(xh.none()),g=(e=n,o=function(t){u.triggerEvent("focusout",t)&&t.kill(),m.set(xh.some(v.setTimeout(function(){u.triggerEvent(Xb(),t)},0)))},qO?Qc(e,"blur",o):$c(e,"focusout",o));return{unbind:function(){Ih(c,function(t){t.unbind()}),f.unbind(),d.unbind(),g.unbind(),l.unbind(),s.get().each(v.clearTimeout),m.get().each(v.clearTimeout)}}}function rs(t,n){var e=jh(t,"target").map(function(t){return t()}).getOr(n);return Kv(e)}function is(t,o,n,e,r,i){var u,a,c,s,l=t(o,e),f=(u=n,a=r,c=Kv(!1),s=Kv(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:mh(u),setSource:a.set,getSource:a.get});return l.fold(function(){return i.logEventNoHandlers(o,e),JO.complete()},function(n){var e=n.descHandler();return te(e)(f),f.isStopped()?(i.logEventStopped(o,n.element(),e.purpose()),JO.stopped()):f.isCut()?(i.logEventCut(o,n.element(),e.purpose()),JO.complete()):kn(n.element()).fold(function(){return i.logNoParent(o,n.element(),e.purpose()),JO.complete()},function(t){return i.logEventResponse(o,n.element(),e.purpose()),JO.resume(t)})})}function us(t,n){var e,o,r=(e=n,{stop:function(){o.set(!0)},cut:Q,isStopped:(o=Kv(!1)).get,isCut:mh(!1),event:mh(e),setSource:i("Cannot set source of a broadcasted event"),getSource:i("Cannot get source of a broadcasted event")});return Ih(t,function(t){te(t.descHandler())(r)}),r.isStopped()}function as(){var i={};return{registerId:function(o,r,t){Ph(t,function(t,n){var e=i[n]!==undefined?i[n]:{};e[r]=zy(t,o),i[n]=e})},unregisterId:function(n){Ph(i,function(t){t.hasOwnProperty(n)&&delete t[n]})},filterByType:function(t){return jh(i,t).map(function(t){return Lh(t,function(t,n){return t_(n,t)})}).getOr([])},find:function(t,n,e){var r=jh(i,n);return Ob(e,function(t){return e=r,Fy(o=t).fold(function(){return xh.none()},function(n){return e.bind(function(t){return jh(t,n)}).map(function(t){return ZO(o,t)})});var e,o},t)}}}function cs(){function o(o){var t=o.element();return Fy(t).fold(function(){return t="uid-",n=o.element(),e=Xn(Dy+t),My(n,e),e;var t,n,e},function(t){return t})}var r=as(),i={},u=function(t){Fy(t.element()).each(function(t){delete i[t],r.unregisterId(t)})};return{find:function(t,n,e){return r.find(t,n,e)},filter:function(t){return r.filterByType(t)},register:function(t){var n=o(t);I(i,n)&&function(t,n){var e=i[n];if(e!==t)throw new Error('The tagId "'+n+'" is already used by: '+Gn(e.element())+"\nCannot use it for: "+Gn(t.element())+"\nThe conflicting element is"+(ve(e.element())?" ":" not ")+"already in the DOM");u(t)}(t,n);var e=[t];r.registerId(e,n,t.events()),i[n]=t},unregister:u,getById:function(t){return jh(i,t)}}}function ss(e){function o(n){return kn(e.element()).fold(function(){return!0},function(t){return Jt(n,t)})}function c(t,n){return i.find(o,t,n)}function r(n){var t=i.filter(qb());Ih(t,function(t){te(t.descHandler())(n)})}var i=cs(),t=os(e.element(),{triggerEvent:function(u,a){return fo(u,a.target(),function(t){return n=c,e=u,r=t,i=(o=a).target(),QO(n,e,o,i,r);var n,e,o,r,i})}}),u={debugInfo:mh("real"),triggerEvent:function(n,e,o){fo(n,e,function(t){return QO(c,n,o,e,t)})},triggerFocus:function(i,u){Fy(i).fold(function(){Xo(i)},function(){fo(Gb(),i,function(t){return n=c,e=Gb(),o={originator:mh(u),kill:Q,prevent:Q,target:mh(i)},r=t,is(n,e,o,i,rs(o,i),r),!1;var n,e,o,r})})},triggerEscape:function(t,n){u.triggerEvent("keydown",t.element(),n.event())},getByUid:function(t){return g(t)},getByDom:function(t){return p(t)},build:Yy,addToGui:function(t){s(t)},removeFromGui:function(t){l(t)},addToWorld:function(t){n(t)},removeFromWorld:function(t){a(t)},broadcast:function(t){f(t)},broadcastOn:function(t,n){d(t,n)},broadcastEvent:function(t,n){m(t,n)},isConnected:mh(!0)},n=function(t){t.connect(u),ky(t.element())||(i.register(t),Ih(t.components(),n),u.triggerEvent(ny(),t.element(),{target:mh(t.element())}))},a=function(t){ky(t.element())||(Ih(t.components(),a),i.unregister(t)),t.disconnect()},s=function(t){Xr(e,t)},l=function(t){qr(t)},f=function(t){r({universal:mh(!0),data:mh(t)})},d=function(t,n){r({universal:mh(!1),channels:mh(t),data:mh(n)})},m=function(t,n){return us(i.filter(t),n)},g=function(t){return i.getById(t).fold(function(){return Ch.error(new Error('Could not find component with uid: "'+t+'" in system.'))},Ch.value)},p=function(t){var n=Fy(t).getOr("not found");return g(n)};return n(e),{root:mh(e),element:e.element,destroy:function(){t.unbind(),Sy(e.element())},add:s,remove:l,getByUid:g,getByDom:p,addToWorld:n,removeFromWorld:a,broadcast:f,broadcastOn:d,broadcastEvent:m}}function ls(t){return Uo([kC.config({onFocus:t.selectOnFocus?function(t){var n=t.element(),e=Ee(n);n.dom().setSelectionRange(0,e.length)}:Q})])}function fs(t){return{tag:t.tag,attributes:vh({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}function ds(t){v.setTimeout(function(){throw t},0)}function ms(t){var n=Vn(t);return Fh(__,n)}function gs(t,n){de(n.getRoot(t).getOr(t.element()),n.invalidClass),n.notify.each(function(n){ms(t.element())&&Pn(t.element(),"aria-invalid",!1),n.getContainer(t).each(function(t){Rn(t,n.validHtml)}),n.onValid(t)})}function ps(n,t,e,o){le(t.getRoot(n).getOr(n.element()),t.invalidClass),t.notify.each(function(t){ms(n.element())&&Pn(n.element(),"aria-invalid",!0),t.getContainer(n).each(function(t){Rn(t,o)}),t.onInvalid(n,o)})}function hs(n,t){return t.validator.fold(function(){return O_(Ch.value(!0))},function(t){return t.validate(n)})}function vs(n,e){return e.notify.each(function(t){t.onValidate(n)}),hs(n,e).map(function(t){return n.getSystem().isConnected()?t.fold(function(t){return ps(n,e,0,t),Ch.error(t)},function(t){return gs(n,e),Ch.value(t)}):Ch.error("No longer in system")})}function bs(t,n,e,o){var r=M_(t,n,e,o);return m_.sketch(r)}function ys(t,n){return m_.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}})}function xs(t,n){var e=t.getHotspot(n).getOr(n),o=t.getAnchorOverrides();return t.layouts.fold(function(){return{anchor:"hotspot",hotspot:e,overrides:o}},function(t){return{anchor:"hotspot",hotspot:e,overrides:o,layouts:t}})}function ws(t,n,e,o,r,i,u){return(a=t,c=n,s=xs(t,e),l=e,f=o,d=r,m=u,g=c,p=l,h=(0,a.fetch)(p).map(g),v=G_(l,a),h.map(function(t){return t.bind(function(t){return xh.from(XC.sketch(vh(vh({},d.menu()),{uid:Yn(""),data:t,highlightImmediately:m===b_.HighlightFirst,onOpenMenu:function(t,n){var e=v().getOrDie();ww.position(e,s,n),Dw.decloak(f)},onOpenSubmenu:function(t,n,e){var o=v().getOrDie();ww.position(o,{anchor:"submenu",item:n},e),Dw.decloak(f)},onRepositionMenu:function(t,n,e){var o=v().getOrDie();ww.position(o,s,n),Ih(e,function(t){ww.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)})},onEscape:function(){return kC.focus(l),Dw.close(f),xh.some(!0)}})))})})).map(function(t){return t.fold(function(){Dw.isOpen(o)&&Dw.close(o)},function(t){Dw.cloak(o),Dw.open(o,t),i(o)}),o});var a,c,s,l,f,d,m,g,p,h,v}function Ss(t,n,e,o){return Dw.close(o),O_(o)}function Cs(t,n,e,o,r,i){var u=R_.getCoupled(e,"sandbox");return(Dw.isOpen(u)?Ss:ws)(t,n,e,u,o,r,i)}function ks(t,n,e){var o,r,i=xS.getCurrent(n).getOr(n),u=je(t.element());e?xe(i.element(),"min-width",u+"px"):(o=i.element(),r=u,Zy.set(o,r))}function Os(t){Dw.getState(t).each(function(t){XC.repositionMenus(t)})}function _s(o,r,i){var u=co(),t=G_(r,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:u.id(),role:"listbox"}},behaviours:Uw(o.sandboxBehaviours,[Lw.config({store:{mode:"memory",initialValue:r}}),Dw.config({onOpen:function(t,n){var e=xs(o,r);u.link(r.element()),o.matchWidth&&ks(e.hotspot,n,o.useMinWidth),o.onOpen(e,t,n),i!==undefined&&i.onOpen!==undefined&&i.onOpen(t,n)},onClose:function(t,n){u.unlink(r.element()),i!==undefined&&i.onClose!==undefined&&i.onClose(t,n)},isPartOf:function(t,n,e){return ix(n,e)||ix(r,e)},getAttachPoint:function(){return t().getOrDie()}}),xS.config({find:function(t){return Dw.getState(t).bind(function(t){return xS.getCurrent(t)})}}),Ix.config({channels:vh(vh({},ei({isExtraPart:mh(!1)})),oi({isExtraPart:mh(!1),doReposition:Os}))})])}}function Ts(t){Os(R_.getCoupled(t,"sandbox"))}function Es(){return[Dt("sandboxClasses",[]),jw("sandboxBehaviours",[xS,Ix,Dw,Lw])]}function Bs(e,n,o){function r(t,n){en(t,$_,{value:n})}var i,u,t=m_.parts().field({factory:p_,inputClasses:["tox-textfield"],onSetValue:function(t){return B_.run(t).get(function(){})},inputBehaviours:Uo([A_.config({}),B_.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return kn(t.element())},notify:{onValid:function(t){var n=Lw.getValue(t);en(t,J_,{color:n})}},validator:{validateOnLoad:!1,validate:function(t){var n=Lw.getValue(t);if(0===n.length)return O_(Ch.value(!0));var e=$v.fromTag("span");xe(e,"background-color",n);var o=ke(e,"background-color").fold(function(){return Ch.error("blah")},function(){return Ch.value(n)});return O_(o)}}})]),selectOnFocus:!1}),a=e.label.map(function(t){return ys(t,n.providers)}),c=Sa((i={dom:{tag:"span",attributes:{"aria-label":n.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Eo]},onLtr:function(){return[Bo]}},components:[],fetch:AO.getFetch(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){c.getOpt(t).each(function(n){"custom"===e?o.colorPicker(function(t){t.fold(function(){return nn(n,Q_)},function(t){r(n,t),CO(t)})},"#ffffff"):r(n,"remove"===e?"":e)})}},u=n,q_.sketch({dom:i.dom,components:i.components,toggleClass:"mce-active",dropdownBehaviours:Uo([K_.config({}),A_.config({})]),layouts:i.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:u.getSink,fetch:function(n){return k_(function(t){return i.fetch(t)}).map(function(t){return xh.from(Jc(Xh(Uc(Xn("menu-value"),t,function(t){i.onItemAction(n,t)},i.columns,i.presets,nO.CLOSE_ON_EXECUTE,function(){return!1},u.providers),{movement:Wc(i.columns,i.presets)})))})},parts:{menu:Rc(0,0,i.presets)}})));return m_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[t,c.asSpec()]}]),fieldBehaviours:Uo([zu("form-field-events",[ln(J_,function(t,n){c.getOpt(t).each(function(t){xe(t.element(),"background-color",n.event().color())}),en(t,e_,{name:e.name})}),ln($_,function(n,e){m_.getField(n).each(function(t){Lw.setValue(t,e.event().value()),xS.getCurrent(n).each(kC.focus)})}),ln(Q_,function(t){m_.getField(t).each(function(){xS.getCurrent(t).each(kC.focus)})})])])})}function Ds(t,n,e){return{hue:mh(t),saturation:mh(n),value:mh(e)}}function As(n){return lS({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold(function(){return{}},function(o){return{events:an([fn(_b(),function(t,n,e){return o(t,e)},[t]),fn(Db(),function(t,n,e){return o(t,e)},[t]),fn(Ab(),function(t,n,e){e.mouseIsDown.get()&&o(t,e)},[t])])}})}})}function Ms(t){var n=t.event().raw();if(-1!==n.type.indexOf("touch")){var e=n;return e.touches!==undefined&&1===e.touches.length?xh.some(e.touches[0]).map(function(t){return $y(t.clientX,t.clientY)}):xh.none()}var o=n;return o.clientX!==undefined?xh.some(o).map(function(t){return $y(t.clientX,t.clientY)}):xh.none()}function Fs(t){return t.model.minX}function Is(t){return t.model.minY}function Rs(t){return t.model.minX-1}function Vs(t){return t.model.minY-1}function Hs(t){return t.model.maxX}function Ns(t){return t.model.maxY}function Ps(t){return t.model.maxX+1}function zs(t){return t.model.maxY+1}function Ls(t,n,e){return n(t)-e(t)}function js(t){return Ls(t,Hs,Fs)}function Us(t){return Ls(t,Ns,Is)}function Ws(t){return js(t)/2}function Gs(t){return Us(t)/2}function Xs(t){return t.stepSize}function Ys(t){return t.snapToGrid}function qs(t){return t.snapStart}function Ks(t){return t.rounded}function Js(t,n){return t[n+"-edge"]!==undefined}function $s(t){return Js(t,"left")}function Qs(t){return Js(t,"right")}function Zs(t){return Js(t,"top")}function tl(t){return Js(t,"bottom")}function nl(t){return t.model.value.get()}function el(t){return{x:mh(t)}}function ol(t){return{y:mh(t)}}function rl(t,n){return{x:mh(t),y:mh(n)}}function il(t,n){en(t,fT(),{value:n})}function ul(t,n,e,o){return t<n?t:e<t?e:t===n?n-1:Math.max(n,t-o)}function al(t,n,e,o){return e<t?t:t<n?n:t===e?e+1:Math.min(e,t+o)}function cl(t,n,e){return Math.max(n,Math.min(e,t))}function sl(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?n-1:n,p=l?e+1:e;if(r<f)return g;if(d<r)return p;var h,v,b,y,x,w,S,C=cl((h=r,v=f,b=d,Math.min(b,Math.max(h,v))-v)/m*o+n,g,p);return u&&n<=C&&C<=e?(y=C,x=n,w=e,S=i,a.fold(function(){var t=y-x,n=Math.round(t/S)*S;return cl(x+n,x-1,w+1)},function(t){var n=(y-t)%S,e=Math.round(n/S),o=Math.floor((y-t)/S),r=Math.floor((w-t)/S),i=t+Math.min(r,o+e)*S;return Math.max(t,i)})):c?Math.round(C):C}function ll(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<n?i?0:s:e<r?u?a:l:(r-n)/o*c}function fl(t){return t.element().dom().getBoundingClientRect()}function dl(t,n){return t[n]}function ml(t){return dl(fl(t),dT)}function gl(t){return dl(fl(t),"right")}function pl(t){return dl(fl(t),"top")}function hl(t){return dl(fl(t),"bottom")}function vl(t){return dl(fl(t),"width")}function bl(t){return dl(fl(t),"height")}function yl(t,n,e){return(t+n)/2-e}function xl(t,n){var e=fl(t),o=fl(n);return yl(dl(e,dT),dl(e,"right"),dl(o,dT))}function wl(t,n){var e=fl(t),o=fl(n);return yl(dl(e,"top"),dl(e,"bottom"),dl(o,"top"))}function Sl(t,n){en(t,fT(),{value:n})}function Cl(t){return{x:mh(t)}}function kl(t,n,e){return sl({min:Fs(n),max:Hs(n),range:js(n),value:e,step:Xs(n),snap:Ys(n),snapStart:qs(n),rounded:Ks(n),hasMinEdge:$s(n),hasMaxEdge:Qs(n),minBound:ml(t),maxBound:gl(t),screenRange:vl(t)})}function Ol(i){return function(t,n){return(e=t,o=n,r=(0<i?al:ul)(nl(o).x(),Fs(o),Hs(o),Xs(o)),Sl(e,Cl(r)),xh.some(r)).map(function(){return!0});var e,o,r}}function _l(t,n,e,o,r,i){var u,a,c,s,l,f,d,m,g=(a=i,c=e,s=o,l=r,f=vl(u=n),d=s.bind(function(t){return xh.some(xl(t,u))}).getOr(0),m=l.bind(function(t){return xh.some(xl(t,u))}).getOr(f),ll({min:Fs(a),max:Hs(a),range:js(a),value:c,hasMinEdge:$s(a),hasMaxEdge:Qs(a),minBound:ml(u),minOffset:0,maxBound:gl(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m}));return ml(n)-ml(t)+g}function Tl(t,n){en(t,fT(),{value:n})}function El(t){return{y:mh(t)}}function Bl(t,n,e){return sl({min:Is(n),max:Ns(n),range:Us(n),value:e,step:Xs(n),snap:Ys(n),snapStart:qs(n),rounded:Ks(n),hasMinEdge:Zs(n),hasMaxEdge:tl(n),minBound:pl(t),maxBound:hl(t),screenRange:bl(t)})}function Dl(i){return function(t,n){return(e=t,o=n,r=(0<i?al:ul)(nl(o).y(),Is(o),Ns(o),Xs(o)),Tl(e,El(r)),xh.some(r)).map(function(){return!0});var e,o,r}}function Al(t,n,e,o,r,i){var u,a,c,s,l,f,d,m,g=(a=i,c=e,s=o,l=r,f=bl(u=n),d=s.bind(function(t){return xh.some(wl(t,u))}).getOr(0),m=l.bind(function(t){return xh.some(wl(t,u))}).getOr(f),ll({min:Is(a),max:Ns(a),range:Us(a),value:c,hasMinEdge:Zs(a),hasMaxEdge:tl(a),minBound:pl(u),minOffset:0,maxBound:hl(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m}));return pl(n)-pl(t)+g}function Ml(t,n){en(t,fT(),{value:n})}function Fl(t,n){return{x:mh(t),y:mh(n)}}function Il(a,c){return function(t,n){return(e=c,o=t,r=n,i=0<a?al:ul,u=e?nl(r).x():i(nl(r).x(),Fs(r),Hs(r),Xs(r)),Ml(o,Fl(u,e?i(nl(r).y(),Is(r),Ns(r),Xs(r)):nl(r).y())),xh.some(u)).map(function(){return!0});var e,o,r,i,u}}function Rl(t){return"<alloy.field."+t+">"}function Vl(d,m,g,p){function h(t,n,e,o,r){var i,u,a=d(NT+"range"),c=[m_.parts().label({dom:{tag:"label",innerHtml:e,attributes:{"aria-label":o}}}),m_.parts().field({data:r,factory:p_,inputAttributes:vh({type:"text"},"hex"===n?{"aria-live":"polite"}:{}),inputClasses:[m("textfield")],inputBehaviours:Uo([(i=n,u=t,B_.config({invalidClass:m("invalid"),notify:{onValidate:function(t){en(t,HT,{type:i})},onValid:function(t){en(t,RT,{type:i,value:Lw.getValue(t)})},onInvalid:function(t){en(t,VT,{type:i,value:Lw.getValue(t)})}},validator:{validate:function(t){var n=Lw.getValue(t),e=u(n)?Ch.value(!0):Ch.error(d("aria.input.invalid"));return O_(e)},validateOnLoad:!1}})),A_.config({})]),onSetValue:function(t){B_.isInvalid(t)&&B_.run(t).get(Q)}})],s="hex"!==n?[m_.parts()["aria-descriptor"]({text:a})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}}function v(t,n){var e=n.red(),o=n.green(),r=n.blue();Lw.setValue(t,{red:e,green:o,blue:r})}function b(t,n){y.getOpt(t).each(function(t){xe(t.element(),"background-color","#"+n.value())})}var y=Sa({dom:{tag:"div",classes:[m("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return Ri({factory:function(){function o(t){return u[t]().get()}function i(t,n){u[t]().set(n)}function n(t,n){var e=n.event();"hex"!==e.type()?i(e.type(),xh.none()):p(t)}function r(r,t,n){var e=parseInt(n,10);i(t,xh.some(e)),o("red").bind(function(e){return o("green").bind(function(n){return o("blue").map(function(t){return hc(e,n,t,1)})})}).each(function(t){var n,e,o=(n=r,e=pc(t),IT.getField(n,"hex").each(function(t){kC.isFocused(t)||Lw.setValue(n,{hex:e.value()})}),e);b(r,o)})}function e(t,n){var e=n.event();"hex"!==e.type()?r(t,e.type(),e.value()):function(t,n){g(t);var e=fc(n);i("hex",xh.some(n));var o=yc(e);v(t,o),a(o),en(t,Z_(),{hex:e}),b(t,e)}(t,e.value())}function t(t){return{label:d(NT+t+".label"),description:d(NT+t+".description")}}var u={red:mh(Kv(xh.some(255))),green:mh(Kv(xh.some(255))),blue:mh(Kv(xh.some(255))),hex:mh(Kv(xh.some("ffffff")))},a=function(t){var n=t.red(),e=t.green(),o=t.blue();i("red",xh.some(n)),i("green",xh.some(e)),i("blue",xh.some(o))},c=t("red"),s=t("green"),l=t("blue"),f=t("hex");return Xh(IT.sketch(function(t){return{dom:{tag:"form",classes:[m("rgb-form")],attributes:{"aria-label":d("aria.color.picker")}},components:[t.field("red",m_.sketch(h(vc,"red",c.label,c.description,255))),t.field("green",m_.sketch(h(vc,"green",s.label,s.description,255))),t.field("blue",m_.sketch(h(vc,"blue",l.label,l.description,255))),t.field("hex",m_.sketch(h(dc,"hex",f.label,f.description,"ffffff"))),y.asSpec()],formBehaviours:Uo([B_.config({invalidClass:m("form-invalid")}),zu("rgb-form-events",[ln(RT,e),ln(VT,n),ln(HT,n)])])}}),{apis:{updateHex:function(t,n){var e,o;Lw.setValue(t,{hex:n.value()}),e=t,o=yc(n),v(e,o),a(o),b(t,n)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,n,e){t.updateHex(n,e)}},extraApis:{}})}function Hl(t,e){function r(t,n){var e=t.width,o=t.height,r=t.getContext("2d");if(null!==r){r.fillStyle=n,r.fillRect(0,0,e,o);var i=r.createLinearGradient(0,0,e,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,e,o);var u=r.createLinearGradient(0,0,0,o);u.addColorStop(0,"rgba(0,0,0,0)"),u.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=u,r.fillRect(0,0,e,o)}}var o=AT.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),i=AT.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}});return Ri({factory:function(){var t=mh({x:mh(0),y:mh(0)}),n=Uo([xS.config({find:xh.some}),kC.config({})]);return AT.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[o,i],onChange:function(t,n,e){en(t,nT(),{value:e})},onInit:function(t,n,e){r(e.element().dom(),wc(mO()))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,n,e){var o;o=e,r(n.components()[0].element().dom(),wc(o))}},extraApis:{}})}function Nl(f,p){return Ri({name:"ColourPicker",configFields:[ht("dom"),Dt("onValidHex",Q),Dt("onInvalidHex",Q)],factory:function(t){function n(t,e){s.getOpt(t).each(function(t){var n=yc(e);g.paletteRgba().set(n),c.setRgba(t,n)})}function e(t,n){l.getOpt(t).each(function(t){a.updateHex(t,n)})}function d(n,e,t){Ih(t,function(t){t(n,e)})}var o,m,r,i,u,a=Vl(f,p,t.onValidHex,t.onInvalidHex),c=Hl(0,p),g={paletteRgba:mh(Kv(mO()))},s=Sa(c.sketch({})),l=Sa(a.sketch({}));return{uid:t.uid,dom:t.dom,components:[s.asSpec(),(r=p,i=AT.parts().spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),u=AT.parts().thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}}),
AT.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:mh({y:mh(0)})},components:[i,u],sliderBehaviours:Uo([kC.config({})]),onChange:function(t,n,e){en(t,tT(),{value:e})}})),l.asSpec()],behaviours:Uo([zu("colour-picker-events",[ln(nT(),(m=[e],function(t,n){var e,o,r,i,u,a,c,s,l,f=n.event().value();d(t,pc(bc(Ds((e=g.paletteRgba().get(),i=r=0,u=e.red()/255,a=e.green()/255,c=e.blue()/255,s=Math.min(u,Math.min(a,c)),l=Math.max(u,Math.max(a,c)),s===l?Ds(0,0,100*(i=s)):(r=60*((r=u===s?3:c===s?1:5)-(u===s?a-c:c===s?u-a:c-u)/(l-s)),o=(l-s)/l,i=l,Ds(Math.round(r),Math.round(100*o),Math.round(100*i)))).hue(),f.x(),100-f.y()))),m)})),ln(tT(),(o=[n,e],function(t,n){d(t,pc(bc(Ds((100-n.event().value().y())/100*360,100,100))),o)}))]),xS.config({find:function(t){return l.getOpt(t)}}),yC.config({mode:"acyclic"})])}}})}function Pl(t){return jT[t]}function zl(t,n,e){return Lw.config(Xh({store:{mode:"manual",getValue:n,setValue:e}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))}function Ll(t,n,e){return zl(t,function(t){return n(t.element())},function(t,n){return e(t.element(),n)})}function jl(r,n){function e(t,n){n.stop()}function o(t){return function(n,e){Ih(t,function(t){t(n,e)})}}function i(t,n){if(!qk.isDisabled(t)){var e=n.event().raw();a(t,e.dataTransfer.files)}}function u(t,n){var e=n.event().raw().target.files;a(t,e)}var a=function(t,n){var e,o;Lw.setValue(t,(e=n,o=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i"),w(Vh(e),function(t){return o.test(t.name)}))),en(t,e_,{name:r.name})},c=Sa({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Uo([zu("input-file-events",[pn(Lb()),pn($b())])])});return bs(r.label.map(function(t){return ys(t,n)}),m_.parts().field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Uo([qT([]),PT(),qk.config({}),BC.config({toggleClass:"dragenter",toggleOnExecute:!1}),zu("dropzone-events",[ln("dragenter",o([e,BC.toggle])),ln("dragleave",o([e,BC.toggle])),ln("dragover",e),ln("drop",o([e,i])),ln(zb(),u)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:n.translate("Drop an image here")}},ok.sketch({dom:{tag:"button",innerHtml:n.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(t){c.get(t).element().dom().click()},buttonBehaviours:Uo([A_.config({})])})]}]}}}}),["tox-form__group--stretched"],[])}function Ul(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Uo([kC.config({ignore:!0}),A_.config({})])}}function Wl(t,n){en(t,Hb(),{raw:{which:9,shiftKey:n}})}function Gl(t,n){var o,r,e=tE&&t.sandboxed,i=vh(vh({},t.label.map(function(t){return{title:t}}).getOr({})),e?{sandbox:"allow-scripts allow-same-origin"}:{}),u=(o=e,r=Kv(""),{getValue:function(){return r.get()},setValue:function(t,n){if(o)Pn(t.element(),"srcdoc",n);else{Pn(t.element(),"src","javascript:''");var e=t.element().dom().contentWindow.document;e.open(),e.write(n),e.close()}r.set(n)}});return bs(t.label.map(function(t){return ys(t,n)}),m_.parts().field({factory:{sketch:function(t){return ZT({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:Uo([A_.config({}),kC.config({}),XT(xh.none(),u.getValue,u.setValue)])})}}}),["tox-form__group--stretched"],[])}function Xl(t,n){return Kl(v.document.createElement("canvas"),t,n)}function Yl(t){var n=Xl(t.width,t.height);return ql(n).drawImage(t,0,0),n}function ql(t){return t.getContext("2d")}function Kl(t,n,e){return t.width=n,t.height=e,t}function Jl(t){return t.naturalWidth||t.width}function $l(t){return t.naturalHeight||t.height}function Ql(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],uf(t,Zl(nf,this),Zl(ef,this))}function Zl(t,n){return function(){return t.apply(n,arguments)}}function tf(e){var o=this;null!==this._state?N_(function(){var t=o._state?e.onFulfilled:e.onRejected;if(null!==t){var n;try{n=t(o._value)}catch(lh){return void e.reject(lh)}e.resolve(n)}else(o._state?e.resolve:e.reject)(o._value)}):this._deferreds.push(e)}function nf(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void uf(Zl(n,t),Zl(nf,this),Zl(ef,this))}this._state=!0,this._value=t,of.call(this)}catch(lh){ef.call(this,lh)}}function ef(t){this._state=!1,this._value=t,of.call(this)}function of(){for(var t=0,n=this._deferreds;t<n.length;t++){var e=n[t];tf.call(this,e)}this._deferreds=[]}function rf(t,n,e,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.resolve=e,this.reject=o}function uf(t,n,e){var o=!1;try{t(function(t){o||(o=!0,n(t))},function(t){o||(o=!0,e(t))})}catch(i){if(o)return;o=!0,e(i)}}function af(e){return new nE(function(t,n){(function p(t){var n=t.split(","),e=/data:([^;]+)/.exec(n[0]);if(!e)return xh.none();for(var o=e[1],r=n[1],i=v.atob(r),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var l=1024*s,f=Math.min(1024+l,u),d=new Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return xh.some(new v.Blob(c,{type:o}))})(e).fold(function(){n("uri is not base64: "+e)},t)})}function cf(t,o,r){return o=o||"image/png",v.HTMLCanvasElement.prototype.toBlob?new nE(function(n,e){t.toBlob(function(t){t?n(t):e()},o,r)}):af(t.toDataURL(o,r))}function sf(t){return function n(a){return new nE(function(t,n){function e(){u(),t(i)}function o(){u(),n("Unable to load data of type "+a.type+": "+r)}var r=v.URL.createObjectURL(a),i=new v.Image,u=function(){i.removeEventListener("load",e),i.removeEventListener("error",o)};i.addEventListener("load",e),i.addEventListener("error",o),i.src=r,i.complete&&e()})}(t).then(function(t){!function lh(n){v.URL.revokeObjectURL(n.src)}(t);var n=Xl(Jl(t),$l(t));return ql(n).drawImage(t,0,0),n})}function lf(t,n,e){function o(n,e){return t.then(function(t){return function o(t,n,e){return n=n||"image/png",t.toDataURL(n,e)}(t,n,e)})}var r=n.type;return{getType:mh(r),toBlob:function i(){return nE.resolve(n)},toDataURL:function u(){return e},toBase64:function a(){return e.split(",")[1]},toAdjustedBlob:function c(n,e){return t.then(function(t){return cf(t,n,e)})},toAdjustedDataURL:o,toAdjustedBase64:function s(t,n){return o(t,n).then(function(t){return t.split(",")[1]})},toCanvas:function l(){return t.then(Yl)}}}function ff(n){return function t(e){return new nE(function(t){var n=new v.FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}(n).then(function(t){return lf(sf(n),n,t)})}function df(n,t){return cf(n,t).then(function(t){return lf(nE.resolve(n),t,n.toDataURL())})}function mf(t,n,e){var o="string"==typeof t?parseFloat(t):t;return e<o?o=e:o<n&&(o=n),o}function gf(t,n){for(var e,o=[],r=new Array(25),i=0;i<5;i++){for(var u=0;u<5;u++)o[u]=n[u+5*i];for(u=0;u<5;u++){for(var a=e=0;a<5;a++)e+=t[u+5*a]*o[a];r[u+5*i]=e}}return r}function pf(n,e){return n.toCanvas().then(function(t){return function i(t,n,e){var o=ql(t),r=function E(t,n){for(var e,o,r,i,u=t.data,a=n[0],c=n[1],s=n[2],l=n[3],f=n[4],d=n[5],m=n[6],g=n[7],p=n[8],h=n[9],v=n[10],b=n[11],y=n[12],x=n[13],w=n[14],S=n[15],C=n[16],k=n[17],O=n[18],_=n[19],T=0;T<u.length;T+=4)e=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=e*a+o*c+r*s+i*l+f,u[T+1]=e*d+o*m+r*g+i*p+h,u[T+2]=e*v+o*b+r*y+i*x+w,u[T+3]=e*S+o*C+r*k+i*O+_;return t}(o.getImageData(0,0,t.width,t.height),e);return o.putImageData(r,0,0),df(t,n)}(t,n.getType(),e)})}function hf(n,e){return n.toCanvas().then(function(t){return function u(t,n,e){var o=ql(t),r=o.getImageData(0,0,t.width,t.height),i=o.getImageData(0,0,t.width,t.height);return i=function w(t,n,e){function o(t,n,e){return e<t?t=e:t<n&&(t=n),t}for(var r=Math.round(Math.sqrt(e.length)),i=Math.floor(r/2),u=t.data,a=n.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+p-i,0,s-1)*c+v),y=e[p*r+h];d+=u[b]*y,m+=u[1+b]*y,g+=u[2+b]*y}var x=4*(l*c+f);a[x]=o(d,0,255),a[1+x]=o(m,0,255),a[2+x]=o(g,0,255)}return n}(r,i,e),o.putImageData(i,0,0),df(t,n)}(t,n.getType(),e)})}function vf(e){return function(t,n){return pf(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}function bf(t,n,e,o){return pf(t,function r(t,n,e,o){return gf(t,[n=mf(n,0,2),0,0,0,0,0,e=mf(e,0,2),0,0,0,0,0,o=mf(o,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n,e,o))}function yf(t,n,e){var o=Jl(t),r=$l(t),i=n/o,u=e/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0);var c=function s(u,a,c){return new nE(function(t){var n=Jl(u),e=$l(u),o=Math.floor(n*a),r=Math.floor(e*c),i=Xl(o,r);ql(i).drawImage(u,0,0,n,e,0,0,o,r),t(i)})}(t,i,u);return a?c.then(function(t){return yf(t,n,e)}):c}function xf(n,e){return n.toCanvas().then(function(t){return function a(t,n,e){var o=Xl(t.width,t.height),r=ql(o),i=0,u=0;return 90!==(e=e<0?360+e:e)&&270!==e||Kl(o,o.height,o.width),90!==e&&180!==e||(i=o.width),270!==e&&180!==e||(u=o.height),r.translate(i,u),r.rotate(e*Math.PI/180),r.drawImage(t,0,0),df(o,n)}(t,n.getType(),e)})}function wf(n,e){return n.toCanvas().then(function(t){return function i(t,n,e){var o=Xl(t.width,t.height),r=ql(o);return"v"===e?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),df(o,n)}(t,n.getType(),e)})}function Sf(n,e,o,r,i){return n.toCanvas().then(function(t){return function a(t,n,e,o,r,i){var u=Xl(r,i);return ql(u).drawImage(t,-e,-o),df(u,n)}(t,n.getType(),e,o,r,i)})}function Cf(t){return oE(t)}function kf(t){return uE(t)}function Of(t,n){return aE(t,n)}function _f(t,n){return rE(t,n)}function Tf(t,n){return iE(t,n)}function Ef(t,n){return wf(t,n)}function Bf(t,n,e){return function r(n,e,o){return n.toCanvas().then(function(t){return yf(t,e,o).then(function(t){return df(t,n.getType())})})}(t,n,e)}function Df(t,n){return xf(t,n)}function Af(t,n){return vh({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},n)}function Mf(t,n){return Af(ka(t,n),{})}function Ff(t,n){return Af(ka(t,n),{behaviours:Uo([wC.config({})])})}function If(t,n,e){return{dom:{tag:"span",innerHtml:e.translate(t),classes:[n+"__select-label"]},behaviours:Uo([wC.config({})])}}function Rf(t,n,o){function e(t,n){var e=Lw.getValue(t);return kC.focus(e),en(e,"keydown",{raw:n.event().raw()}),q_.close(e),xh.some(!0)}var r=Kv(Q),i=t.text.map(function(t){return Sa(If(t,n,o.providers))}),u=t.icon.map(function(t){return Sa(Ff(t,o.providers.icons))}),a=t.role.fold(function(){return{}},function(t){return{role:t}}),c=t.tooltip.fold(function(){return{}},function(t){var n=o.providers.translate(t);return{title:n,"aria-label":n}});return Sa(q_.sketch(vh(vh({},a),{dom:{tag:"button",classes:[n,n+"--select"].concat(x(t.classes,function(t){return n+"--"+t})),attributes:vh({},c)},components:uc([u.map(function(t){return t.asSpec()}),i.map(function(t){return t.asSpec()}),xh.some({dom:{tag:"div",classes:[n+"__select-chevron"],innerHtml:ka("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Uo(y(t.dropdownBehaviours,[Jk(t.disabled),K_.config({}),wC.config({}),zu("dropdown-events",[rc(t,r),ic(t,r)]),zu("menubutton-update-display-text",[ln(lE,function(n,e){i.bind(function(t){return t.getOpt(n)}).each(function(t){wC.set(t,[Ve(o.providers.translate(e.event().text()))])})}),ln(fE,function(n,e){u.bind(function(t){return t.getOpt(n)}).each(function(t){wC.set(t,[Ff(e.event().icon(),o.providers.icons)])})})])])),eventOrder:Xh(sE,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Uo([yC.config({mode:"special",onLeft:e,onRight:e})]),lazySink:o.getSink,toggleClass:n+"--active",parts:{menu:Rc(0,t.columns,t.presets)},fetch:function(){return k_(t.fetch)}}))).asSpec()}function Vf(t){return"separator"===t.type}function Hf(t,e){var n=S(t,function(t,n){return kh(n)?""===n?t:"|"===n?0<t.length&&!Vf(t[t.length-1])?t.concat([dE]):t:Uh(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])},[]);return 0<n.length&&Vf(n[n.length-1])&&n.pop(),n}function Nf(t,n){return Uh(t,"getSubmenuItems")?(o=n,r=(e=t).getSubmenuItems(),i=mE(r,o),{item:e,menus:Xh(i.menus,W(e.value,i.items)),expansions:Xh(i.expansions,W(e.value,e.value))}):{item:t,menus:{},expansions:{}};var e,o,r,i}function Pf(t,e,o,n){var r=Xn("primary-menu"),i=mE(t,o.shared.providers.menuItems());if(0===i.items.length)return xh.none();var u=Kc(r,i.items,e,o,n),a=P(i.menus,function(t,n){return Kc(n,t,e,o,!1)}),c=Xh(a,W(r,u));return xh.from(XC.tieredData(r,c,i.expansions))}function zf(e){return{isDisabled:function(){return qk.isDisabled(e)},setDisabled:function(t){return qk.set(e,t)},setActive:function(t){var n=e.element();t?(le(n,"tox-tbtn--enabled"),Pn(n,"aria-pressed",!0)):(de(n,"tox-tbtn--enabled"),jn(n,"aria-pressed"))},isActive:function(){return me(e.element(),"tox-tbtn--enabled")}}}function Lf(t,n,e,o){return Rf({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(n){t.fetch(function(t){n(Pf(t,nO.CLOSE_ON_EXECUTE,e,!1))})},onSetup:t.onSetup,getApi:zf,columns:1,presets:"normal",classes:[],dropdownBehaviours:[A_.config({})]},n,e.shared)}function jf(n,r,i){return function(t){t(x(n,function(t){var n,e,o=t.text.fold(function(){return{}},function(t){return{text:t}});return vh(vh({type:t.type,active:!1},o),{onAction:(e=t,function(t){var n=!t.isActive();t.setActive(n),e.storage.set(n),i.shared.getSink().each(function(t){r().getOpt(t).each(function(t){Xo(t.element()),en(t,i_,{name:e.name,value:e.storage.get()})})})}),onSetup:(n=t,function(t){t.setActive(n.storage.get())})})}))}}function Uf(t,n,e,o,r){void 0===e&&(e=[]);var i=n.fold(function(){return{}},function(t){return{action:t}}),u=vh({buttonBehaviours:Uo([Jk(t.disabled),A_.config({}),zu("button press",[sn("click"),sn("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),a=Xh(u,{dom:o});return Xh(a,{components:r})}function Wf(t,n,e,o){return void 0===o&&(o=[]),Uf(t,n,o,{tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})},uc([t.icon.map(function(t){return Mf(t,e.icons)})]))}function Gf(t,n,e,o){void 0===o&&(o=[]);var r=Wf(t,xh.some(n),e,o);return ok.sketch(r)}function Xf(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=e.translate(t.text),u=t.icon?t.icon.map(function(t){return Mf(t,e.icons)}):xh.none(),a=u.isSome()?uc([u]):[],c=u.isSome()?{}:{innerHtml:i},s=y(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],u.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r);return Uf(t,n,o,vh(vh({tag:"button",classes:s},c),{attributes:{title:i}}),a)}function Yf(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=Xf(t,xh.some(n),e,o,r);return ok.sketch(i)}function qf(n,e){return function(t){"custom"===e?en(t,i_,{name:n,value:{}}):"submit"===e?nn(t,u_):"cancel"===e?nn(t,r_):v.console.error("Unknown button type: ",e)}}function Kf(n,t,e){if("menu"===t){var o=n,r=Sa(Lf(vh(vh({},n),{onSetup:function(t){return t.setDisabled(n.disabled),Q},fetch:jf(o.items,function(){return r},e)}),"tox-tbtn",e,xh.none()));return r.asSpec()}if("custom"===t||"cancel"===t||"submit"===t){var i=qf(n.name,t);return Yf(vh(vh({},n),{borderless:!1}),i,e.shared.providers,[])}v.console.error("Unknown footer button type: ",t)}function Jf(t,n){var e=qf(t.name,"custom");return bs(xh.none(),m_.parts().field(vh({factory:ok},Xf(t,xh.some(e),n,[qT(""),PT()]))),[],[])}function $f(t,n){return cS({factory:m_,name:t,overrides:function(o){return{fieldBehaviours:Uo([zu("coupled-input-behaviour",[ln(Pb(),function(e){Oi(e,o,n).bind(xS.getCurrent).each(function(n){Oi(e,o,"lock").each(function(t){BC.isOn(t)&&o.onLockedChange(e,n,t)})})})])])}}})}function Qf(t){var n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===n)return Ch.error(t);var e=parseFloat(n[1]),o=n[2];return Ch.value({value:e,unit:o})}function Zf(t,n){function e(t){return Object.prototype.hasOwnProperty.call(o,t)}var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1};return t.unit===n?xh.some(t.value):e(t.unit)&&e(n)?o[t.unit]===o[n]?xh.some(t.value):xh.some(t.value/o[t.unit]*o[n]):xh.none()}function td(){return xh.none()}function nd(t,n){return(e=Qf(t).toOption(),o=Qf(n).toOption(),r=function(t,o){return Zf(t,o.unit).map(function(t){return o.value/t}).map(function(t){return n=t,e=o.unit,function(t){return Zf(t,e).map(function(t){return{value:t*n,unit:e}})};var n,e}).getOr(td)},e.isSome()&&o.isSome()?xh.some(r(e.getOrDie(),o.getOrDie())):xh.none()).getOr(td);var e,o,r}function ed(e,n){function t(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}}function o(n){return m_.parts().field({factory:p_,inputClasses:["tox-textfield"],inputBehaviours:Uo([qk.config({disabled:e.disabled}),A_.config({}),zu("size-input-events",[ln(Rb(),function(t){en(t,i,{isField1:n})}),ln(zb(),function(t){en(t,e_,{name:e.name})})])]),selectOnFocus:!1})}function r(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}}var a=td,i=Xn("ratio-event"),u=hE.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:n.translate(e.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:ka("lock",n.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:ka("unlock",n.icons)}}],buttonBehaviours:Uo([Jk(e.disabled),A_.config({})])}),c=hE.parts().field1(t([m_.parts().label(r("Width")),o(!0)])),s=hE.parts().field2(t([m_.parts().label(r("Height")),o(!1)]));return hE.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,t([r("&nbsp;"),u])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,i){Qf(Lw.getValue(t)).each(function(t){a(t).each(function(t){var n,e,o,r;Lw.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(n=t).value.toFixed((e=n.unit)in o?o[e]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+n.unit))})})},coupledFieldBehaviours:Uo([qk.config({disabled:e.disabled,onDisabled:function(t){hE.getField1(t).bind(m_.getField).each(qk.disable),hE.getField2(t).bind(m_.getField).each(qk.disable),hE.getLock(t).each(qk.disable)},onEnabled:function(t){hE.getField1(t).bind(m_.getField).each(qk.enable),hE.getField2(t).bind(m_.getField).each(qk.enable),hE.getLock(t).each(qk.enable)}}),zu("size-input-events2",[ln(i,function(t,n){var e=n.event().isField1(),o=e?hE.getField1(t):hE.getField2(t),r=e?hE.getField2(t):hE.getField1(t),i=o.map(Lw.getValue).getOr(""),u=r.map(Lw.getValue).getOr("");a=nd(i,u)})])])})}function od(r,c){function t(t,n,e,o){return Sa(Yf({name:t,text:t,disabled:e,primary:o,icon:xh.none(),borderless:!1},n,c))}function n(t,n,e,o){return Sa(Gf({name:t,icon:xh.some(t),tooltip:xh.some(n),disabled:o,primary:!1,borderless:!1},e,c))}function u(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured(qk)&&qk.disable(n)})}function a(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured(qk)&&qk.enable(n)})}function i(t,n,e){en(t,n,e)}function s(t){return nn(t,wE.disable())}function l(t){return nn(t,wE.enable())}function f(t,n){s(t),i(t,vE.transform(),{transform:n}),l(t)}function e(t){return function(){$.getOpt(t).each(function(t){wC.set(t,[J])})}}function d(t,n){s(t),i(t,vE.transformApply(),{transform:n,swap:e(t)}),l(t)}function m(){return t("Back",function(t){return i(t,vE.back(),{swap:e(t)})},!1,!1)}function o(){return Sa({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Uo([qk.config({})])})}function g(){return t("Apply",function(t){return i(t,vE.apply(),{swap:e(t)})},!0,!0)}function p(){return function(t){var n=r.getRect();return Sf(t,n.x,n.y,n.w,n.h)}}function h(n,e){return function(t){return n(t,e)}}function v(t,n){var e,o;o=n,s(e=t),i(e,vE.tempTransform(),{transform:o}),l(e)}function b(t,n,e,o,r){var i=AT.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:c.translate(t)}}),u=AT.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=AT.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Sa(AT.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e,maxX:r,getInitialValue:mh({x:mh(o)})},components:[i,u,a],sliderBehaviours:Uo([kC.config({})]),onChoose:n}))}function y(t,n,e,o,r){return[m(),(i=n,b(t,function(t,n,e){f(t,h(i,e.x()/100))},e,o,r)),g()];var i}function x(t,n,e,o,r){var i=y(t,n,e,o,r);return n_.sketch({dom:k,components:i.map(function(t){return t.asSpec()}),containerBehaviours:Uo([zu("image-tools-filter-panel-buttons-events",[ln(wE.disable(),function(t){u(i,t)}),ln(wE.enable(),function(t){a(i,t)})])])})}function w(n,e,o){return function(t){return bf(t,n,e,o)}}function S(t){return b(t,function(r){var t=j.getOpt(r),n=W.getOpt(r),i=U.getOpt(r);t.each(function(o){n.each(function(e){i.each(function(t){var n=w(Lw.getValue(o).x()/100,Lw.getValue(t).x()/100,Lw.getValue(e).x()/100);f(r,n)})})})},0,100,200)}function C(n,e,o){return function(t){i(t,vE.swap(),{transform:e,swap:function(){$.getOpt(t).each(function(t){wC.set(t,[n]),o(t)})}})}}var k={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},O=Q,_=[m(),o(),t("Apply",function(t){d(t,p()),r.hideCrop()},!1,!0)],T=n_.sketch({dom:k,components:_.map(function(t){return t.asSpec()}),containerBehaviours:Uo([zu("image-tools-crop-buttons-events",[ln(wE.disable(),function(t){u(_,t)}),ln(wE.enable(),function(t){a(_,t)})])])}),E=Sa(ed({name:"size",label:xh.none(),constrain:!0,disabled:!1},c)),B=[m(),o(),E,o(),t("Apply",function(i){E.getOpt(i).each(function(t){var n,e,o=Lw.getValue(t),r=(n=parseInt(o.width,10),e=parseInt(o.height,10),function(t){return Bf(t,n,e)});d(i,r)})},!1,!0)],D=n_.sketch({dom:k,components:B.map(function(t){return t.asSpec()}),containerBehaviours:Uo([zu("image-tools-resize-buttons-events",[ln(wE.disable(),function(t){u(B,t)}),ln(wE.enable(),function(t){a(B,t)})])])}),A=h(Ef,"h"),M=h(Ef,"v"),F=h(Df,-90),I=h(Df,90),R=[m(),o(),n("flip-horizontally","Flip horizontally",function(t){v(t,A)},!1),n("flip-vertically","Flip vertically",function(t){v(t,M)},!1),n("rotate-left","Rotate counterclockwise",function(t){v(t,F)},!1),n("rotate-right","Rotate clockwise",function(t){v(t,I)},!1),o(),g()],V=n_.sketch({dom:k,components:R.map(function(t){return t.asSpec()}),containerBehaviours:Uo([zu("image-tools-fliprotate-buttons-events",[ln(wE.disable(),function(t){u(R,t)}),ln(wE.enable(),function(t){a(R,t)})])])}),H=[m(),o(),g()],N=n_.sketch({dom:k,components:H.map(function(t){return t.asSpec()})}),P=x("Brightness",_f,-100,0,100),z=x("Contrast",Tf,-100,0,100),L=x("Gamma",Of,-100,0,100),j=S("R"),U=S("G"),W=S("B"),G=[m(),j,U,W,g()],X=n_.sketch({dom:k,components:G.map(function(t){return t.asSpec()})}),Y=xh.some(kf),q=xh.some(Cf),K=[n("crop","Crop",C(T,xh.none(),function(){r.showCrop()}),!1),n("resize","Resize",C(D,xh.none(),function(t){E.getOpt(t).each(function(t){var n=r.getMeasurements(),e=n.width,o=n.height;Lw.setValue(t,{width:e,height:o})})}),!1),n("orientation","Orientation",C(V,xh.none(),O),!1),n("brightness","Brightness",C(P,xh.none(),O),!1),n("sharpen","Sharpen",C(N,Y,O),!1),n("contrast","Contrast",C(z,xh.none(),O),!1),n("color-levels","Color levels",C(X,xh.none(),O),!1),n("gamma","Gamma",C(L,xh.none(),O),!1),n("invert","Invert",C(N,q,O),!1)],J=n_.sketch({dom:k,components:K.map(function(t){return t.asSpec()})}),$=Sa(n_.sketch({dom:{tag:"div"},components:[J],containerBehaviours:Uo([wC.config({})])}));return{memContainer:$,getApplyButton:function(t){return $.getOpt(t).map(function(t){var n=t.components()[0];return n.components()[n.components().length-1]})}}}function rd(t){var n,e;if(t.changedTouches)for(n="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<n.length;e++)t[n[e]]=t.changedTouches[0][n[e]]}function id(t,r){var i,u,n,a,c,l,f,d=r.document||v.document;r=r||{};var m=d.getElementById(r.handle||t);n=function(t){var n,e,o=function s(t){var n,e,o,r,i,u,a,c=Math.max;return n=t.documentElement,e=t.body,o=c(n.scrollWidth,e.scrollWidth),r=c(n.clientWidth,e.clientWidth),i=c(n.offsetWidth,e.offsetWidth),u=c(n.scrollHeight,e.scrollHeight),a=c(n.clientHeight,e.clientHeight),{width:o<i?r:o,height:u<c(n.offsetHeight,e.offsetHeight)?a:u}}(d);rd(t),t.preventDefault(),u=t.button,n=m,l=t.screenX,f=t.screenY,e=v.window.getComputedStyle?v.window.getComputedStyle(n,null).getPropertyValue("cursor"):n.runtimeStyle.cursor,i=SE("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:e}).appendTo(d.body),SE(d).on("mousemove touchmove",c).on("mouseup touchend",a),r.start(t)},c=function(t){if(rd(t),t.button!==u)return a(t);t.deltaX=t.screenX-l,t.deltaY=t.screenY-f,t.preventDefault(),r.drag(t)},a=function(t){rd(t),SE(d).off("mousemove touchmove",c).off("mouseup touchend",a),i.remove(),r.stop&&r.stop(t)},this.destroy=function(){SE(m).off()},SE(m).on("mousedown touchstart",n)}function ud(n){function c(t,s){g.getOpt(t).each(function(t){var e=f.get(),o=je(t.element()),r=Ne(t.element()),i=s.dom().naturalWidth*e,u=s.dom().naturalHeight*e,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),n={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};we(s,n),l.getOpt(t).each(function(t){we(t.element(),n)}),d.get().each(function(t){var n=m.get();t.setRect({x:n.x*e+a,y:n.y*e+c,w:n.w*e,h:n.h*e}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})}function e(t,n){var e,a=$v.fromTag("img");return Pn(a,"src",n),(e=a.dom(),new sk(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})).then(function(){return g.getOpt(t).map(function(t){var n=Gy({element:a});wC.replaceAt(t,1,xh.some(n));var e=s.get(),o={x:0,y:0,w:a.dom().naturalWidth,h:a.dom().naturalHeight};s.set(o);var r,u,i=CE.inflate(o,-20,-20);return m.set(i),e.w===o.w&&e.h===o.h||(r=t,u=a,g.getOpt(r).each(function(t){var n=je(t.element()),e=Ne(t.element()),o=u.dom().naturalWidth,r=u.dom().naturalHeight,i=Math.min(n/o,e/r);1<=i?f.set(1):f.set(i)})),c(t,a),a})})}var l=Sa({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=Kv(1),d=Kv(xh.none()),m=Kv({x:0,y:0,w:1,h:1}),s=Kv({x:0,y:0,w:1,h:1}),g=Sa(n_.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:n}}},{dom:{tag:"div"},behaviours:Uo([zu("image-panel-crop-events",[vy(function(t){g.getOpt(t).each(function(t){var n=t.element().dom(),e=EE({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},n,function(){});e.toggleVisibility(!1),e.on("updateRect",function(t){var n=t.rect,e=f.get(),o={x:Math.round(n.x/e),y:Math.round(n.y/e),w:Math.round(n.w/e),h:Math.round(n.h/e)};m.set(o)}),d.set(xh.some(e))})})])])}],containerBehaviours:Uo([wC.config({}),zu("image-panel-events",[vy(function(t){e(t,n)})])])}));return{memContainer:g,updateSrc:e,zoom:function(t,n){var e=f.get(),o=0<n?Math.min(2,e+.1):Math.max(.1,e-.1);f.set(o),g.getOpt(t).each(function(t){c(t,t.components()[1].element())})},showCrop:function(){d.get().each(function(t){t.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(t){t.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var t=s.get();return{width:t.w,height:t.h}}}}function ad(t,n,e,o,r){return Gf({name:t,icon:xh.some(n),disabled:e,tooltip:xh.some(t),primary:!1,borderless:!1},o,r)}function cd(t,n){n?qk.enable(t):qk.disable(t)}function sd(t){function o(t){n.set(t)}function r(t){v.URL.revokeObjectURL(t.url)}function e(t){var n,e=a(t);return o(e),n=u.add(e).removed,OE.each(n,r),e.url}var n=Kv(t),i=Kv(xh.none()),u=function s(){function t(){return 0<o}function n(){return-1!==o&&o<e.length-1}var e=[],o=-1;return{data:e,add:function r(t){var n;return n=e.splice(++o),e.push(t),{state:t,removed:n}},undo:function i(){if(t())return e[--o]},redo:function u(){if(n())return e[++o]},canUndo:t,canRedo:n}}();u.add(t);var a=function(t){return{blob:t,url:v.URL.createObjectURL(t)}},c=function(){i.get().each(r),i.set(xh.none())};return{getBlobState:function(){return n.get()},setBlobState:o,addBlobState:e,getTempState:function(){return i.get().fold(function(){return n.get()},function(t){return t})},updateTempState:function(t){var n=a(t);return c(),i.set(xh.some(n)),n.url},addTempState:function(t){var n=a(t);return i.set(xh.some(n)),n.url},applyTempState:function(n){return i.get().fold(function(){},function(t){e(t.blob),n()})},destroyTempState:c,undo:function(){var t=u.undo();return o(t),t.url},redo:function(){var t=u.redo();return o(t),t.url},getHistoryStates:function(){return{undoEnabled:u.canUndo(),redoEnabled:u.canRedo()}}}}function ld(t,n){function i(t){var n=l.getHistoryStates();p.updateButtonUndoStates(t,n.undoEnabled,n.redoEnabled),en(t,wE.formActionEvent,{name:wE.saveState(),value:n.undoEnabled})}function u(t){return t.toBlob()}function a(t){en(t,wE.formActionEvent,{name:wE.disable(),value:{}})}function c(n,t,e,o,r){return a(n),ff(t).then(e).then(u).then(o).then(function(t){return d(n,t).then(function(t){return i(n),r(),f(n),t})})["catch"](function(t){return v.console.log(t),f(n),t})}function s(t,n,e){c(t,l.getBlobState().blob,n,function(t){return l.updateTempState(t)},e)}var e,o,r,l=sd(t.currentState),f=function(t){h.getApplyButton(t).each(function(t){qk.enable(t)}),en(t,wE.formActionEvent,{name:wE.enable(),value:{}})},d=function(t,n){return a(t),g.updateSrc(t,n)},m=function(t){var n=l.getBlobState().url;return l.destroyTempState(),i(t),n},g=ud(t.currentState.url),p=(o=Sa(ad("Undo","undo",!0,function(t){en(t,vE.undo(),{direction:1})},e=n)),r=Sa(ad("Redo","redo",!0,function(t){en(t,vE.redo(),{direction:1})},e)),{container:n_.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),r.asSpec(),ad("Zoom in","zoom-in",!1,function(t){en(t,vE.zoom(),{direction:1})},e),ad("Zoom out","zoom-out",!1,function(t){en(t,vE.zoom(),{direction:-1})},e)]}),updateButtonUndoStates:function(t,n,e){o.getOpt(t).each(function(t){cd(t,n)}),r.getOpt(t).each(function(t){cd(t,e)})}}),h=od(g,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[h.memContainer.asSpec(),g.memContainer.asSpec(),p.container],behaviours:Uo([Lw.config({store:{mode:"manual",getValue:function(){return l.getBlobState()}}}),zu("image-tools-events",[ln(vE.undo(),function(t){var n=l.undo();d(t,n).then(function(){f(t),i(t)})}),ln(vE.redo(),function(t){var n=l.redo();d(t,n).then(function(){f(t),i(t)})}),ln(vE.zoom(),function(t,n){var e=n.event().direction();g.zoom(t,e)}),ln(vE.back(),function(t,n){var e,o;o=m(e=t),d(e,o).then(function(){f(e)}),n.event().swap()(),g.hideCrop()}),ln(vE.apply(),function(t,n){l.applyTempState(function(){m(t),n.event().swap()()})}),ln(vE.transform(),function(t,n){return s(t,n.event().transform(),Q)}),ln(vE.tempTransform(),function(t,n){return e=t,o=n.event().transform(),void c(e,l.getTempState().blob,o,function(t){return l.addTempState(t)},Q);var e,o}),ln(vE.transformApply(),function(t,n){return e=t,o=n.event().transform(),r=n.event().swap(),i=l.getBlobState().blob,void c(e,i,o,function(t){var n=l.addBlobState(t);return m(e),n},r);var e,o,r,i}),ln(vE.swap(),function(n,t){var e;e=n,p.updateButtonUndoStates(e,!1,!1);var o=t.event().transform(),r=t.event().swap();o.fold(function(){r()},function(t){s(n,t,r)})})]),PT()])}}function fd(n,e){var t=n.label.map(function(t){return ys(t,e)}),o=[qk.config({disabled:n.disabled}),yC.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(t){return nn(t,u_),xh.some(!0)}}),zu("textfield-change",[ln(Pb(),function(t){en(t,e_,{name:n.name})}),ln(Yb(),function(t){en(t,e_,{name:n.name})})]),A_.config({})],r=n.validation.map(function(o){return B_.config({getRoot:function(t){return kn(t.element())},invalidClass:"tox-invalid",validator:{validate:function(t){var n=Lw.getValue(t),e=o.validator(n);return O_(!0===e?Ch.value(n):Ch.error(e))},validateOnLoad:o.validateOnLoad}})}).toArray(),i=n.placeholder.fold(mh({}),function(t){
return{placeholder:e.translate(t)}}),u=n.inputMode.fold(mh({}),function(t){return{inputmode:t}}),a=vh(vh({},i),u);return bs(t,m_.parts().field({tag:!0===n.multiline?"textarea":"input",inputAttributes:a,inputClasses:[n.classname],inputBehaviours:Uo(N([o,r])),selectOnFocus:!1,factory:p_}),(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),[qk.config({disabled:n.disabled,onDisabled:function(t){m_.getField(t).each(qk.disable)},onEnabled:function(t){m_.getField(t).each(qk.enable)}})])}function dd(){var n=Kv(null);return Py({readState:function(){return{timer:null!==n.get()?"set":"unset"}},setTimer:function(t){n.set(t)},cancel:function(){var t=n.get();null!==t&&t.cancel()}})}function md(t,n,e){var o=Lw.getValue(e);Lw.setValue(n,o),FE(n)}function gd(t,n){var e=t.element(),o=Ee(e),r=e.dom();"number"!==zn(e,"type")&&n(r,o)}function pd(t,n,o){if(t.selectsOver){var e=Lw.getValue(n),r=t.getDisplayText(e),i=Lw.getValue(o);return 0===t.getDisplayText(i).indexOf(r)?xh.some(function(){var t,e;md(0,n,o),t=n,e=r.length,gd(t,function(t,n){return t.setSelectionRange(e,n.length)})}):xh.none()}return xh.none()}function hd(t){return NE(k_(t))}function vd(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:function(){}}}function bd(t,n){return{type:"menuitem",value:n,text:t,meta:{attach:undefined},onAction:function(){}}}function yd(t,n){return x((e=t,w(n,function(t){return t.type===e})),vd);var e}function xd(t,n){var e=t.toLowerCase();return w(n,function(t){return Wt((t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.text).toLowerCase(),e)||Wt(t.value.toLowerCase(),e)})}function wd(u,t,a){var n=Lw.getValue(t),c=n.meta.text!==undefined?n.meta.text:n.value;return a.getLinkInformation().fold(function(){return[]},function(t){var n,e,o,r,i=xd(c,x(a.getHistory(u),function(t){return bd(t,t)}));return"file"===u?S([i,xd(c,(r=t,yd("header",r.targets))),xd(c,N([(o=t,xh.from(o.anchorTop).map(function(t){return bd("<top>",t)}).toArray()),(e=t,yd("anchor",e.targets)),(n=t,xh.from(n.anchorBottom).map(function(t){return bd("<bottom>",t)}).toArray())]))],function(t,n){return 0===t.length||0===n.length?t.concat(n):t.concat(zE,n)},[]):i})}function Sd(r,e,o){function n(t){var n=Lw.getValue(t);o.addToHistory(n.value,r.filetype)}var t,i,u,a,c,s=e.shared.providers,l=m_.parts().field({factory:HE,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":LE,type:"url"},minChars:0,responseTime:0,fetch:function(t){var n=Pf(wd(r.filetype,t,o),nO.BUBBLE_TO_SANDBOX,e,!1);return O_(n)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t){t.hasConfigured(B_)&&B_.run(t).get(Q)},typeaheadBehaviours:Uo(N([o.getValidationHandler().map(function(e){return B_.config({getRoot:function(t){return kn(t.element())},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,n){d.getOpt(t).each(function(t){Pn(t.element(),"title",s.translate(n))})}},validator:{validate:function(t){var n=Lw.getValue(t);return PE(function(o){e({type:r.filetype,url:n.value},function(t){if("invalid"===t.status){var n=Ch.error(t.message);o(n)}else{var e=Ch.value(t.message);o(e)}})})},validateOnLoad:!1}})}).toArray(),[qk.config({disabled:r.disabled}),A_.config({}),zu("urlinput-events",N(["file"===r.filetype?[ln(Pb(),function(t){en(t,e_,{name:r.name})})]:[],[ln(zb(),function(t){en(t,e_,{name:r.name}),n(t)}),ln(Yb(),function(t){en(t,e_,{name:r.name}),n(t)})]]))]])),eventOrder:(t={},t[Pb()]=["streaming","urlinput-events","invalidating"],t),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:Rc(0,0,"normal")},onExecute:function(t,n){en(n,u_,{})},onItemExecute:function(t){n(t),en(t,e_,{name:r.name})}}),f=r.label.map(function(t){return ys(t,s)}),d=Sa((i="invalid",u=xh.some(LE),void 0===(a="warning")&&(a=i),void 0===c&&(c=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:ka(a,s.icons),attributes:vh({title:s.translate(c),"aria-live":"polite"},u.fold(function(){return{}},function(t){return{id:t}}))}})),m=Sa({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),g=o.getUrlPicker(r.filetype),p=Xn("browser.url.event"),h=Sa({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()],behaviours:Uo([qk.config({disabled:r.disabled})])}),v=Sa(Yf({name:r.name,icon:xh.some("browse"),text:r.label.getOr(""),disabled:r.disabled,primary:!1,borderless:!0},function(t){return nn(t,p)},s,[],["tox-browse-url"]));return m_.sketch({dom:F_([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:N([[h.asSpec()],g.map(function(){return v.asSpec()}).toArray()])}]),fieldBehaviours:Uo([qk.config({disabled:r.disabled,onDisabled:function(t){m_.getField(t).each(qk.disable),v.getOpt(t).each(qk.disable)},onEnabled:function(t){m_.getField(t).each(qk.enable),v.getOpt(t).each(qk.enable)}}),zu("url-input-events",[ln(p,function(o){xS.getCurrent(o).each(function(n){var t=Lw.getValue(n),e=vh({fieldname:r.name},t);g.each(function(t){t(e).get(function(t){Lw.setValue(n,t),en(o,e_,{name:r.name})})})})})])])})}function Cd(a,n){function t(o){return function(n,e){ao(e.event().target(),"[data-collection-item-value]").each(function(t){o(n,e,t,zn(t,"data-collection-item-value"))})}}var e,o,r=a.label.map(function(t){return ys(t,n)}),i=t(function(t,n,e,o){n.stop(),en(t,i_,{name:a.name,value:o})}),u=[ln(Ib(),t(function(t,n,e){Xo(e)})),ln(Lb(),i),ln($b(),i),ln(Rb(),t(function(t,n,e){uo(t.element(),"."+Pk).each(function(t){de(t,Pk)}),le(e,Pk)})),ln(Vb(),t(function(t){uo(t.element(),"."+Pk).each(function(t){de(t,Pk)})})),xy(t(function(t,n,e,o){en(t,i_,{name:a.name,value:o})}))];return bs(r,m_.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==a.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:f},behaviours:Uo([wC.config({}),Lw.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,t){var n,e,r;n=o,e=x(t,function(t){var n,e=Dk.translate(t.text),o=1===a.columns?'<div class="tox-collection__item-label">'+e+"</div>":"",r='<div class="tox-collection__item-icon">'+t.icon+"</div>",i={_:" "," - ":" ","-":" "},u=e.replace(/\_| \- |\-/g,function(t){return i[t]});return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(n=t.value)?"&quot;":n)+'" title="'+u+'" aria-label="'+u+'">'+r+o+"</div>"}),r=x(1<a.columns&&"auto"!==a.columns?g(e,a.columns):[e],function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}),Rn(n.element(),r.join("")),"auto"===a.columns&&Na(o,5,"tox-collection__item").each(function(t){var n=t.numRows,e=t.numColumns;yC.setGridSize(o,n,e)}),nn(o,l_)}}),A_.config({}),yC.config((e=a.columns,o="normal",1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===o?".tox-swatches__row":".tox-collection__group",cell:"color"===o?"."+Fk:"."+Mk}})),zu("collection-events",u)])}),["tox-form__group--collection"],[])}function kd(r){return function(n,e,o){return jh(e,"name").fold(function(){return r(e,o)},function(t){return n.field(t,r(e,o))})}}function Od(n,t,e){var o=Xh(e,{shared:{interpreter:function(t){return WE(n,t,o)}}});return WE(n,t,o)}function _d(t){return{colorPicker:(r=t,function(t,n){AO.colorPickerDialog(r)(t,n)}),hasCustomColors:(o=t,function(){return xO(o)}),getColors:(e=t,function(){return wO(e)}),getColorCols:(n=t,function(){return AO.getColorCols(n)})};var n,e,o,r}function Td(n){return(t=n,xh.from(t.getParam("style_formats")).filter(_h)).map(function(o){var t=function(n){function t(t){Ih(t,function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)})}var e=qE(o);return n.formatter?t(e.customFormats):n.on("init",function(){t(e.customFormats)}),e.formats}(n);return n.getParam("style_formats_merge",!1,"boolean")?YE.concat(t):t}).getOr(YE);var t}function Ed(t,n,e){var o={type:"formatter",isSelected:n(t.format),getStylePreview:e(t.format)};return Xh(t,o)}function Bd(a,t,c,s){var l=function(t){return x(t,function(t){var n,e,o,r,i=Hh(t);if(I(t,"items")){var u=l(t.items);return Xh(Xh(t,{type:"submenu"}),{getStyleItems:function(){return u}})}return I(t,"format")?Ed(t,c,s):1===i.length&&Fh(i,"title")?Xh(t,{type:"separator"}):(e=Xn((n=t).title),o={type:"formatter",format:e,isSelected:c(e),getStylePreview:s(e)},r=Xh(n,o),a.formatter.register(e,r),r)})};return l(t)}function Dd(n){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===n)return!0;if(t.getAttribute("data-mce-contenteditable")===n)return!0}return!1}}function Ad(t,n,e,o,r){return{type:t,title:n,url:e,level:o,attach:r}}function Md(t){return t.innerText||t.textContent}function Fd(t){return(n=t)&&"A"===n.nodeName&&(n.id||n.name)!==undefined&&QE(t);var n}function Id(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function Rd(t){return Id(t)&&QE(t)}function Vd(t){var n,e,o=(n=t).id?n.id:Xn("h");return Ad("header",Md(t),"#"+o,Id(e=t)?parseInt(e.nodeName.substr(1),10):0,function(){t.id=o})}function Hd(t){var n=t.id||t.name;return Ad("anchor",Md(t)||"#"+n,"#"+n,0,Q)}function Nd(t){return n="h1,h2,h3,h4,h5,h6,a:not([href])",e=t,x(wr($v.fromDom(e),n),function(t){return t.dom()});var n,e}function Pd(t){return 0<KE(t.title).length}function zd(t){return kh(t)&&/^https?/.test(t)}function Ld(t){return Oh(t)&&M(t,function(t){return!(_h(n=t)&&n.length<=5&&_(n,zd));var n}).isNone()}function jd(){var t,n=v.localStorage.getItem(tB);if(null===n)return{};try{t=JSON.parse(n)}catch(lh){if(lh instanceof SyntaxError)return v.console.log("Local storage "+tB+" was not valid JSON",lh),{};throw lh}return Ld(t)?t:(v.console.log("Local storage "+tB+" was not valid format",t),{})}function Ud(t){var n=jd();return Object.prototype.hasOwnProperty.call(n,t)?n[t]:[]}function Wd(n,t){if(zd(n)){var e=jd(),o=w(Object.prototype.hasOwnProperty.call(e,t)?e[t]:[],function(t){return t!==n});e[t]=[n].concat(o).slice(0,5),function(t){if(!Ld(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));v.localStorage.setItem(tB,JSON.stringify(t))}(e)}}function Gd(t){return!!t}function Xd(t){return P(OE.makeMap(t,/[, ]/),Gd)}function Yd(t,n,e){var o,r,i=(o=t,r=n,nB.call(o,r)?xh.some(o[r]):xh.none()).getOr(e);return kh(i)?xh.some(i):xh.none()}function qd(t){return xh.some(t.file_picker_callback).filter(Eh)}function Kd(t,n){var e,o,r,i,u=(e=t,o=xh.some(e.file_picker_types).filter(Gd),r=xh.some(e.file_browser_callback_types).filter(Gd),i=o.or(r).map(Xd),qd(e).fold(function(){return!1},function(){return i.fold(function(){return!0},function(t){return 0<Hh(t).length&&t})}));return Th(u)?u?qd(t):xh.none():u[n]?qd(t):xh.none()}function Jd(n){return{getHistory:Ud,addToHistory:Wd,getLinkInformation:function(){return!1===(t=n).settings.typeahead_urls?xh.none():xh.some({targets:ZE(t.getBody()),anchorTop:Yd(t.settings,"anchor_top","#top").getOrUndefined(),anchorBottom:Yd(t.settings,"anchor_bottom","#bottom").getOrUndefined()});var t},getValidationHandler:function(){return t=n,xh.from(t.settings.file_picker_validator_handler).filter(Eh).orThunk(function(){return xh.from(t.settings.filepicker_validator_handler).filter(Eh)});var t},getUrlPicker:function(t){return i=t,Kd((r=n).settings,i).map(function(o){return function(n){return k_(function(e){var t=vh({filetype:i,fieldname:n.fieldname},xh.from(n.meta).getOr({}));o.call(r,function(t,n){if(!kh(t))throw new Error("Expected value to be string");if(n!==undefined&&!Oh(n))throw new Error("Expected meta to be a object");e({value:t,meta:n})},n.value,t)})}});var r,i}}}function $d(t,n,e){var o,r=Kv(!1),i={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons},menuItems:function(){return n.ui.registry.getAll().menuItems},translate:Dk.translate},interpreter:function(t){return WE(UE,t,i)},anchors:XE(n,e),getSink:function(){return Ch.value(t)}},urlinput:Jd(n),styleselect:function(e){function o(t){return function(){return e.formatter.match(t)}}function r(n){return function(){var t=e.formatter.get(n);return t!==undefined?xh.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(n))}):xh.none()}}var i=function(t){var n=t.items;return n!==undefined&&0<n.length?O(n,i):[t.format]},u=Kv([]),a=Kv([]),c=Kv([]),s=Kv([]),l=Kv(!1);return e.on("PreInit",function(){var t=Td(e),n=Bd(e,t,o,r);u.set(n),a.set(O(n,i))}),e.on("addStyleModifications",function(t){var n=Bd(e,t.items,o,r);c.set(n),l.set(t.replace),s.set(O(n,i))}),{getData:function(){var t=l.get()?[]:u.get(),n=c.get();return t.concat(n)},getFlattenedKeys:function(){var t=l.get()?[]:a.get(),n=s.get();return t.concat(n)}}}(n),colorinput:_d(n),dialog:{isDraggableModal:(o=n,function(){return o.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return r.get()},setContextMenuState:function(t){return r.set(t)}};return i}function Qd(t,n,o){var e,r=(e=function(t,n){var e=o(t);return xh.some({element:mh(t),start:mh(n),finish:mh(n+e),width:mh(e)})},S(t,function(n,t){return e(t,n.len).fold(mh(n),function(t){return{len:t.finish(),list:n.list.concat([t])}})},{len:0,list:[]}).list),i=w(r,function(t){return t.finish()<=n}),u=p(i,function(t,n){return t+n.width()},0),a=r.slice(i.length);return{within:mh(i),extra:mh(a),withinWidth:mh(u)}}function Zd(t){return x(t,function(t){return t.element()})}function tm(t,n,e,o){var r,i,u,a,c,s,l,f,d,m=(r=Qd(n,t,e),0===r.extra().length?xh.some(r):xh.none()).getOrThunk(function(){return Qd(n,t-e(o),e)}),g=m.within(),p=m.extra(),h=m.withinWidth();return 1===p.length&&p[0].width()<=e(o)?(l=p,f=h,d=Zd(g.concat(l)),lB(d,[],f)):1<=p.length?(u=p,a=o,c=h,s=Zd(g).concat([a]),lB(s,Zd(u),c)):(i=h,lB(Zd(g),[],i))}function nm(t,n){var e=x(n,function(t){return qy(t)});sB.setGroups(t,e)}function em(t,n,e){var o=_i(t,n,"primary"),r=R_.getCoupled(t,"overflowGroup");xe(o.element(),"visibility","hidden");var i=n.builtGroups.get().concat([r]),u=A(i,function(n){return qo(n.element()).bind(function(t){return n.getSystem().getByDom(t).toOption()})});e([]),nm(o,i);var a=tm(je(o.element()),n.builtGroups.get(),function(t){return je(t.element())},r);0===a.extra().length?(wC.remove(o,r),e([])):(nm(o,a.within()),e(a.extra())),_e(o.element(),"visibility"),Te(o.element()),u.each(kC.focus)}function om(t,n){var e=R_.getCoupled(t,"toolbarSandbox");Dw.isOpen(e)?Dw.close(e):Dw.open(e,n.toolbar())}function rm(t,n,e,o){var r=e.getBounds.map(function(t){return t()}),i=e.lazySink(t).getOrDie();ww.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:eB()}},n,r)}function im(t,n,e,o,r){sB.setGroups(n,r),rm(t,n,e,o),BC.on(t)}function um(t){return x(t,function(t){return qy(t)})}function am(t,e,o){em(t,o,function(n){o.overflowGroups.set(n),e.getOpt(t).each(function(t){hB.setGroups(t,um(n))})})}function cm(n,t){return t.getAnimationRoot.fold(function(){return n.element()},function(t){return t(n)})}function sm(t){return t.dimension.property}function lm(t,n){return t.dimension.getDimension(n)}function fm(t,n){pe(cm(t,n),[n.shrinkingClass,n.growingClass])}function dm(t,n){de(t.element(),n.openClass),le(t.element(),n.closedClass),xe(t.element(),sm(n),"0px"),Te(t.element())}function mm(t,n){de(t.element(),n.closedClass),le(t.element(),n.openClass),_e(t.element(),sm(n))}function gm(t,n,e){e.setCollapsed(),xe(t.element(),sm(n),lm(n,t.element())),Te(t.element()),fm(t,n),dm(t,n),n.onStartShrink(t),n.onShrunk(t)}function pm(t,n,e,o){var r=o.getOrThunk(function(){return lm(n,t.element())});e.setCollapsed(),xe(t.element(),sm(n),r),Te(t.element());var i=cm(t,n);de(i,n.growingClass),le(i,n.shrinkingClass),dm(t,n),n.onStartShrink(t)}function hm(t,n,e){var o=lm(n,t.element());("0px"===o?gm:pm)(t,n,e,xh.some(o))}function vm(t,n,e){var o=cm(t,n),r=me(o,n.shrinkingClass),i=lm(n,t.element());mm(t,n);var u=lm(n,t.element());(r?function(){xe(t.element(),sm(n),i),Te(t.element())}:function(){dm(t,n)})(),de(o,n.shrinkingClass),le(o,n.growingClass),mm(t,n),xe(t.element(),sm(n),u),e.setExpanded(),n.onStartGrow(t)}function bm(t,n){return!0===me(cm(t,n),n.growingClass)}function ym(t,n){return!0===me(cm(t,n),n.shrinkingClass)}function xm(t,n){var e,o,r,i=t.outerContainer;o=n,r=(e=t).outerContainer.element(),o&&(e.mothership.broadcastOn([Aw()],{target:r}),e.uiMothership.broadcastOn([Aw()],{target:r})),e.mothership.broadcastOn([_B],{readonly:o}),e.uiMothership.broadcastOn([_B],{readonly:o}),Kt("*",i.element()).forEach(function(t){i.getSystem().getByDom(t).each(function(t){t.hasConfigured(qk)&&qk.set(t,n)})})}function wm(t,n){t.on("init",function(){t.readonly&&xm(n,!0)}),t.on("SwitchMode",function(){return xm(n,t.readonly)}),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")}function Sm(n){var t;return Ix.config({channels:(t={},t[_B]={schema:TB,onReceive:function(t,o){n(t).each(function(t){var n,e;n=t,e=o.readonly,Kt("*",n.element()).forEach(function(t){n.getSystem().getByDom(t).each(function(t){t.hasConfigured(qk)&&qk.set(t,e)})})})}},t)})}function Cm(t){var n=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:vh({tag:"div",classes:["tox-toolbar__group"]},n),components:[uB.parts().items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Uo([A_.config({}),kC.config({})])}}function km(t){return uB.sketch(Cm(t))}function Om(e,t,n){var o=vy(function(t){var n=x(e.initGroups,km);sB.setGroups(t,n)});return Uo([yC.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),zu("toolbar-events",[o]),Sm(n)])}function _m(t,n){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":Cm({title:xh.none(),items:[]}),"overflow-button":Wf({name:"more",icon:xh.some("more-drawer"),disabled:!1,tooltip:xh.some("More..."),primary:!1,borderless:!1},xh.none(),t.backstage.shared.providers)},splitToolbarBehaviours:Om(t,e,n)}}function Tm(o){var t=_m(o,vB.getOverflow),n=vB.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return vB.sketch(vh(vh({},t),{lazySink:o.getSink,getOverflowBounds:function(){var t=o.moreDrawerData.lazyHeader().element(),n=Ze(t),e=Ze(Sn(t));return $e(n.x()+4,e.y(),n.width()-8,e.height())},parts:vh(vh({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}function Em(t){var n=kB.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),e=kB.parts().overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=_m(t,xh.none);return kB.sketch(vh(vh({},o),{components:[n,e],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([OB()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([OB()],{type:"closed"})}}))}function Bm(t){var n=t.cyclicKeying?"cyclic":"acyclic";return sB.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===DS.scrolling?["tox-toolbar--scrolling"]:[])},components:[sB.parts().groups({})],toolbarBehaviours:Om(t,n,mh(xh.none()))})}function Dm(t){return st("toolbarbutton",BB,t)}function Am(t){return st("menubutton",AB,t)}function Mm(t){return st("ToggleButton",IB,t)}function Fm(n){return{isDisabled:function(){return qk.isDisabled(n)},setDisabled:function(t){return qk.set(n,t)}}}function Im(n){return{setActive:function(t){BC.set(n,t)},isActive:function(){return BC.isOn(n)},isDisabled:function(){return qk.isDisabled(n)},setDisabled:function(t){return qk.set(n,t)}}}function Rm(t,n){return t.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})}function Vm(n,e,t,o,r,i){function u(t){return Dk.isRtl()&&Fh(tD,t)?t+"-rtl":t}var a,c=Dk.isRtl()&&n.exists(function(t){return Fh(nD,t)});return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:Rm(t,i)},components:uc([n.map(function(t){return Mf(u(t),i.icons)}),e.map(function(t){return If(t,"tox-tbtn",i)})]),eventOrder:(a={},a[Db()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:Uo([zu("common-button-display-events",[ln(Db(),function(t,n){n.event().prevent(),nn(t,ZB)})])].concat(o.map(function(t){return YB.config({channel:t,initialData:{icon:n,text:e},renderComponents:function(t){return uc([t.icon.map(function(t){return Mf(u(t),i.icons)}),t.text.map(function(t){return If(t,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}}function Hm(t,n,e){var o,r=Kv(Q),i=Vm(t.icon,t.text,t.tooltip,xh.none(),xh.none(),e);return ok.sketch({dom:i.dom,components:i.components,eventOrder:sE,buttonBehaviours:Uo([zu("toolbar-button-events",[(o={onAction:t.onAction,getApi:n.getApi},xy(function(n){oc(o,n)(function(t){en(n,cE,{buttonApi:t}),o.onAction(t)})})),rc(n,r),ic(n,r)]),Qk(t.disabled)].concat(n.toolbarButtonBehaviours))})}function Nm(n,t){function e(e){return{isDisabled:function(){return qk.isDisabled(e)},setDisabled:function(t){return qk.set(e,t)},setIconFill:function(t,n){uo(e.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Pn(t,"fill",n)})},setIconStroke:function(t,n){uo(e.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Pn(t,"stroke",n)})},setActive:function(n){Pn(e.element(),"aria-pressed",n),uo(e.element(),"span").each(function(t){e.getSystem().getByDom(t).each(function(t){return BC.set(t,n)})})},isActive:function(){return uo(e.element(),"span").exists(function(t){return e.getSystem().getByDom(t).exists(BC.isOn)})}}}var o,r,i,u,a=Xn("channel-update-split-dropdown-display"),c=Kv(Q),s={getApi:e,onSetup:n.onSetup};return QB.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:vh({"aria-pressed":!1},Rm(n.tooltip,t.providers))},onExecute:function(t){n.onAction(e(t))},onItemExecute:function(){},splitDropdownBehaviours:Uo([$k(!1),zu("split-dropdown-events",[ln(ZB,kC.focus),rc(s,c),ic(s,c)]),K_.config({})]),eventOrder:(o={},o[uy()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:(r=e,i=n,u=t.providers,function(n){return k_(function(t){return i.fetch(t)}).map(function(t){return xh.from(Jc(Xh(Uc(Xn("menu-value"),t,function(t){i.onItemAction(r(n),t)},i.columns,i.presets,nO.CLOSE_ON_EXECUTE,i.select.getOr(function(){return!1}),u),{movement:Wc(i.columns,i.presets),menuBehaviours:Sk("auto"!==i.columns?[]:[vy(function(o){Na(o,4,La(i.presets)).each(function(t){var n=t.numRows,e=t.numColumns;yC.setGridSize(o,n,e)})})])})))})}),parts:{menu:Rc(0,n.columns,n.presets)},components:[QB.parts().button(Vm(n.icon,n.text,xh.none(),xh.some(a),xh.some([BC.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),QB.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ka("chevron-down",t.providers.icons)}}),QB.parts()["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})}function Pm(r,i){return ln(cE,function(t,n){var e,o=(e=r.get(t),{hide:function(){return nn(e,Zb())},getValue:function(){return Lw.getValue(e)}});i.onAction(o,n.event().buttonApi())})}function zm(t,n,e){var o,r,i,u,a,c,s,l,f,d,m,g,p={backstage:{shared:{providers:e}}};return"contextformtogglebutton"===n.type?(s=t,f=p,(d=(l=n).original).primary,m=h(d,["primary"]),g=lt(Mm(vh(vh({},m),{type:"togglebutton",onAction:function(){}}))),oD(g,f.backstage.shared.providers,[Pm(s,l)])):(o=t,i=p,(u=(r=n).original).primary,a=h(u,["primary"]),c=lt(Dm(vh(vh({},a),{type:"button",onAction:function(){}}))),eD(c,i.backstage.shared.providers,[Pm(o,r)]))}function Lm(t){var n,e,o,r,i,u=Ke(v.window),a=Qe($v.fromDom(t.getContentAreaContainer())),c=ga(t)||pa(t)||ZC(t),s=(n=a,e=u,o=Math.max(e.x(),n.x()),r=n.right()-o,i=e.width()-(o-e.x()),{x:o,width:Math.min(r,i)}),l=s.x,f=s.width;if(t.inline&&!c)return $e(l,u.y(),f,u.height());var d=function(t,n,e){var o=$v.fromDom(t.getContainer()),r=Qe(uo(o,".tox-editor-header").getOr(o)),i=r.y()>=n.bottom(),u=ek(t)&&!i;if(t.inline&&u)return{y:Math.max(r.bottom(),e.y()),bottom:e.bottom()};if(t.inline&&!u)return{y:e.y(),bottom:Math.min(r.y(),e.bottom())};var a=Qe(o);return u?{y:Math.max(r.bottom(),e.y()),bottom:Math.min(a.bottom(),e.bottom())}:{y:Math.max(a.y(),e.y()),bottom:Math.min(r.y(),e.bottom())}}(t,a,u),m=d.y;return $e(l,m,f,d.bottom-m)}function jm(n,t){return A(t,function(t){return t.predicate(n.dom())?xh.some({toolbarApi:t,elem:n}):xh.none()})}function Um(o,r){return function(n){function t(){n.setActive(o.formatter.match(r));var t=o.formatter.formatChanged(r,n.setActive).unbind;e.set(xh.some(t))}var e=Kv(xh.none());return o.initialized?t():o.on("init",t),function(){return e.get().each(function(t){return t()})}}}function Wm(n){return function(t){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("mceToggleFormat",!1,t.format)})}}}function Gm(t,n,e){var o=e.dataset,r="basic"===o.type?function(){return x(o.data,function(t){return Ed(t,e.isSelectedFor,e.getPreviewFor)})}:o.getData;return{items:function(t,u,a){function r(t,n,e,o){var r=u.shared.providers.translate(t.title);if("separator"===t.type)return xh.some({type:"separator",text:r});if("submenu"!==t.type)return xh.some(vh({type:"togglemenuitem",text:r,active:t.isSelected(o),disabled:e,onAction:a.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}})));var i=O(t.getStyleItems(),function(t){return c(t,n,o)});return 0===n&&i.length<=0?xh.none():xh.some({type:"nestedmenuitem",text:r,disabled:i.length<=0,getSubmenuItems:function(){return O(t.getStyleItems(),function(t){return c(t,n,o)})}})}function o(t){var n=a.getCurrentValue(),e=a.shouldHide?0:1;return O(t,function(t){return c(t,e,n)})}var c=function(t,n,e){var o="formatter"===t.type&&a.isInvalid(t);return 0===n?o?[]:r(t,n,!1,e).toArray():r(t,n,o,e).toArray()};return{validateItems:o,getFetch:function(n,e){return function(t){t(Pf(o(e()),nO.CLOSE_ON_EXECUTE,n,!1))}}}}(0,n,e),getStyleItems:r}}function Xm(o,t,n){var e=Gm(0,t,n),r=e.items,i=e.getStyleItems;return Rf({text:n.icon.isSome()?xh.none():xh.some(""),icon:n.icon,tooltip:xh.from(n.tooltip),role:xh.none(),fetch:r.getFetch(t,i),onSetup:function(e){return n.setInitialValue.each(function(t){return t(e.getComponent())}),n.nodeChangeHandler.map(function(t){var n=t(e.getComponent());return o.on("NodeChange",n),function(){o.off("NodeChange",n)}}).getOr(Q)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)}function Ym(t,n,e,o){return{type:"basic",data:x((r=jh(t.settings,n).getOr(e),i=o,i===U_.SemiColon?r.replace(/;$/,"").split(";"):r.split(" ")),function(t){var n=t,e=t,o=t.split("=");return 1<o.length&&(n=o[0],e=o[1]),{title:n,format:e}})};var r,i}function qm(e){function n(t){var n=C(hD,function(t){return e.formatter.match(t.format)}).fold(function(){return"left"},function(t){return t.title.toLowerCase()});en(t,fE,{icon:"align-"+n})}var t=xh.some(function(t){return function(){return n(t)}}),o=xh.some(function(t){return n(t)}),r={type:"basic",data:hD};return{tooltip:"Align",icon:xh.some("align-left"),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:mh(xh.none()),getPreviewFor:function(){return function(){return xh.none()}},onAction:Wm(e),setInitialValue:o,nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}}function Km(t){return x(t.split(/\s*,\s*/),function(t){return t.replace(/^['"]+|['"]+$/g,"")})}function Jm(r){function i(){function e(t){return t?Km(t)[0]:""}var t=r.queryCommandValue("FontName"),n=u.data,o=t?t.toLowerCase():"";return{matchOpt:C(n,function(t){var n=t.format;return n.toLowerCase()===o||e(n).toLowerCase()===e(o).toLowerCase()}).orThunk(function(){return 0===(t=o).indexOf("-apple-system")&&(n=Km(t.toLowerCase()),_(vD,function(t){return-1<n.indexOf(t.toLowerCase())}))?xh.from({title:"System Font",format:o}):xh.none();var t,n}),font:t}}function n(t){var n=i(),e=n.matchOpt,o=n.font,r=e.fold(function(){return o},function(t){return t.title});en(t,lE,{text:r})}var t=xh.some(function(t){return function(){return n(t)}}),e=xh.some(function(t){return n(t)}),u=Ym(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",U_.SemiColon);return{tooltip:"Fonts",icon:xh.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getCurrentValue:function(){return i().matchOpt},getPreviewFor:function(t){return function(){return xh.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(t){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,t.format)})}},setInitialValue:e,nodeChangeHandler:t,dataset:u,shouldHide:!1,isInvalid:function(){return!1}}}function $m(t,n){return/[0-9.]+px$/.test(t)?(e=72*parseInt(t,10)/96,o=n||0,r=Math.pow(10,o),Math.round(e*r)/r+"pt"):t;var e,o,r}function Qm(e){function i(){var o=xh.none(),r=u.data,i=e.queryCommandValue("FontSize");if(i)for(var t=function(t){var n=$m(i,t),e=jh(bD,n).getOr("");o=C(r,function(t){return t.format===i||t.format===n||t.format===e})},n=3;o.isNone()&&0<=n;n--)t(n);return{matchOpt:o,size:i}}function n(t){var n=i(),e=n.matchOpt,o=n.size,r=e.fold(function(){return o},function(t){return t.title});en(t,lE,{text:r})}var t=mh(mh(xh.none())),o=xh.some(function(t){return function(){return n(t)}}),r=xh.some(function(t){return n(t)}),u=Ym(e,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",U_.Space);return{tooltip:"Font sizes",icon:xh.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getPreviewFor:t,getCurrentValue:function(){return i().matchOpt},onAction:function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontSize",!1,t.format)})}},setInitialValue:r,nodeChangeHandler:o,dataset:u,shouldHide:!1,isInvalid:function(){return!1}}}function Zm(e,t,n){var o=t();return A(n,function(n){return C(o,function(t){return e.formatter.matchNode(n,t.format)})}).orThunk(function(){return e.formatter.match("p")?xh.some({title:"Paragraph",format:"p"}):xh.none()})}function tg(t){var n=t.selection.getStart(!0)||t.getBody();return t.dom.getParents(n,function(){return!0},t.getBody())}function ng(o){function e(t,n){var e=Zm(o,function(){return r.data},t).fold(function(){return"Paragraph"},function(t){return t.title});en(n,lE,{text:e})}var t=xh.some(function(n){return function(t){return e(t.parents,n)}}),n=xh.some(function(t){e(tg(o),t)}),r=Ym(o,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",U_.SemiColon);return{tooltip:"Blocks",icon:xh.none(),isSelectedFor:function(t){return function(){return o.formatter.match(t)}},getCurrentValue:mh(xh.none()),getPreviewFor:function(n){return function(){var t=o.formatter.get(n);return xh.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(n))})}},onAction:Wm(o),setInitialValue:n,nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!o.formatter.canApply(t.format)}}}function eg(i,t){function e(t,n){var e=function(t){var n=t.items;return n!==undefined&&0<n.length?O(n,e):[{title:t.title,format:t.format}]},o=O(Td(i),e),r=Zm(i,function(){return o},t).fold(function(){return"Paragraph"},function(t){return t.title});en(n,lE,{text:r})}var n=xh.some(function(n){return function(t){return e(t.parents,n)}}),o=xh.some(function(t){e(tg(i),t)});return{tooltip:"Formats",icon:xh.none(),isSelectedFor:function(t){return function(){return i.formatter.match(t)}},getCurrentValue:mh(xh.none()),getPreviewFor:function(n){return function(){
var t=i.formatter.get(n);return t!==undefined?xh.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:i.dom.parseStyle(i.formatter.getCssText(n))}):xh.none()}},onAction:Wm(i),setInitialValue:o,nodeChangeHandler:n,shouldHide:i.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!i.formatter.canApply(t.format)},dataset:t}}function og(r,i){return function(t,n,e){var o=r(t).mapError(function(t){return Lv(t)}).getOrDie();return i(o,n,e)}}function rg(t){var e,n=t.toolbar,o=t.buttons;return!1===n?[]:n===undefined||!0===n?(e=o,w(x(yD,function(t){var n=w(t.items,function(t){return Uh(e,t)||Uh(wD,t)});return{name:t.name,items:n}}),function(t){return 0<t.items.length})):kh(n)?x(n.split("|"),function(t){return{items:t.trim().split(" ")}}):s(n,function(t){return Uh(t,"name")&&Uh(t,"items")})?n:(v.console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])}function ig(r,n,i,u,a,t){return jh(n,i.toLowerCase()).orThunk(function(){return t.bind(function(t){return A(t,function(t){return jh(n,t+i.toLowerCase())})})}).fold(function(){return jh(wD,i.toLowerCase()).map(function(t){return t(r,a)}).orThunk(function(){return xh.none()})},function(t){return"grouptoolbarbutton"!==t.type||u?(e=a,o=r,jh(xD,(n=t).type).fold(function(){return v.console.error("skipping button defined by",n),xh.none()},function(t){return xh.some(t(n,e,o))})):(v.console.warn("Ignoring the '"+i+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),xh.none());var n,e,o})}function ug(t){return(ke(t,"position").is("fixed")?xh.none():On(t)).orThunk(function(){var e=$v.fromTag("span");return kn(t).bind(function(t){wy(t,e);var n=On(e);return Sy(e),n})})}function ag(t){return ug(t).map(Le).getOrThunk(function(){return $y(0,0)})}function cg(t,n){var e=t.element();le(e,n.transitionClass),de(e,n.fadeOutClass),le(e,n.fadeInClass),n.onShow(t)}function sg(t,n){var e=t.element();le(e,n.transitionClass),de(e,n.fadeInClass),le(e,n.fadeOutClass),n.onHide(t)}function lg(t,o,r){return _(t,function(t){switch(t){case"bottom":return e=r,o.bottom()<=e.bottom();case"top":return n=r,o.y()>=n.y()}var n,e})}function fg(n,t){return t.getInitialPosition().map(function(t){return $e(t.bounds.x(),t.bounds.y(),je(n),Ne(n))})}function dg(r,t,n){n.setInitialPosition(xh.some({style:function(){var t={},n=r.dom();if(he(n))for(var e=0;e<n.style.length;e++){var o=n.style.item(e);t[o]=n.style[o]}return t}(),position:Ce(r,"position")||"static",bounds:t}))}function mg(e,o,r){return r.getInitialPosition().bind(function(t){switch(r.setInitialPosition(xh.none()),t.position){case"static":return xh.some(RD["static"]());case"absolute":var n=ug(e).map(Qe).getOrThunk(function(){return Qe(jy())});return xh.some(RD.absolute(Vx("absolute",jh(t.style,"left").map(function(){return o.x()-n.x()}),jh(t.style,"top").map(function(){return o.y()-n.y()}),jh(t.style,"right").map(function(){return n.right()-o.right()}),jh(t.style,"bottom").map(function(){return n.bottom()-o.bottom()}))));default:return xh.none()}})}function gg(t,n,e,o){var r,i,u,a,c=t.element();return ke(c,"position").is("fixed")?(i=n,u=e,fg(r=c,a=o).filter(function(t){return lg(i.modes,t,u)}).bind(function(t){return mg(r,t,a)})):function(t,n,e,o){var r=Qe(t);if(lg(n.modes,r,e))return xh.none();dg(t,r,o);var i=to(),u=r.x()-i.x(),a=e.y()-i.y(),c=i.bottom()-e.bottom(),s=r.y()<=e.y();return xh.some(RD.fixed(Vx("fixed",xh.some(u),s?xh.some(a):xh.none(),xh.none(),s?xh.none():xh.some(c))))}(c,n,e,o)}function pg(n,t){Ih(["left","right","top","bottom","position"],function(t){return _e(n.element(),t)}),t.onUndocked(n)}function hg(t,n,e){Jo(t.element(),e),("fixed"===e.position()?n.onDocked:n.onUndocked)(t)}function vg(i,t,u,a,c){void 0===c&&(c=!1),t.contextual.each(function(r){r.lazyContext(i).each(function(t){var n,e,o=(e=a,(n=t).y()<e.bottom()&&n.bottom()>e.y());o!==u.isVisible()&&(u.setVisible(o),c&&!o?(ge(i.element(),[r.fadeOutClass]),r.onHide(i)):(o?cg:sg)(i,r))})})}function bg(n,e,t){var o,r,i=n.element();t.setDocked(!1),(o=t,r=n.element(),fg(r,o).bind(function(t){return mg(r,t,o)})).each(function(t){t.fold(function(){return pg(n,e)},function(t){return hg(n,e,t)},Q)}),t.setVisible(!0),e.contextual.each(function(t){pe(i,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(n)}),VD(n,e,t)}function yg(t,n,e){e.isDocked()&&bg(t,n,e)}function xg(r,i){var u=r.element();kn(u).each(function(t){var n,e="padding-"+(i?"top":"bottom");if(PD.isDocked(r)){var o=je(t);xe(u,"width",o+"px"),xe(t,e,Pe(n=u)+(parseInt(Ce(n,"margin-top"),10)||0)+(parseInt(Ce(n,"margin-bottom"),10)||0)+"px")}else _e(u,"width"),_e(t,e)})}function wg(t,n){n?(de(t,zD.fadeOutClass),ge(t,[zD.transitionClass,zD.fadeInClass])):(de(t,zD.fadeInClass),ge(t,[zD.fadeOutClass,zD.transitionClass]))}function Sg(t,n){var e=$v.fromDom(t.getContainer());n?(le(e,LD),de(e,jD)):(le(e,jD),de(e,LD))}function Cg(u,o){function i(n){o().each(function(t){return n(t.element())})}function t(t){u.inline||xg(t,c),Sg(u,PD.isDocked(t)),t.getSystem().broadcastOn([Mw()],{}),o().each(function(t){return t.getSystem().broadcastOn([Mw()],{})})}var n,e,a=Kv(xh.none()),c=ek(u),r=u.inline?[]:(n=c,[Ix.config({channels:(e={},e[OB()]={onReceive:function(t){xg(t,n)}},e)})]);return y([kC.config({}),PD.config({contextual:vh({lazyContext:function(t){var n=Pe(t.element()),e=u.inline?u.getContentAreaContainer():u.getContainer(),o=Qe($v.fromDom(e)),r=o.height()-n,i=o.y()+(c?0:n);return xh.some($e(o.x(),i,o.width(),r))},onShow:function(){i(function(t){return wg(t,!0)})},onShown:function(r){i(function(t){return pe(t,[zD.transitionClass,zD.fadeInClass])}),a.get().each(function(t){var n,e,o;n=r.element(),Yo(o=wn(e=t)).filter(function(t){return!Jt(e,t)}).filter(function(t){return Jt(t,$v.fromDom(o.dom().body))||kb(n,t)}).each(function(){return Xo(e)}),a.set(xh.none())})},onHide:function(t){var n,e;a.set((n=t.element(),e=o,qo(n).orThunk(function(){return e().toOption().bind(function(t){return qo(t.element())})}))),i(function(t){return wg(t,!1)})},onHidden:function(){i(function(t){return pe(t,[zD.transitionClass])})}},zD),modes:[c?"top":"bottom"],onDocked:t,onUndocked:t})],r)}function kg(t){return"<alloy.field."+t+">"}function Og(t){return{element:function(){return t.element().dom()}}}function _g(e,o){var r=x(Hh(o),function(t){var n=o[t],e=lt(st("sidebar",tA,n));return{name:t,getApi:Og,onSetup:e.onSetup,onShow:e.onShow,onHide:e.onHide}});return x(r,function(t){var n=Kv(Q);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Sk([rc(t,n),ic(t,n),ln(fy(),function(n,t){var e=t.event();C(r,function(t){return t.name===e.name()}).each(function(t){(e.visible()?t.onShow:t.onHide)(t.getApi(n))})})])})})}function Tg(t,e){xS.getCurrent(t).each(function(t){return wC.set(t,[(n=e,ZD.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:_g(t,n),slotBehaviours:Sk([vy(function(t){return ZD.hideAllSlots(t)})])}}))]);var n})}function Eg(t){return xS.getCurrent(t).bind(function(t){return xB.isGrowing(t)||xB.hasGrown(t)?xS.getCurrent(t).bind(function(n){return C(ZD.getSlotNames(n),function(t){return ZD.isShowing(n,t)})}):xh.none()})}function Bg(t){var n,e,o=$v.fromHtml(t),r=_n(o),i=S((e=o).dom().attributes!==undefined?e.dom().attributes:[],function(t,n){var e;return"class"===n.name?t:vh(vh({},t),((e={})[n.name]=n.value,e))},{}),u=(n=o,Array.prototype.slice.call(n.dom().classList,0)),a=0===r.length?{}:{innerHtml:In(o)};return vh({tag:Vn(o),classes:u,attributes:i},a)}function Dg(t,n,e){var o=t.element();!0===n?(wC.set(t,[{dom:{tag:"div",attributes:{"aria-label":e.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:Bg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:Uo([yC.config({mode:"special",onTab:function(){return xh.some(!0)},onShiftTab:function(){return xh.some(!0)}}),kC.config({})])}]),_e(o,"display"),jn(o,"aria-hidden")):(wC.set(t,[]),xe(o,"display","none"),Pn(o,"aria-hidden","true"))}function Ag(t){return"string"==typeof t?t.split(" "):t}function Mg(i,u){var a=vh(vh({},fA),u.menus),n=0<Hh(u.menus).length;return w(x(w(u.menubar===undefined||!0===u.menubar?Ag("file edit view insert format tools table help"):Ag(!1===u.menubar?"":u.menubar),function(t){return n&&u.menus.hasOwnProperty(t)&&u.menus[t].hasOwnProperty("items")||fA.hasOwnProperty(t)}),function(t){var n,e,o,r=a[t];return n={title:r.title,items:Ag(r.items)},e=u,o=i.getParam("removed_menuitems","").split(/[ ,]/),{text:n.title,getItems:function(){return O(n.items,function(t){var n=t.toLowerCase();return 0===n.trim().length?[]:l(o,function(t){return t===n})?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]})}}}),function(t){return 0<t.getItems().length&&l(t.getItems(),function(t){return"separator"!==t.type})})}function Fg(t,n){var e,o=function(t){var n=t.settings,e=n.skin,o=n.skin_url;if(!1!==e){var r=e||"oxide";o=o?t.documentBaseURI.toAbsolute(o):QC.baseURL+"/skins/ui/"+r}return o}(n);o&&(e=o+"/skin.min.css",n.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css")),!1==(!1===n.getParam("skin"))&&e?$C.DOM.styleSheetLoader.load(e,dA(n),mA(n,"Skin could not be loaded")):dA(n)()}function Ig(e,t,o,r){var n=t.outerContainer,i=o.toolbar,u=o.buttons;if(s(i,kh)){var a=i.map(function(t){var n={toolbar:t,buttons:u,allowToolbarGroups:o.allowToolbarGroups};return SD(e,n,{backstage:r},xh.none())});lA.setToolbars(n,a)}else lA.setToolbar(n,SD(e,o,{backstage:r},xh.none()))}function Rg(t){return(n=t,e=ca(n),o=fa(n),r=ma(n),wA(e).map(function(t){return xA(t,o,r)})).getOr(ca(t));var n,e,o,r}function Vg(t){var n=sa(t),e=la(t),o=da(t);return wA(n).map(function(t){return xA(t,e,o)})}function Hg(t,n){var e=Qe(t);return n?e.y():e.bottom()}function Ng(t,n){return function(){t.execCommand("mceToggleFormat",!1,n)}}function Pg(t){var n,e;!function(n){OE.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:Um(n,t.name),onAction:Ng(n,t.name)})});for(var t=1;t<=6;t++){var e="h"+t;n.ui.registry.addToggleButton(e,{text:e.toUpperCase(),tooltip:"Heading "+t,onSetup:Um(n,e),onAction:Ng(n,e)})}}(t),e=t,OE.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})}),n=t,OE.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:Um(n,t.name)})})}function zg(t,n,e){function o(){return!!n.undoManager&&n.undoManager[e]()}function r(){t.setDisabled(n.readonly||!o())}return t.setDisabled(!o()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return n.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}}function Lg(t,n){return{anchor:"makeshift",x:t,y:n}}function jg(t){return"longpress"===t.type||0===t.type.indexOf("touch")}function Ug(t,n){var e,o,r,i=$C.DOM.getPos(t);return e=n,o=i.x,r=i.y,Lg(e.x+o,e.y+r)}function Wg(t,n){return"contextmenu"===n.type||"longpress"===n.type?t.inline?function(t){if(jg(t)){var n=t.touches[0];return Lg(n.pageX,n.pageY)}return Lg(t.pageX,t.pageY)}(n):Ug(t.getContentAreaContainer(),function(t){if(jg(t)){var n=t.touches[0];return Lg(n.clientX,n.clientY)}return Lg(t.clientX,t.clientY)}(n)):AA(t)}function Gg(t){return{anchor:"node",node:xh.some($v.fromDom(t.selection.getNode())),root:$v.fromDom(t.getBody())}}function Xg(t,n,e,o,r,i){var u,a,c=e(),s=(u=t,a=n,i?Gg(u):Wg(u,a));Pf(c,nO.CLOSE_ON_EXECUTE,o,!1).map(function(t){n.preventDefault(),YC.showMenuAt(r,s,{menu:{markers:Ic("normal")},data:t})})}function Yg(n,e,t,o,r,i,u){var a,c,s,l=(a=n,c=e,s=i?Gg(a):Wg(a,c),vh({bubble:ar(0,12,FA),layouts:MA,overrides:{maxWidthFunction:eB(),maxHeightFunction:Gx()}},s));Pf(t,nO.CLOSE_ON_EXECUTE,o,!0).map(function(t){e.preventDefault(),YC.showMenuWithinBounds(r,l,{menu:{markers:Ic("normal"),highlightImmediately:u},data:t,type:"horizontal"},function(){return xh.some(Lm(n))}),n.fire(oB)})}function qg(n,e,o,r,i,u){function t(){var t=o();Yg(n,e,t,r,i,u,!(l||c||s&&f))}var a=Xt(),c=a.os.isiOS(),s=a.os.isOSX(),l=a.os.isAndroid(),f=a.deviceType.isTouch();if(!s&&!c||u)l&&!u&&n.selection.setCursorLocation(e.target,0),t();else{var d=function(){!function(t){function n(){JC.setEditorTimeout(t,function(){t.selection.setRng(r)},10),i()}function e(t){t.preventDefault(),t.stopImmediatePropagation()}function o(){return i()}var r=t.selection.getRng();t.once("touchend",n),t.on("mousedown",e,!0),t.once("longpresscancel",o);var i=function(){t.off("touchend",n),t.off("longpresscancel",o),t.off("mousedown",e)}}(n),t()};!function(t,n){var e=t.selection;if(e.isCollapsed()||n.touches.length<1)return!1;var o=n.touches[0],r=e.getRng();return kr(t.getWin(),ow.domRange(r)).exists(function(t){return t.left()<=o.clientX&&t.right()>=o.clientX&&t.top()<=o.clientY&&t.bottom()>=o.clientY})}(n,e)?(n.once("selectionchange",d),n.once("touchend",function(){return n.off("selectionchange",d)})):d()}}function Kg(t){return"string"==typeof t?t.split(/[ ,]/):t}function Jg(t){return kh(t)?"|"===t:"separator"===t.type}function $g(t,n){if(0===n.length)return t;var e=D(t).filter(function(t){return!Jg(t)}).fold(function(){return[]},function(){return[HA]});return t.concat(e).concat(n).concat([HA])}function Qg(c,t,o){function n(){return YC.hide(i)}function e(u){if(IA(c)&&u.preventDefault(),e=c,(!u.ctrlKey||IA(e))&&!VA(c)){var a=(t=c,"longpress"!==(n=u).type&&(2!==n.button||n.target===t.getBody()&&""===n.pointerType));(r()?qg:Xg)(c,u,function(){var o,r,t,n=a?c.selection.getStart(!0):u.target,e=c.ui.registry.getAll(),i=RA(c);return o=e.contextMenus,r=n,0<(t=S(i,function(t,n){if(Uh(o,n)){var e=o[n].update(r);return kh(e)?$g(t,e.split(" ")):0<e.length?$g(t,x(e,NA)):t}return t.concat([n])},[])).length&&Jg(t[t.length-1])&&t.pop(),t},o,i,a)}var t,n,e}var r=Xt().deviceType.isTouch,i=Yy(YC.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return c.focus()},onShow:function(){return o.setContextMenuState(!0)},onHide:function(){return o.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Uo([zu("dismissContextMenu",[ln(cy(),function(t){Dw.close(t),c.focus()})])])}));c.on("init",function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");c.on(t,n),c.on("longpress contextmenu",e)})}function Zg(n){return function(t){return t.translate(-n.left(),-n.top())}}function tp(n){return function(t){return t.translate(n.left(),n.top())}}function np(e){return function(t,n){return S(e,function(t,n){return n(t)},$y(t,n))}}function ep(t,n,e){return t.fold(np([tp(e),Zg(n)]),np([Zg(n)]),np([]))}function op(t,n,e){return t.fold(np([tp(e)]),np([]),np([tp(n)]))}function rp(t,n,e){return t.fold(np([]),np([Zg(e)]),np([tp(n),Zg(e)]))}function ip(t,n,e){var o=t.fold(function(t,n){return{position:xh.some("absolute"),left:xh.some(t+"px"),top:xh.some(n+"px")}},function(t,n){return{position:xh.some("absolute"),left:xh.some(t-e.left()+"px"),top:xh.some(n-e.top()+"px")}},function(t,n){return{position:xh.some("fixed"),left:xh.some(t+"px"),top:xh.some(n+"px")}});return vh({right:xh.none(),bottom:xh.none()},o)}function up(t,i,u,a){function n(o,r){return function(t,n){var e=o(i,u,a);return r(t.getOr(e.left()),n.getOr(e.top()))}}return t.fold(n(rp,zA),n(op,LA),n(ep,jA))}function ap(t,n,e,o){return(r=n,i=t.element(),u=parseInt(zn(i,r.leftAttr),10),a=parseInt(zn(i,r.topAttr),10),isNaN(u)||isNaN(a)?xh.none():xh.some($y(u,a))).fold(function(){return e},function(t){return jA(t.left()+o.left(),t.top()+o.top())});var r,i,u,a}function cp(t,n,e,o,r,i){var u,a,c,s=ap(t,n,e,o),l=n.mustSnap?UA(t,n,s,r,i):WA(t,n,s,r,i),f=ep(s,r,i);return u=n,a=f,Pn(c=t.element(),u.leftAttr,a.left()+"px"),Pn(c,u.topAttr,a.top()+"px"),l.fold(function(){return{coord:jA(f.left(),f.top()),extra:xh.none()}},function(t){return{coord:t.output(),extra:t.extra()}})}function sp(t,n){var e,o;e=n,jn(o=t.element(),e.leftAttr),jn(o,e.topAttr)}function lp(t,l,f,d){return A(t,function(t){var n,e,o,r,i,u,a,c,s=t.sensor();return n=l,e=s,o=t.range().left(),r=t.range().top(),a=op(n,i=f,u=d),c=op(e,i,u),Math.abs(a.left()-c.left())<=o&&Math.abs(a.top()-c.top())<=r?xh.some({output:mh(up(t.output(),l,f,d)),extra:t.extra}):xh.none()})}function fp(t,n){var e;t.getSystem().addToGui(n),kn((e=n).element()).filter(Cy).each(function(n){ke(n,"z-index").each(function(t){Pn(n,XA,t)}),xe(n,"z-index",Ce(e.element(),"z-index"))})}function dp(t){kn(t.element()).filter(Cy).each(function(t){var n=zn(t,XA);Ln(t,XA)?xe(t,"z-index",n):_e(t,"z-index"),jn(t,XA)}),t.getSystem().removeFromGui(t)}function mp(t,n,e){return t.getSystem().build(n_.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[n]},events:e}))}function gp(n){return(t=ke(n,"left"),e=ke(n,"top"),o=ke(n,"position"),r=function(t,n,e){return("fixed"===e?jA:zA)(parseInt(t,10),parseInt(n,10))},t.isSome()&&e.isSome()&&o.isSome()?xh.some(r(t.getOrDie(),e.getOrDie(),o.getOrDie())):xh.none()).getOrThunk(function(){var t=Le(n);return LA(t.left(),t.top())});var t,e,o,r}function pp(e,t,r,i,u,a,n){return o=t.fold(function(){var t,e,o,n=ep((t=r,e=a.left(),o=a.top(),t.fold(function(t,n){return zA(t+e,n+o)},function(t,n){return LA(t+e,n+o)},function(t,n){return jA(t+e,n+o)})),i,u);return jA(n.left(),n.top())},function(n){var t=cp(e,n,r,a,i,u);return t.extra.each(function(t){n.onSensor(e,t)}),t.coord}),c=i,s=u,f=(l=n).bounds,d=op(o,c,s),m=tr(d.left(),f.x(),f.x()+f.width()-l.width),g=tr(d.top(),f.y(),f.y()+f.height()-l.height),p=LA(m,g),o.fold(function(){var t=rp(p,c,s);return zA(t.left(),t.top())},function(){return p},function(){var t=ep(p,c,s);return jA(t.left(),t.top())});var o,c,s,l,f,d,m,g,p}function hp(t,n){return{bounds:t.getBounds(),height:Pe(n.element()),width:Ue(n.element())}}function vp(n,e,t,o,r){var i=t.update(o,r),u=t.getStartData().getOrThunk(function(){return hp(e,n)});i.each(function(t){!function(t,n,e,o){var r=n.getTarget(t.element());if(n.repositionTarget){var i=Xe(wn(t.element())),u=ag(r),a=gp(r);Se(r,ip(pp(t,n.snaps,a,i,u,o,e),0,u))}n.onDrag(t,r,o)}(n,e,u,t)})}function bp(n,t,e,o){t.each(dp),e.snaps.each(function(t){sp(n,t)});var r=e.getTarget(n.element());o.reset(),e.onDrop(n,r)}function yp(t){return function(n,e){function o(t){e.setStartData(hp(n,t))}return an(y([ln(ry(),function(t){e.getStartData().each(function(){return o(t)})})],t(n,e,o)))}}function xp(a,c,s){return[ln(Db(),function(n,t){if(0===t.event().raw().button){t.stop();var e=function(){return bp(n,xh.some(i),a,c)},o=ts(e,200),r={drop:e,delayDrop:o.schedule,forceDrop:e,move:function(t){o.cancel(),vp(n,a,c,KA,t)}},i=mp(n,a.blockerClass,(u=r,an([ln(Db(),u.forceDrop),ln(Fb(),u.drop),ln(Ab(),function(t,n){u.move(n.event())}),ln(Mb(),u.delayDrop)])));s(n),fp(n,i)}var u})]}function wp(u,a,c){var s=Kv(xh.none());return[ln(_b(),function(n,t){function e(){bp(n,s.get(),u,a),s.set(xh.none())}t.stop();var o,r={drop:e,delayDrop:function(){},forceDrop:e,move:function(t){vp(n,u,a,$A,t)}},i=mp(n,u.blockerClass,(o=r,an([ln(_b(),o.forceDrop),ln(Eb(),o.drop),ln(Bb(),o.drop),ln(Tb(),function(t,n){o.move(n.event())})])));s.set(xh.some(i)),c(n),fp(n,i)}),ln(Tb(),function(t,n){n.stop(),vp(t,u,a,$A,n.event())}),ln(Eb(),function(t,n){n.stop(),bp(t,s.get(),u,a),s.set(xh.none())}),ln(Bb(),function(t){bp(t,s.get(),u,a),s.set(xh.none())})]}function Sp(t,r,i,u,n,e){return t.fold(function(){return oM.snap({sensor:LA(i-20,u-20),range:$y(n,e),output:LA(xh.some(i),xh.some(u)),extra:{td:r}})},function(t){var n=i-20,e=u-20,o=t.element().dom().getBoundingClientRect();return oM.snap({sensor:LA(n,e),range:$y(40,40),output:LA(xh.some(i-o.width/2),xh.some(u-o.height/2)),extra:{td:r}})})}function Cp(t,i,u){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,n){var e,o,r=n.td;e=i.get(),o=r,!e.exists(function(t){return Jt(t,o)})&&(i.set(xh.some(r)),u(r))},mustSnap:!0}}function kp(t){return Sa(ok.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Uo([oM.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),K_.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}function Op(t,n,e){var o,r,i,u,a,c,s=$v.fromDom(t.getContainer()),l=(o=t,r=n,i=e,u=Ne(s),a=je(s),(c={}).height=xA(u+r.top(),fa(o),ma(o)),i===gD.Both&&(c.width=xA(a+r.left(),la(o),da(o))),c);Ph(l,function(t,n){return xe(s,n,SA(t))}),_O(t)}function _p(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}function Tp(o,t){var r,n,e,i,u,a,c,s;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(s=[],o.getParam("elementpath",!0,"boolean")&&s.push(lM(o,{})),Wt(o.settings.plugins,"wordcount")&&s.push(function(t,o){function r(t,n,e){return wC.set(t,[Ve(o.translate(["{0} "+e,n[e]]))])}return ok.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Uo([A_.config({}),wC.config({}),Lw.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),zu("wordcount-events",[xy(function(t){var n=Lw.getValue(t),e="words"===n.mode?"characters":"words";Lw.setValue(t,{mode:e,count:n.count}),r(t,n.count,e)}),vy(function(e){t.on("wordCountUpdate",function(t){var n=Lw.getValue(e).mode;Lw.setValue(e,{mode:n,count:t.wordCount}),r(e,t.wordCount,n)})})])])})}(o,t)),o.getParam("branding",!0,"boolean")&&s.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(c=Dk.translate(["Powered by {0}","Tiny"]))+'">'+c+"</a>"}}),n=0<s.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:s}]:[],i=o,u=!Wt(i.settings.plugins,"autoresize"),a=i.getParam("resize",u),e=!1===a?gD.None:"both"===a?gD.Both:gD.Vertical,e!==gD.None&&n.push((r=e,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-hidden":"true"},innerHtml:ka("resize-handle",t.icons)},behaviours:Uo([oM.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,n,e){Op(o,e,r)},blockerClass:"tox-blocker"})])})),n)}}function Ep(t){return[bt("type"),vt("columns",Uv),t]}function Bp(n){return Nv("items","items",Tv(),et(at(function(t){return st("Checking item of "+n,sF,t).fold(function(t){return Ch.error(Lv(t))},function(t){return Ch.value(t)})})))}function Dp(t){return kh(t.type)&&kh(t.name)}function Ap(t){var n=O(w(CF(t),Dp),function(n){return(t=n,xh.from(kF[t.type])).fold(function(){return[]},function(t){return[vt(n.name,t)]});var t});return Iv(n)}function Mp(t){return{internalDialog:lt(st("dialog",SF,t)),dataValidator:Ap(t),initialData:t.initialData}}function Fp(t){var e=[],o={};return Ph(t,function(t,n){t.fold(function(){e.push(n)},function(t){o[n]=t})}),0<e.length?Ch.error(e):Ch.value(o)}function Ip(t,n){xe(t,"height",n+"px"),Xt().browser.isIE()?_e(t,"flex-basis"):xe(t,"flex-basis",n+"px")}function Rp(t,o,r){io(t,'[role="dialog"]').each(function(e){uo(e,'[role="tablist"]').each(function(n){r.get().map(function(t){return xe(o,"height","0"),xe(o,"flex-basis","0"),Math.min(t,function(t,n,e){var o,r=Sn(t).dom();o="fixed"===Ce(io(t,".tox-dialog-wrap").getOr(t),"position")?Math.max(r.clientHeight,v.window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight);var i=Ne(n),u=n.dom().offsetLeft>=e.dom().offsetLeft+je(e)?Math.max(Ne(e),i):i,a=parseInt(Ce(t,"margin-top"),10)||0,c=parseInt(Ce(t,"margin-bottom"),10)||0;return o-(Ne(t)+a+c-u)}(e,o,n))}).each(function(t){Ip(o,t)})})})}function Vp(t){return uo(t,'[role="tabpanel"]')}function Hp(a){var c;return{smartTabHeight:(c=Kv(xh.none()),{extraEvents:[vy(function(t){var e=t.element();Vp(e).each(function(u){var n;xe(u,"visibility","hidden"),t.getSystem().getByDom(u).toOption().each(function(t){var n,o,r,i,e=(r=u,i=t,n=x(o=a,function(t,n){wC.set(i,o[n].view());var e=r.dom().getBoundingClientRect();return wC.set(i,[]),e.height}),Rh(B(n,function(t,n){return n<t?-1:t<n?1:0})));c.set(e)}),Rp(e,u,c),_e(u,"visibility"),n=t,Rh(a).each(function(t){return NF.showTab(n,t.value)}),JC.requestAnimationFrame(function(){Rp(e,u,c)})})}),ln(iy(),function(t){var n=t.element();Vp(n).each(function(t){Rp(n,t,c)})}),ln(l_,function(t){var r=t.element();Vp(r).each(function(n){var t=Yo();xe(n,"visibility","hidden");var e=ke(n,"height").map(function(t){return parseInt(t,10)});_e(n,"height"),_e(n,"flex-basis");var o=n.dom().getBoundingClientRect().height;e.forall(function(t){return t<o})?(c.set(xh.from(o)),Rp(r,n,c)):e.each(function(t){Ip(n,t)}),_e(n,"visibility"),t.each(Xo)})})],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}}function Np(t,n,r,e){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:vh(vh({},n.map(function(t){return{id:t}}).getOr({})),e?{"aria-live":"polite"}:{})},components:[],behaviours:Uo([LT(0),YB.config({channel:UF,updateState:function(t,n){return xh.some({isTabPanel:function(){return"tabpanel"===n.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[function(t,e){function o(t){var n=Fp(Lw.getValue(t)).getOr({}),e=i.get(),o=Xh(e,n);i.set(o)}function r(t){var n=i.get();Lw.setValue(t,n)}var i=Kv({}),u=Kv(null),n=x(t.tabs,function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[IT.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"]},components:x(t.items,function(t){return Od(n,t,e)}),formBehaviours:Uo([yC.config({mode:"acyclic",useTabstopAt:b($T)}),zu("TabView.form.events",[vy(r),by(o)]),Ix.config({channels:G([{key:PF,value:{onReceive:o}},{key:zF,value:{onReceive:r}}])})])}})]}}}),a=Hp(n).smartTabHeight;return NF.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,n){var e=Lw.getValue(n);en(t,s_,{name:e,oldName:u.get()}),u.set(e)},tabs:n,components:[NF.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[MF.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Uo([A_.config({})])}),NF.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:a.selectFirst,tabSectionBehaviours:Uo([zu("tabpanel",a.extraEvents),yC.config({mode:"acyclic"}),xS.config({find:function(t){return Rh(NF.getViewItems(t))}}),Lw.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([PF],{}),i.get()},setValue:function(t,n){i.set(n),t.getSystem().broadcastOn([zF],{})}}})])})}(t.body,r)];default:return[(e=t.body,o=r,n=Sa(IT.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:x(e.items,function(t){return Od(n,t,o)})}})),{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:Uo([yC.config({mode:"acyclic",useTabstopAt:b($T)}),zT(n),GT(n,{postprocess:function(t){return Fp(t).fold(function(t){return v.console.error(t),{}},function(t){return t})}})])})]}var e,o,n},initialData:t})])}}function Pp(t,e){return[gn(Rb(),QT),t(o_,function(t,n){e.onClose(),n.onClose()}),t(r_,function(t,n,e,o){n.onCancel(t),nn(o,o_)}),ln(c_,function(){return e.onUnblock()}),ln(a_,function(t,n){return e.onBlock(n.event())})]}function zp(t,n){function e(t,n){return n_.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:x(n,function(t){return t.memento.asSpec()})})}var o=function(t,n){for(var e=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(n(u,r)?e:o).push(u)}return{pass:e,fail:o}}(n.map(function(t){return t.footerButtons}).getOr([]),function(t){return"start"===t.align});return[e("start",o.pass),e("end",o.fail)]}function Lp(t,o){return{dom:Bg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Uo([YB.config({channel:WF,initialData:t,updateState:function(t,n){var r=x(n.buttons,function(t){var n,e=Sa((n=o,Kf(t,t.type,n)));return{name:t.name,align:t.align,memento:e}});return xh.some({lookupByName:function(t,n){return e=t,o=n,C(r,function(t){return t.name===o}).bind(function(t){return t.memento.getOpt(e)});var e,o},footerButtons:r})},renderComponents:zp})])}}function jp(t,n){return hM.parts().footer(Lp(t,n))}function Up(n,e){if(n.getRoot().getSystem().isConnected()){var o=xS.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return IT.getField(o,e).fold(function(){var t=n.getFooter();return YB.getState(t).get().bind(function(t){return t.lookupByName(o,e)})},function(t){return xh.some(t)})}return xh.none()}function Wp(a,o,c){function t(t){var n=a.getRoot();n.getSystem().isConnected()&&t(n)}var s={getData:function(){var t=a.getRoot(),n=t.getSystem().isConnected()?a.getFormWrapper():t,e=Lw.getValue(n),o=P(c,function(t){return t.get()});return vh(vh({},e),o)},setData:function(u){t(function(){var n,t,e=s.getData(),o=vh(vh({},e),u),r=(n=o,t=a.getRoot(),YB.getState(t).get().map(function(t){return lt(st("data",t.dataValidator,n))}).getOr(n)),i=a.getFormWrapper();Lw.setValue(i,r),Ph(c,function(t,n){Uh(o,n)&&t.set(o[n])})})},disable:function(t){Up(a,t).each(qk.disable)},enable:function(t){Up(a,t).each(qk.enable)},focus:function(t){Up(a,t).each(kC.focus)},block:function(n){if(!kh(n))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){en(t,a_,{message:n})})},unblock:function(){t(function(t){nn(t,c_)})},showTab:function(n){t(function(){var t=a.getBody();YB.getState(t).get().exists(function(t){return t.isTabPanel()})&&xS.getCurrent(t).each(function(t){NF.showTab(t,n)})})},redial:function(e){t(function(t){var n=o(e);t.getSystem().broadcastOn([LF],n),t.getSystem().broadcastOn([jF],n.internalDialog),t.getSystem().broadcastOn([UF],n.internalDialog),t.getSystem().broadcastOn([WF],n.internalDialog),s.setData(n.initialData)})},close:function(){t(function(t){nn(t,o_)})}};return s}function Gp(t,n){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,n]}}function Xp(t,n){return hM.parts().close(ok.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close")}},action:t,buttonBehaviours:Uo([A_.config({})])}))}function Yp(){return hM.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function qp(t,n){return hM.parts().body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Bg("<p>"+n.translate(t)+"</p>")}]}]})}function Kp(t){return hM.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function Jp(t,n){return[n_.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),n_.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:n})]}function $p(n){var t,e="tox-dialog",o=e+"-wrap",r=o+"__backdrop",i=e+"__disable-scroll";return hM.sketch({lazySink:n.lazySink,onEscape:function(t){return n.onEscape(t),xh.some(!0)},useTabstopAt:function(t){return!$T(t)},dom:{tag:"div",classes:[e].concat(n.extraClasses),styles:vh({position:"relative"},n.extraStyles)},components:y([n.header,n.body],n.footer.toArray()),parts:{blocker:{dom:Bg('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:qF?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:Uo(y([kC.config({}),zu("dialog-events",n.dialogEvents.concat([hn(Rb(),function(t){yC.focusIn(t)})])),zu("scroll-lock",[vy(function(){le(jy(),i)}),by(function(){de(jy(),i)})])],n.extraBehaviours)),eventOrder:vh((t={},t[Kb()]=["dialog-events"],t[uy()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[ay()]=[
"alloy.base.behaviour","dialog-events","scroll-lock"],t),n.eventOrder)})}function Qp(t){return ok.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(t){nn(t,r_)}})}function Zp(t,n,e){function o(t){return[Ve(e.translate(t.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:vh({},n.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:Uo([YB.config({channel:jF,renderComponents:o})])}}function th(){return{dom:Bg('<div class="tox-dialog__draghandle"></div>')}}function nh(t,n){return e={title:n.shared.providers.translate(t),draggable:n.dialog.isDraggableModal()},o=n.shared.providers,r=hM.parts().title(Zp(e,xh.none(),o)),i=hM.parts().draghandle(th()),u=hM.parts().close(Qp(o)),a=[r].concat(e.draggable?[i]:[]).concat([u]),n_.sketch({dom:Bg('<div class="tox-dialog__header"></div>'),components:a});var e,o,r,i,u,a}function eh(t,n){return{onClose:function(){return n.closeWindow()},onBlock:function(e){hM.setBusy(t(),function(t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:Bg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){hM.setIdle(t())}}}function oh(t,n,e,o){var r;return Yy($p(vh(vh({},t),{lazySink:o.shared.getSink,extraBehaviours:y([YB.config({channel:LF,updateState:function(t,n){return xh.some(n)},initialData:n}),qT({})],t.extraBehaviours),onEscape:function(t){nn(t,r_)},dialogEvents:e,eventOrder:(r={},r[qb()]=["reflecting","receiving"],r[uy()]=["scroll-lock","reflecting","messages","dialog-events","alloy.base.behaviour"],r[ay()]=["alloy.base.behaviour","dialog-events","messages","reflecting","scroll-lock"],r)})))}function rh(t){return x(t,function(t){return"menu"===t.type?(e=x((n=t).items,function(t){var n=Kv(!1);return vh(vh({},t),{storage:n})}),vh(vh({},n),{items:e})):t;var n,e})}function ih(t){return S(t,function(t,n){return"menu"!==n.type?t:S(n.items,function(t,n){return t[n.name]=n.storage,t},t)},{})}function uh(t,n,e){var o,r,i,u=nh(t.internalDialog.title,e),a=(o={body:t.internalDialog.body},r=e,i=Np(o,xh.none(),r,!1),hM.parts().body(i)),c=rh(t.internalDialog.buttons),s=ih(c),l=jp({buttons:c},e),f=YF(function(){return g},eh(function(){return m},n)),d="normal"!==t.internalDialog.size?"large"===t.internalDialog.size?["tox-dialog--width-lg"]:["tox-dialog--width-md"]:[],m=oh({header:u,body:a,footer:xh.some(l),extraClasses:d,extraBehaviours:[],extraStyles:{}},t,f,e),g=Wp({getRoot:function(){return m},getBody:function(){return hM.getBody(m)},getFooter:function(){return hM.getFooter(m)},getFormWrapper:function(){var t=hM.getBody(m);return xS.getCurrent(t).getOr(t)}},n.redial,s);return{dialog:m,instanceApi:g}}function ah(t,n,e,o){var r,i,u,a,c,s,l,f,d,m=Xn("dialog-label"),g=Xn("dialog-content"),p=Sa((l={title:t.internalDialog.title,draggable:!0},f=m,d=e.shared.providers,n_.sketch({dom:Bg('<div class="tox-dialog__header"></div>'),components:[Zp(l,xh.some(f),d),th(),Qp(d)],containerBehaviours:Uo([oM.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return ao(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=Sa((u={body:t.internalDialog.body},a=g,c=e,s=o,Np(u,xh.some(a),c,s))),v=rh(t.internalDialog.buttons),b=ih(v),y=Sa(Lp({buttons:v},e)),x=YF(function(){return S},{onBlock:function(){},onUnblock:function(){},onClose:function(){return n.closeWindow()}}),w=Yy({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(r={role:"dialog"},r["aria-labelledby"]=m,r["aria-describedby"]=""+g,r)},eventOrder:(i={},i[qb()]=[YB.name(),Ix.name()],i[Kb()]=["execute-on-form"],i[uy()]=["reflecting","execute-on-form"],i),behaviours:Uo([yC.config({mode:"cyclic",onEscape:function(t){return nn(t,o_),xh.some(!0)},useTabstopAt:function(t){return!$T(t)&&("button"!==Vn(t)||"disabled"!==zn(t,"disabled"))}}),YB.config({channel:LF,updateState:function(t,n){return xh.some(n)},initialData:t}),kC.config({}),zu("execute-on-form",x.concat([hn(Rb(),function(t){yC.focusIn(t)})])),qT({})]),components:[p.asSpec(),h.asSpec(),y.asSpec()]}),S=Wp({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return h.get(w)},getFormWrapper:function(){var t=h.get(w);return xS.getCurrent(t).getOr(t)}},n.redial,b);return{dialog:w,instanceApi:S}}function ch(t){return Oh(t)&&-1!==JF.indexOf(t.mceAction)}function sh(o,t,r,n){var e,i,u=nh(o.title,n),a=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[ZT({dom:{tag:"iframe",attributes:{src:o.url}},behaviours:Uo([A_.config({}),kC.config({})])})]}],behaviours:Uo([yC.config({mode:"acyclic",useTabstopAt:b($T)})])},hM.parts().body(i)),c=o.buttons.bind(function(t){return 0===t.length?xh.none():xh.some(jp({buttons:t},n))}),s=XF(function(){return h},eh(function(){return p},t)),l=vh(vh({},o.height.fold(function(){return{}},function(t){return{height:t+"px","max-height":t+"px"}})),o.width.fold(function(){return{}},function(t){return{width:t+"px","max-width":t+"px"}})),f=o.width.isNone()&&o.height.isNone()?["tox-dialog--width-lg"]:[],d=new KF(o.url,{base_uri:new KF(v.window.location.href)}),m=d.protocol+"://"+d.host+(d.port?":"+d.port:""),g=Kv(xh.none()),p=oh({header:u,body:a,footer:c,extraClasses:f,extraBehaviours:[zu("messages",[vy(function(){var t=$c($v.fromDom(v.window),"message",function(t){if(d.isSameOrigin(new KF(t.raw().origin))){var n=t.raw().data;ch(n)?function(t,n,e){switch(e.mceAction){case"insertContent":t.insertContent(e.content);break;case"setContent":t.setContent(e.content);break;case"execCommand":var o=!!Th(e.ui)&&e.ui;t.execCommand(e.cmd,o,e.value);break;case"close":n.close();break;case"block":n.block(e.message);break;case"unblock":n.unblock()}}(r,h,n):!ch(e=n)&&Oh(e)&&Uh(e,"mceAction")&&o.onMessage(h,n)}var e});g.set(xh.some(t))}),by(function(){g.get().each(function(t){return t.unbind()})})]),Ix.config({channels:(e={},e[GF]={onReceive:function(t,n){uo(t.element(),"iframe").each(function(t){t.dom().contentWindow.postMessage(n,m)})}},e)})],extraStyles:l},o,s,n),h=function(n){function t(t){n.getSystem().isConnected()&&t(n)}return{block:function(n){if(!kh(n))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){en(t,a_,{message:n})})},unblock:function(){t(function(t){nn(t,c_)})},close:function(){t(function(t){nn(t,o_)})},sendMessage:function(n){t(function(t){t.getSystem().broadcastOn([GF],n)})}}}(p);return{dialog:p,instanceApi:h}}var lh,fh,dh,mh=function(t){return function(){return t}},gh=mh(!1),ph=mh(!0),hh=tinymce.util.Tools.resolve("tinymce.ThemeManager"),vh=function(){return(vh=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},bh=(lh={fold:function(t){return t()},is:gh,isSome:gh,isNone:ph,getOr:e,getOrThunk:n,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:mh(null),getOrUndefined:mh(undefined),or:e,orThunk:n,map:t,each:Q,bind:t,exists:gh,forall:ph,filter:t,equals:c,equals_:c,toArray:function(){return[]},toString:mh("none()")},Object.freeze&&Object.freeze(lh),lh),yh=function(e){function t(){return r}function n(t){return t(e)}var o=mh(e),r={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:ph,isNone:gh,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:t,orThunk:t,map:function(t){return yh(t(e))},each:function(t){t(e)},bind:n,exists:n,forall:n,filter:function(t){return t(e)?r:bh},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(gh,function(t){return n(e,t)})}};return r},xh={some:yh,none:t,from:function(t){return null===t||t===undefined?bh:yh(t)}},wh=function(e){return{is:function(t){return e===t},isValue:ph,isError:gh,getOr:mh(e),getOrThunk:mh(e),getOrDie:mh(e),or:function(){return wh(e)},orThunk:function(){return wh(e)},fold:function(t,n){return n(e)},map:function(t){return wh(t(e))},mapError:function(){return wh(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return xh.some(e)}}},Sh=function(n){return{is:gh,isValue:gh,isError:ph,getOr:f,getOrThunk:function(t){return t()},getOrDie:function(){return i(String(n))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t){return t(n)},map:function(){return Sh(n)},mapError:function(t){return Sh(t(n))},each:Q,bind:function(){return Sh(n)},exists:gh,forall:ph,toOption:xh.none}},Ch={value:wh,error:Sh,fromOption:function(t,n){return t.fold(function(){return Sh(n)},wh)}},kh=o("string"),Oh=o("object"),_h=o("array"),Th=o("boolean"),Eh=o("function"),Bh=o("number"),Dh=Array.prototype.slice,Ah=Array.prototype.indexOf,Mh=Array.prototype.push,Fh=function(t,n){return-1<u(t,n)},Ih=function(t,n){for(var e=0,o=t.length;e<o;e++)n(t[e],e)},Rh=function(t){return 0===t.length?xh.none():xh.some(t[0])},Vh=Eh(Array.from)?Array.from:function(t){return Dh.call(t)},Hh=Object.keys,Nh=Object.hasOwnProperty,Ph=function(t,n){for(var e=Hh(t),o=0,r=e.length;o<r;o++){var i=e[o];n(t[i],i)}},zh=function(t,o){var r={};return Ph(t,function(t,n){var e=o(t,n);r[e.k]=e.v}),r},Lh=function(t,e){var o=[];return Ph(t,function(t,n){o.push(e(t,n))}),o},jh=function(t,n){return Uh(t,n)?xh.from(t[n]):xh.none()},Uh=function(t,n){return Nh.call(t,n)},Wh=function(u){if(!_h(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],e={};return Ih(u,function(t,o){var n=Hh(t);if(1!==n.length)throw new Error("one and only one name per case");var r=n[0],i=t[r];if(e[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!_h(i))throw new Error("case arguments must be an array");a.push(r),e[r]=function(){var t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=arguments[n];return{fold:function(){if(arguments.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+arguments.length);return arguments[o].apply(null,e)},match:function(t){var n=Hh(t);if(a.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+n.join(","));if(!_(a,function(t){return Fh(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+a.join(", "));return t[r].apply(null,e)},log:function(t){v.console.log(t,{constructors:a,constructor:r,params:e})}}}}),e},Gh=Object.prototype.hasOwnProperty,Xh=a(function(t,n){return Oh(t)&&Oh(n)?Xh(t,n):n}),Yh=a(function(t,n){return n});(dh=fh=fh||{})[dh.Error=0]="Error",dh[dh.Value=1]="Value";var qh,Kh,Jh,$h,Qh,Zh,tv,nv,ev,ov,rv,iv,uv,av,cv,sv,lv,fv,dv,mv,gv,pv,hv,vv=function(t){return t.fold(z,H)},bv=function(t){return V(t,Ch.error,Ch.value)},yv=H,xv=function(t){var n=[],e=[];return Ih(t,function(t){V(t,function(t){return e.push(t)},function(t){return n.push(t)})}),{values:n,errors:e}},wv=z,Sv=function(t,n){return t.stype===fh.Value?n(t.svalue):t},Cv=function(t,n){return t.stype===fh.Error?n(t.serror):t},kv=function(t,n){return t.stype===fh.Value?{stype:fh.Value,svalue:n(t.svalue)}:t},Ov=function(t,n){return t.stype===fh.Error?{stype:fh.Error,serror:n(t.serror)}:t},_v=Wh([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Tv=_v.strict,Ev=_v.asOption,Bv=_v.defaultedThunk,Dv=(_v.asDefaultedOptionThunk,_v.mergeWithThunk),Av=(Wh([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,n){var e,o,r=xv(t);return 0<r.errors.length?Y(r.errors):(e=r.values,o=n,0<e.length?yv(Xh(o,Yh.apply(undefined,e))):yv(o))}),Mv=function(t){var n=xv(t);return 0<n.errors.length?Y(n.errors):yv(n.values)},Fv=Wh([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),Iv=function(a){return{extract:function(t,n,e){return o=t,r=e,i=n,u=x(a,function(t){return Z(o,r,t,i)}),Av(u,{});var o,r,i,u},toString:function(){return"obj{\n"+x(a,function(t){return t.fold(function(t,n,e,o){return t+" -> "+o.toString()},function(t){return"state("+t+")"})}).join("\n")+"}"}}},Rv=mh(tt(yv)),Vv=d(et,Iv),Hv=Fv.state,Nv=Fv.field,Pv=tt(yv),zv=function(o){return{extract:function(t,n,e){return o().extract(t,n,e)},toString:function(){return o().toString()}}},Lv=function(t){return"Errors: \n"+(n=t.errors,x(10<n.length?n.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):n,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: "+q(t.input);var n},jv=mh(Pv),Uv=gt(Bh,"number"),Wv=gt(kh,"string"),Gv=gt(Th,"boolean"),Xv=gt(Eh,"function"),Yv=function(n){function t(t,n){for(var e=t.next();!e.done;){if(!n(e.value))return!1;e=t.next()}return!0}if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(function(t){return Yv(n[t])});case"Map":return t(n.keys(),Yv)&&t(n.values(),Yv);case"Set":return t(n.keys(),Yv);default:return!1}},qv=tt(function(t){return Yv(t)?yv(t):wv("Expected value to be acceptable for sending via postMessage")}),Kv=function(t){function n(){return e}var e=t;return{get:n,set:function(t){e=t},clone:function(){return Kv(n())}}},Jv=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:mh(t)}},$v={fromHtml:function(t,n){var e=(n||v.document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length)throw v.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Jv(e.childNodes[0])},fromTag:function(t,n){var e=(n||v.document).createElement(t);return Jv(e)},fromText:function(t,n){var e=(n||v.document).createTextNode(t);return Jv(e)},fromDom:Jv,fromPoint:function(t,n,e){var o=t.dom();return xh.from(o.elementFromPoint(n,e)).map(Jv)}},Qv=function(t,n){return Pt(t,n,v.Node.DOCUMENT_POSITION_CONTAINED_BY)},Zv=function(){return tb(0,0)},tb=function(t,n){return{major:t,minor:n}},nb={nu:tb,detect:function(t,n){var e=String(n).toLowerCase();return 0===t.length?Zv():zt(t,e)},unknown:Zv},eb="Firefox",ob=function(t){var n=t.current;return{current:n,version:t.version,isEdge:Lt("Edge",n),isChrome:Lt("Chrome",n),isIE:Lt("IE",n),isOpera:Lt("Opera",n),isFirefox:Lt(eb,n),isSafari:Lt("Safari",n)}},rb={unknown:function(){return ob({current:undefined,version:nb.unknown()})},nu:ob,edge:mh("Edge"),chrome:mh("Chrome"),ie:mh("IE"),opera:mh("Opera"),firefox:mh(eb),safari:mh("Safari")},ib="Windows",ub="Android",ab="Solaris",cb="FreeBSD",sb="ChromeOS",lb=function(t){var n=t.current;return{current:n,version:t.version,isWindows:jt(ib,n),isiOS:jt("iOS",n),isAndroid:jt(ub,n),isOSX:jt("OSX",n),isLinux:jt("Linux",n),isSolaris:jt(ab,n),isFreeBSD:jt(cb,n),isChromeOS:jt(sb,n)}},fb={unknown:function(){return lb({current:undefined,version:nb.unknown()})},nu:lb,windows:mh(ib),ios:mh("iOS"),android:mh(ub),linux:mh("Linux"),osx:mh("OSX"),solaris:mh(ab),freebsd:mh(cb),chromeos:mh(sb)},db=function(t,e){return Ut(t,e).map(function(t){var n=nb.detect(t.versionRegexes,e);return{current:t.name,version:n}})},mb=function(t,e){return Ut(t,e).map(function(t){var n=nb.detect(t.versionRegexes,e);return{current:t.name,version:n}})},gb=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pb=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Wt(t,"edge/")&&Wt(t,"chrome")&&Wt(t,"safari")&&Wt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,gb],search:function(t){return Wt(t,"chrome")&&!Wt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Wt(t,"msie")||Wt(t,"trident")}},{name:"Opera",versionRegexes:[gb,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gt("firefox")},{name:"Safari",versionRegexes:[gb,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Wt(t,"safari")||Wt(t,"mobile/"))&&Wt(t,"applewebkit")}}],hb=[{name:"Windows",search:Gt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Wt(t,"iphone")||Wt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Gt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gt("linux"),versionRegexes:[]},{name:"Solaris",search:Gt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],vb={browsers:mh(pb),oses:mh(hb)},bb=Kv(($h=v.navigator.userAgent,Qh=function(t){return v.window.matchMedia(t).matches},fv=vb.browsers(),dv=vb.oses(),mv=db(fv,$h).fold(rb.unknown,rb.nu),gv=mb(dv,$h).fold(fb.unknown,fb.nu),{browser:mv,os:gv,deviceType:(Zh=gv,tv=mv,nv=$h,ev=Qh,ov=Zh.isiOS()&&!0===/ipad/i.test(nv),rv=Zh.isiOS()&&!ov,iv=Zh.isiOS()||Zh.isAndroid(),uv=iv||ev("(pointer:coarse)"),av=ov||!rv&&iv&&ev("(min-device-width:768px)"),cv=rv||iv&&!av,sv=tv.isSafari()&&Zh.isiOS()&&!1===/safari/i.test(nv),lv=!cv&&!av&&!sv,{isiPad:mh(ov),isiPhone:mh(rv),isTablet:mh(av),isPhone:mh(cv),isTouch:mh(uv),isAndroid:Zh.isAndroid,isiOS:Zh.isiOS,isWebView:mh(sv),isDesktop:mh(lv)})})),yb=(v.Node.ATTRIBUTE_NODE,v.Node.CDATA_SECTION_NODE,v.Node.COMMENT_NODE,v.Node.DOCUMENT_NODE),xb=(v.Node.DOCUMENT_TYPE_NODE,v.Node.DOCUMENT_FRAGMENT_NODE,v.Node.ELEMENT_NODE),wb=v.Node.TEXT_NODE,Sb=(v.Node.PROCESSING_INSTRUCTION_NODE,v.Node.ENTITY_REFERENCE_NODE,v.Node.ENTITY_NODE,v.Node.NOTATION_NODE,xb),Cb=yb,kb=Xt().browser.isIE()?function(t,n){return Qv(t.dom(),n.dom())}:function(t,n){var e=t.dom(),o=n.dom();return e!==o&&e.contains(o)},Ob=function(t,n,e){return n(t).orThunk(function(){return e(t)?xh.none():$t(t,n,e)})},_b=mh("touchstart"),Tb=mh("touchmove"),Eb=mh("touchend"),Bb=mh("touchcancel"),Db=mh("mousedown"),Ab=mh("mousemove"),Mb=mh("mouseout"),Fb=mh("mouseup"),Ib=mh("mouseover"),Rb=mh("focusin"),Vb=mh("focusout"),Hb=mh("keydown"),Nb=mh("keyup"),Pb=mh("input"),zb=mh("change"),Lb=mh("click"),jb=mh("transitionend"),Ub=mh("selectstart"),Wb={tap:mh("alloy.tap")},Gb=mh("alloy.focus"),Xb=mh("alloy.blur.post"),Yb=mh("alloy.paste.post"),qb=mh("alloy.receive"),Kb=mh("alloy.execute"),Jb=mh("alloy.focus.item"),$b=Wb.tap,Qb=mh("alloy.longpress"),Zb=mh("alloy.sandbox.close"),ty=mh("alloy.typeahead.cancel"),ny=mh("alloy.system.init"),ey=mh("alloy.system.touchmove"),oy=mh("alloy.system.touchend"),ry=mh("alloy.system.scroll"),iy=mh("alloy.system.resize"),uy=mh("alloy.system.attached"),ay=mh("alloy.system.detached"),cy=mh("alloy.system.dismissRequested"),sy=mh("alloy.system.repositionRequested"),ly=mh("alloy.focusmanager.shifted"),fy=mh("alloy.slotcontainer.visibility"),dy=mh("alloy.change.tab"),my=mh("alloy.dismiss.tab"),gy=mh("alloy.highlight"),py=mh("alloy.dehighlight"),hy=function(t,n,e,o){var r=vh({target:n},o);t.getSystem().triggerEvent(e,n,P(r,mh))},vy=dn(uy()),by=dn(ay()),yy=dn(ny()),xy=(qh=Kb(),function(t){return ln(qh,t)}),wy=(vn("element","offset"),function(t,n){t.dom().appendChild(n.dom())}),Sy=function(t){var n=t.dom();null!==n.parentNode&&n.parentNode.removeChild(n)},Cy=("undefined"!=typeof v.window?v.window:Function("return this;")(),Hn(xb)),ky=Hn(wb),Oy=an([(Kh=Gb(),Jh=function(t,n){var e,o,r=n.event().originator(),i=n.event().target();return!(o=i,Jt(e=r,t.element())&&!Jt(e,o)&&(v.console.warn(Gb()+" did not get interpreted by the desired target. \nOriginator: "+Gn(r)+"\nTarget: "+Gn(i)+"\nCheck the "+Gb()+" event handlers"),1))},{key:Kh,value:Zt({can:Jh})})]),_y=Object.freeze({__proto__:null,events:Oy}),Ty=0,Ey=mh("alloy-id-"),By=mh("data-alloy-id"),Dy=Ey(),Ay=By(),My=function(t,n){Object.defineProperty(t.dom(),Ay,{value:n,writable:!0})},Fy=function(t){var n=Cy(t)?t.dom()[Ay]:null;return xh.from(n)},Iy=f,Ry=qn(),Vy=function(t){return x(t,function(t){return o=n="/*",r=(e=t).length-n.length,""!==o&&(e.length<o.length||e.substr(r,r+o.length)!==o)?t:t.substring(0,t.length-"/*".length);var n,e,o,r})},Hy=Xn("alloy-premade"),Ny={init:function(){return Py({readState:function(){return"No State required"}})}},Py=function(t){return t},zy=function(t,n){return e=m.apply(undefined,[t.handler].concat(n)),o=t.purpose(),{cHandler:e,purpose:mh(o)};var e,o},Ly=function(t,i){return X(Lh(t,function(o,r){return(1===o.length?Ch.value(o[0].handler()):re(o,i,r)).map(function(t){var n=oe(t),e=1<o.length?w(i[r],function(n){return l(o,function(t){return t.name()===n})}).join(" > "):o[0].name();return W(r,{handler:n,purpose:mh(e)})})}),{})},jy=R(function(){return Uy($v.fromDom(v.document))}),Uy=function(t){var n=t.dom().body;if(null===n||n===undefined)throw new Error("Body is not available yet");return $v.fromDom(n)},Wy=function(t,n){return he(t)?t.style.getPropertyValue(n):""},Gy=function(t){var n=ft("external.component",nt([ht("element"),kt("uid")]),t),e=Kv(qn());n.uid.each(function(t){My(n.element,t)});var o={getSystem:e.get,config:xh.none,hasConfigured:mh(!1),connect:function(t){e.set(t)},disconnect:function(){e.set(qn(function(){return o}))},getApis:function(){return{}},element:mh(n.element),spec:mh(t),readState:mh("No state"),syncComponents:Q,components:mh([]),events:mh({})};return Jn(o)},Xy=Yn,Yy=function(t){return jh(t,Hy).fold(function(){return Re(t.hasOwnProperty("uid")?t:vh({uid:Xy("")},t)).getOrDie()},function(t){return t})},qy=Jn,Ky=He("height",function(t){var n=t.dom();return ve(t)?n.getBoundingClientRect().height:n.offsetHeight}),Jy=function(e,o){return{left:mh(e),top:mh(o),translate:function(t,n){return Jy(e+t,o+n)}}},$y=Jy,Qy=function(t){var n,e=t.dom(),o=e.ownerDocument.body;return o===e?$y(o.offsetLeft,o.offsetTop):ve(t)?(n=e.getBoundingClientRect(),$y(n.left,n.top)):$y(0,0)},Zy=He("width",function(t){return t.dom().offsetWidth}),tx=function(t,n,e,o){t.dom().removeEventListener(n,e,o)},nx=(Xt().browser.isSafari(),function(o,t){return o.view(t).fold(mh([]),function(t){var n=o.owner(t),e=nx(o,n);return[t].concat(e)})}),ex=Object.freeze({__proto__:null,view:function(t){return(t.dom()===v.document?xh.none():xh.from(t.dom().defaultView.frameElement)).map($v.fromDom)},owner:function(t){return wn(t)}}),ox=vn("point","width","height"),rx=vn("x","y","width","height"),ix=function(n,t){return ro(t,function(t){return Jt(t,n.element())},mh(!1))||so(n,t)},ux="unknown";(hv=pv=pv||{})[hv.STOP=0]="STOP",hv[hv.NORMAL=1]="NORMAL",hv[hv.LOGGING=2]="LOGGING";var ax,cx,sx=Kv({}),lx=["alloy/data/Fields","alloy/debugging/Debugging"],fx=mh({logEventCut:Q,logEventStopped:Q,logNoParent:Q,logEventNoHandlers:Q,logEventResponse:Q,write:Q}),dx=mh([ht("menu"),ht("selectedMenu")]),mx=mh([ht("item"),ht("selectedItem")]),gx=(mh(Iv(mx().concat(dx()))),mh(Iv(mx()))),px=wt("initSize",[ht("numColumns"),ht("numRows")]),hx=mh(px),vx=vn("x","y","bubble","direction","label"),bx=Wh([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),yx=bx.southeast,xx=bx.southwest,wx=bx.northeast,Sx=bx.northwest,Cx=bx.south,kx=bx.north,Ox=bx.east,_x=bx.west,Tx=function(t,n,e){return vx(Co(t,n),Oo(t,n),e.north(),kx(),"layout-n")},Ex=function(t,n,e){return vx(Co(t,n),_o(t),e.south(),Cx(),"layout-s")},Bx=function(e,t,o,r,n,i,u){function a(t){return I(t,o)?t[o]():xh.none()}var c=P(n,function(t,n){return Lo(o,t,n)}),s=P(i,function(t,n){return Kn(t,n)}),l=vh(vh(vh({},s),c),{revoke:m(jo,o),config:function(t){var n=ft(o+"-config",e,t);return{key:o,value:{config:n,me:l,configAsRaw:R(function(){return ft(o+"-config",e,t)}),initialConfig:t,state:u}}},schema:function(){return t},exhibit:function(t,e){return a(t).bind(function(n){return jh(r,"exhibit").map(function(t){return t(e,n.config,n.state)})}).getOr(Zn({}))},name:function(){return o},handlers:function(t){return a(t).map(function(t){return jh(r,"events").getOr(function(){return{}})(t.config,t.state)}).getOr({})}});return l},Dx=nt([ht("fields"),ht("name"),Dt("active",{}),Dt("apis",{}),Dt("state",Ny),Dt("extra",{})]),Ax=nt([ht("branchKey"),ht("branches"),ht("name"),Dt("active",{}),Dt("apis",{}),Dt("state",Ny),Dt("extra",{})]),Mx=mh(undefined),Fx=Object.freeze({__proto__:null,events:function(c){return an([ln(qb(),function(r,t){var n,e,i=c.channels,o=Hh(i),u=t,a=(n=o,(e=u).universal()?n:w(n,function(t){return Fh(e.channels(),t)}));Ih(a,function(t){var n=i[t],e=n.schema,o=ft("channel["+t+"] data\nReceiver: "+Gn(r.element()),e,u.data());n.onReceive(r,o)})})])}}),Ix=Wo({fields:[vt("channels",ct(Ch.value,nt([bo("onReceive"),Dt("schema",jv())])))],name:"receiving",active:Fx}),Rx=Object.freeze({__proto__:null,exhibit:function(t,n){return Zn({classes:[],styles:n.useFixed()?{}:{position:"relative"}})}}),Vx=vn("position","left","top","right","bottom"),Hx=Wh([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Nx=function(t,n,e){var o=$y(n,e);return t.fold(mh(o),mh(o),function(){var t=Xe();return o.translate(-t.left(),-t.top())})},Px=(Hx.none,Hx.relative),zx=Hx.fixed,Lx=vn("anchorBox","origin"),jx=xn(["x","y","width","height","maxHeight","maxWidth","direction","classes","label","candidateYforTest"],[]),Ux=Wh([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Wx=mh(function(t,n){rr(t,n),we(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Gx=mh(function(t,n){rr(t,n)}),Xx=xn(["bounds","origin","preference","maxHeightFunction","maxWidthFunction"],[]),Yx=function(t,n,e,o){var r,i,u,a,c,s,l=er(t,n,e,o);or(n,l,o),c=n,s=l.classes(),pe(c,s.off),ge(c,s.on),u=n,a=l,o.maxHeightFunction()(u,a.maxHeight()),r=n,i=l,o.maxWidthFunction()(r,i.maxWidth())},qx=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Kx=function(t){return"rtl"===Ce(t,"direction")?"rtl":"ltr"};(cx=ax=ax||{}).TopToBottom="toptobottom",cx.BottomToTop="bottomtotop";var Jx="data-alloy-vertical-dir",$x=[ht("hotspot"),kt("bubble"),Dt("overrides",{}),dr(),xo("placement",function(t,n,e){var o=Qo(e,n.hotspot.element()),r=mr(t.element(),n,Ho(),No(),Vo(),[Ao,Do,Bo,Eo,Tx,Ex],xh.some(n.hotspot.element()));return xh.some(sr({anchorBox:o,bubble:n.bubble.getOr(cr()),overrides:n.overrides,layouts:r,placer:xh.none()}))})],Qx=[ht("x"),ht("y"),Dt("height",0),Dt("width",0),Dt("bubble",cr()),Dt("overrides",{}),dr(),xo("placement",function(t,n,e){var o=Nx(e,n.x,n.y),r=$e(o.left(),o.top(),n.width,n.height),i=mr(t.element(),n,Io(),Ro(),Io(),Ro(),xh.none());return xh.some(sr({anchorBox:r,bubble:n.bubble,overrides:n.overrides,layouts:i,placer:xh.none()}))})],Zx={create:vn("start","soffset","finish","foffset")},tw=Wh([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nw=(tw.before,tw.on,tw.after,function(t){return t.fold(f,f,f)}),ew=Wh([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ow={domRange:ew.domRange,relative:ew.relative,exact:ew.exact,exactFromRange:function(t){return ew.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){return Cn(t.match({domRange:function(t){return $v.fromDom(t.startContainer)},relative:function(t){return nw(t)},exact:function(t){return t}}))},range:Zx.create},rw=Wh([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);rw.ltr,rw.rtl;var iw,uw,aw=function QF(e,o){var n=function(t){return e(t)?xh.from(t.dom().nodeValue):xh.none()};return{get:function(t){if(!e(t))throw new Error("Can only get "+o+" value of a "+o+" node");return n(t).getOr("")},getOption:n,set:function(t,n){if(!e(t))throw new Error("Can only set raw "+o+" value of a "+o+" node");t.dom().nodeValue=n}}}(ky,"text"),cw=["img","br"],sw=function(t,i){var u=function(t){for(var n=_n(t),e=n.length-1;0<=e;e--){var o=n[e];if(i(o))return xh.some(o);var r=u(o);if(r.isSome())return r}return xh.none()};return u(t)},lw=vn("element","offset"),fw=Wh([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),dw=fw.screen,mw=fw.absolute,gw=function(t,n,e,o){var r=t,i=n,u=e,a=o;t<0&&(r=0,u=e+t),n<0&&(i=0,a=o+n);var c=dw($y(r,i));return xh.some(ox(c,u,a))},pw=function(t,l,f,d,m){return t.map(function(t){var n,e,o,r=[l,t.point()],i=(n=function(){return Br(r)},e=function(){return Br(r)},o=function(){return Er(x(r,_r))},d.fold(n,e,o)),u=rx(i.left(),i.top(),t.width(),t.height()),a=f.showAbove?Vo():Ho(),c=(f.showAbove,No()),s=mr(m,f,a,c,a,c,xh.none());return sr({anchorBox:u,bubble:f.bubble.getOr(cr()),overrides:f.overrides,layouts:s,placer:xh.none()})})},hw=vn("element","offset"),vw=mt("anchor",{selection:[kt("getSelection"),ht("root"),kt("bubble"),dr(),Dt("overrides",{}),Dt("showAbove",!1),xo("placement",function(t,n,e){var o=Cn(n.root).dom(),r=Dr(t,0,n),i=Mr(o,n).bind(function(t){return kr(o,ow.exactFromRange(t)).orThunk(function(){var n=$v.fromText("\ufeff");return En(t.start(),n),kr(o,ow.exact(n,0,n,1)).map(function(t){return Sy(n),t})}).bind(function(t){return gw(t.left(),t.top(),t.width(),t.height())})}),u=Mr(o,n).bind(function(t){return Cy(t.start())?xh.some(t.start()):kn(t.start())}).getOr(t.element());return pw(i,r,n,e,u)})],node:[ht("node"),ht("root"),kt("bubble"),dr(),Dt("overrides",{}),Dt("showAbove",!1),xo("placement",function(r,i,u){var a=Dr(r,0,i);return i.node.bind(function(t){var n=t.dom().getBoundingClientRect(),e=gw(n.left,n.top,n.width,n.height),o=i.node.getOr(r.element());return pw(e,a,i,u,o)})})],hotspot:$x,submenu:[ht("item"),dr(),Dt("overrides",{}),xo("placement",function(t,n,e){var o=Qo(e,n.item.element()),r=mr(t.element(),n,Lr(),jr(),Lr(),jr(),xh.none());return xh.some(sr({anchorBox:o,bubble:cr(),overrides:n.overrides,layouts:r,placer:xh.none()}))})],makeshift:Qx}),bw=function(t,n,e,o,r,i){var u=i.map(Qe);return yw(t,n,e,o,r,u)},yw=function(c,s,t,n,l,f){var d=ft("positioning anchor.info",vw,n);Ko(function(){xe(l.element(),"position","fixed");var t=ke(l.element(),"visibility");xe(l.element(),"visibility","hidden");var n,e,o,r,i=s.useFixed()?(r=v.document.documentElement,zx(0,0,r.clientWidth,r.clientHeight)):(e=Le((n=c).element()),o=n.element().dom().getBoundingClientRect(),Px(e.left(),e.top(),o.width,o.height)),u=d.placement,a=f.map(mh).or(s.getBounds);u(c,d,i).each(function(t){t.placer.getOr(Ur)(c,i,t,a,l)}),t.fold(function(){_e(l.element(),"visibility")},function(t){xe(l.element(),"visibility",t)}),ke(l.element(),"left").isNone()&&ke(l.element(),"top").isNone()&&ke(l.element(),"right").isNone()&&ke(l.element(),"bottom").isNone()&&ke(l.element(),"position").is("fixed")&&_e(l.element(),"position")},l.element())},xw=Object.freeze({__proto__:null,position:function(t,n,e,o,r){bw(t,n,e,o,r,xh.none())},positionWithin:bw,positionWithinBounds:yw,getMode:function(t,n){return n.useFixed()?"fixed":"absolute"}}),ww=Wo({fields:[Dt("useFixed",gh),kt("getBounds")],name:"positioning",active:Rx,apis:xw}),Sw=function(t){nn(t,ay());var n=t.components();Ih(n,Sw)},Cw=function(t){var n=t.components();Ih(n,Cw),nn(t,uy())},kw=function(t,n,e){t.getSystem().addToWorld(n),e(t.element(),n.element()),ve(t.element())&&Cw(n),t.syncComponents()},Ow=function(t,n,e){e(t,n.element());var o=_n(n.element());Ih(o,function(t){n.getByDom(t).each(Cw)})},_w=function(t,n){var e,o,r,i,u=n.getAttachPoint(t);xe(t.element(),"position",ww.getMode(u)),e=t,o="visibility",r=n.cloakVisibilityAttr,i="hidden",ke(e.element(),o).fold(function(){jn(e.element(),r)},function(t){Pn(e.element(),r,t)}),xe(e.element(),o,i)},Tw=function(t,n){var e;e=t.element(),!l(["top","left","right","bottom"],function(t){return ke(e,t).isSome()})&&_e(
t.element(),"position"),function(t,n,e){if(Ln(t.element(),e)){var o=zn(t.element(),e);xe(t.element(),n,o)}else _e(t.element(),n)}(t,"visibility",n.cloakVisibilityAttr)},Ew=Object.freeze({__proto__:null,cloak:_w,decloak:Tw,open:Zr,openWhileCloaked:function(t,n,e,o,r){_w(t,n),Zr(t,n,e,o),r(),Tw(t,n)},close:ti,isOpen:ni,isPartOf:function(n,e,t,o){return ni(0,0,t)&&t.get().exists(function(t){return e.isPartOf(n,t,o)})},getState:function(t,n,e){return e.get()},setContent:function(t,n,e,o){return e.get().map(function(){return Qr(t,n,e,o)})}}),Bw=Object.freeze({__proto__:null,events:function(n,e){return an([ln(Zb(),function(t){ti(t,n,e)})])}}),Dw=Wo({fields:[ho("onOpen"),ho("onClose"),ht("isPartOf"),ht("getAttachPoint"),Dt("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:Bw,apis:Ew,state:Object.freeze({__proto__:null,init:function(){var n=Kv(xh.none()),t=mh("not-implemented");return Py({readState:t,isOpen:function(){return n.get().isSome()},clear:function(){n.set(xh.none())},set:function(t){n.set(xh.some(t))},get:function(){return n.get()}})}})}),Aw=mh("dismiss.popups"),Mw=mh("reposition.popups"),Fw=mh("mouse.released"),Iw=nt([Dt("isExtraPart",mh(!1)),Bt("fireEventInstead",[Dt("event",cy())])]),Rw=nt([Dt("isExtraPart",mh(!1)),Bt("fireEventInstead",[Dt("event",sy())]),xt("doReposition")]),Vw=Object.freeze({__proto__:null,onLoad:ri,onUnload:ii,setValue:function(t,n,e,o){n.store.manager.setValue(t,n,e,o)},getValue:function(t,n,e){return n.store.manager.getValue(t,n,e)},getState:function(t,n,e){return e}}),Hw=Object.freeze({__proto__:null,events:function(n,e){return an(n.resetOnDom?[vy(function(t){ri(t,n,e)}),by(function(t){ii(t,n,e)})]:[Po(n,e,ri)])}}),Nw=Object.freeze({__proto__:null,memory:ui,dataset:ai,manual:function(){return Py({readState:function(){}})},init:function(t){return t.store.manager.state(t)}}),Pw=[kt("initialValue"),ht("getFallbackEntry"),ht("getDataKey"),ht("setValue"),xo("manager",{setValue:ci,getValue:function(t,n,e){var o=n.store,r=o.getDataKey(t);return e.lookup(r).fold(function(){return o.getFallbackEntry(r)},function(t){return t})},onLoad:function(n,e,o){e.store.initialValue.each(function(t){ci(n,e,o,t)})},onUnload:function(t,n,e){e.clear()},state:ai})],zw=[ht("getValue"),Dt("setValue",Q),kt("initialValue"),xo("manager",{setValue:function(t,n,e,o){n.store.setValue(t,o),n.onSetValue(t,o)},getValue:function(t,n){return n.store.getValue(t)},onLoad:function(n,e){e.store.initialValue.each(function(t){e.store.setValue(n,t)})},onUnload:Q,state:Ny.init})],Lw=Wo({fields:[At("store",{mode:"memory"},mt("mode",{memory:[kt("initialValue"),xo("manager",{setValue:function(t,n,e,o){e.set(o),n.onSetValue(t,o)},getValue:function(t,n,e){return e.get()},onLoad:function(t,n,e){n.store.initialValue.each(function(t){e.isNotSet()&&e.set(t)})},onUnload:function(t,n,e){e.clear()},state:ui})],manual:zw,dataset:Pw})),ho("onSetValue"),Dt("resetOnDom",!1)],name:"representing",active:Hw,apis:Vw,extra:{setValueFrom:function(t,n){var e=Lw.getValue(n);Lw.setValue(t,e)}},state:Nw}),jw=si,Uw=fi,Ww="placeholder",Gw=Wh([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Xw=function(r,i,u,a){return mi(r,0,u,a).fold(function(t,n){var e=di(u)?n(i,u.config,u.validated):n(i),o=O(jh(e,"components").getOr([]),function(t){return Xw(r,i,t,a)});return[vh(vh({},e),{components:o})]},function(t,n){if(di(u)){var e=n(i,u.config,u.validated);return u.validated.preprocess.getOr(f)(e)}return n(i)})},Yw=Gw.single,qw=Gw.multiple,Kw=mh(Ww),Jw=Wh([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),$w=Dt("factory",{sketch:f}),Qw=Dt("schema",[]),Zw=ht("name"),tS=Nv("pname","pname",Bv(function(t){return"<alloy."+Xn(t.name)+">"}),jv()),nS=Nt("schema",function(){return[kt("preprocess")]}),eS=Dt("defaults",mh({})),oS=Dt("overrides",mh({})),rS=Iv([$w,Qw,Zw,tS,eS,oS]),iS=Iv([$w,Qw,Zw,eS,oS]),uS=Iv([$w,Qw,Zw,tS,eS,oS]),aS=Iv([$w,nS,Zw,ht("unit"),tS,eS,oS]),cS=vi(Jw.required,rS),sS=vi(Jw.external,iS),lS=vi(Jw.optional,uS),fS=vi(Jw.group,aS),dS=mh("entirety"),mS=Object.freeze({__proto__:null,required:cS,external:sS,optional:lS,group:fS,asNamedPart:pi,name:hi,asCommon:function(t){return t.fold(f,f,f,f)},original:dS}),gS=function(t,n){return{uiType:Kw(),owner:t,name:n}},pS=Object.freeze({__proto__:null,generate:yi,generateOne:xi,schemas:wi,names:Si,substitutes:Ci,components:ki,defaultUids:Ai,defaultUidsSchema:Mi,getAllParts:Ei,getAllPartNames:Bi,getPart:Oi,getPartOrDie:_i,getParts:Ti,getPartsOrDie:Di}),hS=function(t){return Uh(t,"uid")?t:vh(vh({},t),{uid:Yn("uid")})},vS=nt([ht("name"),ht("factory"),ht("configFields"),Dt("apis",{}),Dt("extraApis",{})]),bS=nt([ht("name"),ht("factory"),ht("configFields"),ht("partFields"),Dt("apis",{}),Dt("extraApis",{})]),yS=Object.freeze({__proto__:null,getCurrent:function(t,n){return n.find(t)}}),xS=Wo({fields:[ht("find")],name:"composing",apis:yS}),wS=function(t,n,e,o){return me(o.element(),n.highlightClass)},SS=function(t,n,e,o){var r=wr(t.element(),"."+n.itemClass);return xh.from(r[o]).fold(function(){return Ch.error("No element found with index "+o)},t.getSystem().getByDom)},CS=function(n,t){return uo(n.element(),"."+t.itemClass).bind(function(t){return n.getSystem().getByDom(t).toOption()})},kS=function(n,t){var e=wr(n.element(),"."+t.itemClass);return(0<e.length?xh.some(e[e.length-1]):xh.none()).bind(function(t){return n.getSystem().getByDom(t).toOption()})},OS=function(n,t){return Hi(x(wr(n.element(),"."+t.itemClass),function(t){return n.getSystem().getByDom(t).toOption()}))},_S=Object.freeze({__proto__:null,dehighlightAll:function(t,n){return Pi(t,n,0,[])},dehighlight:function(t,n,e,o){wS(t,n,e,o)&&(de(o.element(),n.highlightClass),n.onDehighlight(t,o),nn(o,py()))},highlight:zi,highlightFirst:function(n,e,o){CS(n,e).each(function(t){zi(n,e,o,t)})},highlightLast:function(n,e,o){kS(n,e).each(function(t){zi(n,e,o,t)})},highlightAt:function(n,e,o,t){SS(n,e,o,t).fold(function(t){throw new Error(t)},function(t){zi(n,e,o,t)})},highlightBy:function(n,e,o,t){C(OS(n,e),t).each(function(t){zi(n,e,o,t)})},isHighlighted:wS,getHighlighted:function(n,t){return uo(n.element(),"."+t.highlightClass).bind(function(t){return n.getSystem().getByDom(t).toOption()})},getFirst:CS,getLast:kS,getPrevious:function(t,n){return Li(t,n,0,-1)},getNext:function(t,n){return Li(t,n,0,1)},getCandidates:OS}),TS=Wo({fields:[ht("highlightClass"),ht("itemClass"),ho("onHighlight"),ho("onDehighlight")],name:"highlighting",apis:_S}),ES=b(qi);(uw=iw=iw||{}).OnFocusMode="onFocus",uw.OnEnterOrSpaceMode="onEnterOrSpace",uw.OnApiMode="onApi";var BS,DS,AS,MS,FS,IS=nu(Nt("cyclic",mh(!1))),RS=nu(Nt("cyclic",mh(!0))),VS=tu([Dt("execute",eu),Dt("useSpace",!1),Dt("useEnter",!0),Dt("useControlEnter",!1),Dt("useDown",!1)],Ny.init,function(t,n,e){var o=e.useSpace&&!Ni(t.element())?[32]:[],r=e.useEnter?[13]:[],i=e.useDown?[40]:[];return[Ji(Xi(o.concat(r).concat(i)),ru)].concat(e.useControlEnter?[Ji(Yi([Ki,Xi([13])]),ru)]:[])},function(t,n,e){return e.useSpace&&!Ni(t.element())?[Ji(Xi([32]),ou)]:[]},function(){return xh.none()}),HS=Object.freeze({__proto__:null,flatgrid:iu,init:function(t){return t.state(t)}}),NS=function(n,e,t,o,r){return o.focusManager.get(e).bind(function(t){return n(e.element(),t,o,r)}).map(function(t){return o.focusManager.set(e,t),!0})},PS=su,zS=su,LS=su,jS=[ht("selector"),Dt("execute",eu),vo("onEscape"),Dt("captureTab",!1),hx()],US=vu(function(t,n,e,o){return gu(t,n,e,o,-1)}),WS=vu(function(t,n,e,o){return gu(t,n,e,o,1)}),GS=vu(function(t,n,e,o){return pu(t,n,e,o,-1)}),XS=vu(function(t,n,e,o){return pu(t,n,e,o,1)}),YS=tu(jS,iu,mh([Ji(Xi([37]),au(US,WS)),Ji(Xi([39]),cu(US,WS)),Ji(Xi([38]),PS(GS)),Ji(Xi([40]),zS(XS)),Ji(Yi([qi,Xi([9])]),bu),Ji(Yi([ES,Xi([9])]),bu),Ji(Xi([27]),function(t,n,e){return e.onEscape(t,n)}),Ji(Xi([32].concat([13])),function(n,e,o){return(t=n,r=o,r.focusManager.get(t).bind(function(t){return ao(t,r.selector)})).bind(function(t){return o.execute(n,e,t)});var t,r})]),mh([Ji(Xi([32]),ou)]),function(){return xh.some(hu)}),qS=[ht("selector"),Dt("getInitial",xh.none),Dt("execute",eu),vo("onEscape"),Dt("executeOnMove",!1),Dt("allowVertical",!0)],KS=mh([Ji(Xi([32]),ou)]),JS=tu(qS,Ny.init,function(t,n,e){var o=[37].concat(e.allowVertical?[38]:[]),r=[39].concat(e.allowVertical?[40]:[]);return[Ji(Xi(o),ku(au(Su,Cu))),Ji(Xi(r),ku(cu(Su,Cu))),Ji(Xi([13]),xu),Ji(Xi([32]),xu),Ji(Xi([27]),Ou)]},KS,function(){return xh.some(wu)}),$S=xn(["rowIndex","columnIndex","cell"],[]),QS=[wt("selectors",[ht("row"),ht("cell")]),Dt("cycles",!0),Dt("previousSelector",xh.none),Dt("execute",eu)],ZS=Mu(function(t,n,e){return Tu(t,n,e,-1)},function(t,n,e){return Bu(t,n,e,-1)}),tC=Mu(function(t,n,e){return Tu(t,n,e,1)},function(t,n,e){return Bu(t,n,e,1)}),nC=Mu(function(t,n,e){return Eu(t,e,n,-1)},function(t,n,e){return Du(t,e,n,-1)}),eC=Mu(function(t,n,e){return Eu(t,e,n,1)},function(t,n,e){return Du(t,e,n,1)}),oC=mh([Ji(Xi([37]),au(ZS,tC)),Ji(Xi([39]),cu(ZS,tC)),Ji(Xi([38]),PS(nC)),Ji(Xi([40]),zS(eC)),Ji(Xi([32].concat([13])),function(n,e,o){return qo(n.element()).bind(function(t){return o.execute(n,e,t)})})]),rC=mh([Ji(Xi([32]),ou)]),iC=tu(QS,Ny.init,oC,rC,function(){return xh.some(Au)}),uC=[ht("selector"),Dt("execute",eu),Dt("moveOnTab",!1)],aC=mh([Ji(Xi([38]),LS(Ru)),Ji(Xi([40]),LS(Vu)),Ji(Yi([qi,Xi([9])]),function(t,n,e,o){return e.moveOnTab?LS(Ru)(t,n,e,o):xh.none()}),Ji(Yi([ES,Xi([9])]),function(t,n,e,o){return e.moveOnTab?LS(Vu)(t,n,e,o):xh.none()}),Ji(Xi([13]),Fu),Ji(Xi([32]),Fu)]),cC=mh([Ji(Xi([32]),ou)]),sC=tu(uC,Ny.init,aC,cC,function(){return xh.some(Iu)}),lC=tu([vo("onSpace"),vo("onEnter"),vo("onShiftEnter"),vo("onLeft"),vo("onRight"),vo("onTab"),vo("onShiftTab"),vo("onUp"),vo("onDown"),vo("onEscape"),Dt("stopSpaceKeyup",!1),kt("focusIn")],Ny.init,function(t,n,e){return[Ji(Xi([32]),e.onSpace),Ji(Yi([ES,Xi([13])]),e.onEnter),Ji(Yi([qi,Xi([13])]),e.onShiftEnter),Ji(Yi([qi,Xi([9])]),e.onShiftTab),Ji(Yi([ES,Xi([9])]),e.onTab),Ji(Xi([38]),e.onUp),Ji(Xi([40]),e.onDown),Ji(Xi([37]),e.onLeft),Ji(Xi([39]),e.onRight),Ji(Xi([32]),e.onSpace),Ji(Xi([27]),e.onEscape)]},function(t,n,e){return e.stopSpaceKeyup?[Ji(Xi([32]),ou)]:[]},function(t){return t.focusIn}),fC=IS.schema(),dC=RS.schema(),mC=JS.schema(),gC=YS.schema(),pC=iC.schema(),hC=VS.schema(),vC=sC.schema(),bC=lC.schema(),yC=Go({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:fC,cyclic:dC,flow:mC,flatgrid:gC,matrix:pC,execution:hC,menu:vC,special:bC}),name:"keying",active:{events:function(t,n){return t.handler.toEvents(t,n)}},apis:{focusIn:function(n,e,o){e.sendFocusIn(e).fold(function(){n.getSystem().triggerFocus(n.element(),n.element())},function(t){t(n,e,o)})},setGridSize:function(t,n,e,o,r){I(e,"setGridSize")?e.setGridSize(o,r):v.console.error("Layout does not support setGridSize")}},state:HS}),xC=function(t){return t.components()},wC=Wo({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,n,e,o){Hu(t,0,wy,o)},prepend:function(t,n,e,o){Hu(t,0,Dn,o)},remove:Nu,replaceAt:Pu,replaceBy:function(n,t,e,o,r){return k(xC(n),o).bind(function(t){return Pu(n,0,0,t,r)})},set:function(n,t,e,o){Ko(function(){var t=x(o,n.getSystem().build);Gr(n,t)},n.element())},contents:xC})}),SC=Object.freeze({__proto__:null,focus:Lu,blur:function(t,n){n.ignore||t.element().dom().blur()},isFocused:function(t){return n=t.element(),e=wn(n).dom(),n.dom()===e.activeElement;var n,e}}),CC=Object.freeze({__proto__:null,exhibit:function(t,n){return Zn(n.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(e){return an([ln(Gb(),function(t,n){Lu(t,e),n.stop()})].concat(e.stopMousedown?[ln(Db(),function(t,n){n.event().prevent()})]:[]))}}),kC=Wo({fields:[ho("onFocus"),Dt("stopMousedown",!1),Dt("ignore",!1)],name:"focusing",active:CC,apis:SC}),OC=function(t,n,e,o){(o?Gu:Xu)(t,n,e)},_C=Object.freeze({__proto__:null,onLoad:Yu,toggle:Wu,isOn:function(t,n,e){return e.get()},on:Gu,off:Xu,set:OC}),TC=Object.freeze({__proto__:null,exhibit:function(){return Zn({})},events:function(t,n){var e,o,r,i=(e=t,o=n,r=Wu,xy(function(t){r(t,e,o)})),u=Po(t,n,Yu);return an(N([t.toggleOnExecute?[i]:[],[u]]))}}),EC=function(t,n,e){Pn(t.element(),"aria-expanded",e)},BC=Wo({fields:[Dt("selected",!1),kt("toggleClass"),Dt("toggleOnExecute",!0),At("aria",{mode:"none"},mt("mode",{pressed:[Dt("syncWithExpanded",!1),xo("update",function(t,n,e){Pn(t.element(),"aria-pressed",e),n.syncWithExpanded&&EC(t,n,e)})],checked:[xo("update",function(t,n,e){Pn(t.element(),"aria-checked",e)})],expanded:[xo("update",EC)],selected:[xo("update",function(t,n,e){Pn(t.element(),"aria-selected",e)})],none:[xo("update",Q)]}))],name:"toggling",active:TC,apis:_C,state:(BS=!1,{init:function(){var n=Kv(BS);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(BS)},readState:function(){return n.get()}}}})}),DC="alloy.item-hover",AC="alloy.item-focus",MC=mh(DC),FC=mh(AC),IC=[ht("data"),ht("components"),ht("dom"),Dt("hasSubmenu",!1),kt("toggling"),jw("itemBehaviours",[BC,kC,yC,Lw]),Dt("ignoreFocus",!1),Dt("domModification",{}),xo("builder",function(t){return{dom:t.dom,domModification:vh(vh({},t.domModification),{attributes:vh(vh(vh({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Uw(t.itemBehaviours,[t.toggling.fold(BC.revoke,function(t){return BC.config(vh({aria:{mode:"checked"}},t))}),kC.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){$u(t)}}),yC.config({mode:"execution"}),Lw.config({store:{mode:"memory",initialValue:t.data}}),zu("item-type-events",y(qu(),[ln(Ib(),Ju),ln(Jb(),kC.focus)]))]),components:t.components,eventOrder:t.eventOrder}}),Dt("eventOrder",{})],RC=[ht("dom"),ht("components"),xo("builder",function(t){return{dom:t.dom,components:t.components,events:an([ln(Jb(),function(t,n){n.stop()})])}})],VC=mh([cS({name:"widget",overrides:function(t){return{behaviours:Uo([Lw.config({store:{mode:"manual",getValue:function(){return t.data},setValue:function(){}}})])}}})]),HC=mt("type",{widget:[ht("uid"),ht("data"),ht("components"),ht("dom"),Dt("autofocus",!1),Dt("ignoreFocus",!1),jw("widgetBehaviours",[Lw,kC,yC]),Dt("domModification",{}),Mi(VC()),xo("builder",function(e){function o(t){return Oi(t,e,"widget").map(function(t){return yC.focusIn(t),t})}function t(t,n){return Ni(n.event().target())||e.autofocus&&n.setSource(t.element()),xh.none()}var n=Ci(0,e,VC()),r=ki("item-widget",e,n.internals());return{dom:e.dom,components:r,domModification:e.domModification,events:an([xy(function(t,n){o(t).each(function(){n.stop()})}),ln(Ib(),Ju),ln(Jb(),function(t){e.autofocus?o(t):kC.focus(t)})]),behaviours:Uw(e.widgetBehaviours,[Lw.config({store:{mode:"memory",initialValue:e.data}}),kC.config({ignore:e.ignoreFocus,onFocus:function(t){$u(t)}}),yC.config({mode:"special",focusIn:e.autofocus?function(t){o(t)}:Mx(),onLeft:t,onRight:t,onEscape:function(t,n){return kC.isFocused(t)||e.autofocus?(e.autofocus&&n.setSource(t.element()),xh.none()):(kC.focus(t),xh.some(!0))}})])}})],item:IC,separator:RC}),NC=mh([fS({factory:{sketch:function(t){var n=ft("menu.spec item",HC,t);return n.builder(n)}},name:"items",unit:"item",defaults:function(t,n){return n.hasOwnProperty("uid")?n:vh(vh({},n),{uid:Yn("item")})},overrides:function(t,n){return{type:n.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),PC=mh([ht("value"),ht("items"),ht("dom"),ht("components"),Dt("eventOrder",{}),si("menuBehaviours",[TS,Lw,xS,yC]),At("movement",{mode:"menu",moveOnTab:!0},mt("mode",{grid:[hx(),xo("config",function(t,n){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:n.initSize.numColumns,numRows:n.initSize.numRows},focusManager:t.focusManager}})],matrix:[xo("config",function(t,n){return{mode:"matrix",selectors:{row:n.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),ht("rowSelector")],menu:[Dt("moveOnTab",!0),xo("config",function(t,n){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:n.moveOnTab,focusManager:t.focusManager}})]})),vt("markers",gx()),Dt("fakeFocus",!1),Dt("focusManager",Qi()),ho("onHighlight")]),zC=mh("alloy.menu-focus"),LC=Vi({name:"Menu",configFields:PC(),partFields:NC(),factory:function(t,n){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:fi(t.menuBehaviours,[TS.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Lw.config({store:{mode:"memory",initialValue:t.value}}),xS.config({find:xh.some}),yC.config(t.movement.config(t,t.movement))]),events:an([ln(FC(),function(n,e){var t=e.event();n.getSystem().getByDom(t.target()).each(function(t){TS.highlight(n,t),e.stop(),en(n,zC(),{menu:n,item:t})})}),ln(MC(),function(t,n){var e=n.event().item();TS.highlight(t,e)})]),components:n,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),jC=function(e,o,r,t){return jh(r,t).bind(function(t){return jh(e,t).bind(function(t){var n=jC(e,o,r,t);return xh.some([t].concat(n))})}).getOr([])},UC=function(t){return"prepared"===t.type?xh.some(t.menu):xh.none()},WC={init:function(){function r(t,o,r){return e(t).bind(function(n){return(e=t,M(i.get(),function(t){return t===e})).bind(function(t){return o(t).map(function(t){return{triggeredMenu:n,triggeringItem:t,triggeringPath:r}})});var e})}var i=Kv({}),u=Kv({}),a=Kv({}),c=Kv(xh.none()),s=Kv({}),e=function(t){return n(t).bind(UC)},n=function(t){return jh(u.get(),t)},l=function(t){return jh(i.get(),t)};return{setMenuBuilt:function(t,n){var e;u.set(vh(vh({},u.get()),((e={})[t]={type:"prepared",menu:n},e)))},setContents:function(t,n,e,o){c.set(xh.some(t)),i.set(e),u.set(n),s.set(o);var r=Qu(o,e);a.set(r)},expand:function(e){return jh(i.get(),e).map(function(t){var n=jh(a.get(),e).getOr([]);return[t].concat(n)})},refresh:function(t){return jh(a.get(),t)},collapse:function(t){return jh(a.get(),t).bind(function(t){return 1<t.length?xh.some(t.slice(1)):xh.none()})},lookupMenu:n,lookupItem:l,otherMenus:function(t){var n=s.get();return E(Hh(n),t)},getPrimary:function(){return c.get().bind(e)},getMenus:function(){return u.get()},clear:function(){i.set({}),u.set({}),a.set({}),c.set(xh.none())},isClear:function(){return c.get().isNone()},getTriggeringPath:function(t,o){var n=w(l(t).toArray(),function(t){return e(t).isSome()});return jh(a.get(),t).bind(function(t){var e=T(n.concat(t));return function(t){for(var n=[],e=0;e<t.length;e++){var o=t[e];if(!o.isSome())return xh.none();n.push(o.getOrDie())}return xh.some(n)}(O(e,function(t,n){return r(t,o,e.slice(0,n+1)).fold(function(){return c.get().is(t)?[]:[xh.none()]},function(t){return[xh.some(t)]})}))})}}},extractPreparedMenu:UC},GC=mh("collapse-item"),XC=Ri({name:"TieredMenu",configFields:[yo("onExecute"),yo("onEscape"),bo("onOpenMenu"),bo("onOpenSubmenu"),ho("onRepositionMenu"),ho("onCollapseMenu"),Dt("highlightImmediately",!0),wt("data",[ht("primary"),ht("menus"),ht("expansions")]),Dt("fakeFocus",!1),ho("onHighlight"),ho("onHover"),mo(),ht("dom"),Dt("navigateOnHover",!0),Dt("stayInDom",!1),si("tmenuBehaviours",[yC,TS,xS,wC]),Dt("eventOrder",{})],apis:{collapseMenu:function(t,n){t.collapseMenu(n)},highlightPrimary:function(t,n){t.highlightPrimary(n)},repositionMenus:function(t,n){t.repositionMenus(n)}},factory:function(a){function t(t){var o,r,n=(o=t,r=a.data.primary,P(a.data.menus,function(t,n){function e(){return LC.sketch(vh(vh({dom:t.dom},t),{value:n,items:t.items,markers:a.markers,fakeFocus:a.fakeFocus,onHighlight:a.onHighlight,focusManager:a.fakeFocus?Zi():Qi()}))}return n===r?{type:"prepared",menu:o.getSystem().build(e())}:{type:"notbuilt",nbMenu:e}})),e=h();return p.setContents(a.data.primary,n,a.data.expansions,e),p.getPrimary()}function c(t){return Lw.getValue(t).value}function u(n,t){TS.highlight(n,t),TS.getHighlighted(t).orThunk(function(){return TS.getFirst(t)}).each(function(t){rn(n,t.element(),Jb())})}function s(n,t){return Hi(x(t,function(t){return n.lookupMenu(t).bind(function(t){return"prepared"===t.type?xh.some(t.menu):xh.none()})}))}function l(n,t,e){var o=s(t,t.otherMenus(e));Ih(o,function(t){pe(t.element(),[a.markers.backgroundMenu]),a.stayInDom||wC.remove(n,t)})}function f(t,o){var n,e=(n=t,g.get().getOrThunk(function(){var e={},t=w(wr(n.element(),"."+a.markers.item),function(t){return"true"===zn(t,"aria-haspopup")});return Ih(t,function(t){n.getSystem().getByDom(t).each(function(t){var n=c(t);e[n]=t})}),g.set(xh.some(e)),e}));Ph(e,function(t,n){var e=Fh(o,n);Pn(t.element(),"aria-expanded",e)})}function d(o,r,i){return xh.from(i[0]).bind(function(t){return r.lookupMenu(t).bind(function(t){if("notbuilt"===t.type)return xh.none();var n=t.menu,e=s(r,i.slice(1));return Ih(e,function(t){le(t.element(),a.markers.backgroundMenu)}),ve(n.element())||wC.append(o,qy(n)),pe(n.element(),[a.markers.backgroundMenu]),u(o,n),l(o,r,i),xh.some(n)})})}function i(r,i,u){void 0===u&&(u=m.HighlightSubmenu);var t=c(i);return p.expand(t).bind(function(o){return f(r,o),xh.from(o[0]).bind(function(e){return p.lookupMenu(e).bind(function(t){var n=function(t,n,e){if("notbuilt"!==e.type)return e.menu;var o=t.getSystem().build(e.nbMenu());return p.setMenuBuilt(n,o),o}(r,e,t);return ve(n.element())||wC.append(r,qy(n)),a.onOpenSubmenu(r,i,n,T(o)),u===m.HighlightSubmenu?(TS.highlightFirst(n),d(r,p,o)):(TS.dehighlightAll(n),xh.some(i))})})})}function o(n,e){var t=c(e);return p.collapse(t).bind(function(t){return f(n,t),d(n,p,t).map(function(t){return a.onCollapseMenu(n,e,t),t})})}function n(e){return function(n,t){return ao(t.getSource(),"."+a.markers.item).bind(function(t){return n.getSystem().getByDom(t).toOption().bind(function(t){return e(n,t).map(function(){return!0})})})}}function e(t){return TS.getHighlighted(t).bind(TS.getHighlighted)}var m,r,g=Kv(xh.none()),p=WC.init(),h=function(){return P(a.data.menus,function(t){return O(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})})};(r=m=m||{})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var v=an([ln(zC(),function(e,o){var t=o.event().item();p.lookupItem(c(t)).each(function(){var t=o.event().menu();TS.highlight(e,t);var n=c(o.event().item());p.refresh(n).each(function(t){return l(e,p,t)})})}),xy(function(n,t){var e=t.event().target();n.getSystem().getByDom(e).each(function(t){0===c(t).indexOf("collapse-item")&&o(n,t),i(n,t,m.HighlightSubmenu).fold(function(){a.onExecute(n,t)},function(){})})}),vy(function(n){t(n).each(function(t){wC.append(n,qy(t)),a.onOpenMenu(n,t),a.highlightImmediately&&u(n,t)})})].concat(a.navigateOnHover?[ln(MC(),function(t,n){var e,o,r=n.event().item();e=t,o=c(r),p.refresh(o).bind(function(t){return f(e,t),d(e,p,t)}),i(t,r,m.HighlightParent),a.onHover(t,r)})]:[])),b={collapseMenu:function(n){e(n).each(function(t){o(n,t)})},highlightPrimary:function(n){p.getPrimary().each(function(t){u(n,t)})},repositionMenus:function(o){p.getPrimary().bind(function(n){return e(o).bind(function(t){var n=c(t),e=Hi(x(F(p.getMenus()),WC.extractPreparedMenu));return p.getTriggeringPath(n,function(t){return n=t,A(e,function(t){return t.getSystem().isConnected()?C(TS.getCandidates(t),function(t){return c(t)===n}):xh.none()});var n})}).map(function(t){return{primary:n,triggeringPath:t}})}).fold(function(){var t;(t=o,xh.from(t.components()[0]).filter(function(t){return"menu"===zn(t.element(),"role")})).each(function(t){a.onRepositionMenu(o,t,[])})},function(t){var n=t.primary,e=t.triggeringPath;a.onRepositionMenu(o,n,e)})}};return{uid:a.uid,dom:a.dom,markers:a.markers,behaviours:fi(a.tmenuBehaviours,[yC.config({mode:"special",onRight:n(function(t,n){return Ni(n.element())?xh.none():i(t,n,m.HighlightSubmenu)}),onLeft:n(function(t,n){return Ni(n.element())?xh.none():o(t,n)}),onEscape:n(function(t,n){return o(t,n).orThunk(function(){return a.onEscape(t,n).map(function(){return t})})}),focusIn:function(n){p.getPrimary().each(function(t){rn(n,t.element(),Jb())})}}),TS.config({highlightClass:a.markers.selectedMenu,itemClass:a.markers.menu}),xS.config({find:function(t){return TS.getHighlighted(t)}}),wC.config({})]),eventOrder:a.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(t,n,e){return{primary:t,menus:n,expansions:e}},singleData:function(t,n){return{primary:t,menus:W(t,n),expansions:{}}},collapseItem:function(t){return{value:Xn(GC()),meta:{text:t}}}}}),YC=Ri({name:"InlineView",configFields:[ht("lazySink"),ho("onShow"),ho("onHide"),Et("onEscape"),si("inlineBehaviours",[Dw,Lw,Ix]),Bt("fireDismissalEventInstead",[Dt("event",cy())]),Bt("fireRepositionEventInstead",[Dt("event",sy())]),Dt("getRelated",xh.none),Dt("eventOrder",xh.none)],factory:function(i){function t(e){Dw.isOpen(e)&&Lw.getValue(e).each(function(t){switch(t.mode){case"menu":Dw.getState(e).each(function(t){XC.repositionMenus(t)});break;case"position":var n=i.lazySink(e).getOrDie();ww.positionWithinBounds(n,t.anchor,e,t.getBounds())}})}var o=function(t,n,e,o){r(t,n,e,function(){return o.map(function(t){return Qe(t)})})},r=function(t,n,e,o){var r=i.lazySink(t).getOrDie();Dw.openWhileCloaked(t,e,function(){return ww.positionWithinBounds(r,n,t,o())}),Lw.setValue(t,xh.some({mode:"position",anchor:n,getBounds:o}))},u=function(t,n,e,o){var r=function(t,n,r,e,i){function u(){return t.lazySink(n)}function a(t){return 2===t.length?o:{}}var o="horizontal"===e.type?{layouts:{onLtr:function(){return Ho()},onRtl:function(){return No()}}}:{};return XC.sketch({dom:{tag:"div"},data:e.data,markers:e.menu.markers,highlightImmediately:e.menu.highlightImmediately,onEscape:function(){return Dw.close(n),t.onEscape.map(function(t){return t(n)}),xh.some(!0)},onExecute:function(){return xh.some(!0)},onOpenMenu:function(t,n){ww.positionWithinBounds(u().getOrDie(),r,n,i())},onOpenSubmenu:function(t,n,e,o){var r=u().getOrDie();ww.position(r,vh({anchor:"submenu",item:n},a(o)),e)},onRepositionMenu:function(t,n,e){var o=u().getOrDie();ww.positionWithinBounds(o,r,n,i()),Ih(e,function(t){var n=a(t.triggeringPath);ww.position(o,vh({anchor:"submenu",item:t.triggeringItem},n),t.triggeredMenu)})}})}(i,t,n,e,o);Dw.open(t,r),Lw.setValue(t,xh.some({mode:"menu",menu:r}))},n={setContent:function(t,n){Dw.setContent(t,n)},showAt:function(t,n,e){o(t,n,e,xh.none())},showWithin:o,showWithinBounds:r,showMenuAt:function(t,n,e){u(t,n,e,function(){return xh.none()})},showMenuWithinBounds:u,hide:function(t){Dw.isOpen(t)&&(Lw.setValue(t,xh.none()),Dw.close(t))},getContent:function(t){return Dw.getState(t)},reposition:t,isOpen:Dw.isOpen};return{uid:i.uid,dom:i.dom,behaviours:fi(i.inlineBehaviours,[Dw.config({isPartOf:function(t,n,e){return ix(n,e)||(o=t,r=e,i.getRelated(o).exists(function(t){return ix(t,r)}));var o,r},getAttachPoint:function(t){return i.lazySink(t).getOrDie()},onOpen:function(t){i.onShow(t)},onClose:function(t){i.onHide(t)}}),Lw.config({store:{mode:"memory",initialValue:xh.none()}}),Ix.config({channels:vh(vh({},ei(vh({isExtraPart:mh(!1)},i.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),oi(vh(vh({isExtraPart:mh(!1)},i.fireRepositionEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})),{doReposition:t})))})]),eventOrder:i.eventOrder,apis:n}},apis:{showAt:function(t,n,e,o){t.showAt(n,e,o)},showWithin:function(t,n,e,o,r){t.showWithin(n,e,o,r)},showWithinBounds:function(t,n,e,o,r){t.showWithinBounds(n,e,o,r)},showMenuAt:function(t,n,e,o){t.showMenuAt(n,e,o)},showMenuWithinBounds:function(t,n,e,o,r){t.showMenuWithinBounds(n,e,o,r)},hide:function(t,n){t.hide(n)},isOpen:function(t,n){return t.isOpen(n)},getContent:function(t,n){return t.getContent(n)},setContent:function(t,n,e){t.setContent(n,e)},reposition:function(t,n){t.reposition(n)}}}),qC=function(t,n,e){return vx(ta(t,n),ea(t),e.innerNorth(),kx(),"layout-n")},KC=function(t,n,e){return vx(ta(t,n),oa(t,n),e.innerSouth(),Cx(),"layout-s")},JC=tinymce.util.Tools.resolve("tinymce.util.Delay"),$C=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),QC=tinymce.util.Tools.resolve("tinymce.EditorManager"),ZC=function(t){return ha(t).fold(function(){return 0<t.getParam("toolbar",[],"string[]").length},function(){return!0})};(AS=DS=DS||{})["default"]="wrap",AS.floating="floating",AS.sliding="sliding",AS.scrolling="scrolling",(FS=MS=MS||{}).top="top",FS.bottom="bottom";var tk,nk,ek=function(t){return t.getParam("toolbar_location",MS.top,"string")!==MS.bottom},ok=Ri({name:"Button",factory:function(t){function e(n){return jh(t.dom,"attributes").bind(function(t){return jh(t,n)})}var n=Ku(t.action),o=t.dom.tag;return{uid:t.uid,dom:t.dom,components:t.components,events:n,behaviours:Uw(t.buttonBehaviours,[kC.config({}),yC.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==o)return{role:e("role").getOr("button")};var t=e("type").getOr("button"),n=e("role").map(function(t){return{role:t}}).getOr({});return vh({type:t},n)}()},eventOrder:t.eventOrder}},configFields:[Dt("uid",undefined),ht("dom"),Dt("components",[]),jw("buttonBehaviours",[kC,yC]),kt("action"),kt("role"),Dt("eventOrder",{})]}),rk={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},ik=Ri({name:"Notification",factory:function(n){function e(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}}function o(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}}var t,r,i=Sa({dom:{tag:"p",innerHtml:n.translationProvider(n.text)},behaviours:Uo([wC.config({})])}),u=Sa({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},o(0)],behaviours:Uo([wC.config({})])}),a={updateProgress:function(t,n){t.getSystem().isConnected()&&u.getOpt(t).each(function(t){wC.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(n)]},o(n)])})},updateText:function(t,n){if(t.getSystem().isConnected()){var e=i.get(t);wC.set(e,[Ve(n)])}}},c=N([n.icon.toArray(),n.level.toArray(),n.level.bind(function(t){return xh.from(rk[t])}).toArray()]);return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert"},classes:n.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=c,r=n.iconProvider,A(t,function(t){return xh.from(r()[t])}).getOrThunk(function(){return Ca(r)}))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[i.asSpec()],behaviours:Uo([wC.config({})])}].concat(n.progress?[u.asSpec()]:[]).concat(n.closeButton?[ok.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:ka("close",n.iconProvider),attributes:{"aria-label":n.translationProvider("Close")}}}],action:function(t){n.onAction(t)}})]:[]),apis:a}},configFields:[kt("level"),ht("progress"),ht("icon"),ht("onAction"),ht("text"),ht("iconProvider"),ht("translationProvider"),Rt("closeButton",!0)],apis:{updateProgress:function(t,n,e){t.updateProgress(n,e)},updateText:function(t,n,e){t.updateText(n,e)}}}),uk=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),ak=function(t){return ao(t,"[data-mce-autocompleter]")},ck=function(e,t){function o(t,n){en(t,Hb(),{raw:n})}t.on("keypress compositionend",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel),t.on("keydown",function(n){function t(){return e.getView().bind(TS.getHighlighted)}8===n.which&&e.onKeypress.throttle(n),e.isActive()&&(27===n.which&&e.cancelIfNecessary(),e.isMenuOpen()?13===n.which?(t().each(on),n.preventDefault()):40===n.which?(t().fold(function(){e.getView().each(TS.highlightFirst)},function(t){o(t,n)}),n.preventDefault(),n.stopImmediatePropagation()):37!==n.which&&38!==n.which&&39!==n.which||t().each(function(t){o(t,n),n.preventDefault(),n.stopImmediatePropagation()}):13!==n.which&&38!==n.which&&40!==n.which||e.cancelIfNecessary())}),t.on("NodeChange",function(t){e.isActive()&&!e.isProcessingAction()&&ak($v.fromDom(t.element)).isNone()&&e.cancelIfNecessary()})},sk=tinymce.util.Tools.resolve("tinymce.util.Promise"),lk=function(t){if(t.nodeType===v.Node.TEXT_NODE)return Ia(t,t.data.length);var n=t.childNodes;return 0<n.length?lk(n[n.length-1]):Ia(t,n.length)},fk=function(t,n){var e=t.childNodes;return 0<e.length&&n<e.length?fk(e[n],0):0<e.length&&t.nodeType===v.Node.ELEMENT_NODE&&e.length===n?lk(e[e.length-1]):Ia(t,n)},dk=function(n,t,e,o){void 0===o&&(o={});var r=t(),i=n.selection.getRng().startContainer.nodeValue,u=w(r.lookupByChar(e.triggerChar),function(t){return e.text.length>=t.minChars&&t.matches.getOrThunk(function(){return Ra(n.dom)})(e.range,i,e.text)});if(0===u.length)return xh.none();var a=sk.all(x(u,
function(n){return n.fetch(e.text,n.maxResults,o).then(function(t){return{matchText:e.text,items:t,columns:n.columns,onAction:n.onAction}})}));return xh.some({lookupData:a,context:e})},mk=Iv([bt("type"),Tt("text")]),gk=Iv([Nt("type",function(){return"autocompleteitem"}),Nt("active",function(){return!1}),Nt("disabled",function(){return!1}),Dt("meta",{}),bt("value"),Tt("text"),Tt("icon")]),pk=Iv([bt("type"),bt("ch"),Mt("minChars",1),Dt("columns",1),Mt("maxResults",10),Et("matches"),xt("fetch"),xt("onAction")]),hk=[Rt("disabled",!1),Tt("text"),Tt("shortcut"),Nv("value","value",Bv(function(){return Xn("menuitem-value")}),jv()),Dt("meta",{})],vk=Iv([bt("type"),Vt("onSetup",function(){return Q}),Vt("onAction",Q),Tt("icon")].concat(hk)),bk=Iv([bt("type"),xt("getSubmenuItems"),Vt("onSetup",function(){return Q}),Tt("icon")].concat(hk)),yk=Iv([bt("type"),Rt("active",!1),Vt("onSetup",function(){return Q}),xt("onAction")].concat(hk)),xk=Iv([bt("type"),Rt("active",!1),Tt("icon")].concat(hk)),wk=Iv([bt("type"),yt("fancytype",["inserttable","colorswatch"]),Vt("onAction",Q)]),Sk=function(t){return Pa(Xn("unnamed-events"),t)},Ck=[ht("lazySink"),ht("tooltipDom"),Dt("exclusive",!0),Dt("tooltipComponents",[]),Dt("delay",300),It("mode","normal",["normal","follow-highlight"]),Dt("anchor",function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:mh([Ex,Tx,Eo,Do,Bo,Ao]),onRtl:mh([Ex,Tx,Eo,Do,Bo,Ao])}}}),ho("onHide"),ho("onShow")],kk=Object.freeze({__proto__:null,init:function(){function e(){o.get().each(function(t){v.clearTimeout(t)})}var o=Kv(xh.none()),n=Kv(xh.none()),t=mh("not-implemented");return Py({getTooltip:function(){return n.get()},isShowing:function(){return n.get().isSome()},setTooltip:function(t){n.set(xh.some(t))},clearTooltip:function(){n.set(xh.none())},clearTimer:e,resetTimer:function(t,n){e(),o.set(xh.some(v.setTimeout(function(){t()},n)))},readState:t})}}),Ok=Xn("tooltip.exclusive"),_k=Xn("tooltip.show"),Tk=Xn("tooltip.hide"),Ek=Object.freeze({__proto__:null,hideAllExclusive:za,setComponents:function(t,n,e,o){e.getTooltip().each(function(t){t.getSystem().isConnected()&&wC.set(t,o)})}}),Bk=Wo({fields:Ck,name:"tooltipping",active:Object.freeze({__proto__:null,events:function(o,r){function e(n){r.getTooltip().each(function(t){qr(t),o.onHide(n,t),r.clearTooltip()}),r.clearTimer()}return an(N([[ln(_k,function(t){r.resetTimer(function(){!function(t){if(!r.isShowing()){za(t);var n=o.lazySink(t).getOrDie(),e=t.getSystem().build({dom:o.tooltipDom,components:o.tooltipComponents,events:an("normal"===o.mode?[ln(Ib(),function(){nn(t,_k)}),ln(Mb(),function(){nn(t,Tk)})]:[]),behaviours:Uo([wC.config({})])});r.setTooltip(e),Xr(n,e),o.onShow(t,e),ww.position(n,o.anchor(t),e)}}(t)},o.delay)}),ln(Tk,function(t){r.resetTimer(function(){e(t)},o.delay)}),ln(qb(),function(t,n){Fh(n.channels(),Ok)&&e(t)}),by(function(t){e(t)})],"normal"===o.mode?[ln(Rb(),function(t){nn(t,_k)}),ln(Xb(),function(t){nn(t,Tk)}),ln(Ib(),function(t){nn(t,_k)}),ln(Mb(),function(t){nn(t,Tk)})]:[ln(gy(),function(t){nn(t,_k)}),ln(py(),function(t){nn(t,Tk)})]]))}}),state:kk,apis:Ek}),Dk=tinymce.util.Tools.resolve("tinymce.util.I18n"),Ak="tox-menu-nav__js",Mk="tox-collection__item",Fk="tox-swatch",Ik={normal:Ak,color:Fk},Rk="tox-collection__item--enabled",Vk="tox-collection__item-icon",Hk="tox-collection__item-label",Nk="tox-collection__item-caret",Pk="tox-collection__item--active",zk=tinymce.util.Tools.resolve("tinymce.Env"),Lk=function(t){var e=zk.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=x(t.split("+"),function(t){var n=t.toLowerCase().trim();return Uh(e,n)?e[n]:t});return zk.mac?n.join(""):n.join("+")},jk=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],Uk=["list-bull-circle","list-bull-default","list-bull-square"],Wk=["input","button","textarea","select"],Gk=function(n,t){t.disableClass.each(function(t){le(n.element(),t)}),(Ja(n,t)?$a:Za)(n),t.onDisabled(n)},Xk=Object.freeze({__proto__:null,enable:nc,disable:Gk,isDisabled:ec,onLoad:Ka,set:function(t,n,e,o){(o?Gk:nc)(t,n,e)}}),Yk=Object.freeze({__proto__:null,exhibit:function(t,n){return Zn({classes:n.disabled?n.disableClass.map(r).getOr([]):[]})},events:function(n,t){return an([cn(Kb(),function(t){return ec(t,n)}),Po(n,t,Ka)])}}),qk=Wo({fields:[Dt("disabled",!1),Dt("useNative",!0),kt("disableClass"),ho("onDisabled"),ho("onEnabled")],name:"disabling",active:Yk,apis:Xk}),Kk=function(t){return qk.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Jk=function(t){return qk.config({disabled:t})},$k=function(t){return qk.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Qk=function(t){return qk.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})};(nk=tk=tk||{})[nk.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",nk[nk.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var Zk,tO,nO=tk,eO={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},oO=mh(yi("item-widget",VC())),rO=Xn("cell-over"),iO=Xn("cell-execute"),uO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,aO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,cO=Math.min,sO=Math.max,lO=Math.round,fO=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,dO=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,mO=mh(hc(255,0,0,1)),gO=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),pO="tinymce-custom-colors",hO="choiceitem",vO=[{type:hO,text:"Light Green",value:"#BFEDD2"},{type:hO,text:"Light Yellow",value:"#FBEEB8"},{type:hO,text:"Light Red",value:"#F8CAC6"},{type:hO,text:"Light Purple",value:"#ECCAFA"},{type:hO,text:"Light Blue",value:"#C2E0F4"},{type:hO,text:"Green",value:"#2DC26B"},{type:hO,text:"Yellow",value:"#F1C40F"},{type:hO,text:"Red",value:"#E03E2D"},{type:hO,text:"Purple",value:"#B96AD9"},{type:hO,text:"Blue",value:"#3598DB"},{type:hO,text:"Dark Turquoise",value:"#169179"},{type:hO,text:"Orange",value:"#E67E23"},{type:hO,text:"Dark Red",value:"#BA372A"},{type:hO,text:"Dark Purple",value:"#843FA1"},{type:hO,text:"Dark Blue",value:"#236FA1"},{type:hO,text:"Light Gray",value:"#ECF0F1"},{type:hO,text:"Medium Gray",value:"#CED4D9"},{type:hO,text:"Gray",value:"#95A5A6"},{type:hO,text:"Dark Gray",value:"#7E8C8D"},{type:hO,text:"Navy Blue",value:"#34495E"},{type:hO,text:"Black",value:"#000000"},{type:hO,text:"White",value:"#ffffff"}],bO=function ZF(e){void 0===e&&(e=10);var t,n=gO.getItem(pO),o=kh(n)?JSON.parse(n):[],r=e-(t=o).length<0?t.slice(0,e):t,i=function(t){r.splice(t,1)};return{add:function(t){var n;(n=u(r,t),-1===n?xh.none():xh.some(n)).each(i),r.unshift(t),r.length>e&&r.pop(),gO.setItem(pO,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),yO=function(t,n){return t.getParam("color_cols",n,"number")},xO=function(t){return!1!==t.getParam("custom_colors")},wO=function(t){var n=Cc(t);return n!==undefined?Sc(n):vO},SO=function(){return x(bO.state(),function(t){return{type:hO,text:t,value:t}})},CO=function(t){bO.add(t)},kO=function(t){return t.fire("SkinLoaded")},OO=function(t,n){return t.fire("SkinLoadError",n)},_O=function(t){return t.fire("ResizeEditor")},TO=function(t,n){return t.fire("ScrollContent",n)},EO=function(t,n){return t.fire("ResizeContent",n)},BO=function(t,n){return t.fire("TextColorChange",n)},DO=function(i){return function(t,n){var e,o={colorpicker:n},r=(e=t,function(t){var n=t.getData();e(xh.from(n.colorpicker)),t.close()});i.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onAction:function(t,n){"hex-valid"===n.name&&(n.value?t.enable("ok"):t.disable("ok"))},onSubmit:r,onClose:function(){},onCancel:function(){t(xh.none())}})}},AO={register:function(t){var i;(i=t).addCommand("mceApplyTextcolor",function(t,n){var e,o,r;o=t,r=n,(e=i).undoManager.transact(function(){e.focus(),e.formatter.apply(o,{value:r}),e.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(t){var n,e;e=t,(n=i).undoManager.transact(function(){n.focus(),n.formatter.remove(e,{value:null},null,!0),n.nodeChanged()})});var n=Kv(null),e=Kv(null);Ac(t,"forecolor","forecolor","Text color",n),Ac(t,"backcolor","hilitecolor","Background color",e),Mc(t,"forecolor","forecolor","Text color"),Mc(t,"backcolor","hilitecolor","Background color")},getColors:Ec,getFetch:Bc,colorPickerDialog:DO,getCurrentColor:kc,getColorCols:_c,calcCols:Oc},MO=[LC.parts().items({})],FO=function(t,l,f,d,m,g,p){return Hi(x(t,function(s){return"choiceitem"===s.type?st("choicemenuitem",xk,s).fold(zc,function(t){return xh.some((n=t,e=1===f,o=d,r=l,i=g(s.value),u=m,a=p,c=qa({presets:o,textContent:e?n.text:xh.none(),htmlContent:xh.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:e?n.shortcut:xh.none(),checkMark:e?xh.some(Xa(a.icons)):xh.none(),caret:xh.none(),value:n.value},a,!0),Xh(ac({data:cc(n),disabled:n.disabled,getApi:function(n){return{setActive:function(t){BC.set(n,t)},isActive:function(){return BC.isOn(n)},isDisabled:function(){return qk.isDisabled(n)},setDisabled:function(t){return qk.set(n,t)}}},onAction:function(){return r(n.value)},onSetup:function(t){return t.setActive(i),function(){}},triggersSubmenu:!1,itemBehaviours:[]},c,u),{toggling:{toggleClass:Rk,toggleOnExecute:!1,selected:n.active}})));var n,e,o,r,i,u,a,c}):xh.none()}))},IO={inserttable:function tI(o){var t=Xn("size-label"),i=function(t,n,e){for(var o=[],r=0;r<n;r++){for(var i=[],u=0;u<e;u++)i.push(lc(r,u,t));o.push(i)}return o}(t,10,10),u=Sa({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[Ve("0x0")],behaviours:Uo([wC.config({})])});return{type:"widget",data:{value:Xn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[oO().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:O(i,function(t){return x(t,qy)}).concat(u.asSpec()),behaviours:Uo([zu("insert-table-picker",[gn(rO,function(t,n,e){var o=e.event().row(),r=e.event().col();!function(t,n,e,o,r){for(var i=0;i<o;i++)for(var u=0;u<r;u++)BC.set(t[i][u],i<=n&&u<=e)}(i,o,r,10,10),wC.set(u.get(t),[Ve(r+1+"x"+(o+1))])}),gn(iO,function(t,n,e){o.onAction({numRows:e.event().row()+1,numColumns:e.event().col()+1}),nn(t,Zb())})]),yC.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function nI(n,t){var e=AO.getColors(t.colorinput.getColors(),t.colorinput.hasCustomColors()),o=t.colorinput.getColorCols(),r=Uc(Xn("menu-value"),e,function(t){n.onAction({value:t})},o,"color",nO.CLOSE_ON_EXECUTE,function(){return!1},t.shared.providers),i=vh(vh({},r),{markers:Ic("color"),movement:Wc(o,"color")});return{type:"widget",data:{value:Xn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[oO().widget(LC.sketch(i))]}}},RO=function(t,n,e,o,r,i,u,a){void 0===a&&(a=!0);var c,s,l=qa({presets:o,textContent:xh.none(),htmlContent:e?t.text.map(function(t){return sc(t,n)}):xh.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:xh.none(),checkMark:xh.none(),caret:xh.none(),value:t.value},u.providers,a,t.icon);return ac({data:cc(t),disabled:t.disabled,getApi:function(){return{}},onAction:function(){return r(t.value,t.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:(c=t.meta,s=u,jh(c,"tooltipWorker").map(function(t){return[Bk.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Gx}}},mode:"follow-highlight",onShow:function(n){t(function(t){Bk.setComponents(n,[Gy({element:$v.fromDom(t)})])})}})]}).getOr([]))},l,i)},VO=function(t){var n=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:vh({tag:"div",classes:[Mk,"tox-collection__group-heading"]},n),components:[]}},HO=function(t,n,e,o){void 0===o&&(o=!0);var r=qa({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:xh.none(),ariaLabel:t.text,caret:xh.none(),checkMark:xh.none(),shortcutContent:t.shortcut},e,o);return ac({data:cc(t),getApi:function(n){return{isDisabled:function(){return qk.isDisabled(n)},setDisabled:function(t){return qk.set(n,t)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,n)},NO=function(t,n,e,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);var i,u,a=r?(u=e.icons,{dom:{tag:"div",classes:[Nk],innerHtml:ka("chevron-down",u)}}):(i=e.icons,{dom:{tag:"div",classes:[Nk],innerHtml:ka("chevron-right",i)}}),c=qa({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:xh.none(),ariaLabel:t.text,caret:xh.some(a),checkMark:xh.none(),shortcutContent:t.shortcut},e,o);return ac({data:cc(t),getApi:function(n){return{isDisabled:function(){return qk.isDisabled(n)},setDisabled:function(t){return qk.set(n,t)}}},disabled:t.disabled,onAction:Q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},c,n)},PO=function(t,n,e){var o=qa({iconContent:xh.none(),textContent:t.text,htmlContent:xh.none(),ariaLabel:t.text,checkMark:xh.some(Xa(e.icons)),caret:xh.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},e,!0);return Xh(ac({data:cc(t),disabled:t.disabled,getApi:function(n){return{setActive:function(t){BC.set(n,t)},isActive:function(){return BC.isOn(n)},isDisabled:function(){return qk.isDisabled(n)},setDisabled:function(t){return qk.set(n,t)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,n),{toggling:{toggleClass:Rk,toggleOnExecute:!1,selected:t.active}})},zO=function(n,e){return(t=IO,o=n.fancytype,Object.prototype.hasOwnProperty.call(t,o)?xh.some(t[o]):xh.none()).map(function(t){return t(n,e)});var t,o};(tO=Zk=Zk||{})[tO.ContentFocus=0]="ContentFocus",tO[tO.UiFocus=1]="UiFocus";var LO,jO,UO,WO,GO=function(d,c){function e(){return o.get().isSome()}function s(){e()&&YC.hide(m)}function l(t,n,e,o){t.matchLength=n.text.length;var r,i,u,a,c,s,l,f=A(e,function(t){return xh.from(t.columns)}).getOr(1);YC.showAt(m,{anchor:"node",root:$v.fromDom(d.getBody()),node:xh.from(t.element)},LC.sketch((r=jc("autocompleter-value",!0,o,f,"normal"),i=f,u=Zk.ContentFocus,a="normal",c=u===Zk.ContentFocus?Zi():Qi(),s=Wc(i,a),l=Ic(a),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:u===Zk.ContentFocus,focusManager:c,menuBehaviours:Sk("auto"!==i?[]:[vy(function(o){Na(o,4,l.item).each(function(t){var n=t.numColumns,e=t.numRows;yC.setGridSize(o,e,n)})})])}))),YC.getContent(m).each(TS.highlightFirst)}var o=Kv(xh.none()),f=Kv(!1),m=Yy(YC.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Uo([zu("dismissAutocompleter",[ln(cy(),function(){return g()})])]),lazySink:c.getSink})),g=function(){if(e()){var t=o.get().map(function(t){return t.element});ak(t.getOr($v.fromDom(d.selection.getNode()))).each(Fn),s(),o.set(xh.none()),f.set(!1)}},r=R(function(){return Ha(d)}),p=function(t){var n;(n=t,o.get().map(function(t){return Fa(d.dom,d.selection.getRng(),t.triggerChar).bind(function(t){return dk(d,r,t,n)})}).getOrThunk(function(){return Va(d,r)})).fold(g,function(a){!function(t){if(!e()){var n=Ea(d,t.range);o.set(xh.some({triggerChar:t.triggerChar,element:n,matchLength:t.text.length})),f.set(!1)}}(a.context),a.lookupData.then(function(u){o.get().map(function(t){var n,e,o,r=a.context;if(t.triggerChar===r.triggerChar){var i=(n=r.triggerChar,o=A(e=u,function(t){return xh.from(t.columns)}).getOr(1),O(e,function(i){return qc(i.items,i.matchText,function(o,r){var t=d.selection.getRng();Fa(d.dom,t,n).fold(function(){return v.console.error("Lost context. Cursor probably moved")},function(t){var n=t.range,e={hide:function(){g()},reload:function(t){s(),p(t)}};f.set(!0),i.onAction(e,n,o,r),f.set(!1)})},o,nO.BUBBLE_TO_SANDBOX,c)}));0<i.length?l(t,r,u,i):10<=r.text.length-t.matchLength?g():s()}})})})},t={onKeypress:_a(function(t){27!==t.which&&p()},50),cancelIfNecessary:g,isMenuOpen:function(){return YC.isOpen(m)},isActive:e,isProcessingAction:f.get,getView:function(){return YC.getContent(m)}};ck(t,d)},XO=mh(!0),YO=We,qO=Xt().browser.isFirefox(),KO=nt([xt("triggerEvent"),Dt("stopBackspace",!0)]),JO=Wh([{stopped:[]},{resume:["element"]},{complete:[]}]),$O=function(n,e,o,t,r,i){return is(n,e,o,t,r,i).fold(function(){return!0},function(t){return $O(n,e,o,t,r,i)},function(){return!1})},QO=function(t,n,e,o,r){var i=rs(e,o);return $O(t,n,e,o,i,r)},ZO=vn("element","descHandler"),t_=function(t,n){return{id:mh(t),descHandler:mh(n)}},n_=Ri({name:"Container",factory:function(t){var n=t.dom,e=n.attributes,o=h(n,["attributes"]);return{uid:t.uid,dom:vh({tag:"div",attributes:vh({role:"presentation"},e)},o),components:t.components,behaviours:li(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Dt("components",[]),si("containerBehaviours",[]),Dt("events",{}),Dt("domModification",{}),Dt("eventOrder",{})]}),e_=Xn("form-component-change"),o_=Xn("form-close"),r_=Xn("form-cancel"),i_=Xn("form-action"),u_=Xn("form-submit"),a_=Xn("form-block"),c_=Xn("form-unblock"),s_=Xn("form-tabchange"),l_=Xn("form-resize"),f_=mh([Dt("prefix","form-field"),si("fieldBehaviours",[xS,Lw])]),d_=mh([lS({schema:[ht("dom")],name:"label"}),lS({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[ht("text")],name:"aria-descriptor"}),cS({factory:{sketch:function(t){var n=U(t,["factory"]);return t.factory.sketch(n)}},schema:[ht("factory")],name:"field"})]),m_=Vi({name:"FormField",configFields:f_(),partFields:d_(),factory:function(r,t){var n=fi(r.fieldBehaviours,[xS.config({find:function(t){return Oi(t,r,"field")}}),Lw.config({store:{mode:"manual",getValue:function(t){return xS.getCurrent(t).bind(Lw.getValue)},setValue:function(t,n){xS.getCurrent(t).each(function(t){Lw.setValue(t,n)})}}})]),e=an([vy(function(t){var o=Ti(t,r,["label","field","aria-descriptor"]);o.field().each(function(e){var n=Xn(r.prefix);o.label().each(function(t){Pn(t.element(),"for",n),Pn(e.element(),"id",n)}),o["aria-descriptor"]().each(function(t){var n=Xn(r.prefix);Pn(t.element(),"id",n),Pn(e.element(),"aria-describedby",n)})})})]),o={getField:function(t){return Oi(t,r,"field")},getLabel:function(t){return Oi(t,r,"label")}};return{uid:r.uid,dom:r.dom,components:t,behaviours:n,events:e,apis:o}},apis:{getField:function(t,n){return t.getField(n)},getLabel:function(t,n){return t.getLabel(n)}}}),g_=mh([kt("data"),Dt("inputAttributes",{}),Dt("inputStyles",{}),Dt("tag","input"),Dt("inputClasses",[]),ho("onSetValue"),Dt("styles",{}),Dt("eventOrder",{}),si("inputBehaviours",[Lw,kC]),Dt("selectOnFocus",!0)]),p_=Ri({name:"Input",configFields:g_(),factory:function(t){return{uid:t.uid,dom:fs(t),components:[],behaviours:(n=t,vh(vh({},ls(n)),fi(n.inputBehaviours,[Lw.config({store:vh(vh({mode:"manual"},n.data.map(function(t){return{initialValue:t}}).getOr({})),{getValue:function(t){return Ee(t.element())},setValue:function(t,n){Ee(t.element())!==n&&Be(t.element(),n)}}),onSetValue:n.onSetValue})]))),eventOrder:t.eventOrder};var n}}),h_={},v_={exports:h_};LO=undefined,jO=h_,UO=v_,WO=undefined,function(t){"object"==typeof jO&&void 0!==UO?UO.exports=t():"function"==typeof LO&&LO.amd?LO([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=t()}(function(){return function l(i,u,a){function c(n,t){if(!u[n]){if(!i[n]){var e="function"==typeof WO&&WO;if(!t&&e)return e(n,!0);if(s)return s(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=u[n]={exports:{}};i[n][0].call(r.exports,function(t){return c(i[n][1][t]||t)},r,r.exports,l,i,u,a)}return u[n].exports}for(var s="function"==typeof WO&&WO,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,n){function e(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(s===setTimeout)return setTimeout(t,0);if((s===e||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function i(){g&&d&&(g=!1,d.length?m=d.concat(m):p=-1,m.length&&u())}function u(){if(!g){var t=r(i);g=!0;for(var n=m.length;n;){for(d=m,m=[];++p<n;)d&&d[p].run();p=-1,n=m.length}d=null,g=!1,function e(t){if(l===clearTimeout)return clearTimeout(t);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}(t)}}function a(t,n){this.fun=t,this.array=n}function c(){}var s,l,f=n.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:e}catch(t){s=e}try{l="function"==typeof clearTimeout?clearTimeout:o}catch(t){l=o}}();var d,m=[],g=!1,p=-1;f.nextTick=function(t){var n=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];m.push(new a(t,n)),1!==m.length||g||r(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],2:[function(t,e){(function(n){function c(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],l(t,this)}function o(e,o){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var t=1===e._state?o.onFulfilled:o.onRejected;if(null!==t){var n;try{n=t(e._value)}catch(f){return void u(o.promise,f)}r(o.promise,n)}else(1===e._state?r:u)(o.promise,e._value)})):e._deferreds.push(o)}function r(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof i)return t._state=3,t._value=n,void a(t);if("function"==typeof e)return void l(function c(n,e){return function(){n.apply(e,arguments)}}(e,n),t)}t._state=1,t._value=n,a(t)}catch(o){u(t,o)}}function u(t,n){t._state=2,t._value=n,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)o(t,t._deferreds[n]);t._deferreds=null}function s(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function l(t,n){var e=!1;try{t(function(t){e||(e=!0,r(n,t))},function(t){e||(e=!0,u(n,t))})}catch(c){if(e)return;e=!0,u(n,c)}}var t,f;t=this,f=setTimeout,i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(c);return o(this,new s(t,n,e)),e},i.all=function(t){var a=Array.prototype.slice.call(t);return new i(function(o,r){function i(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void e.call(t,function(t){i(n,t)},r)}a[n]=t,0==--u&&o(a)}catch(c){r(c)}}if(0===a.length)return o([]);for(var u=a.length,t=0;t<a.length;t++)i(t,a[t])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(t){t(n)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(r){return new i(function(t,n){for(var e=0,o=r.length;e<o;e++)r[e].then(t,n)})},i._immediateFn="function"==typeof n?function(t){n(t)}:function(t){f(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=i:t.Promise||(t.Promise=i)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(c,t,s){(function(t,n){function e(t,n){this._id=t,this._clearFn=n}var o=c("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,u={},a=0;s.setTimeout=function(){return new e(r.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new e(r.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(t){t.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},s.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},s._unrefActive=s.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;0<=n&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},s.setImmediate="function"==typeof t?t:function(t){var n=a++,e=!(arguments.length<2)&&i.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(e?t.apply(null,e):t.call(null),s.clearImmediate(n))}),n},s.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,n){var e=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();n.exports={boltExport:o.Promise||e}},{"promise-polyfill":2}]},{},[4])(4)});var b_,y_,x_=v_.exports.boltExport,w_=function(t){var e=xh.none(),n=[],o=function(t){r()?u(t):n.push(t)},r=function(){return e.isSome()},i=function(t){Ih(t,u)},u=function(n){e.each(function(t){v.setTimeout(function(){n(t)},0)})};return t(function(t){e=xh.some(t),i(n),n=[]}),{get:o,map:function(e){return w_(function(n){o(function(t){n(e(t))})})},isReady:r}},S_={nu:w_,pure:function(n){return w_(function(t){t(n)})}},C_=function(e){function t(t){e().then(t,ds)}return{map:function(t){return C_(function(){return e().then(t)})},bind:function(n){return C_(function(){return e().then(function(t){return n(t).toPromise()})})},anonBind:function(t){return C_(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return S_.nu(t)},toCached:function(){var t=null;return C_(function(){return null===t&&(t=e()),t})},toPromise:e,get:t}},k_=function(t){return C_(function(){return new x_(t)})},O_=function(t){return C_(function(){return x_.resolve(t)})},__=["input","textarea"],T_=Object.freeze({__proto__:null,markValid:gs,markInvalid:ps,query:hs,run:vs,isInvalid:function(t,n){return me(n.getRoot(t).getOr(t.element()),n.invalidClass)}}),E_=Object.freeze({__proto__:null,events:function(n){return n.validator.map(function(t){return an([ln(t.onEvent,function(t){vs(t,n).get(f)})].concat(t.validateOnLoad?[vy(function(t){vs(t,n).get(Q)})]:[]))}).getOr({})}}),B_=Wo({fields:[ht("invalidClass"),Dt("getRoot",xh.none),Bt("notify",[Dt("aria","alert"),Dt("getContainer",xh.none),Dt("validHtml",""),ho("onValid"),ho("onInvalid"),ho("onValidate")]),Bt("validator",[ht("validate"),Dt("onEvent","input"),Dt("validateOnLoad",!0)])],name:"invalidating",active:E_,apis:T_,extra:{validation:function(e){return function(t){var n=Lw.getValue(t);return O_(e(n))}}}}),D_=Object.freeze({__proto__:null,exhibit:function(t,n){return Zn({attributes:G([{key:n.tabAttr,value:"true"}])})}}),A_=Wo({fields:[Dt("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:D_}),M_=function(t,n,e,o){return{dom:F_(e),components:t.toArray().concat([n]),fieldBehaviours:Uo(o)}},F_=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},I_=Object.freeze({__proto__:null,getCoupled:function(t,n,e,o){return e.getOrCreate(t,n,o)}}),R_=Wo({fields:[vt("others",ct(Ch.value,jv()))],name:"coupling",apis:I_,state:Object.freeze({__proto__:null,init:function(){var i={},t=mh({});return Py({readState:t,getOrCreate:function(e,o,r){var t=Hh(o.others);if(t)return jh(i,r).getOrThunk(function(){var t=jh(o.others,r).getOrDie("No information found for coupled component: "+r)(e),n=e.getSystem().build(t);return i[r]=n});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(t,null,2))}})}})}),V_=mh("sink"),H_=mh(lS({name:V_(),overrides:mh({dom:{tag:"div"},behaviours:Uo([ww.config({useFixed:ph})]),events:an([pn(Hb()),pn(Db()),pn(Lb())])})}));(y_=b_=b_||{})[y_.HighlightFirst=0]="HighlightFirst",y_[y_.HighlightNone=1]="HighlightNone";var N_,P_,z_,L_,j_,U_,W_,G_=function(n,t){return n.getSystem().getByUid(t.uid+"-"+V_()).map(function(t){return function(){return Ch.value(t)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return Ch.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(n)}})})},X_=mh([ht("dom"),ht("fetch"),ho("onOpen"),vo("onExecute"),Dt("getHotspot",xh.some),Dt("getAnchorOverrides",mh({})),dr(),si("dropdownBehaviours",[BC,R_,yC,kC]),ht("toggleClass"),Dt("eventOrder",{}),kt("lazySink"),Dt("matchWidth",!1),Dt("useMinWidth",!1),kt("role")].concat(Es())),Y_=mh([sS({schema:[mo()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),H_()]),q_=Vi({name:"Dropdown",configFields:X_(),partFields:Y_(),factory:function(n,t,e,o){function r(t){Dw.getState(t).each(function(t){XC.highlightPrimary(t)})}function i(t){return on(t),xh.some(!0)}var u,a,c={expand:function(t){BC.isOn(t)||Cs(n,function(t){return t},t,o,Q,b_.HighlightNone).get(Q)},open:function(t){BC.isOn(t)||Cs(n,function(t){return t},t,o,Q,b_.HighlightFirst).get(Q)},isOpen:BC.isOn,close:function(t){BC.isOn(t)&&Cs(n,function(t){return t},t,o,Q,b_.HighlightFirst).get(Q)},repositionMenus:function(t){BC.isOn(t)&&Ts(t)}};return{uid:n.uid,dom:n.dom,components:t,behaviours:fi(n.dropdownBehaviours,[BC.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),R_.config({others:{sandbox:function(t){return _s(n,t,{onOpen:function(){BC.on(t)},onClose:function(){BC.off(t)}})}}}),yC.config({mode:"special",onSpace:i,onEnter:i,onDown:function(t){q_.isOpen(t)?r(R_.getCoupled(t,"sandbox")):q_.open(t);return xh.some(!0)},onEscape:function(t){return q_.isOpen(t)?(q_.close(t),xh.some(!0)):xh.none()}}),kC.config({})]),events:Ku(xh.some(function(t){Cs(n,function(t){return t},t,o,r,b_.HighlightFirst).get(Q)})),eventOrder:vh(vh({},n.eventOrder),(u={},u[Kb()]=["disabling","toggling","alloy.base.behaviour"],u)),apis:c,domModification:{attributes:vh(vh({"aria-haspopup":"true"},n.role.fold(function(){return{}},function(t){return{role:t}})),"button"===n.dom.tag?{type:(a="type",jh(n.dom,"attributes").bind(function(t){return jh(t,a)})).getOr("button")}:{})}}},apis:{open:function(t,n){return t.open(n)},expand:function(t,n){return t.expand(n)},close:function(t,n){return t.close(n)},isOpen:function(t,n){return t.isOpen(n)},repositionMenus:function(t,n){return t.repositionMenus(n)}}}),K_=Wo({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return an([cn(Ub(),mh(!0))])},exhibit:function(){return Zn({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),J_=Xn("color-input-change"),$_=Xn("color-swatch-change"),Q_=Xn("color-picker-cancel"),Z_=mh(Xn("rgb-hex-update")),tT=mh(Xn("slider-update")),nT=mh(Xn("palette-update")),eT=lS({schema:[ht("dom")],name:"label"}),oT=As("top-left"),rT=As("top"),iT=As("top-right"),uT=As("right"),aT=As("bottom-right"),cT=As("bottom"),sT=As("bottom-left"),lT=[eT,As("left"),uT,rT,cT,oT,iT,sT,aT,cS({name:"thumb",defaults:mh({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:an([mn(_b(),t,"spectrum"),mn(Tb(),t,"spectrum"),mn(Eb(),t,"spectrum"),mn(Db(),t,"spectrum"),mn(Ab(),t,"spectrum"),mn(Fb(),t,"spectrum")])}}}),cS({schema:[Nt("mouseIsDown",function(){return Kv(!1)})],name:"spectrum",overrides:function(e){function o(n,t){return r.getValueFromEvent(t).map(function(t){return r.setValueFrom(n,e,t)})}var r=e.model.manager;return{behaviours:Uo([yC.config({mode:"special",onLeft:function(t){return r.onLeft(t,e)},onRight:function(t){return r.onRight(t,e)},onUp:function(t){return r.onUp(t,e)},onDown:function(t){return r.onDown(t,e)}}),kC.config({})]),events:an([ln(_b(),o),ln(Tb(),o),ln(Db(),o),ln(Ab(),function(t,n){e.mouseIsDown.get()&&o(t,n)})])}}})],fT=mh("slider.change.value"),dT="left",mT=Ol(-1),gT=Ol(1),pT=xh.none,hT=xh.none,vT={"top-left":xh.none(),top:xh.none(),"top-right":xh.none(),
right:xh.some(function(t,n){il(t,el(Ps(n)))}),"bottom-right":xh.none(),bottom:xh.none(),"bottom-left":xh.none(),left:xh.some(function(t,n){il(t,el(Rs(n)))})},bT=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=kl(t,n,e);return Sl(t,Cl(o)),o},setToMin:function(t,n){Sl(t,Cl(Fs(n)))},setToMax:function(t,n){Sl(t,Cl(Hs(n)))},findValueOfOffset:kl,getValueFromEvent:function(t){return Ms(t).map(function(t){return t.left()})},findPositionOfValue:_l,setPositionFromValue:function(t,n,e,o){var r=nl(e),i=_l(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),e),u=je(n.element())/2;xe(n.element(),"left",i-u+"px")},onLeft:mT,onRight:gT,onUp:pT,onDown:hT,edgeActions:vT}),yT=xh.none,xT=xh.none,wT=Dl(-1),ST=Dl(1),CT={"top-left":xh.none(),top:xh.some(function(t,n){il(t,ol(Vs(n)))}),"top-right":xh.none(),right:xh.none(),"bottom-right":xh.none(),bottom:xh.some(function(t,n){il(t,ol(zs(n)))}),"bottom-left":xh.none(),left:xh.none()},kT=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Bl(t,n,e);return Tl(t,El(o)),o},setToMin:function(t,n){Tl(t,El(Is(n)))},setToMax:function(t,n){Tl(t,El(Ns(n)))},findValueOfOffset:Bl,getValueFromEvent:function(t){return Ms(t).map(function(t){return t.top()})},findPositionOfValue:Al,setPositionFromValue:function(t,n,e,o){var r=nl(e),i=Al(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),e),u=Ne(n.element())/2;xe(n.element(),"top",i-u+"px")},onLeft:yT,onRight:xT,onUp:wT,onDown:ST,edgeActions:CT}),OT=Il(-1,!1),_T=Il(1,!1),TT=Il(-1,!0),ET=Il(1,!0),BT={"top-left":xh.some(function(t,n){il(t,rl(Rs(n),Vs(n)))}),top:xh.some(function(t,n){il(t,rl(Ws(n),Vs(n)))}),"top-right":xh.some(function(t,n){il(t,rl(Ps(n),Vs(n)))}),right:xh.some(function(t,n){il(t,rl(Ps(n),Gs(n)))}),"bottom-right":xh.some(function(t,n){il(t,rl(Ps(n),zs(n)))}),bottom:xh.some(function(t,n){il(t,rl(Ws(n),zs(n)))}),"bottom-left":xh.some(function(t,n){il(t,rl(Rs(n),zs(n)))}),left:xh.some(function(t,n){il(t,rl(Rs(n),Gs(n)))})},DT=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Fl(kl(t,n,e.left()),Bl(t,n,e.top()));return Ml(t,o),o},setToMin:function(t,n){Ml(t,Fl(Fs(n),Is(n)))},setToMax:function(t,n){Ml(t,Fl(Hs(n),Ns(n)))},getValueFromEvent:function(t){return Ms(t)},setPositionFromValue:function(t,n,e,o){var r=nl(e),i=_l(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),e),u=Al(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),e),a=je(n.element())/2,c=Ne(n.element())/2;xe(n.element(),"left",i-a+"px"),xe(n.element(),"top",u-c+"px")},onLeft:OT,onRight:_T,onUp:TT,onDown:ET,edgeActions:BT}),AT=Vi({name:"Slider",configFields:[Dt("stepSize",1),Dt("onChange",Q),Dt("onChoose",Q),Dt("onInit",Q),Dt("onDragStart",Q),Dt("onDragEnd",Q),Dt("snapToGrid",!1),Dt("rounded",!0),kt("snapStart"),vt("model",mt("mode",{x:[Dt("minX",0),Dt("maxX",100),Nt("value",function(t){return Kv(t.mode.minX)}),ht("getInitialValue"),xo("manager",bT)],y:[Dt("minY",0),Dt("maxY",100),Nt("value",function(t){return Kv(t.mode.minY)}),ht("getInitialValue"),xo("manager",kT)],xy:[Dt("minX",0),Dt("maxX",100),Dt("minY",0),Dt("maxY",100),Nt("value",function(t){return Kv({x:mh(t.mode.minX),y:mh(t.mode.minY)})}),ht("getInitialValue"),xo("manager",DT)]})),si("sliderBehaviours",[yC,Lw]),Nt("mouseIsDown",function(){return Kv(!1)})],partFields:lT,factory:function(r,t){function i(t){return _i(t,r,"thumb")}function u(t){return _i(t,r,"spectrum")}function e(t){return Oi(t,r,"left-edge")}function o(t){return Oi(t,r,"right-edge")}function a(t){return Oi(t,r,"top-edge")}function c(t){return Oi(t,r,"bottom-edge")}function s(t,n){p.setPositionFromValue(t,n,r,{getLeftEdge:e,getRightEdge:o,getTopEdge:a,getBottomEdge:c,getSpectrum:u})}function l(t,n){g.value.set(n);var e=i(t);return s(t,e),r.onChange(t,e,n),xh.some(!0)}function f(e){var t=r.mouseIsDown.get();r.mouseIsDown.set(!1),t&&Oi(e,r,"thumb").each(function(t){var n=g.value.get();r.onChoose(e,t,n)})}function n(t,n){n.stop(),r.mouseIsDown.set(!0),r.onDragStart(t,i(t))}function d(t,n){n.stop(),r.onDragEnd(t,i(t)),f(t)}var m,g=r.model,p=g.manager;return{uid:r.uid,dom:r.dom,components:t,behaviours:fi(r.sliderBehaviours,[yC.config({mode:"special",focusIn:function(t){return Oi(t,r,"spectrum").map(yC.focusIn).map(mh(!0))}}),Lw.config({store:{mode:"manual",getValue:function(){return g.value.get()}}}),Ix.config({channels:(m={},m[Fw()]={onReceive:f},m)})]),events:an([ln(fT(),function(t,n){l(t,n.event().value())}),vy(function(t){var n=g.getInitialValue();g.value.set(n);var e=i(t);s(t,e);var o=u(t);r.onInit(t,e,o,g.value.get())}),ln(_b(),n),ln(Eb(),d),ln(Db(),n),ln(Fb(),d)]),apis:{resetToMin:function(t){p.setToMin(t,r)},resetToMax:function(t){p.setToMax(t,r)},changeValue:l,refresh:s},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,n){t.resetToMin(n)},resetToMax:function(t,n){t.resetToMax(n)},refresh:function(t,n){t.refresh(n)}}}),MT=[si("formBehaviours",[Lw])],FT=function(o,t){return{uid:o.uid,dom:o.dom,components:t,behaviours:fi(o.formBehaviours,[Lw.config({store:{mode:"manual",getValue:function(t){return P(Ei(t,o),function(t,o){return t().bind(function(t){return n=xS.getCurrent(t),e=new Error("Cannot find a current component to extract the value from for form part '"+o+"': "+Gn(t.element())),n.fold(function(){return Ch.error(e)},Ch.value);var n,e}).map(Lw.getValue)})},setValue:function(e,t){Ph(t,function(n,t){Oi(e,o,t).each(function(t){xS.getCurrent(t).each(function(t){Lw.setValue(t,n)})})})}}})]),apis:{getField:function(t,n){return Oi(t,o,n).bind(xS.getCurrent)}}}},IT={getField:$n(function(t,n,e){return t.getField(n,e)}),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),xi("form",Rl(t),n)},record:function(){return e}}),o=t(n),r=x(n.record(),function(t){return cS({name:t,pname:Rl(t)})});return Ii("form",MT,r,FT,o)}},RT=Xn("valid-input"),VT=Xn("invalid-input"),HT=Xn("validating-input"),NT="colorcustom.rgb.",PT=function(){return xS.config({find:xh.some})},zT=function(t){return xS.config({find:t.getOpt})},LT=function(t){return xS.config({find:function(n){return Tn(n.element(),t).bind(function(t){return n.getSystem().getByDom(t).toOption()})}})},jT={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},UT=tinymce.util.Tools.resolve("tinymce.Resource"),WT=Iv([Dt("preprocess",f),Dt("postprocess",f)]),GT=function(r,t){var i=ft("RepresentingConfigs.memento processors",WT,t);return Lw.config({store:{mode:"manual",getValue:function(t){var n=r.get(t),e=Lw.getValue(n);return i.postprocess(e)},setValue:function(t,n){var e=i.preprocess(n),o=r.get(t);Lw.setValue(o,e)}}})},XT=zl,YT=function(t){return Ll(t,In,Rn)},qT=function(t){return Lw.config({store:{mode:"memory",initialValue:t}})},KT=Xn("alloy-fake-before-tabstop"),JT=Xn("alloy-fake-after-tabstop"),$T=function(t){return Zc(t,["."+KT,"."+JT].join(","),mh(!1))},QT=function(t,n){var e=n.element();me(e,KT)?Wl(t,!0):me(e,JT)&&Wl(t,!1)},ZT=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Ul([KT]),t,Ul([JT])],behaviours:Uo([LT(1)])}},tE=!(Xt().browser.isIE()||Xt().browser.isEdge()),nE=window.Promise?window.Promise:(N_=Ql.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){v.setTimeout(t,1)},P_=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Ql.prototype["catch"]=function(t){return this.then(null,t)},Ql.prototype.then=function(e,o){var r=this;return new Ql(function(t,n){tf.call(r,new rf(e,o,t,n))})},Ql.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=Array.prototype.slice.call(1===t.length&&P_(t[0])?t[0]:t);return new Ql(function(o,r){function i(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void e.call(t,function(t){i(n,t)},r)}a[n]=t,0==--u&&o(a)}catch(c){r(c)}}if(0===a.length)return o([]);for(var u=a.length,t=0;t<a.length;t++)i(t,a[t])})},Ql.resolve=function(n){return n&&"object"==typeof n&&n.constructor===Ql?n:new Ql(function(t){t(n)})},Ql.reject=function(e){return new Ql(function(t,n){n(e)})},Ql.race=function(r){return new Ql(function(t,n){for(var e=0,o=r;e<o.length;e++)o[e].then(t,n)})},Ql),eE=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],oE=function eI(n){return function(t){return pf(t,n)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),rE=vf(function oI(t,n){return gf(t,[1,0,0,0,n=mf(255*n,-255,255),0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1])}),iE=vf(function rI(t,n){var e;return n=mf(n,-1,1),gf(t,[(e=(n*=100)<0?127+n/100*127:127*(e=0==(e=n%1)?eE[n]:eE[Math.floor(n)]*(1-e)+eE[Math.floor(n)+1]*e)+127)/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])}),uE=function iI(n){return function(t){return hf(t,n)}}([0,-1,0,-1,5,-1,0,-1,0]),aE=function uI(c){return function(n,e){return n.toCanvas().then(function(t){return function(t,n,e){for(var o=ql(t),r=new Array(256),i=0;i<r.length;i++)r[i]=c(i,e);var u=function a(t,n){for(var e=t.data,o=0;o<e.length;o+=4)e[o]=n[e[o]],e[o+1]=n[e[o+1]],e[o+2]=n[e[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(u,0,0),df(t,n)}(t,n.getType(),e)})}}(function(t,n){return 255*Math.pow(t/255,1-n)}),cE=Xn("toolbar.button.execute"),sE={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},lE=Xn("update-menu-text"),fE=Xn("update-menu-icon"),dE={type:"separator"},mE=function(t,o){return p(Hf(kh(t)?t.split(" "):t,o),function(t,n){var e=Nf(function(t){if(Vf(t))return t;var n=jh(t,"value").getOrThunk(function(){return Xn("generated-menu-item")});return Xh({value:n},t)}(n),o);return{menus:Xh(t.menus,e.menus),items:[e.item].concat(t.items),expansions:Xh(t.expansions,e.expansions)}},{menus:{},expansions:{},items:[]})},gE=mh([Dt("field1Name","field1"),Dt("field2Name","field2"),bo("onLockedChange"),go(["lockClass"]),Dt("locked",!1),jw("coupledFieldBehaviours",[xS,Lw])]),pE=mh([$f("field1","field2"),$f("field2","field1"),cS({factory:ok,schema:[ht("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Uo([BC.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),hE=Vi({name:"FormCoupledInputs",configFields:gE(),partFields:pE(),factory:function(o,t){return{uid:o.uid,dom:o.dom,components:t,behaviours:Uw(o.coupledFieldBehaviours,[xS.config({find:xh.some}),Lw.config({store:{mode:"manual",getValue:function(t){var n,e=Di(t,o,["field1","field2"]);return(n={})[o.field1Name]=Lw.getValue(e.field1()),n[o.field2Name]=Lw.getValue(e.field2()),n},setValue:function(t,n){var e=Di(t,o,["field1","field2"]);I(n,o.field1Name)&&Lw.setValue(e.field1(),n[o.field1Name]),I(n,o.field2Name)&&Lw.setValue(e.field2(),n[o.field2Name])}}})]),apis:{getField1:function(t){return Oi(t,o,"field1")},getField2:function(t){return Oi(t,o,"field2")},getLock:function(t){return Oi(t,o,"lock")}}}},apis:{getField1:function(t,n){return t.getField1(n)},getField2:function(t,n){return t.getField2(n)},getLock:function(t,n){return t.getLock(n)}}}),vE={undo:mh(Xn("undo")),redo:mh(Xn("redo")),zoom:mh(Xn("zoom")),back:mh(Xn("back")),apply:mh(Xn("apply")),swap:mh(Xn("swap")),transform:mh(Xn("transform")),tempTransform:mh(Xn("temp-transform")),transformApply:mh(Xn("transform-apply"))},bE=mh("save-state"),yE=mh("disable"),xE=mh("enable"),wE={formActionEvent:i_,saveState:bE,disable:yE,enable:xE},SE=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),CE=tinymce.util.Tools.resolve("tinymce.geom.Rect"),kE=tinymce.util.Tools.resolve("tinymce.util.Observable"),OE=tinymce.util.Tools.resolve("tinymce.util.Tools"),_E=tinymce.util.Tools.resolve("tinymce.util.VK"),TE=0,EE=function(s,e,l,o,r){function u(t,n,e,o){var r,i,u,a,c;r=n.x,i=n.y,u=n.w,a=n.h,r+=e*t.deltaX,i+=o*t.deltaY,(u+=e*t.deltaW)<20&&(u=20),(a+=o*t.deltaH)<20&&(a=20),c=s=CE.clamp({x:r,y:i,w:u,h:a},l,"move"===t.name),c=v(l,c),d.fire("updateRect",{rect:c}),f(c)}function n(n){function t(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),SE("#"+g+"-"+t,o).css({left:n.x,top:n.y,width:n.w,height:n.h})}OE.each(p,function(t){SE("#"+g+"-"+t.name,o).css({left:n.w*t.xMul+n.x,top:n.h*t.yMul+n.y})}),t("top",{x:e.x,y:e.y,w:e.w,h:n.y-e.y}),t("right",{x:n.x+n.w,y:n.y,w:e.w-n.x-n.w+e.x,h:n.h}),t("bottom",{x:e.x,y:n.y+n.h,w:e.w,h:e.h-n.y-n.h+e.y}),t("left",{x:e.x,y:n.y,w:n.x-e.x,h:n.h}),t("move",n)}function i(t){n(s=t)}function f(t){i(h(l,t))}var d,a,c,m="tox-",g="tox-crid-"+TE++,p=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}];c=["top","right","bottom","left"];var h=function(t,n){return{x:n.x+t.x,y:n.y+t.y,w:n.w,h:n.h}},v=function(t,n){return{x:n.x-t.x,y:n.y-t.y,w:n.w,h:n.h}};return function b(){SE('<div id="'+g+'" class="'+m+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),OE.each(c,function(t){SE("#"+g,o).append('<div id="'+g+"-"+t+'"class="'+m+'croprect-block" style="display: none" data-mce-bogus="all">')}),OE.each(p,function(t){SE("#"+g,o).append('<div id="'+g+"-"+t.name+'" class="'+m+"croprect-handle "+m+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')}),a=OE.map(p,function t(n){var e;return new id(g,{document:o.ownerDocument,handle:g+"-"+n.name,start:function(){e=s},drag:function(t){u(n,e,t.deltaX,t.deltaY)}})}),n(s),SE(o).on("focusin focusout",function(t){SE(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")}),SE(o).on("keydown",function(n){function t(t,n,e,o,r){t.stopPropagation(),t.preventDefault(),u(i,e,o,r)}var i;switch(OE.each(p,function(t){if(n.target.id===g+"-"+t.name)return i=t,!1}),n.keyCode){case _E.LEFT:t(n,0,s,-10,0);break;case _E.RIGHT:t(n,0,s,10,0);break;case _E.UP:t(n,0,s,0,-10);break;case _E.DOWN:t(n,0,s,0,10);break;case _E.ENTER:case _E.SPACEBAR:n.preventDefault(),r()}})}(),d=OE.extend({toggleVisibility:function y(t){var n;n=OE.map(p,function(t){return"#"+g+"-"+t.name}).concat(OE.map(c,function(t){return"#"+g+"-"+t})).join(","),t?SE(n,o).show():SE(n,o).hide()},setClampRect:function x(t){l=t,n(s)},setRect:i,getInnerRect:function(){return v(l,s)},setInnerRect:f,setViewPortRect:function w(t){e=t,n(s)},destroy:function t(){OE.each(a,function(t){t.destroy()}),a=[]}},kE)},BE=Ri({name:"HtmlSelect",configFields:[ht("options"),si("selectBehaviours",[kC,Lw]),Dt("selectClasses",[]),Dt("selectAttributes",{}),kt("data")],factory:function(e){var t=x(e.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),n=e.data.map(function(t){return W("initialValue",t)}).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:t,behaviours:fi(e.selectBehaviours,[kC.config({}),Lw.config({store:vh({mode:"manual",getValue:function(t){return Ee(t.element())},setValue:function(t,n){C(e.options,function(t){return t.value===n}).isSome()&&Be(t.element(),n)}},n)})])}}}),DE=Object.freeze({__proto__:null,events:function(t,n){var e=t.stream.streams.setup(t,n);return an([ln(t.event,e),by(function(){return n.cancel()})].concat(t.cancelEvent.map(function(t){return[ln(t,function(){return n.cancel()})]}).getOr([])))}}),AE=Object.freeze({__proto__:null,throttle:dd,init:function(t){return t.stream.streams.state(t)}}),ME=Wo({fields:[vt("stream",mt("mode",{throttle:[ht("delay"),Dt("stopEvent",!0),xo("streams",{setup:function(t,n){var e=t.stream,o=_a(t.onStream,e.delay);return n.setTimer(o),function(t,n){o.throttle(t,n),e.stopEvent&&n.stop()}},state:dd})]})),Dt("event","input"),kt("cancelEvent"),bo("onStream")],name:"streaming",active:DE,state:AE}),FE=function(t){gd(t,function(t,n){return t.setSelectionRange(n.length,n.length)})},IE=mh("alloy.typeahead.itemexecute"),RE=mh([kt("lazySink"),ht("fetch"),Dt("minChars",5),Dt("responseTime",1e3),ho("onOpen"),Dt("getHotspot",xh.some),Dt("getAnchorOverrides",mh({})),Dt("layouts",xh.none()),Dt("eventOrder",{}),Ht("model",{},[Dt("getDisplayText",function(t){return t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.value}),Dt("selectsOver",!0),Dt("populateFromBrowse",!0)]),ho("onSetValue"),vo("onExecute"),ho("onItemExecute"),Dt("inputClasses",[]),Dt("inputAttributes",{}),Dt("inputStyles",{}),Dt("matchWidth",!0),Dt("useMinWidth",!1),Dt("dismissOnBlur",!0),go(["openClass"]),kt("initialData"),si("typeaheadBehaviours",[kC,Lw,ME,yC,BC,R_]),Nt("previewing",function(){return Kv(!0)})].concat(g_()).concat(Es())),VE=mh([sS({schema:[mo()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(n,e){o.previewing.get()?n.getSystem().getByUid(o.uid).each(function(t){pd(o.model,t,e).fold(function(){return TS.dehighlight(n,e)},function(t){return t()})}):n.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&md(o.model,t,e)}),o.previewing.set(!1)},onExecute:function(t,n){return t.getSystem().getByUid(o.uid).toOption().map(function(t){return en(t,IE(),{item:n}),!0})},onHover:function(t,n){o.previewing.set(!1),t.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&md(o.model,t,n)})}}}})]),HE=Vi({name:"Typeahead",configFields:RE(),partFields:VE(),factory:function(r,t,n,i){function e(t,n,e){r.previewing.set(!1);var o=R_.getCoupled(t,"sandbox");Dw.isOpen(o)?xS.getCurrent(o).each(function(t){TS.getHighlighted(t).fold(function(){e(t)},function(){un(o,t.element(),"keydown",n)})}):ws(r,u(t),t,o,i,function(t){xS.getCurrent(t).each(e)},b_.HighlightFirst).get(Q)}var o=ls(r),u=function(e){return function(t){return t.map(function(t){var n=O(F(t.menus),function(t){return w(t.items,function(t){return"item"===t.type})});return Lw.getState(e).update(x(n,function(t){return t.data})),t})}},a=[kC.config({}),Lw.config({onSetValue:r.onSetValue,store:vh({mode:"dataset",getDataKey:function(t){return Ee(t.element())},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(t,n){Be(t.element(),r.model.getDisplayText(n))}},r.initialData.map(function(t){return W("initialValue",t)}).getOr({}))}),ME.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:function(t){var n=R_.getCoupled(t,"sandbox");if(kC.isFocused(t)&&Ee(t.element()).length>=r.minChars){var e=xS.getCurrent(n).bind(function(t){return TS.getHighlighted(t).map(Lw.getValue)});r.previewing.set(!0),ws(r,u(t),t,n,i,function(){xS.getCurrent(n).each(function(t){e.fold(function(){r.model.selectsOver&&TS.highlightFirst(t)},function(n){TS.highlightBy(t,function(t){return Lw.getValue(t).value===n.value}),TS.getHighlighted(t).orThunk(function(){return TS.highlightFirst(t),xh.none()})})})},b_.HighlightFirst).get(Q)}},cancelEvent:ty()}),yC.config({mode:"special",onDown:function(t,n){return e(t,n,TS.highlightFirst),xh.some(!0)},onEscape:function(t){var n=R_.getCoupled(t,"sandbox");return Dw.isOpen(n)?(Dw.close(n),xh.some(!0)):xh.none()},onUp:function(t,n){return e(t,n,TS.highlightLast),xh.some(!0)},onEnter:function(n){var t=R_.getCoupled(n,"sandbox"),e=Dw.isOpen(t);if(e&&!r.previewing.get())return xS.getCurrent(t).bind(function(t){return TS.getHighlighted(t)}).map(function(t){return en(n,IE(),{item:t}),!0});var o=Lw.getValue(n);return nn(n,ty()),r.onExecute(t,n,o),e&&Dw.close(t),xh.some(!0)}}),BC.config({toggleClass:r.markers.openClass,aria:{mode:"expanded"}}),R_.config({others:{sandbox:function(t){return _s(r,t,{onOpen:function(){return BC.on(t)},onClose:function(){return BC.off(t)}})}}}),zu("typeaheadevents",[xy(function(t){var n=Q;Cs(r,u(t),t,i,n,b_.HighlightFirst).get(Q)}),ln(IE(),function(t,n){var e=R_.getCoupled(t,"sandbox");md(r.model,t,n.event().item()),nn(t,ty()),r.onItemExecute(t,e,n.event().item(),Lw.getValue(t)),Dw.close(e),FE(t)})].concat(r.dismissOnBlur?[ln(Xb(),function(t){var n=R_.getCoupled(t,"sandbox");qo(n.element()).isNone()&&Dw.close(n)})]:[]))];return{uid:r.uid,dom:fs(Xh(r,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:vh(vh({},o),fi(r.typeaheadBehaviours,a)),eventOrder:r.eventOrder}}}),NE=function(i){return vh(vh({},i),{toCached:function(){return NE(i.toCached())},bindFuture:function(n){return NE(i.bind(function(t){return t.fold(function(t){return O_(Ch.error(t))},function(t){return n(t)})}))},bindResult:function(n){return NE(i.map(function(t){return t.bind(n)}))},mapResult:function(n){return NE(i.map(function(t){return t.map(n)}))},mapError:function(n){return NE(i.map(function(t){return t.mapError(n)}))},foldResult:function(n,e){return i.map(function(t){return t.fold(n,e)})},withTimeout:function(t,r){return NE(k_(function(n){var e=!1,o=v.setTimeout(function(){e=!0,n(Ch.error(r()))},t);i.get(function(t){e||(v.clearTimeout(o),n(t))})}))}})},PE=hd,zE={type:"separator"},LE=Xn("aria-invalid"),jE={bar:kd(function(t,n){return e=t,o=n.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:x(e.items,o.interpreter)};var e,o}),collection:kd(function(t,n){return Cd(t,n.shared.providers)}),alertbanner:kd(function(t,n){return e=t,o=n.shared.providers,n_.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[ok.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:ka(e.icon,o.icons),attributes:{title:o.translate(e.iconTooltip)}},action:function(t){en(t,i_,{name:"alert-banner",value:e.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(e.text)}}]});var e,o}),input:kd(function(t,n){return e=t,o=n.shared.providers,fd({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:xh.none(),maximized:e.maximized},o);var e,o}),textarea:kd(function(t,n){return e=t,o=n.shared.providers,fd({name:e.name,multiline:!0,label:e.label,inputMode:xh.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:xh.none(),maximized:e.maximized},o);var e,o}),label:kd(function(t,n){return e=t,o=n.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(e.label),classes:["tox-label"]}},i=x(e.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:Uo([PT(),wC.config({}),YT(xh.none()),yC.config({mode:"acyclic"})])};var e,o,r,i}),iframe:(z_=function(t,n){return Gl(t,n.shared.providers)},function(t,n,e){var o=Xh(n,{source:"dynamic"});return kd(z_)(t,o,e)}),button:kd(function(t,n){return Jf(t,n.shared.providers)}),checkbox:kd(function(t,n){return function(n,e){function t(t){return t.element().dom().click(),xh.some(!0)}function o(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:ka("checked"===t?"selected":"unselected",e.icons)}}}var r=Lw.config({store:{mode:"manual",getValue:function(t){return t.element().dom().checked},setValue:function(t,n){t.element().dom().checked=n}}}),i=m_.parts().field({factory:{sketch:f},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Uo([PT(),qk.config({disabled:n.disabled}),A_.config({}),kC.config({}),r,yC.config({mode:"special",onEnter:t,onSpace:t,stopSpaceKeyup:!0}),zu("checkbox-events",[ln(zb(),function(t){en(t,e_,{name:n.name})})])])}),u=m_.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:e.translate(n.label)},behaviours:Uo([K_.config({})])}),a=Sa({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]});return m_.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[i,a.asSpec(),u],fieldBehaviours:Uo([qk.config({disabled:n.disabled,disableClass:"tox-checkbox--disabled",onDisabled:function(t){m_.getField(t).each(qk.disable)},onEnabled:function(t){m_.getField(t).each(qk.enable)}})])})}(t,n.shared.providers)}),colorinput:kd(function(t,n){return Bs(t,n.shared,n.colorinput)}),colorpicker:kd(function(){function t(t){return"tox-"+t}var r=Sa(Nl(Pl,t).sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){en(t,i_,{name:"hex-valid",value:!0})},onInvalidHex:function(t){en(t,i_,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:Uo([Lw.config({store:{mode:"manual",getValue:function(t){var n=r.get(t);return xS.getCurrent(n).bind(function(t){return Lw.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,n){var e=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),o=r.get(t);xS.getCurrent(o).fold(function(){v.console.log("Can not find form")},function(t){Lw.setValue(t,{hex:xh.from(e[1]).getOr("")}),IT.getField(t,"hex").each(function(t){nn(t,Pb())})})}}}),PT()])}}),dropzone:kd(function(t,n){return jl(t,n.shared.providers)}),grid:kd(function(t,n){return e=t,o=n.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:x(e.items,o.interpreter)};var e,o}),selectbox:kd(function(t,n){return e=t,o=n.shared.providers,r=x(e.items,function(t){return{text:o.translate(t.text),value:t.value}}),i=e.label.map(function(t){return ys(t,o)}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:N([[m_.parts().field({dom:{},selectAttributes:{size:e.size},options:r,factory:BE,selectBehaviours:Uo([qk.config({disabled:e.disabled}),A_.config({}),zu("selectbox-change",[ln(zb(),function(t){en(t,e_,{name:e.name})})])])})],(1<e.size?xh.none():xh.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:ka("chevron-down",o.icons)}})).toArray()])},m_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:N([i.toArray(),[u]]),fieldBehaviours:Uo([qk.config({disabled:e.disabled,onDisabled:function(t){m_.getField(t).each(qk.disable)},onEnabled:function(t){m_.getField(t).each(qk.enable)}})])});var e,o,r,i,u}),sizeinput:kd(function(t,n){return ed(t,n.shared.providers)}),urlinput:kd(function(t,n){return Sd(t,n,n.urlinput)}),customeditor:kd(function(e){var o=Kv(xh.none()),n=Sa({dom:{tag:e.tag}}),r=Kv(xh.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Uo([zu("editor-foo-events",[vy(function(t){n.getOpt(t).each(function(n){var t;(t=e,Object.prototype.hasOwnProperty.call(t,"init")?e.init(n.element().dom()):UT.load(e.scriptId,e.scriptUrl).then(function(t){return t(n.element().dom(),e.settings)})).then(function(n){r.get().each(function(t){n.setValue(t)}),r.set(xh.none()),o.set(xh.some(n))})})})]),Lw.config({store:{mode:"manual",getValue:function(){return o.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,n){o.get().fold(function(){r.set(xh.some(n))},function(t){return t.setValue(n)})}}}),PT()]),components:[n.asSpec()]}}),htmlpanel:kd(function(t){return"presentation"===t.presets?n_.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):n_.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Uo([A_.config({}),kC.config({})])})}),imagetools:kd(function(t,n){return ld(t,n.shared.providers)}),table:kd(function(t,n){return function(t,n){function e(t){return{dom:{tag:"th",innerHtml:n.translate(t)}}}function o(t){return{dom:{tag:"td",innerHtml:n.translate(t)}}}function r(t){return{dom:{tag:"tr"},components:x(t,o)}}var i,u;return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(u=t.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:x(u,e)}]}),(i=t.cells,{dom:{tag:"tbody"},components:x(i,r)})],behaviours:Uo([A_.config({}),kC.config({})])}}(t,n.shared.providers)}),panel:kd(function(t,n){return o=n,{dom:{tag:"div",classes:(e=t).classes},components:x(e.items,o.shared.interpreter)};var e,o})},UE={field:function(t,n){return n}},WE=function(n,e,o){return jh(jE,e.type).fold(function(){return v.console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e},function(t){return t(n,e,o)})},GE={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},XE=function(t,n){function e(){return $v.fromDom(t.getBody())}var o,r,i,u,a,c,s,l=ya(t)||!ek(t);return{inlineDialog:(c=e,s=n,l?function(){return{anchor:"node",root:c(),node:xh.from(c()),bubble:ar(-12,-12,GE),layouts:{onRtl:function(){return[ua]},onLtr:function(){return[aa]}},overrides:{maxHeightFunction:Gx()}}}:function(){return{anchor:"hotspot",hotspot:s(),bubble:ar(-12,12,GE),layouts:{onRtl:function(){return[Eo]},onLtr:function(){return[Bo]}},overrides:{maxHeightFunction:Gx()}}}),banner:(u=e,a=n,l?function(){return{anchor:"node",root:u(),node:xh.from(u()),layouts:{onRtl:function(){return[qC]},onLtr:function(){return[qC]}}}}:function(){return{anchor:"hotspot",hotspot:a(),layouts:{onRtl:function(){return[Ex]},onLtr:function(){return[Ex]}}}}),cursor:(r=t,i=e,function(){return{anchor:"selection",root:i(),getSelection:function(){var t=r.selection.getRng();return xh.some(ow.range($v.fromDom(t.startContainer),t.startOffset,$v.fromDom(t.endContainer),t.endOffset))}}}),node:(o=e,function(t){return{anchor:"node",root:o(),node:t}})}},YE=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],qE=function(t){return S(t,function(t,n){if(Uh(n,"items")){var e=qE(n.items);return{customFormats:t.customFormats.concat(e.customFormats),formats:t.formats.concat([{title:n.title,items:e.formats}])}}if(Uh(n,"inline")||Uh(n,"block")||Uh(n,"selector")){var o="custom-"+n.title.toLowerCase();return{customFormats:t.customFormats.concat([{name:o,format:n}]),formats:t.formats.concat([{title:n.title,format:o,icon:n.icon}])}}return vh(vh({},t),{formats:t.formats.concat(n)})},{customFormats:[],formats:[]})},KE=OE.trim,JE=Dd("true"),$E=Dd("false"),QE=function(t){return function(t){for(;t=t.parentNode;){var n=t.contentEditable;if(n&&"inherit"!==n)return JE(t)}return!1}(t)&&!$E(t)},ZE=function(t){var n=Nd(t);return w(x(w(n,Rd),Vd).concat(x(w(n,Fd),Hd)),Pd)},tB="tinymce-url-history",nB=Object.prototype.hasOwnProperty,eB=mh(function(t,n){var e,o;e=t,o=Math.floor(n),xe(e,"max-width",Zy.max(e,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),oB="contexttoolbar-hide",rB=mh([ht("items"),go(["itemSelector"]),si("tgroupBehaviours",[yC])]),iB=mh([fS({name:"items",unit:"item"})]),uB=Vi({name:"ToolbarGroup",configFields:rB(),partFields:iB(),factory:function(t,n){return{uid:t.uid,dom:t.dom,
components:n,behaviours:fi(t.tgroupBehaviours,[yC.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),aB=mh([ht("dom"),Dt("shell",!0),si("toolbarBehaviours",[wC])]),cB=mh([lS({name:"groups",overrides:function(){return{behaviours:Uo([wC.config({})])}}})]),sB=Vi({name:"Toolbar",configFields:aB(),partFields:cB(),factory:function(n,t){var e=function(t){return n.shell?xh.some(t):Oi(t,n,"groups")},o=n.shell?{behaviours:[wC.config({})],components:[]}:{behaviours:[],components:t};return{uid:n.uid,dom:n.dom,components:o.components,behaviours:fi(n.toolbarBehaviours,o.behaviours),apis:{setGroups:function(t,n){e(t).fold(function(){throw v.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){wC.set(t,n)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)}}}),lB=vn("within","extra","withinWidth"),fB=mh([si("splitToolbarBehaviours",[R_]),Nt("builtGroups",function(){return Kv([])})]),dB=mh([go(["overflowToggledClass"]),Et("getOverflowBounds"),ht("lazySink"),Nt("overflowGroups",function(){return Kv([])})].concat(fB())),mB=mh([cS({factory:sB,schema:aB(),name:"primary"}),sS({schema:aB(),name:"overflow"}),sS({name:"overflow-button"}),sS({name:"overflow-group"})]),gB=mh([go(["toggledClass"]),ht("lazySink"),xt("fetch"),Et("getBounds"),Bt("fireDismissalEventInstead",[Dt("event",cy())]),dr()]),pB=mh([sS({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Uo([BC.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),sS({factory:sB,schema:aB(),name:"toolbar",overrides:function(n){return{toolbarBehaviours:Uo([yC.config({mode:"cyclic",onEscape:function(t){return Oi(t,n,"button").each(kC.focus),xh.none()}})])}}})]),hB=Vi({name:"FloatingToolbarButton",factory:function(u,t,a,n){return vh(vh({},ok.sketch(vh(vh({},n.button()),{action:function(t){om(t,n)},buttonBehaviours:Uw({dump:n.button().buttonBehaviours},[R_.config({others:{toolbarSandbox:function(t){return o=t,e=a,r=u,{dom:{tag:"div",attributes:{id:(i=co()).id()}},behaviours:Uo([yC.config({mode:"special",onEscape:function(t){return Dw.close(t),xh.some(!0)}}),Dw.config({onOpen:function(t,n){r.fetch().get(function(t){im(o,n,r,e.layouts,t),i.link(o.element()),yC.focusIn(n)})},onClose:function(){BC.off(o),kC.focus(o),i.unlink(o.element())},isPartOf:function(t,n,e){return ix(n,e)||ix(o,e)},getAttachPoint:function(){return r.lazySink(o).getOrDie()}}),Ix.config({channels:vh(vh({},ei(vh({isExtraPart:mh(!1)},r.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),oi({isExtraPart:mh(!1),doReposition:function(){Dw.getState(R_.getCoupled(o,"toolbarSandbox")).each(function(t){rm(o,t,r,e.layouts)})}}))})])};var o,e,r,i}}})])}))),{apis:{setGroups:function(n,e){Dw.getState(R_.getCoupled(n,"toolbarSandbox")).each(function(t){im(n,t,u,a.layouts,e)})},reposition:function(n){Dw.getState(R_.getCoupled(n,"toolbarSandbox")).each(function(t){rm(n,t,u,a.layouts)})},toggle:function(t){om(t,n)},getToolbar:function(t){return Dw.getState(R_.getCoupled(t,"toolbarSandbox"))}}})},configFields:gB(),partFields:pB(),apis:{setGroups:function(t,n,e){t.setGroups(n,e)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getToolbar:function(t,n){return t.getToolbar(n)}}}),vB=Vi({name:"SplitFloatingToolbar",configFields:dB(),partFields:mB(),factory:function(e,t,n,o){var r=Sa(hB.sketch({fetch:function(){return k_(function(t){t(um(e.overflowGroups.get()))})},layouts:{onLtr:function(){return[Bo]},onRtl:function(){return[Eo]},onBottomLtr:function(){return[Ao]},onBottomRtl:function(){return[Do]}},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:fi(e.splitToolbarBehaviours,[R_.config({others:{overflowGroup:function(){return uB.sketch(vh(vh({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(t,n){e.builtGroups.set(x(n,t.getSystem().build)),am(t,r,e)},refresh:function(t){return am(t,r,e)},toggle:function(t){r.getOpt(t).each(function(t){hB.toggle(t)})},reposition:function(t){r.getOpt(t).each(function(t){hB.reposition(t)})},getOverflow:function(t){return r.getOpt(t).bind(function(t){return hB.getToolbar(t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getOverflow:function(t,n){return t.getOverflow(n)}}}),bB=Object.freeze({__proto__:null,refresh:function(t,n,e){if(e.isExpanded()){_e(t.element(),sm(n));var o=lm(n,t.element());xe(t.element(),sm(n),o)}},grow:function(t,n,e){e.isExpanded()||vm(t,n,e)},shrink:function(t,n,e){e.isExpanded()&&hm(t,n,e)},immediateShrink:function(t,n,e){e.isExpanded()&&gm(t,n,e,xh.none())},hasGrown:function(t,n,e){return e.isExpanded()},hasShrunk:function(t,n,e){return e.isCollapsed()},isGrowing:bm,isShrinking:ym,isTransitioning:function(t,n){return!0===bm(t,n)||!0===ym(t,n)},toggleGrow:function(t,n,e){(e.isExpanded()?hm:vm)(t,n,e)},disableTransitions:fm}),yB=Object.freeze({__proto__:null,exhibit:function(t,n){return Zn(n.expanded?{classes:[n.openClass],styles:{}}:{classes:[n.closedClass],styles:W(n.dimension.property,"0px")})},events:function(e,o){return an([hn(jb(),function(t,n){n.event().raw().propertyName===e.dimension.property&&(fm(t,e),o.isExpanded()&&_e(t.element(),e.dimension.property),(o.isExpanded()?e.onGrown:e.onShrunk)(t))})])}}),xB=Wo({fields:[ht("closedClass"),ht("openClass"),ht("shrinkingClass"),ht("growingClass"),kt("getAnimationRoot"),ho("onShrunk"),ho("onStartShrink"),ho("onGrown"),ho("onStartGrow"),Dt("expanded",!1),vt("dimension",mt("property",{width:[xo("property","width"),xo("getDimension",function(t){return je(t)+"px"})],height:[xo("property","height"),xo("getDimension",function(t){return Ne(t)+"px"})]}))],name:"sliding",active:yB,apis:bB,state:Object.freeze({__proto__:null,init:function(t){var n=Kv(t.expanded);return Py({isExpanded:function(){return!0===n.get()},isCollapsed:function(){return!1===n.get()},setCollapsed:m(n.set,!1),setExpanded:m(n.set,!0),readState:function(){return"expanded: "+n.get()}})}})}),wB=mh([go(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ho("onOpened"),ho("onClosed")].concat(fB())),SB=mh([cS({factory:sB,schema:aB(),name:"primary"}),cS({factory:sB,schema:aB(),name:"overflow",overrides:function(n){return{toolbarBehaviours:Uo([xB.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:function(t){Oi(t,n,"overflow-button").each(function(t){BC.off(t),kC.focus(t)}),n.onClosed(t)},onGrown:function(t){yC.focusIn(t),n.onOpened(t)},onStartGrow:function(t){Oi(t,n,"overflow-button").each(BC.on)}}),yC.config({mode:"acyclic",onEscape:function(t){return Oi(t,n,"overflow-button").each(kC.focus),xh.some(!0)}})])}}}),sS({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Uo([BC.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),sS({name:"overflow-group"})]),CB=function(t,n){Oi(t,n,"overflow").each(function(e){em(t,n,function(t){var n=x(t,function(t){return qy(t)});sB.setGroups(e,n)}),Oi(t,n,"overflow-button").each(function(t){xB.hasGrown(e)&&BC.on(t)}),xB.refresh(e)})},kB=Vi({name:"SplitSlidingToolbar",configFields:wB(),partFields:SB(),factory:function(o,t,n,e){var r="alloy.toolbar.toggle";return{uid:o.uid,dom:o.dom,components:t,behaviours:fi(o.splitToolbarBehaviours,[R_.config({others:{overflowGroup:function(t){return uB.sketch(vh(vh({},e["overflow-group"]()),{items:[ok.sketch(vh(vh({},e["overflow-button"]()),{action:function(){nn(t,r)}}))]}))}}}),zu("toolbar-toggle-events",[ln(r,function(n){Oi(n,o,"overflow").each(function(t){CB(n,o),xB.toggleGrow(t)})})])]),apis:{setGroups:function(t,n){var e;e=x(n,t.getSystem().build),o.builtGroups.set(e),CB(t,o)},refresh:function(t){return CB(t,o)},toggle:function(t){var n,e;Oi(n=t,e=o,"overflow").each(function(t){CB(n,e),xB.toggleGrow(t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},toggle:function(t,n){t.toggle(n)}}}),OB=mh(Xn("toolbar-height-change")),_B="silver.readonly",TB=Iv([(L_="readonly",vt(L_,Gv))]),EB=[Rt("disabled",!1),Tt("tooltip"),Tt("icon"),Tt("text"),Vt("onSetup",function(){return Q})],BB=Iv([bt("type"),xt("onAction")].concat(EB)),DB=[Tt("text"),Tt("tooltip"),Tt("icon"),xt("fetch"),Vt("onSetup",function(){return Q})],AB=Iv(y([bt("type")],DB)),MB=Iv([bt("type"),Tt("tooltip"),Tt("icon"),Tt("text"),Et("select"),xt("fetch"),Vt("onSetup",function(){return Q}),It("presets","normal",["normal","color","listpreview"]),Dt("columns",1),xt("onAction"),xt("onItemAction")]),FB=[Rt("active",!1)].concat(EB),IB=Iv(FB.concat([bt("type"),xt("onAction")])),RB=Iv([bt("type"),vt("items",(j_=[ut([bt("name"),Ct("items",Wv)]),Wv],{extract:function(t,n,e){for(var o=[],r=0,i=j_;r<i.length;r++){var u=i[r].extract(t,n,e);if(u.stype===fh.Value)return u;o.push(u)}return Mv(o)},toString:function(){return"oneOf("+x(j_,function(t){return t.toString()}).join(", ")+")"}}))].concat(EB)),VB=[Vt("predicate",function(){return!1}),It("scope","node",["node","editor"]),It("position","selection",["node","selection","line"])],HB=EB.concat([Dt("type","contextformbutton"),Dt("primary",!1),xt("onAction"),Nt("original",f)]),NB=FB.concat([Dt("type","contextformbutton"),Dt("primary",!1),xt("onAction"),Nt("original",f)]),PB=EB.concat([Dt("type","contextformbutton")]),zB=FB.concat([Dt("type","contextformtogglebutton")]),LB=mt("type",{contextformbutton:HB,contextformtogglebutton:NB}),jB=Iv([Dt("type","contextform"),Vt("initValue",function(){return""}),Tt("label"),Ct("commands",LB),Ot("launch",mt("type",{contextformbutton:PB,contextformtogglebutton:zB}))].concat(VB)),UB=Iv([Dt("type","contexttoolbar"),bt("items")].concat(VB)),WB=Object.freeze({__proto__:null,getState:function(t,n,e){return e}}),GB=Object.freeze({__proto__:null,events:function(r,i){function u(e,o){r.updateState.each(function(t){var n=t(e,o);i.set(n)}),r.renderComponents.each(function(t){var n=x(t(o,i.get()),e.getSystem().build);Gr(e,n)})}return an([ln(qb(),function(t,n){var e=n,o=r.channel;Fh(e.channels(),o)&&u(t,e.data())}),vy(function(n){r.initialData.each(function(t){u(n,t)})})])}}),XB=Object.freeze({__proto__:null,init:function(){var n=Kv(xh.none());return{readState:function(){return n.get().fold(function(){return"none"},function(t){return t})},get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(xh.none())}}}}),YB=Wo({fields:[ht("channel"),kt("renderComponents"),kt("updateState"),kt("initialData")],name:"reflecting",active:GB,apis:WB,state:XB}),qB=mh([ht("toggleClass"),ht("fetch"),bo("onExecute"),Dt("getHotspot",xh.some),Dt("getAnchorOverrides",mh({})),dr(),bo("onItemExecute"),kt("lazySink"),ht("dom"),ho("onOpen"),si("splitDropdownBehaviours",[R_,yC,kC]),Dt("matchWidth",!1),Dt("useMinWidth",!1),Dt("eventOrder",{}),kt("role")].concat(Es())),KB=cS({factory:ok,schema:[ht("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Uo([kC.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(on)},buttonBehaviours:Uo([BC.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])}}}),JB=cS({factory:ok,schema:[ht("dom")],name:"button",defaults:function(){return{buttonBehaviours:Uo([kC.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(e.uid).each(function(t){e.onExecute(t,n)})}}}}),$B=mh([KB,JB,lS({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[ht("text")],name:"aria-descriptor"}),sS({schema:[mo()],name:"menu",defaults:function(o){return{onExecute:function(n,e){n.getSystem().getByUid(o.uid).each(function(t){o.onItemExecute(t,n,e)})}}}}),H_()]),QB=Vi({name:"SplitDropdown",configFields:qB(),partFields:$B(),factory:function(o,t,n,e){function r(t){xS.getCurrent(t).each(function(t){TS.highlightFirst(t),yC.focusIn(t)})}function i(t){Cs(o,function(t){return t},t,e,r,b_.HighlightFirst).get(Q)}function u(t){return on(_i(t,o,"button")),xh.some(!0)}var a=vh(vh({},an([vy(function(e){Oi(e,o,"aria-descriptor").each(function(t){var n=Xn("aria");Pn(t.element(),"id",n),Pn(e.element(),"aria-describedby",n)})})])),Ku(xh.some(i))),c={repositionMenus:function(t){BC.isOn(t)&&Ts(t)}};return{uid:o.uid,dom:o.dom,components:t,apis:c,eventOrder:vh(vh({},o.eventOrder),{"alloy.execute":["disabling","toggling","alloy.base.behaviour"]}),events:a,behaviours:fi(o.splitDropdownBehaviours,[R_.config({others:{sandbox:function(t){var n=_i(t,o,"arrow");return _s(o,t,{onOpen:function(){BC.on(n),BC.on(t)},onClose:function(){BC.off(n),BC.off(t)}})}}}),yC.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t){return i(t),xh.some(!0)}}),kC.config({}),BC.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:o.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,n){return t.repositionMenus(n)}}}),ZB=Xn("focus-button"),tD=["checklist","ordered-list"],nD=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],eD=function(t,n,e){return Hm(t,{toolbarButtonBehaviours:[].concat(0<e.length?[zu("toolbarButtonWith",e)]:[]),getApi:Fm,onSetup:t.onSetup},n)},oD=function(t,n,e){return Xh(Hm(t,{toolbarButtonBehaviours:[wC.config({}),BC.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<e.length?[zu("toolbarToggleButtonWith",e)]:[]),getApi:Im,onSetup:t.onSetup},n))},rD=function(t,n,e){var o,r,i,u,a=n.label.fold(function(){return{}},function(t){return{"aria-label":t}}),c=Sa(p_.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:n.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Uo([yC.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map(function(t){return on(t),!0})},onLeft:function(t,n){return n.cut(),xh.none()},onRight:function(t,n){return n.cut(),xh.none()}})])})),s=(o=c,r=n.commands,i=e.shared.providers,u=x(r,function(t){return Sa(zm(o,t,i))}),{asSpecs:function(){return x(u,function(t){return t.asSpec()})},findPrimary:function(e){return A(r,function(t,n){return t.primary?xh.from(u[n]).bind(function(t){return t.getOpt(e)}).filter(b(qk.isDisabled)):xh.none()})}});return Bm({type:t,uid:Xn("context-toolbar"),initGroups:[{title:xh.none(),items:[c.asSpec()]},{title:xh.none(),items:s.asSpecs()}],onEscape:xh.none,cyclicKeying:!0})},iD=function(n,t){function e(t){return Jt(t,o)}var o=$v.fromDom(t.getBody()),r=$v.fromDom(t.selection.getNode());return kb(r,o)?xh.none():jm(r,n.inNodeScope).orThunk(function(){return jm(r,n.inEditorScope).orThunk(function(){return $t(r,function(t){return e(t)?xh.none():jm(t,n.inNodeScope)},e)})})},uD=function(e,r){function o(n,e){var o=lt(st("ContextForm",jB,e));(t[n]=o).launch.map(function(t){c["form:"+n]=vh(vh({},e.launch),{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?a.push(o):u.push(o),s[n]=o}function i(n,e){st("ContextToolbar",UB,e).each(function(t){"editor"===e.scope?a.push(t):u.push(t),s[n]=t})}var t={},u=[],a=[],c={},s={},n=Hh(e);return Ih(n,function(t){var n=e[t];"contextform"===n.type?o(t,n):"contexttoolbar"===n.type&&i(t,n)}),{forms:t,inNodeScope:u,inEditorScope:a,lookupTable:s,formNavigators:c}},aD=Xn("forward-slide"),cD=Xn("backward-slide"),sD=Xn("change-slide-event"),lD="tox-pop--resizing";(W_=U_=U_||{})[W_.SemiColon=0]="SemiColon",W_[W_.Space=1]="Space";var fD,dD,mD,gD,pD,hD=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],vD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],bD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},yD=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],xD={button:og(Dm,function(t,n){return e=t,o=n.backstage.shared.providers,eD(e,o,[]);var e,o}),togglebutton:og(Mm,function(t,n){return e=t,o=n.backstage.shared.providers,oD(e,o,[]);var e,o}),menubutton:og(Am,function(t,n){return Lf(t,"tox-tbtn",n.backstage,xh.none())}),splitbutton:og(function(t){return st("SplitButton",MB,t)},function(t,n){return Nm(t,n.backstage.shared)}),grouptoolbarbutton:og(function(t){return st("GroupToolbarButton",RB,t)},function(t,n,e){var o,r,i,u,a,c,s=e.ui.registry.getAll().buttons,l=((o={})[Jx]=ek(e)?ax.TopToBottom:ax.BottomToTop,o);switch(va(e)){case DS.floating:return r=t,i=n.backstage,u=function(t){return SD(e,{buttons:s,toolbar:t,allowToolbarGroups:!1},n,xh.none())},a=l,c=i.shared,hB.sketch({lazySink:c.getSink,fetch:function(){return k_(function(t){t(x(u(r.items),km))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Vm(r.icon,r.text,r.tooltip,xh.none(),xh.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:a}}}});default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,n){return e=t,o=n.backstage,Xm(e,o,eg(e,vh({type:"advanced"},o.styleselect)));var e,o},fontsizeSelectButton:function(t,n){return Xm(e=t,n.backstage,Qm(e));var e},fontSelectButton:function(t,n){return Xm(e=t,n.backstage,Jm(e));var e},formatButton:function(t,n){return Xm(e=t,n.backstage,ng(e));var e},alignMenuButton:function(t,n){return Xm(e=t,n.backstage,qm(e));var e}},wD={styleselect:xD.styleSelectButton,fontsizeselect:xD.fontsizeSelectButton,fontselect:xD.fontSelectButton,formatselect:xD.formatButton,align:xD.alignMenuButton},SD=function(e,o,r,i){return w(x(rg(o),function(t){var n=O(t.items,function(t){return 0===t.trim().length?[]:ig(e,o.buttons,t,o.allowToolbarGroups,r,i).toArray()});return{title:xh.from(e.translate(t.name)),items:n}}),function(t){return 0<t.items.length})},CD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},kD={maxHeightFunction:Gx(),maxWidthFunction:eB()},OD={onLtr:function(){return[Tx,Ex,Do,Eo,Ao,Bo,qC,KC,ua,ra,aa,ia]},onRtl:function(){return[Tx,Ex,Ao,Bo,Do,Eo,qC,KC,aa,ia,ua,ra]}},_D={onLtr:function(){return[Ex,Eo,Bo,Do,Ao,Tx,qC,KC,ua,ra,aa,ia]},onRtl:function(){return[Ex,Bo,Eo,Ao,Do,Tx,qC,KC,aa,ia,ua,ra]}},TD=function(c,t,e,s){function l(){return Lm(c)}function u(){if(g()&&s.backstage.isContextMenuOpen())return!0;var t,n,e,o,r,i,u=(t=v.get().map(function(t){return t.getBoundingClientRect()}).getOrThunk(function(){return c.selection.getRng().getBoundingClientRect()}),n=c.inline?Xe().top():Ze($v.fromDom(c.getBody())).y(),{y:t.top+n,bottom:t.bottom+n}),a=l();return e=u.y,o=u.bottom,r=a.y(),i=a.bottom(),!(Math.max(e,r)<=Math.min(o,i))}function n(){YC.hide(p)}function o(){h.get().each(function(t){var n=p.element();_e(n,"display"),u()?xe(n,"display","none"):ww.positionWithinBounds(e,t,p,xh.some(l()))})}function a(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Uo([yC.config({mode:"acyclic"}),zu("pop-dialog-wrap-events",[vy(function(t){c.shortcuts.add("ctrl+F9","focus statusbar",function(){return yC.focusIn(t)})}),by(function(){c.shortcuts.remove("ctrl+F9")})])])}}function f(t,n){var e,o,r="node"===t?s.backstage.shared.anchors.node(n):s.backstage.shared.anchors.cursor();return Xh(r,(e=t,o=g(),"line"===e?{bubble:ar(12,0,CD),layouts:{onLtr:function(){return[Mo]},onRtl:function(){return[Fo]}},overrides:kD}:{bubble:ar(0,12,CD),layouts:o?_D:OD,overrides:kD}))}function r(){var t=y();iD(t,c).fold(function(){h.set(xh.none()),YC.hide(p)},function(t){w(t.toolbarApi,xh.some(t.elem.dom()))})}function i(t){S(),b.set(t)}var d,m,g=Xt().deviceType.isTouch,p=Yy((d={sink:e,onEscape:function(){return c.focus(),xh.some(!0)}},m=Kv([]),YC.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){m.set([]),YC.getContent(t).each(function(t){_e(t.element(),"visibility")}),de(t.element(),lD),_e(t.element(),"width")},inlineBehaviours:Uo([zu("context-toolbar-events",[hn(jb(),function(t){YC.getContent(t).each(function(){}),de(t.element(),lD),_e(t.element(),"width")}),ln(sD,function(n,e){_e(n.element(),"width");var t=je(n.element());YC.setContent(n,e.event().contents()),le(n.element(),lD);var o=je(n.element());xe(n.element(),"width",t+"px"),YC.getContent(n).each(function(t){e.event().focus().bind(function(t){return Xo(t),qo(n.element())}).orThunk(function(){return yC.focusIn(t),Yo()})}),JC.setTimeout(function(){xe(n.element(),"width",o+"px")},0)}),ln(aD,function(t,n){YC.getContent(t).each(function(t){m.set(m.get().concat([{bar:t,focus:Yo()}]))}),en(t,sD,{contents:n.event().forwardContents(),focus:xh.none()})}),ln(cD,function(n){D(m.get()).each(function(t){m.set(m.get().slice(0,m.get().length-1)),en(n,sD,{contents:qy(t.bar),focus:t.focus})})})]),yC.config({mode:"special",onEscape:function(t){return D(m.get()).fold(function(){return d.onEscape()},function(){return nn(t,cD),xh.some(!0)})}})]),lazySink:function(){return Ch.value(d.sink)}}))),h=Kv(xh.none()),v=Kv(xh.none()),b=Kv(null),y=R(function(){return uD(t,function(t){var n=x(t);en(p,aD,{forwardContents:a(n)})})}),x=function(t){var n,e,o=c.ui.registry.getAll().buttons,r=va(c)===DS.scrolling?DS.scrolling:DS["default"],i=y();return"contexttoolbar"===t.type?(n=vh(vh({},o),i.formNavigators),e=SD(c,{buttons:n,toolbar:t.items,allowToolbarGroups:!1},s,xh.some(["form:"])),Bm({type:r,uid:Xn("context-toolbar"),initGroups:e,onEscape:xh.none,cyclicKeying:!0})):rD(r,t,s.backstage)};c.on("contexttoolbar-show",function(n){var t=y();jh(t.lookupTable,n.toolbarKey).each(function(t){w(t,n.target===c?xh.none():xh.some(n)),YC.getContent(p).each(yC.focusIn)})});var w=function(t,n){if(S(),!g()||!s.backstage.isContextMenuOpen()){var e=x(t),o=n.map($v.fromDom),r=f(t.position,o);h.set(xh.some(r)),v.set(n);var i=p.element();_e(i,"display"),YC.showWithinBounds(p,r,a(e),function(){return xh.some(l())}),u()&&xe(i,"display","none")}},S=function(){var t=b.get();null!==t&&(JC.clearTimeout(t),b.set(null))};c.on("init",function(){c.on(oB,n),c.on("ScrollContent ScrollWindow longpress",o),c.on("click keyup SetContent ObjectResized ResizeEditor",function(){i(JC.setEditorTimeout(c,r,0))}),c.on("focusout",function(){JC.setEditorTimeout(c,function(){qo(e.element()).isNone()&&qo(p.element()).isNone()&&(h.set(xh.none()),YC.hide(p))},0)}),c.on("SwitchMode",function(){c.readonly&&(h.set(xh.none()),YC.hide(p))}),c.on("NodeChange",function(){qo(p.element()).fold(function(){i(JC.setEditorTimeout(c,r,0))},function(){})})})},ED=function(t,o,r){function n(n,e){Ih([o,r],function(t){t.broadcastEvent(n,e)})}function e(n,e){Ih([o,r],function(t){t.broadcastOn([n],e)})}function i(t){return e(Aw(),{target:t.target()})}function u(t){return e(Aw(),{target:$v.fromDom(t.target)})}function a(t){0===t.button&&e(Fw(),{target:$v.fromDom(t.target)})}function c(t){return n(ry(),YO(t))}function s(t){e(Mw(),{}),n(iy(),YO(t))}function l(){return e(Mw(),{})}var f=$c($v.fromDom(v.document),"touchstart",i),d=$c($v.fromDom(v.document),"touchmove",function(t){return n(ey(),t)}),m=$c($v.fromDom(v.document),"touchend",function(t){return n(oy(),t)}),g=$c($v.fromDom(v.document),"mousedown",i),p=$c($v.fromDom(v.document),"mouseup",function(t){0===t.raw().button&&e(Fw(),{target:t.target()})});t.on("PostRender",function(){t.on("click",u),t.on("tap",u),t.on("mouseup",a),t.on("ScrollWindow",c),t.on("ResizeWindow",s),t.on("ResizeEditor",l)}),t.on("remove",function(){t.off("click",u),t.off("tap",u),t.off("mouseup",a),t.off("ScrollWindow",c),t.off("ResizeWindow",s),t.off("ResizeEditor",l),g.unbind(),f.unbind(),d.unbind(),m.unbind(),p.unbind()}),t.on("detach",function(){$r(o),$r(r),o.destroy(),r.destroy()})},BD=pS,DD=mS,AD=mh([Dt("shell",!1),ht("makeItem"),Dt("setupItem",Q),jw("listBehaviours",[wC])]),MD=lS({name:"items",overrides:function(){return{behaviours:Uo([wC.config({})])}}}),FD=mh([MD]),ID=Vi({name:mh("CustomList")(),configFields:AD(),partFields:FD(),factory:function(s,t){var n=s.shell?{behaviours:[wC.config({})],components:[]}:{behaviours:[],components:t},e=function(t){return s.shell?xh.some(t):Oi(t,s,"items")};return{uid:s.uid,dom:s.dom,components:n.components,behaviours:fi(s.listBehaviours,n.behaviours),apis:{setItems:function(a,c){e(a).fold(function(){throw v.console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(n){var t=wC.contents(n),e=c.length,o=e-t.length,r=0<o?function(t,n){for(var e=[],o=0;o<t;o++)e.push(n(o));return e}(o,function(){return s.makeItem()}):[],i=t.slice(e);Ih(i,function(t){return wC.remove(n,t)}),Ih(r,function(t){return wC.append(n,t)});var u=wC.contents(n);Ih(u,function(t,n){s.setupItem(a,t,c[n],n)})})}}}},apis:{setItems:function(t,n,e){t.setItems(n,e)}}}),RD=Wh([{"static":[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),VD=function(t,n,e){var o,r,i,u,a;t.getSystem().isConnected()&&(o=t,i=e,u=(r=n).lazyViewport(o),(a=i.isDocked())&&vg(o,r,i,u),gg(o,r,u,i).each(function(t){i.setDocked(!a),t.fold(function(){return pg(o,r)},function(t){return hg(o,r,t)},function(t){vg(o,r,i,u,!0),hg(o,r,t)})}))},HD=Object.freeze({__proto__:null,refresh:VD,reset:yg,isDocked:function(t,n,e){return e.isDocked()}}),ND=Object.freeze({__proto__:null,events:function(o,r){return an([hn(jb(),function(n,e){o.contextual.each(function(t){me(n.element(),t.transitionClass)&&(pe(n.element(),[t.transitionClass,t.fadeInClass]),(r.isVisible()?t.onShown:t.onHidden)(n)),e.stop()})}),ln(ry(),function(t){VD(t,o,r)}),ln(iy(),function(t){yg(t,o,r)})])}}),PD=Wo({fields:[Bt("contextual",[bt("fadeInClass"),bt("fadeOutClass"),bt("transitionClass"),xt("lazyContext"),ho("onShow"),ho("onShown"),ho("onHide"),ho("onHidden")]),Vt("lazyViewport",to),(fD="modes",dD=["top","bottom"],mD=Wv,At(fD,dD,et(mD))),ho("onDocked"),ho("onUndocked")],name:"docking",active:ND,apis:HD,state:Object.freeze({__proto__:null,init:function(){var n=Kv(!1),e=Kv(!0),o=Kv(xh.none());return Py({isDocked:function(){return n.get()},setDocked:function(t){return n.set(t)},getInitialPosition:function(){return o.get()},setInitialPosition:function(t){return o.set(t)},isVisible:function(){return e.get()},setVisible:function(t){return e.set(t)},readState:function(){return"docked:  "+n.get()+", visible: "+e.get()}})}})}),zD={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},LD="tox-tinymce--toolbar-sticky-on",jD="tox-tinymce--toolbar-sticky-off",UD=Object.freeze({__proto__:null,setup:function(n,t){n.inline||(ek(n)||n.on("ResizeEditor",function(){t().each(PD.reset)}),n.on("ResizeWindow ResizeEditor",function(){t().each(function(t){return xg(t,ek(n))})}),n.on("SkinLoaded",function(){t().each(function(t){PD.isDocked(t)?PD.reset(t):PD.refresh(t)})}),n.on("FullscreenStateChanged",function(){t().each(PD.reset)})),n.on("AfterScrollIntoView",function(e){t().each(function(t){PD.refresh(t);var n=t.element();lu(n)&&function(t,n){var e=wn(n),o=e.dom().defaultView.innerHeight,r=Xe(e),i=$v.fromDom(t.elm),u=Ze(i),a=Ne(i),c=u.y(),s=c+a,l=Le(n),f=Ne(n),d=l.top(),m=d+f,g=Math.abs(d-r.top())<2,p=Math.abs(m-(r.top()+o))<2;if(g&&c<m)Ye(r.left(),c-f,e);else if(p&&d<s){var h=c-o+a+f;Ye(r.left(),h,e)}}(e,n)})}),n.on("PostRender",function(){Sg(n,!1)})},isDocked:function(t){return t().map(PD.isDocked).getOr(!1)},getBehaviours:Cg}),WD=Q,GD=gh,XD=mh([]),YD=Object.freeze({__proto__:null,setup:WD,isDocked:GD,getBehaviours:XD}),qD=Ri({factory:function(n,o){var t={focus:yC.focusIn,setMenus:function(t,n){var e=x(n,function(n){return Lf(Am({type:"menubutton",text:n.text,fetch:function(t){t(n.getItems())}}).mapError(function(t){return Lv(t)}).getOrDie(),"tox-mbtn",o.backstage,xh.some("menuitem"))});wC.set(t,e)}};return{uid:n.uid,dom:n.dom,components:[],behaviours:Uo([wC.config({}),zu("menubar-events",[vy(function(t){n.onSetup(t)}),ln(Ib(),function(e,t){uo(e.element(),".tox-mbtn--active").each(function(n){ao(t.event().target(),".tox-mbtn").each(function(t){Jt(n,t)||e.getSystem().getByDom(n).each(function(n){e.getSystem().getByDom(t).each(function(t){q_.expand(t),q_.close(n),kC.focus(t)})})})})}),ln(ly(),function(e,t){t.event().prevFocus().bind(function(t){return e.getSystem().getByDom(t).toOption()}).each(function(n){t.event().newFocus().bind(function(t){return e.getSystem().getByDom(t).toOption()}).each(function(t){q_.isOpen(n)&&(q_.expand(t),q_.close(n))})})})]),yC.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return n.onEscape(t),xh.some(!0)}}),A_.config({})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ht("dom"),ht("uid"),ht("onEscape"),ht("backstage"),Dt("onSetup",Q)],apis:{focus:function(t,n){t.focus(n)},setMenus:function(t,n,e){t.setMenus(n,e)}}}),KD="container",JD=[si("slotBehaviours",[])],$D=function(r,t){function n(){return Bi(r)}function e(e,o){return function(t,n){return Oi(t,r,n).map(function(t){return e(t,n)}).getOr(o)}}function o(t){return"true"!==zn(t.element(),"aria-hidden")}var i,u=e(o,!1),a=e(function(t,n){if(o(t)){var e=t.element();xe(e,"display","none"),Pn(e,"aria-hidden","true"),en(t,fy(),{name:n,visible:!1})}}),c=(i=a,function(n,t){Ih(t,function(t){return i(n,t)})}),s={getSlotNames:n,getSlot:function(t,n){return Oi(t,r,n)},isShowing:u,hideSlot:a,hideAllSlots:function(t){return c(t,n())},showSlot:e(function(t,n){if(!o(t)){var e=t.element();_e(e,"display"),jn(e,"aria-hidden"),en(t,fy(),{name:n,visible:!0})}})};return{uid:r.uid,dom:r.dom,components:t,behaviours:li(r.slotBehaviours),apis:s}},QD=P({getSlotNames:function(t,n){return t.getSlotNames(n)},getSlot:function(t,n,e){return t.getSlot(n,e)},isShowing:function(t,n,e){return t.isShowing(n,e)},hideSlot:function(t,n,e){return t.hideSlot(n,e)},hideAllSlots:function(t,n){return t.hideAllSlots(n)},showSlot:function(t,n,e){return t.showSlot(n,e)}},function(t){return $n(t)}),ZD=vh(vh({},QD),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),xi(KD,kg(t),n)},record:function(){return e}}),o=t(n),r=x(n.record(),function(t){return cS({name:t,pname:kg(t)})});return Ii(KD,JD,r,$D,o)}}),tA=Iv([Tt("icon"),Tt("tooltip"),Vt("onShow",Q),Vt("onHide",Q),Vt("onSetup",function(){return Q})]),nA=Xn("FixSizeEvent"),eA=Xn("AutoSizeEvent"),oA=DD.optional({factory:qD,name:"menubar",schema:[ht("backstage")]}),rA=DD.optional({factory:{sketch:function(t){return ID.sketch({uid:t.uid,dom:t.dom,listBehaviours:Uo([yC.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return Bm({type:t.type,uid:Xn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],onEscape:function(){return xh.none()}})},setupItem:function(t,n,e){sB.setGroups(n,e)},shell:!0})}},name:"multiple-toolbar",schema:[ht("dom"),ht("onEscape")]}),iA=DD.optional({factory:{sketch:function(t){return((n=t).type===DS.sliding?Em:n.type===DS.floating?Tm:Bm)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),xh.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,backstage:t.backstage,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes});var n}},name:"toolbar",schema:[ht("dom"),ht("onEscape"),ht("getSink")]}),uA=DD.optional({factory:{sketch:function(t){var n=t.editor,e=t.sticky?Cg:XD;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Uo(e(n,t.getSink))}}},name:"header",schema:[ht("dom")]}),aA=DD.optional({name:"socket",schema:[ht("dom")]}),cA=DD.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{
role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Uo([A_.config({}),kC.config({}),xB.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){xS.getCurrent(t).each(ZD.hideAllSlots),nn(t,eA)},onGrown:function(t){nn(t,eA)},onStartGrow:function(t){en(t,nA,{width:ke(t.element(),"width").getOr("")})},onStartShrink:function(t){en(t,nA,{width:je(t.element())+"px"})}}),wC.config({}),xS.config({find:function(t){var n=wC.contents(t);return Rh(n)}})])}],behaviours:Uo([LT(0),zu("sidebar-sliding-events",[ln(nA,function(t,n){xe(t.element(),"width",n.event().width())}),ln(eA,function(t){_e(t.element(),"width")})])])}}},name:"sidebar",schema:[ht("dom")]}),sA=DD.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Uo([wC.config({})]),components:[]}}},name:"throbber",schema:[ht("dom")]}),lA=Vi({name:"OuterContainer",factory:function(e,t){var n={getSocket:function(t){return BD.getPart(t,e,"socket")},setSidebar:function(t,n){BD.getPart(t,e,"sidebar").each(function(t){return Tg(t,n)})},toggleSidebar:function(t,o){BD.getPart(t,e,"sidebar").each(function(t){return n=t,e=o,void xS.getCurrent(n).each(function(n){xS.getCurrent(n).each(function(t){xB.hasGrown(n)?ZD.isShowing(t,e)?xB.shrink(n):(ZD.hideAllSlots(t),ZD.showSlot(t,e)):(ZD.hideAllSlots(t),ZD.showSlot(t,e),xB.grow(n))})});var n,e})},whichSidebar:function(t){return BD.getPart(t,e,"sidebar").bind(Eg).getOrNull()},getHeader:function(t){return BD.getPart(t,e,"header")},getToolbar:function(t){return BD.getPart(t,e,"toolbar")},setToolbar:function(t,n){BD.getPart(t,e,"toolbar").each(function(t){t.getApis().setGroups(t,n)})},setToolbars:function(t,n){BD.getPart(t,e,"multiple-toolbar").each(function(t){ID.setItems(t,n)})},refreshToolbar:function(t){BD.getPart(t,e,"toolbar").each(function(t){return t.getApis().refresh(t)})},getThrobber:function(t){return BD.getPart(t,e,"throbber")},focusToolbar:function(t){BD.getPart(t,e,"toolbar").orThunk(function(){return BD.getPart(t,e,"multiple-toolbar")}).each(function(t){yC.focusIn(t)})},setMenubar:function(t,n){BD.getPart(t,e,"menubar").each(function(t){qD.setMenus(t,n)})},focusMenubar:function(t){BD.getPart(t,e,"menubar").each(function(t){qD.focus(t)})}};return{uid:e.uid,dom:e.dom,components:t,apis:n,behaviours:e.behaviours}},configFields:[ht("dom"),ht("behaviours")],partFields:[uA,oA,iA,rA,aA,cA,sA],apis:{getSocket:function(t,n){return t.getSocket(n)},setSidebar:function(t,n,e){t.setSidebar(n,e)},toggleSidebar:function(t,n,e){t.toggleSidebar(n,e)},whichSidebar:function(t,n){return t.whichSidebar(n)},getHeader:function(t,n){return t.getHeader(n)},getToolbar:function(t,n){return t.getToolbar(n)},setToolbar:function(t,n,e){var o=x(e,function(t){return km(t)});t.setToolbar(n,o)},setToolbars:function(t,n,e){var o=x(e,function(t){return x(t,km)});t.setToolbars(n,o)},refreshToolbar:function(t,n){return t.refreshToolbar(n)},getThrobber:function(t,n){return t.getThrobber(n)},setMenubar:function(t,n,e){t.setMenubar(n,e)},focusMenubar:function(t,n){t.focusMenubar(n)},focusToolbar:function(t,n){t.focusToolbar(n)}}}),fA={file:{title:"File",items:"newdocument restoredraft | preview | print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},dA=function(t){function n(){t._skinLoaded=!0,kO(t)}return function(){t.initialized?n():t.on("init",n)}},mA=function(t,n){return function(){return OO(t,{message:n})}},gA=m(Fg,!1),pA=m(Fg,!0),hA=$C.DOM,vA=Xt(),bA=vA.os.isiOS()&&vA.os.version.major<=12,yA={render:function(e,o,t,n,r){var i,u,a=Kv(0);gA(e),i=$v.fromDom(r.targetNode),u=o.mothership,Ow(i,u,Bn),Jr(jy(),o.uiMothership),e.on("PostRender",function(){Ig(e,o,t,n),a.set(e.getWin().innerWidth),lA.setMenubar(o.outerContainer,Mg(e,t)),lA.setSidebar(o.outerContainer,t.sidebar),function(r){function t(t){var n=r.getDoc().documentElement,e=u.get(),o=a.get();e.left()!==i.innerWidth||e.top()!==i.innerHeight?(u.set($y(i.innerWidth,i.innerHeight)),EO(r,t)):o.left()===n.offsetWidth&&o.top()===n.offsetHeight||(a.set($y(n.offsetWidth,n.offsetHeight)),EO(r,t))}function n(t){return TO(r,t)}var i=r.getWin(),e=r.getDoc().documentElement,u=Kv($y(i.innerWidth,i.innerHeight)),a=Kv($y(e.offsetWidth,e.offsetHeight));hA.bind(i,"resize",t),hA.bind(i,"scroll",n);var o=Qc($v.fromDom(r.getBody()),"load",t);r.on("remove",function(){o.unbind(),hA.unbind(i,"resize",t),hA.unbind(i,"scroll",n)})}(e)});var c,s,l,f=lA.getSocket(o.outerContainer).getOrDie("Could not find expected socket element");if(!0===bA){we(f.element(),{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var d=(c=function(){e.fire("ScrollContent")},s=20,l=null,{cancel:function(){null!==l&&(v.clearTimeout(l),l=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===l&&(l=v.setTimeout(function(){c.apply(null,t),l=null},s))}});$c(f.element(),"scroll",d.throttle)}wm(e,o),e.addCommand("ToggleSidebar",function(t,n){lA.toggleSidebar(o.outerContainer,n),e.fire("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",function(){return lA.whichSidebar(o.outerContainer)});var m=va(e);return m!==DS.sliding&&m!==DS.floating||e.on("ResizeWindow ResizeEditor ResizeContent",function(){var t=e.getWin().innerWidth;t!==a.get()&&(lA.refreshToolbar(o.outerContainer),a.set(t))}),{iframeContainer:f.element().dom(),editorContainer:o.outerContainer.element().dom()}}},xA=function(n,t,e){var o=t.filter(function(t){return n<t}),r=e.filter(function(t){return t<n});return o.or(r).getOr(n)},wA=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?xh.some(parseInt(""+t,10)):xh.none()},SA=function(t){return Bh(t)?t+"px":t},CA={render:function(n,i,e,o,t){function r(t){void 0===t&&(t=!1),v&&lA.refreshToolbar(i.outerContainer),f||function(t){var n=v?t.fold(function(){return 0},function(t){return 1<t.components().length?Ne(t.components()[1].element()):0}):0,e=Qe(m),o=b?e.y()-Ne(s.element())+n:e.bottom();we(i.outerContainer.element(),{position:"absolute",top:Math.round(o)+"px",left:Math.round(e.x())+"px"});var r=g.getOrThunk(function(){var t=wA(Ce(jy(),"margin-left")).getOr(0);return je(jy())-e.x()+t});xe(s.element(),"max-width",r+"px")}(lA.getToolbar(i.outerContainer)),d&&(t?PD.reset(s):PD.refresh(s)),h&&lA.getToolbar(i.outerContainer).each(function(t){vB.reposition(t)})}function u(){x.set(!0),xe(i.outerContainer.element(),"display","flex"),l.addClass(n.getBody(),"mce-edit-focus"),_e(i.uiMothership.element(),"display"),r()}function a(){x.set(!1),i.outerContainer&&(xe(i.outerContainer.element(),"display","none"),l.removeClass(n.getBody(),"mce-edit-focus")),xe(i.uiMothership.element(),"display","none")}function c(){if(s)u();else{s=lA.getHeader(i.outerContainer).getOrDie();var t=ba(n).getOr(jy());Jr(t,i.mothership),Jr(t,i.uiMothership),Ig(n,i,e,o),lA.setMenubar(i.outerContainer,Mg(n,e)),u(),n.on("activate",u),n.on("deactivate",a),n.on("SkinLoaded ResizeWindow",function(){x.get()&&r(!0)}),n.on("NodeChange keydown",function(){JC.requestAnimationFrame(function(){var t=Hg(m,b);x.get()&&t!==y.get()&&(r(!0),y.set(t))})}),n.nodeChanged()}}var s,l=$C.DOM,f=ya(n),d=wa(n),m=$v.fromDom(t.targetNode),g=da(n).or(Vg(n)),p=va(n),h=p===DS.floating,v=p===DS.sliding||h,b=ek(n),y=Kv(Hg(m,b)),x=Kv(!1);return pA(n),n.on("focus",c),n.on("blur hide",a),n.on("init",function(){n.hasFocus()&&c()}),wm(n,i),{editorContainer:i.outerContainer.element().dom()}}},kA=function(n){OE.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return n.execCommand(t.cmd)},icon:t.icon,onSetup:Um(n,t.name)})});var t="alignnone",e="No alignment",o="JustifyNone",r="align-none";n.ui.registry.addButton(t,{tooltip:e,onAction:function(){return n.execCommand(o)},icon:r})},OA=function(t){var n;Pg(t),n=t,OE.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){n.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return n.execCommand(t.action)}})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:Ng(n,"code")})},_A=function(t){var n,e;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return zg(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return zg(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return zg(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return zg(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},TA=function(t){var n,e;(e=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}}),(n=t).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(n,t){function e(t){n.setActive(t.hasVisual)}return n.setActive(t.hasVisual),t.on("VisualAid",e),function(){return t.off("VisualAid",e)}}(t,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},EA=function(t){var n;(n=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,n){function e(){t.setDisabled(!n.queryCommandState("outdent"))}return t.setDisabled(!n.queryCommandState("outdent")),n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}(t,n)},onAction:function(){return n.execCommand("outdent")}}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return n.execCommand("indent")}})},BA=function(t,n){var e,o,r,i,u,a,c,s,l,f,d,m;m=Gm(0,d=n,qm(f=t)),f.ui.registry.addNestedMenuItem("align",{text:d.shared.providers.translate("Align"),getSubmenuItems:function(){return m.items.validateItems(m.getStyleItems())}}),l=Gm(0,s=n,Jm(c=t)),c.ui.registry.addNestedMenuItem("fontformats",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:function(){return l.items.validateItems(l.getStyleItems())}}),a=Gm(0,n,eg(u=t,vh({type:"advanced"},n.styleselect))),u.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return a.items.validateItems(a.getStyleItems())}}),i=Gm(0,n,ng(r=t)),r.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}}),o=Gm(0,n,Qm(e=t)),e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},DA=function(t,n){kA(t),OA(t),BA(t,n),_A(t),AO.register(t),TA(t),EA(t)},AA=function(t){return{anchor:"selection",root:$v.fromDom(t.selection.getNode())}},MA={onLtr:function(){return[Ex,Eo,Bo,Do,Ao,Tx,qC,KC,ua,ra,aa,ia]},onRtl:function(){return[Ex,Bo,Eo,Ao,Do,Tx,qC,KC,aa,ia,ua,ra]}},FA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},IA=function(t){return t.settings.contextmenu_never_use_native||!1},RA=function(t){return e="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(n=t).ui.registry.getAll().contextMenus,jh(n.settings,e).map(Kg).getOrThunk(function(){return w(Kg(o),function(t){return Uh(r,t)})});var n,e,o,r},VA=function(t){return!1===t.getParam("contextmenu")},HA={type:"separator"},NA=function(n){if(kh(n))return n;switch(n.type){case"separator":return HA;case"submenu":return{type:"nestedmenuitem",text:n.text,icon:n.icon,getSubmenuItems:function(){var t=n.getSubmenuItems();return kh(t)?t:x(t,NA)}};default:return{type:"menuitem",text:n.text,icon:n.icon,onAction:(t=n.onAction,function(){return t()})}}var t},PA=Wh([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),zA=PA.offset,LA=PA.absolute,jA=PA.fixed,UA=function(t,n,d,m,g){var e=n.getSnapPoints(t);return lp(e,d,m,g).orThunk(function(){return S(e,function(n,e){var t,o,r,i,u,a,c,s,l=e.sensor(),f=(t=d,o=l,e.range().left(),e.range().top(),u=op(t,r=m,i=g),a=op(o,r,i),c=Math.abs(u.left()-a.left()),s=Math.abs(u.top()-a.top()),$y(c,s));return n.deltas.fold(function(){return{deltas:xh.some(f),snap:xh.some(e)}},function(t){return(f.left()+f.top())/2<=(t.left()+t.top())/2?{deltas:xh.some(f),snap:xh.some(e)}:n})},{deltas:xh.none(),snap:xh.none()}).snap.map(function(t){return{output:mh(up(t.output(),d,m,g)),extra:t.extra}})})},WA=function(t,n,e,o,r){return lp(n.getSnapPoints(t),e,o,r)},GA=Object.freeze({__proto__:null,snapTo:function(t,n,e,o){var r,i,u,a=n.getTarget(t.element());if(n.repositionTarget){var c=Xe(wn(t.element())),s=ag(a);Se(a,ip((i=c,u=s,{coord:up((r=o).output(),r.output(),i,u),extra:r.extra()}).coord,0,s))}}}),XA="data-initial-z-index",YA=Bt("snaps",[ht("getSnapPoints"),ho("onSensor"),ht("leftAttr"),ht("topAttr"),Dt("lazyViewport",to),Dt("mustSnap",!1)]),qA=[Dt("useFixed",gh),ht("blockerClass"),Dt("getTarget",f),Dt("onDrag",Q),Dt("repositionTarget",!0),Dt("onDrop",Q),Vt("getBounds",to),YA],KA=Object.freeze({__proto__:null,getData:function(t){return xh.from($y(t.x(),t.y()))},getDelta:function(t,n){return $y(n.left()-t.left(),n.top()-t.top())}}),JA=y(qA,[xo("dragger",{handlers:yp(xp)})]),$A=Object.freeze({__proto__:null,getData:function(t){var n,e=t.raw().touches;return 1===e.length?(n=e[0],xh.some($y(n.clientX,n.clientY))):xh.none()},getDelta:function(t,n){return $y(n.left()-t.left(),n.top()-t.top())}}),QA=JA,ZA=y(qA,[xo("dragger",{handlers:yp(wp)})]),tM=y(qA,[xo("dragger",{handlers:yp(function(t,n,e){return y(xp(t,n,e),wp(t,n,e))})})]),nM=Object.freeze({__proto__:null,mouse:QA,touch:ZA,mouseOrTouch:tM}),eM=Object.freeze({__proto__:null,init:function(){var i=xh.none(),n=xh.none(),t=mh({});return Py({readState:t,reset:function(){i=xh.none(),n=xh.none()},update:function(r,t){return r.getData(t).bind(function(t){return n=r,e=t,o=i.map(function(t){return n.getDelta(t,e)}),i=xh.some(e),o;var n,e,o})},getStartData:function(){return n},setStartData:function(t){n=xh.some(t)}})}}),oM=Go({branchKey:"mode",branches:nM,name:"dragging",active:{events:function(t,n){return t.dragger.handlers(t,n)}},extra:{snap:xn(["sensor","range","output"],["extra"])},state:eM,apis:GA}),rM=Xt(),iM=function(s,e){function n(t){var n=Ze(t);return Sp(g.getOpt(e),t,n.x(),n.y(),n.width(),n.height())}function o(t){var n=Ze(t);return Sp(p.getOpt(e),t,n.right(),n.bottom(),n.width(),n.height())}function r(t,c,n,e){var o=n(c);oM.snapTo(t,o),function(t,n,e,o){var r=c.dom().getBoundingClientRect();_e(t.element(),"display");var i=Cn($v.fromDom(s.getBody())).dom().innerHeight,u=e(r),a=o(r,i);(u||a)&&xe(t.element(),"display","none")}(t,0,function(t){return t[e]<0},function(t,n){return t[e]>n})}function i(t){return r(h,t,n,"top")}function u(t){return r(v,t,o,"bottom")}var a=Kv([]),c=Kv([]),t=Kv(!1),l=Kv(xh.none()),f=Kv(xh.none()),d=Cp(function(){return x(a.get(),function(t){return n(t)})},l,function(n){f.get().each(function(t){s.fire("TableSelectorChange",{start:n,finish:t})})}),m=Cp(function(){return x(c.get(),function(t){return o(t)})},f,function(n){l.get().each(function(t){s.fire("TableSelectorChange",{start:t,finish:n})})}),g=kp(d),p=kp(m),h=Yy(g.asSpec()),v=Yy(p.asSpec());rM.deviceType.isTouch()&&(s.on("TableSelectionChange",function(n){t.get()||(Xr(e,h),Xr(e,v),t.set(!0)),l.set(xh.some(n.start)),f.set(xh.some(n.finish)),n.otherCells.each(function(t){a.set(t.upOrLeftCells),c.set(t.downOrRightCells),i(n.start),u(n.finish)})}),s.on("ResizeEditor ResizeWindow ScrollContent",function(){l.get().each(i),f.get().each(u)}),s.on("TableSelectionClear",function(){t.get()&&(qr(h),qr(v),t.set(!1)),l.set(xh.none()),f.set(xh.none())}))};(pD=gD=gD||{})[pD.None=0]="None",pD[pD.Both=1]="Both",pD[pD.Vertical=2]="Vertical";var uM,aM,cM,sM,lM=function(i,u){return u.delimiter||(u.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Uo([yC.config({mode:"flow",selector:"div[role=button]"}),A_.config({}),wC.config({}),zu("elementPathEvents",[vy(function(r){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return yC.focusIn(r)}),i.on("NodeChange",function(t){var n,o,e=function(t){for(var n=[],e=t.length;0<e--;){var o=t[e];if(1===o.nodeType&&!_p(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||n.push({name:r.name,element:o}),r.isPropagationStopped())break}}return n}(t.parents);0<e.length?wC.set(r,(n=x(e||[],function(t,n){return ok.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":n,"tab-index":-1,"aria-level":n+1},innerHtml:t.name},action:function(){i.focus(),i.selection.select(t.element),i.nodeChanged()}})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+u.delimiter+" "}},S(n.slice(1),function(t,n){var e=t;return e.push(o),e.push(n),e},[n[0]]))):wC.set(r,[])})})])]),components:[]}},fM=function(m){function g(){return e.bind(lA.getHeader)}function p(){return Ch.value(x)}function h(){return e.bind(function(t){return lA.getThrobber(t)}).getOrDie("Could not find throbber element")}function v(){var t,n=SA(Rg(m)),e=SA(Vg(t=m).getOr(sa(t)));return m.inline||(Oe("div","width",e)&&xe(R.element(),"width",e),Oe("div","height",n)?xe(R.element(),"height",n):xe(R.element(),"height","200px")),n}var t,n=m.inline,b=n?CA:yA,y=wa(m)?UD:YD,e=xh.none(),o=Xt(),r=o.browser.isIE()?["tox-platform-ie"]:[],i=o.deviceType.isTouch()?["tox-platform-touch"]:[],u=ek(m),a=Dk.isRtl()?{attributes:{dir:"rtl"}}:{},c={attributes:(t={},t[Jx]=u?ax.TopToBottom:ax.BottomToTop,t)},x=Yy({dom:vh({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(r).concat(i)},a),behaviours:Uo([ww.config({useFixed:function(){return y.isDocked(g)}})])}),s=Sa({dom:{tag:"div",classes:["tox-anchorbar"]}}),w=$d(x,m,function(){return e.bind(function(t){return s.getOpt(t)}).getOrDie("Could not find a anchor bar element")}),l=lA.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:w,onEscape:function(){m.focus()}}),S=va(m),f=lA.parts().toolbar(vh({dom:{tag:"div",classes:["tox-toolbar"]},getSink:p,backstage:w,onEscape:function(){m.focus()},type:S,lazyToolbar:function(){return e.bind(function(t){return lA.getToolbar(t)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return g().getOrDie("Could not find header element")}},c)),d=lA.parts()["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},onEscape:function(){},type:S}),C=lA.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),k=lA.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),O=lA.parts().throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:w}),_=m.getParam("statusbar",!0,"boolean")&&!n?xh.some(Tp(m,w.shared.providers)):xh.none(),T={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[C,k]},E=ZC(m),B=pa(m),D=ga(m),A=lA.parts().header({dom:vh({tag:"div",classes:["tox-editor-header"]},c),components:N([D?[l]:[],E?[d]:B?[f]:[],ya(m)?[]:[s.asSpec()]]),sticky:wa(m),editor:m,getSink:p}),M=N([[{dom:{tag:"div",classes:["tox-editor-container"]},components:N([u?[A]:[],n?[]:[T],u?[]:[A]])}],n?[]:_.toArray(),[O]]),F=xa(m),I=vh(vh({role:"application"},Dk.isRtl()?{dir:"rtl"}:{}),F?{"aria-hidden":"true"}:{}),R=Yy(lA.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(u?[]:["tox-tinymce--toolbar-bottom"]).concat(i).concat(r),styles:vh({visibility:"hidden"},F?{opacity:"0",border:"0"}:{}),attributes:I},components:M,behaviours:Uo([yC.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));e=xh.some(R),m.shortcuts.add("alt+F9","focus menubar",function(){lA.focusMenubar(R)}),m.shortcuts.add("alt+F10","focus toolbar",function(){lA.focusToolbar(R)});var V=ss(R),H=ss(x);return ED(m,V,H),{mothership:V,uiMothership:H,backstage:w,renderUI:function(){var o,r;y.setup(m,g),DA(m,w),Qg(m,p,w),r=(o=m).ui.registry.getAll().sidebars,Ih(Hh(r),function(n){function e(){return xh.from(o.queryCommandValue("ToggleSidebar")).is(n)}var t=r[n];o.ui.registry.addToggleButton(n,{icon:t.icon,tooltip:t.tooltip,onAction:function(t){o.execCommand("ToggleSidebar",!1,n),t.setActive(e())},onSetup:function(t){function n(){return t.setActive(e())}return o.on("ToggleSidebar",n),function(){o.off("ToggleSidebar",n)}}})}),function(e,n,o){function r(t){t!==i.get()&&(Dg(n(),t,o.providers),i.set(t))}var i=Kv(!1),u=Kv(xh.none());e.on("ProgressState",function(t){if(u.get().each(JC.clearTimeout),Bh(t.time)){var n=JC.setEditorTimeout(e,function(){return r(t.state)},t.time);u.set(xh.some(n))}else r(t.state),u.set(xh.none())})}(m,h,w.shared),P(m.getParam("toolbar_groups",{},"object"),function(t,n){m.ui.registry.addGroupToolbarButton(n,t)});var t=m.ui.registry.getAll(),n=t.buttons,e=t.menuItems,i=t.contextToolbars,u=t.sidebars,a=ha(m),c={menuItems:e,menus:m.settings.menu?P(m.settings.menu,function(t){return vh(vh({},t),{items:t.items})}):{},menubar:m.settings.menubar,toolbar:a.getOrThunk(function(){return m.getParam("toolbar",!0)}),allowToolbarGroups:S===DS.floating,buttons:n,sidebar:u};TD(m,i,x,{backstage:w}),iM(m,x);var s=m.getElement(),l=v(),f={mothership:V,uiMothership:H,outerContainer:R},d={targetNode:s,height:l};return b.render(m,f,c,w,d)},getUi:function(){return{channels:{broadcastAll:H.broadcast,broadcastOn:H.broadcastOn,register:function(){}}}}}},dM=function(t,n){Pn(t,"aria-labelledby",xh.from(zn(t,"id")).fold(function(){var t=Xn("dialog-label");return Pn(n,"id",t),t},f))},mM=mh([ht("lazySink"),kt("dragBlockClass"),Vt("getBounds",to),Dt("useTabstopAt",mh(!0)),Dt("eventOrder",{}),si("modalBehaviours",[yC]),vo("onExecute"),yo("onEscape")]),gM={sketch:f},pM=mh([lS({name:"draghandle",overrides:function(t,n){return{behaviours:Uo([oM.config({mode:"mouse",getTarget:function(t){return io(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(n,null,2)).message),getBounds:t.getDragBounds})])}}}),cS({schema:[ht("dom")],name:"title"}),cS({factory:gM,schema:[ht("dom")],name:"close"}),cS({factory:gM,schema:[ht("dom")],name:"body"}),lS({factory:gM,schema:[ht("dom")],name:"footer"}),sS({factory:{sketch:function(t,n){return vh(vh({},t),{dom:n.dom,components:n.components})}},schema:[Dt("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Dt("components",[])],name:"blocker"})]),hM=Vi({name:"ModalDialog",configFields:mM(),partFields:pM(),factory:function(o,t,n,e){var r=Xn("alloy.dialog.busy"),a=Xn("alloy.dialog.idle"),c=Uo([yC.config({mode:"special",onTab:function(){return xh.some(!0)},onShiftTab:function(){return xh.some(!0)}}),kC.config({})]),i=Xn("modal-events"),u=vh(vh({},o.eventOrder),{"alloy.system.attached":[i].concat(o.eventOrder["alloy.system.attached"]||[])});return{uid:o.uid,dom:o.dom,components:t,apis:{show:function(i){var t=o.lazySink(i).getOrDie(),u=Kv(xh.none()),n=e.blocker();Xr(t,t.getSystem().build(vh(vh({},n),{components:n.components.concat([qy(i)]),behaviours:Uo([kC.config({}),zu("dialog-blocker-events",[hn(Rb(),function(){yC.focusIn(i)}),ln(a,function(){Ln(i.element(),"aria-busy")&&(jn(i.element(),"aria-busy"),u.get().each(function(t){return wC.remove(i,t)}))}),ln(r,function(t,n){Pn(i.element(),"aria-busy","true");var e=n.event().getBusySpec();u.get().each(function(t){wC.remove(i,t)});var o=e(i,c),r=t.getSystem().build(o);u.set(xh.some(r)),wC.append(i,qy(r)),r.hasConfigured(yC)&&yC.focusIn(r)})])])}))),yC.focusIn(i)},hide:function(n){kn(n.element()).each(function(t){n.getSystem().getByDom(t).each(function(t){qr(t)})})},getBody:function(t){return _i(t,o,"body")},getFooter:function(t){return _i(t,o,"footer")},setIdle:function(t){nn(t,a)},setBusy:function(t,n){en(t,r,{getBusySpec:n})}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:fi(o.modalBehaviours,[wC.config({}),yC.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt}),zu(i,[vy(function(t){var n,e;dM(t.element(),_i(t,o,"title").element()),n=t.element(),e=_i(t,o,"body").element(),Pn(n,"aria-describedby",xh.from(zn(n,"id")).fold(function(){var t=Xn("dialog-describe");return Pn(e,"id",t),t},f))})])])}},apis:{show:function(t,n){t.show(n)},hide:function(t,n){t.hide(n)},getBody:function(t,n){return t.getBody(n)},getFooter:function(t,n){return t.getFooter(n)},setBusy:function(t,n,e){t.setBusy(n,e)},setIdle:function(t,n){t.setIdle(n)}}}),vM=[bt("type"),bt("text"),yt("level",["info","warn","error","success"]),bt("icon"),Dt("url","")],bM=Iv(vM),yM=[bt("type"),bt("text"),Rt("disabled",!1),Rt("primary",!1),Nv("name","name",Bv(function(){return Xn("button-name")}),Wv),Tt("icon"),Rt("borderless",!1)],xM=Iv(yM),wM=[bt("type"),bt("name"),bt("label"),Rt("disabled",!1)],SM=Iv(wM),CM=Gv,kM=[bt("type"),bt("name")],OM=kM.concat([Tt("label")]),_M=Iv(OM),TM=Wv,EM=Iv(OM),BM=Wv,DM=Iv(OM),AM=et(Pv),MM=OM.concat([Rt("sandboxed",!0)]),FM=Iv(MM),IM=Wv,RM=OM.concat([Tt("inputMode"),Tt("placeholder"),Rt("maximized",!1),Rt("disabled",!1)]),VM=Iv(RM),HM=Wv,NM=OM.concat([St("items",[bt("text"),bt("value")]),Mt("size",1),Rt("disabled",!1)]),PM=Iv(NM),zM=Wv,LM=OM.concat([Rt("constrain",!0),Rt("disabled",!1)]),jM=Iv(LM),UM=Iv([bt("width"),bt("height")]),WM=OM.concat([Tt("placeholder"),Rt("maximized",!1),Rt("disabled",!1)]),GM=Iv(WM),XM=Wv,YM=OM.concat([It("filetype","file",["image","media","file"]),Dt("disabled",!1)]),qM=Iv(YM),KM=Iv([bt("value"),Dt("meta",{})]),JM=kM.concat([Ft("tag","textarea"),bt("scriptId"),bt("scriptUrl"),(uM="settings",aM=undefined,At(uM,aM,qv))]),$M=kM.concat([Ft("tag","textarea"),xt("init")]),QM=at(function(t){return st("customeditor.old",nt($M),t).orThunk(function(){return st("customeditor.new",nt(JM),t)})}),ZM=Wv,tF=[bt("type"),bt("html"),It("presets","presentation",["presentation","document"])],nF=Iv(tF),eF=OM.concat([vt("currentState",Iv([ht("blob"),bt("url")]))]),oF=Iv(eF),rF=OM.concat([Dt("columns","auto")]),iF=Iv(rF),uF=ut([bt("value"),bt("text"),bt("icon")]),aF=[bt("type"),Ct("header",Wv),Ct("cells",et(Wv))],cF=Iv(aF),sF=zv(function(){return dt("type",{alertbanner:bM,bar:Iv((n=Bp("bar"),[bt("type"),n])),button:xM,checkbox:SM,colorinput:_M,colorpicker:EM,dropzone:DM,grid:Iv(Ep(Bp("grid"))),iframe:FM,input:VM,selectbox:PM,sizeinput:jM,textarea:GM,urlinput:qM,customeditor:QM,htmlpanel:nF,imagetools:oF,collection:iF,label:Iv((t=Bp("label"),[bt("type"),bt("label"),t])),table:cF,panel:fF});var t,n}),lF=[bt("type"),Dt("classes",[]),Ct("items",sF)],fF=Iv(lF),dF=[Nv("name","name",Bv(function(){return Xn("tab-name")}),Wv),bt("title"),Ct("items",sF)],mF=[bt("type"),St("tabs",dF)],gF=Iv(mF),pF=Iv([bt("type"),bt("name")].concat(hk)),hF=Gv,vF=[Nv("name","name",Bv(function(){return Xn("button-name")}),Wv),Tt("icon"),It("align","end",["start","end"]),Rt("primary",!1),Rt("disabled",!1)],bF=y(vF,[bt("text")]),yF=y([yt("type",["submit","cancel","custom"])],bF),xF=bF,wF=mt("type",{submit:yF,cancel:yF,custom:yF,menu:y([yt("type",["menu"]),Tt("text"),Tt("tooltip"),Tt("icon"),Ct("items",pF)],vF)}),SF=Iv([bt("title"),vt("body",dt("type",{panel:fF,tabpanel:gF})),Ft("size","normal"),Ct("buttons",wF),Dt("initialData",{}),Vt("onAction",Q),Vt("onChange",Q),Vt("onSubmit",Q),Vt("onClose",Q),Vt("onCancel",Q),Dt("onTabChange",Q)]),CF=function(t){return Oh(t)?[t].concat(O(F(t),CF)):_h(t)?O(t,CF):[]},kF={checkbox:CM,colorinput:TM,colorpicker:BM,dropzone:AM,input:HM,iframe:IM,sizeinput:UM,selectbox:zM,size:UM,textarea:XM,urlinput:KM,customeditor:ZM,collection:uF,togglemenuitem:hF},OF=Iv(y([yt("type",["cancel","custom"])],xF)),_F=Iv([bt("title"),bt("url"),_t("height"),_t("width"),(cM="buttons",sM=OF,Ot(cM,et(sM))),Vt("onAction",Q),Vt("onCancel",Q),Vt("onClose",Q),Vt("onMessage",Q)]),TF={open:function(t,n){var e=Mp(n);return t(e.internalDialog,e.initialData,e.dataValidator)},openUrl:function(t,n){return t(lt(st("dialog",_F,n)))},redial:function(t){return Mp(t)}},EF=Ri({name:"TabButton",configFields:[Dt("uid",undefined),ht("value"),Nv("dom","dom",Dv(function(){return{attributes:{role:"tab",id:Xn("aria"),"aria-selected":"false"}}}),jv()),kt("action"),Dt("domModification",{}),si("tabButtonBehaviours",[kC,yC,Lw]),ht("view")],factory:function(t){return{uid:t.uid,dom:t.dom,components:t.components,events:Ku(t.action),behaviours:fi(t.tabButtonBehaviours,[kC.config({}),yC.config({mode:"execution",useSpace:!0,useEnter:!0}),Lw.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),BF=mh([ht("tabs"),ht("dom"),Dt("clickToDismiss",!1),si("tabbarBehaviours",[TS,yC]),go(["tabClass","selectedClass"])]),DF=fS({factory:EF,name:"tabs",unit:"tab",overrides:function(o){function r(t,n){TS.dehighlight(t,n),en(t,my(),{tabbar:t,button:n})}function i(t,n){TS.highlight(t,n),en(t,dy(),{tabbar:t,button:n})}return{action:function(t){var n=t.getSystem().getByUid(o.uid).getOrDie(),e=TS.isHighlighted(n,t);(e&&o.clickToDismiss?r:e?Q:i)(n,t)},domModification:{classes:[o.markers.tabClass]}}}}),AF=mh([DF]),MF=Vi({name:"Tabbar",configFields:BF(),partFields:AF(),factory:function(t,n){return{uid:t.uid,dom:t.dom,components:n,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:fi(t.tabbarBehaviours,[TS.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,n){Pn(n.element(),"aria-selected","true")},onDehighlight:function(t,n){Pn(n.element(),"aria-selected","false")}}),yC.config({mode:"flow",getInitial:function(t){return TS.getHighlighted(t).map(function(t){return t.element()})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),FF=Ri({name:"Tabview",configFields:[si("tabviewBehaviours",[wC])],factory:function(t){return{uid:t.uid,dom:t.dom,behaviours:fi(t.tabviewBehaviours,[wC.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),IF=mh([Dt("selectFirst",!0),ho("onChangeTab"),ho("onDismissTab"),Dt("tabs",[]),si("tabSectionBehaviours",[])]),RF=cS({factory:MF,schema:[ht("dom"),wt("markers",[ht("tabClass"),ht("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),VF=cS({factory:FF,name:"tabview"}),HF=mh([RF,VF]),NF=Vi({name:"TabSection",configFields:IF(),partFields:HF(),
factory:function(u,t){function e(i){var n=Lw.getValue(i);Oi(i,u,"tabview").each(function(r){C(u.tabs,function(t){return t.value===n}).each(function(t){var n,e,o=t.view();(n=i.element(),e="id",xh.from(zn(n,e))).each(function(t){Pn(r.element(),"aria-labelledby",t)}),wC.set(r,o),u.onChangeTab(r,i,o)})})}function n(t,n){Oi(t,u,"tabbar").each(function(t){n(t).each(on)})}return{uid:u.uid,dom:u.dom,components:t,behaviours:li(u.tabSectionBehaviours),events:an(N([u.selectFirst?[vy(function(t){n(t,TS.getFirst)})]:[],[ln(dy(),function(t,n){e(n.event().button())}),ln(my(),function(t,n){var e=n.event().button();u.onDismissTab(t,e)})]])),apis:{getViewItems:function(t){return Oi(t,u,"tabview").map(function(t){return wC.contents(t)}).getOr([])},showTab:function(t,e){n(t,function(n){return C(TS.getCandidates(n),function(t){return Lw.getValue(t)===e}).filter(function(t){return!TS.isHighlighted(n,t)})})}}}},apis:{getViewItems:function(t,n){return t.getViewItems(n)},showTab:function(t,n,e){t.showTab(n,e)}}}),PF="send-data-to-section",zF="send-data-to-view",LF=Xn("update-dialog"),jF=Xn("update-title"),UF=Xn("update-body"),WF=Xn("update-footer"),GF=Xn("body-send-message"),XF=function(r,t){function n(t,o){return ln(t,function(n,e){i(n,function(t){o(r(),t,e.event(),n)})})}var i=function(n,e){YB.getState(n).get().each(function(t){e(t,n)})};return y(Pp(n,t),[n(i_,function(t,n,e){n.onAction(t,{name:e.name()})})])},YF=function(r,t){function n(t,o){return ln(t,function(n,e){i(n,function(t){o(r(),t,e.event(),n)})})}var i=function(n,e){YB.getState(n).get().each(function(t){e(t.internalDialog,n)})};return y(Pp(n,t),[n(u_,function(t,n){return n.onSubmit(t)}),n(e_,function(t,n,e){n.onChange(t,{name:e.name()})}),n(i_,function(t,n,e,o){function r(){return yC.focusIn(o)}var i=Yo();n.onAction(t,{name:e.name(),value:e.value()}),Yo().fold(function(){r()},function(t){!kb(o.element(),t)||Ln(t,"disabled")?r():kb(t,i.getOrNull())&&Ln(i.getOrDie(),"disabled")&&r()})}),n(s_,function(t,n,e){n.onTabChange(t,{newTabName:e.name(),oldTabName:e.oldName()})}),by(function(t){var n=r();Lw.setValue(t,n.getData())})])},qF=zk.deviceType.isTouch(),KF=tinymce.util.Tools.resolve("tinymce.util.URI"),JF=["insertContent","setContent","execCommand","close","block","unblock"],$F=function(t){var s,l,c,f,m=t.backstage,g=t.editor,p=wa(g),h=ek(g),e=(f=(c=t).backstage.shared,{open:function(t,n){function e(){hM.hide(u),n()}var o=Sa(Kf({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:xh.none()},"cancel",c.backstage)),r=Yp(),i=Xp(e,f.providers),u=Yy($p({lazySink:function(){return f.getSink()},header:Gp(r,i),body:qp(t,f.providers),footer:xh.some(Kp(Jp([],[o.asSpec()]))),onEscape:e,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ln(r_,e)],eventOrder:{}}));hM.show(u);var a=o.get(u);kC.focus(a)}}),o=(l=(s=t).backstage.shared,{open:function(t,n){function e(t){hM.hide(a),n(t)}var o=Sa(Kf({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:xh.none()},"submit",s.backstage)),r=Kf({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:xh.none()},"cancel",s.backstage),i=Yp(),u=Xp(function(){return e(!1)},l.providers),a=Yy($p({lazySink:function(){return l.getSink()},header:Gp(i,u),body:qp(t,l.providers),footer:xh.some(Kp(Jp([],[r,o.asSpec()]))),onEscape:function(){return e(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ln(r_,function(){return e(!1)}),ln(u_,function(){return e(!0)})],eventOrder:{}}));hM.show(a);var c=o.get(a);kC.focus(c)}}),r=function(t,e){return TF.openUrl(function(t){var n=sh(t,{closeWindow:function(){hM.hide(n.dialog),e(n.instanceApi)}},g,m);return hM.show(n.dialog),n.instanceApi},t)},i=function(t,i){return TF.open(function(t,n,e){var o=n,r=uh({dataValidator:e,initialData:o,internalDialog:t},{redial:TF.redial,closeWindow:function(){hM.hide(r.dialog),i(r.instanceApi)}},m);return hM.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},t)},u=function(t,l,f,d){return TF.open(function(t,n,e){function o(){return a.on(function(t){YC.reposition(t),PD.refresh(t)})}var r,i,u=lt(st("data",e,n)),a=(i=Kv(xh.none()),{clear:function(){i.set(xh.none())},set:function(t){i.set(xh.some(t))},isSet:function(){return i.get().isSome()},on:function(t){i.get().each(t)}}),c=ah({dataValidator:e,initialData:u,internalDialog:t},{redial:TF.redial,closeWindow:function(){a.on(YC.hide),g.off("ResizeEditor",o),a.clear(),f(c.instanceApi)}},m,d),s=Yy(YC.sketch(vh(vh({lazySink:m.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},h?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Uo(y([zu("window-manager-inline-events",[ln(cy(),function(){nn(c.dialog,r_)})])],(r=g,p&&h?[]:[PD.config({contextual:{lazyContext:function(){return xh.some(Qe($v.fromDom(r.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})])))})));return a.set(s),YC.showWithin(s,l,qy(c.dialog),xh.some(jy())),p&&h||(PD.refresh(s),g.on("ResizeEditor",o)),c.instanceApi.setData(u),yC.focusIn(c.dialog),c.instanceApi},t)};return{open:function(t,n,e){return n!==undefined&&"toolbar"===n.inline?u(t,m.shared.anchors.inlineDialog(),e,n.ariaAttrs):n!==undefined&&"cursor"===n.inline?u(t,m.shared.anchors.cursor(),e,n.ariaAttrs):i(t,e)},openUrl:function(t,n){return r(t,n)},alert:function(t,n){e.open(t,function(){n()})},close:function(t){t.close()},confirm:function(t,n){o.open(t,function(t){n(t)})}}};!function aI(){hh.add("silver",function(t){var n=fM(t),e=n.uiMothership,o=n.backstage,r=n.renderUI,i=n.getUi;GO(t,o.shared);var u=$F({editor:t,backstage:o});return{renderUI:r,getWindowManagerImpl:mh(u),getNotificationManagerImpl:function(){return Oa(t,{backstage:o},e)},ui:i()}})}()}(window);