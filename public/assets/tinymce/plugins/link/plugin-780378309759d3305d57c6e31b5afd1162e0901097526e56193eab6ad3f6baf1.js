!function(c){"use strict";function n(t){return function(n){return function(n){if(null===n)return"null";var t=typeof n;return"object"==t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t}(n)===t}}function a(){}function i(n){return function(){return n}}function t(){return nn}function e(n){return n.isNone()}function r(n){return n()}function o(n){return n}function l(n,t){return-1<(e=n,r=t,rn.call(e,r));var e,r}function f(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e)}function h(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!R(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);on.apply(t,n[e])}return t}function u(n,t){return h(function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r}(n,t))}function s(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return en.none()}function d(n){return/^\w+:/i.test(n)}function m(n,t){var e,r,o=["noopener"],i=n?n.split(/\s+/):[],u=function(n){return n.filter(function(n){return-1===un.inArray(o,n)})},c=t?0<(e=u(e=i)).length?e.concat(o):o:u(i);return 0<c.length?(r=c,un.trim(r.sort().join(" "))):""}function p(n,t){return t=t||n.selection.getNode(),cn(t)?n.dom.select("a[href]",t)[0]:n.dom.getParent(t,"a[href]")}function g(n){return n&&"A"===n.nodeName&&!!n.href}function v(n){return t=["title","rel","class","target"],e=function(t,e){return n[e].each(function(n){t[e]=0<n.length?n:null}),t},r={href:n.href},f(t,function(n){r=e(r,n)}),r;var t,e,r}function y(n,t){var e,r,o=Q({},t);if(!(0<V(n).length)&&!1===$(n)){var i=m(o.rel,"_blank"===o.target);o.rel=i||null}return en.from(o.target).isNone()&&!1===B(n)&&(o.target=K(n)),o.href=(e=o.href,"http"!==(r=M(n))&&"https"!==r||d(e)?e:r+"://"+e),o}function w(n){return L(n.value)?n.value:""}function k(e){return void 0===e&&(e=w),function(n){return en.from(n).map(function(n){return t=n,r=e,o=[],un.each(t,function(n){var t=L(n.text)?n.text:L(n.title)?n.title:"";if(n.menu!==undefined);else{var e=r(n);o.push({text:t,value:e})}}),o;var t,r,o})}}function x(t,n,e,r){var o,i=r[n],u=0<t.length;return i!==undefined?(o=i,s(e,function(n){return en.some(n).filter(function(n){return n.value===o})})).map(function(n){return{url:{value:n.value,meta:{text:u?t:n.text,attach:a}},text:u?t:n.text}}):en.none()}function b(n){c.setTimeout(function(){throw n},0)}function _(n){var t=n.href;return 0<t.indexOf("@")&&-1===t.indexOf("//")&&-1===t.indexOf("mailto:")?en.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(n){return Q(Q({},n),{href:"mailto:"+t})}}):en.none()}function T(n,t,e){var r=n.getAttrib(t,e);return null!==r&&0<r.length?en.some(r):en.none()}function O(n,t){return n.dom.getParent(t,"a[href]")}function A(n){return O(n,n.selection.getStart())}function C(n,t){if(t){var e=mn(t);if(/^#/.test(e)){var r=n.$(e);r.length&&n.selection.scrollIntoView(r[0],!0)}else X(t.href)}}var P,N,E,I,S,j=tinymce.util.Tools.resolve("tinymce.PluginManager"),F=tinymce.util.Tools.resolve("tinymce.util.VK"),L=n("string"),R=n("array"),D=n("boolean"),U=n("function"),M=function(n){var t=n.getParam("link_assume_external_targets",!1);return D(t)&&t?1:!L(t)||"http"!==t&&"https"!==t?0:t},z=function(n){return n.getParam("link_context_toolbar",!1,"boolean")},q=function(n){return n.getParam("link_list")},K=function(n){return n.getParam("default_link_target")},B=function(n){return n.getParam("target_list",!0)},V=function(n){return n.getParam("rel_list",[],"array")},W=function(n){return n.getParam("link_class_list",[],"array")},H=function(n){return n.getParam("link_title",!0,"boolean")},$=function(n){return n.getParam("allow_unsafe_link_target",!1,"boolean")},G=function(n){return n.getParam("link_quicklink",!1,"boolean")},J=function(n){return n.getParam("link_default_protocol","http","string")},X=function(n){var t=c.document.createElement("a");t.target="_blank",t.href=n,t.rel="noreferrer noopener";var e,r,o=c.document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,c.window,0,0,0,0,0,!1,!1,!1,!1,0,null),e=t,r=o,c.document.body.appendChild(e),e.dispatchEvent(r),c.document.body.removeChild(e)},Q=function(){return(Q=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},Y=i(!1),Z=i(!0),nn=(P={fold:function(n){return n()},is:Y,isSome:Y,isNone:Z,getOr:o,getOrThunk:r,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(undefined),or:o,orThunk:r,map:t,each:a,bind:t,exists:Y,forall:Z,filter:t,equals:e,equals_:e,toArray:function(){return[]},toString:i("none()")},Object.freeze&&Object.freeze(P),P),tn=function(e){function n(){return o}function t(n){return n(e)}var r=i(e),o={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:Z,isNone:Y,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return tn(n(e))},each:function(n){n(e)},bind:t,exists:t,forall:t,filter:function(n){return n(e)?o:nn},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(n){return n.is(e)},equals_:function(n,t){return n.fold(Y,function(n){return t(e,n)})}};return o},en={some:tn,none:t,from:function(n){return null===n||n===undefined?nn:tn(n)}},rn=(Array.prototype.slice,Array.prototype.indexOf),on=Array.prototype.push,un=(U(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),cn=function(n){return n&&"FIGURE"===n.nodeName&&/\bimage\b/i.test(n.className)},an=function(n,t){var e=n.dom.select("img",t)[0];if(e){var r=n.dom.getParents(e,"a[href]",t)[0];r&&(r.parentNode.insertBefore(e,r),n.dom.remove(r))}},ln=function(n,t,e){var r=n.dom.select("img",t)[0];if(r){var o=n.dom.create("a",e);r.parentNode.insertBefore(o,r),o.appendChild(r)}},fn=function(a,l,f){var s=a.selection.getNode(),d=p(a,s),m=y(a,v(f));a.undoManager.transact(function(){var t,n,e,r,o,i,u,c;f.href===l.href&&l.attach(),d?(a.focus(),o=a,i=d,u=f.text,c=m,u.each(function(n){i.hasOwnProperty("innerText")?i.innerText=n:i.textContent=n}),o.dom.setAttribs(i,c),o.selection.select(i)):(t=a,n=s,e=f.text,r=m,cn(n)?ln(t,n,r):e.fold(function(){t.execCommand("mceInsertLink",!1,r)},function(n){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(n)))}))})},sn=function(e){e.undoManager.transact(function(){var n=e.selection.getNode();if(cn(n))an(e,n);else{var t=e.dom.getParent(n,"a[href]",e.getBody());t&&e.dom.remove(t,!0)}e.focus()})},dn=function(n){return 0<un.grep(n,g).length},mn=function(n){return n.getAttribute("data-mce-href")||n.getAttribute("href")},hn=function(n){return!(/</.test(n)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(n)||-1===n.indexOf("href=")))},pn=p,gn=function(n,t){return(t?t.innerText||t.textContent:n.getContent({format:"text"})).replace(/\uFEFF/g,"")},vn=m,yn=d,wn={sanitize:function(n){return k(w)(n)},sanitizeWith:k,createUi:function(t,e){return function(n){return{name:t,type:"selectbox",label:e,items:n}}},getValue:w},kn=function(n){function t(){return e}var e=n;return{get:t,set:function(n){e=n},clone:function(){return kn(t())}}},xn=function(n,i){function e(n,t){var e,r,o=(e=i,r=t.name,"link"===r?e.catalogs.link:"anchor"===r?e.catalogs.anchor:en.none()).getOr([]);return x(u.get(),t.name,o,n)}var u=kn(n.text);return{onChange:function(n,t){return"url"===t.name?function(n){if(u.get().length<=0){var t=n.url.meta.text!==undefined?n.url.meta.text:n.url.value,e=n.url.meta.title!==undefined?n.url.meta.title:"";return en.some({text:t,title:e})}return en.none()}(n()):l(["anchor","link"],t.name)?e(n(),t):("text"===t.name&&u.set(n().text),en.none())}}},bn={},_n={exports:bn};N=undefined,E=bn,I=_n,S=undefined,function(n){"object"==typeof E&&void 0!==I?I.exports=n():"function"==typeof N&&N.amd?N([],n):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}(function(){return function f(i,u,c){function a(t,n){if(!u[t]){if(!i[t]){var e="function"==typeof S&&S;if(!n&&e)return e(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[t]={exports:{}};i[t][0].call(o.exports,function(n){return a(i[t][1][n]||n)},o,o.exports,f,i,u,c)}return u[t].exports}for(var l="function"==typeof S&&S,n=0;n<c.length;n++)a(c[n]);return a}({1:[function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(n){if(l===setTimeout)return setTimeout(n,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(n,0);try{return l(n,0)}catch(t){try{return l.call(null,n,0)}catch(t){return l.call(this,n,0)}}}function i(){h&&d&&(h=!1,d.length?m=d.concat(m):p=-1,m.length&&u())}function u(){if(!h){var n=o(i);h=!0;for(var t=m.length;t;){for(d=m,m=[];++p<t;)d&&d[p].run();p=-1,t=m.length}d=null,h=!1,function e(n){if(f===clearTimeout)return clearTimeout(n);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(n);try{return f(n)}catch(t){try{return f.call(null,n)}catch(t){return f.call(this,n)}}}(n)}}function c(n,t){this.fun=n,this.array=t}function a(){}var l,f,s=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(n){l=e}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(n){f=r}}();var d,m=[],h=!1,p=-1;s.nextTick=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];m.push(new c(n,t)),1!==m.length||h||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.prependListener=a,s.prependOnceListener=a,s.listeners=function(){return[]},s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],2:[function(n,e){(function(t){function a(){}function i(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],f(n,this)}function r(e,r){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var n=1===e._state?r.onFulfilled:r.onRejected;if(null!==n){var t;try{t=n(e._value)}catch(s){return void u(r.promise,s)}o(r.promise,t)}else(1===e._state?o:u)(r.promise,e._value)})):e._deferreds.push(r)}function o(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if(t instanceof i)return n._state=3,n._value=t,void c(n);if("function"==typeof e)return void f(function a(t,e){return function(){t.apply(e,arguments)}}(e,t),n)}n._state=1,n._value=t,c(n)}catch(r){u(n,r)}}function u(n,t){n._state=2,n._value=t,c(n)}function c(n){2===n._state&&0===n._deferreds.length&&i._immediateFn(function(){n._handled||i._unhandledRejectionFn(n._value)});for(var t=0,e=n._deferreds.length;t<e;t++)r(n,n._deferreds[t]);n._deferreds=null}function l(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function f(n,t){var e=!1;try{n(function(n){e||(e=!0,o(t,n))},function(n){e||(e=!0,u(t,n))})}catch(a){if(e)return;e=!0,u(t,a)}}var n,s;n=this,s=setTimeout,i.prototype["catch"]=function(n){return this.then(null,n)},i.prototype.then=function(n,t){var e=new this.constructor(a);return r(this,new l(n,t,e)),e},i.all=function(n){var c=Array.prototype.slice.call(n);return new i(function(r,o){function i(t,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if("function"==typeof e)return void e.call(n,function(n){i(t,n)},o)}c[t]=n,0==--u&&r(c)}catch(a){o(a)}}if(0===c.length)return r([]);for(var u=c.length,n=0;n<c.length;n++)i(n,c[n])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(n){n(t)})},i.reject=function(e){return new i(function(n,t){t(e)})},i.race=function(o){return new i(function(n,t){for(var e=0,r=o.length;e<r;e++)o[e].then(n,t)})},i._immediateFn="function"==typeof t?function(n){t(n)}:function(n){s(n,0)},i._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},i._setImmediateFn=function(n){i._immediateFn=n},i._setUnhandledRejectionFn=function(n){i._unhandledRejectionFn=n},void 0!==e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}).call(this,n("timers").setImmediate)},{timers:3}],3:[function(a,n,l){(function(n,t){function e(n,t){this._id=n,this._clearFn=t}var r=a("process/browser.js").nextTick,o=Function.prototype.apply,i=Array.prototype.slice,u={},c=0;l.setTimeout=function(){return new e(o.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new e(o.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(n){n.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},l.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},l._unrefActive=l.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;0<=t&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))},l.setImmediate="function"==typeof n?n:function(n){var t=c++,e=!(arguments.length<2)&&i.call(arguments,1);return u[t]=!0,r(function(){u[t]&&(e?n.apply(null,e):n.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof t?t:function(n){delete u[n]}}).call(this,a("timers").setImmediate,a("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(n,t){var e=n("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:r.Promise||e}},{"promise-polyfill":2}]},{},[4])(4)});var Tn=_n.exports.boltExport,On=function(n){var e=en.none(),t=[],r=function(n){o()?u(n):t.push(n)},o=function(){return e.isSome()},i=function(n){f(n,u)},u=function(t){e.each(function(n){c.setTimeout(function(){t(n)},0)})};return n(function(n){e=en.some(n),i(t),t=[]}),{get:r,map:function(e){return On(function(t){r(function(n){t(e(n))})})},isReady:o}},An={nu:On,pure:function(t){return On(function(n){n(t)})}},Cn=function(e){function n(n){e().then(n,b)}return{map:function(n){return Cn(function(){return e().then(n)})},bind:function(t){return Cn(function(){return e().then(function(n){return t(n).toPromise()})})},anonBind:function(n){return Cn(function(){return e().then(function(){return n.toPromise()})})},toLazy:function(){return An.nu(n)},toCached:function(){var n=null;return Cn(function(){return null===n&&(n=e()),n})},toPromise:e,get:n}},Pn=function(n){return Cn(function(){return new Tn(n)})},Nn=function(n){return Cn(function(){return Tn.resolve(n)})},En=tinymce.util.Tools.resolve("tinymce.util.Delay"),In=function(u,c){return s([_,(e=M(u),r=J(u),function(n){var t=n.href;return 1===e&&!yn(t)||0===e&&/^\s*www[\.|\d\.]/i.test(t)?en.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+r+":// prefix?",preprocess:function(n){return Q(Q({},n),{href:r+"://"+t})}}):en.none()})],function(n){return n(c)}).fold(function(){return Nn(c)},function(i){return Pn(function(t){var e,n,r,o;e=u,n=i.message,r=function(n){t(n?i.preprocess(c):c)},o=e.selection.getRng(),En.setEditorTimeout(e,function(){e.windowManager.confirm(n,function(n){e.selection.setRng(o),r(n)})})})});var e,r},Sn=function(n){var t=u(n.dom.select("a:not([href])"),function(n){var t=n.name||n.id;return t?[{text:t,value:"#"+t}]:[]});return 0<t.length?en.some([{text:"None",value:""}].concat(t)):en.none()},jn=function(n){var t=W(n);return 0<t.length?wn.sanitize(t):en.none()},Fn=tinymce.util.Tools.resolve("tinymce.util.XHR"),Ln=function(t){function e(n){return t.convertURL(n.value||n.url,"href")}var n=q(t);return Pn(function(t){L(n)?Fn.send({url:n,success:function(n){return t(function(n){try{return en.some(JSON.parse(n))}catch(t){return en.none()}}(n))},error:function(){return t(en.none())}}):U(n)?n(function(n){return t(en.some(n))}):t(en.from(n))}).map(function(n){return n.bind(wn.sanitizeWith(e)).map(function(n){return 0<n.length?[{text:"None",value:""}].concat(n):n})})},Rn=function(n,t){var e=V(n);if(0<e.length){var r=t.is("_blank");return(!1===$(n)?wn.sanitizeWith(function(n){return vn(wn.getValue(n),r)}):wn.sanitize)(e)}return en.none()},Dn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Un=function(n){var t=B(n);return R(t)?wn.sanitize(t).orThunk(function(){return en.some(Dn)}):!1===t?en.none():en.some(Dn)},Mn=function(f,s){return Ln(f).map(function(n){var t,e,r,o,i,u,c,a,l=(e=s,r=(t=f).dom,o=hn(t.selection.getContent())?en.some(gn(t.selection,e)):en.none(),i=e?en.some(r.getAttrib(e,"href")):en.none(),u=e?en.from(r.getAttrib(e,"target")):en.none(),c=T(r,e,"rel"),a=T(r,e,"class"),{url:i,text:o,title:T(r,e,"title"),target:u,rel:c,linkClass:a});return{anchor:l,catalogs:{targets:Un(f),rels:Rn(f,l.target),classes:jn(f),anchor:Sn(f),link:n},optNode:en.from(s),flags:{titleEnabled:H(f)}}})},zn=function(m){var n,t;(n=m,t=pn(n),Mn(n,t)).map(function(n){return d=t=n,e=function(n){function t(t){return en.from(e[t]).filter(function(n){return!d.anchor[t].is(n)})}var e=n.getData();if(!e.url.value)return sn(s),void n.close();var r={href:e.url.value,text:t("text"),target:t("target"),rel:t("rel"),"class":t("linkClass"),title:t("title")},o={href:e.url.value,attach:e.url.meta!==undefined&&e.url.meta.attach?e.url.meta.attach:function(){}};In(s,r).get(function(n){fn(s,o,n)}),n.close()},r=s=m,u=t.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),c=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],o=t,i=en.from(K(r)),a={url:{value:o.anchor.url.getOr(""),meta:{attach:function(){},text:o.anchor.url.fold(function(){return""},function(){return o.anchor.text.getOr("")}),original:{value:o.anchor.url.getOr("")}}},text:o.anchor.text.getOr(""),title:o.anchor.title.getOr(""),anchor:o.anchor.url.getOr(""),link:o.anchor.url.getOr(""),rel:o.anchor.rel.getOr(""),target:o.anchor.target.or(i).getOr(""),linkClass:o.anchor.linkClass.getOr("")},l=xn(a,t),f=t.catalogs,{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:h([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],u,c,function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t}([f.anchor.map(wn.createUi("anchor","Anchors")),f.rels.map(wn.createUi("rel","Rel")),f.targets.map(wn.createUi("target","Open link in...")),f.link.map(wn.createUi("link","Link list")),f.classes.map(wn.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onChange:function(t,n){var e=n.name;l.onChange(t.getData,{name:e}).each(function(n){t.setData(n)})},onSubmit:e};var t,e,r,o,i,u,c,a,l,f,s,d}).get(function(n){m.windowManager.open(n)})},qn=function(n){return function(){zn(n)}},Kn=function(n){return function(){C(n,A(n))}},Bn=function(r){r.on("click",function(n){var t=O(r,n.target);t&&F.metaKeyPressed(n)&&(n.preventDefault(),C(r,t))}),r.on("keydown",function(n){var t,e=A(r);e&&13===n.keyCode&&(!0===(t=n).altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey)&&(n.preventDefault(),C(r,e))})},Vn=function(e){return function(t){function n(n){return t.setActive(!e.readonly&&!!pn(e,n.element))}return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}},Wn=function(e){return function(t){function n(n){return t.setDisabled(!dn(n.parents))}return t.setDisabled(!dn(e.dom.getParents(e.selection.getStart()))),e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}},Hn=function(n){n.addCommand("mceLink",function(){G(n)?n.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):qn(n)()})},$n=function(n){n.addShortcut("Meta+K","",function(){n.execCommand("mceLink")})},Gn=function(n){n.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:qn(n),onSetup:Vn(n)}),n.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Kn(n),onSetup:Wn(n)}),n.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return sn(n)},onSetup:Wn(n)})},Jn=function(n){n.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Kn(n),onSetup:Wn(n)}),n.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:qn(n)}),n.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return sn(n)},onSetup:Wn(n)})},Xn=function(t){t.ui.registry.addContextMenu("link",{update:function(n){return dn(t.dom.getParents(n,"a"))?"link unlink openlink":"link"}})},Qn=function(i){function n(n){var t=i.selection.getNode();return n.setDisabled(!pn(i,t)),function(){}}i.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Vn(i)},label:"Link",predicate:function(n){return!!pn(i,n)&&z(i)},initValue:function(){var n=pn(i);return n?mn(n):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(n){var t=i.selection.getNode();return n.setActive(!!pn(i,t)),Vn(i)(n)},onAction:function(n){var t=pn(i),e=n.getValue();if(t)i.dom.setAttrib(t,"href",e),i.selection.collapse(!1),n.hide();else{var r={href:e,attach:function(){}},o=hn(i.selection.getContent())?en.some(gn(i.selection,t)).filter(function(n){return 0<n.length}).or(en.from(e)):en.none();fn(i,r,{href:e,text:o,title:en.none(),rel:en.none(),target:en.none(),"class":en.none()}),n.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:n,onAction:function(n){sn(i),n.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:n,onAction:function(n){Kn(i)(),n.hide()}}]})};!function Yn(){j.add("link",function(n){Gn(n),Jn(n),Xn(n),Qn(n),Bn(n),Hn(n),$n(n)})}()}(window);