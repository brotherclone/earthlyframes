!function(h){"use strict";function t(){}function g(e){return function(){return e}}function e(){return se}function n(e){return e.isNone()}function r(e){return e()}function o(e){return e}function c(){return function(e){function n(){r.get().each(e)}var r=te(fe.none());return{clear:function(){n(),r.set(fe.none())},isSet:function(){return r.get().isSome()},set:function(e){n(),r.set(fe.some(e))}}}(function(e){e.unbind()})}function i(n){return function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(e)===n}}function u(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function a(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function s(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function f(e,n){return function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!de(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);pe.apply(n,e[r])}return n}(u(e,n))}function l(e,n){return-1!==e.indexOf(n)}function d(e){return e.style!==undefined&&he(e.style.getPropertyValue)}function m(e,n,r){!function(e,n,r){if(!(le(r)||me(r)||ge(r)))throw h.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}(e.dom(),n,r)}function p(e,n){var r=e.dom().getAttribute(n);return null===r?undefined:r}function v(e,n){e.dom().removeAttribute(n)}function w(e,n){var r=e.dom();!function(e,n){for(var r=ve(e),t=0,o=r.length;t<o;t++){var i=r[t];n(e[i],i)}}(n,function(e,n){!function(e,n,r){if(!le(r))throw h.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);d(e)&&e.style.setProperty(n,r)}(r,n,e)})}function y(e,n){var r,t,o=e.dom(),i=h.window.getComputedStyle(o).getPropertyValue(n),u=""!==i||(t=xe(r=e)?r.dom().parentNode:r.dom())!==undefined&&null!==t&&t.ownerDocument.body.contains(t)?i:Te(o,n);return null===u?undefined:u}function S(e){function n(){e.stopPropagation()}function r(){e.preventDefault()}var t,o,i,u,c,s,a,f,l,d=ye.fromDom(e.target),m=(t=r,o=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(o.apply(null,e))});return i=d,u=e.clientX,c=e.clientY,s=n,a=r,f=m,l=e,{target:g(i),x:g(u),y:g(c),stop:s,prevent:a,kill:f,raw:g(l)}}function O(e,n){function r(e){return Number(n.replace(t,"$"+e))}var t=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}return undefined}(e,n);return t?be(r(1),r(2)):{major:0,minor:0}}function E(e,n){return function(){return n===e}}function x(e,n){return function(){return n===e}}function T(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o,r))return fe.some(o)}return fe.none()}(e,function(e){return e.search(r)})}function N(n){return function(e){return l(e,n)}}function b(){return qe.get()}function C(e,n){var r=e.dom();if(r.nodeType!==Xe)return!1;var t=r;if(t.matches!==undefined)return t.matches(n);if(t.msMatchesSelector!==undefined)return t.msMatchesSelector(n);if(t.webkitMatchesSelector!==undefined)return t.webkitMatchesSelector(n);if(t.mozMatchesSelector!==undefined)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function D(e,n){var r,t=n===undefined?h.document:n.dom();return(r=t).nodeType!==Xe&&r.nodeType!==ze||0===r.childElementCount?[]:u(t.querySelectorAll(e),ye.fromDom)}function A(r){return(e=r,fe.from(e.dom().parentNode).map(ye.fromDom)).map(Ye).map(function(e){return s(e,function(e){return n=e,!(r.dom()===n.dom());var n})}).getOr([]);var e}function k(e){var n=e===undefined?h.window:e;return fe.from(n.visualViewport)}function M(e,n,r,t){return{x:g(e),y:g(n),width:g(r),height:g(t),right:g(e+r),bottom:g(n+t)}}function F(e){var n,r,t,o,i=e===undefined?h.window:e,u=i.document,c=(n=ye.fromDom(u),r=n!==undefined?n.dom():h.document,t=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop,$e(t,o));return k(i).fold(function(){var e=i.document.documentElement,n=e.clientWidth,r=e.clientHeight;return M(c.left(),c.top(),n,r)},function(e){return M(Math.max(e.pageLeft,c.left()),Math.max(e.pageTop,c.top()),e.width,e.height)})}function _(r,e,n){return k(n).map(function(e){function n(e){return S(e)}return e.addEventListener(r,n),{unbind:function(){return e.removeEventListener(r,n)}}}).getOrThunk(function(){return{unbind:t}})}function R(e,n,r){return s(function(e,n){for(var r=he(n)?n:ue,t=e.dom(),o=[];null!==t.parentNode&&t.parentNode!==undefined;){var i=t.parentNode,u=ye.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(e,r),n)}function L(e,n){return r=function(e){return C(e,n)},s(A(e),r);var r}function P(r,t){return function(n){function e(e){return n.setActive(e.state)}return n.setActive(null!==t.get()),r.on("FullscreenStateChanged",e),function(){return r.off("FullscreenStateChanged",e)}}}var I,H,W,U,j,B,V,q,X,z,Y,G,$,K,J,Q,Z,ee,ne,re,te=function(e){function n(){return r}var r=e;return{get:n,set:function(e){r=e},clone:function(){return te(n())}}},oe=tinymce.util.Tools.resolve("tinymce.PluginManager"),ie=function(e){return{isFullscreen:function(){return null!==e.get()}}},ue=g(!1),ce=g(!0),se=(I={fold:function(e){return e()},is:ue,isSome:ue,isNone:ce,getOr:o,getOrThunk:r,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(undefined),or:o,orThunk:r,map:e,each:t,bind:e,exists:ue,forall:ce,filter:e,equals:n,equals_:n,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(I),I),ae=function(r){function e(){return o}function n(e){return e(r)}var t=g(r),o={fold:function(e,n){return n(r)},is:function(e){return r===e},isSome:ce,isNone:ue,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(e){return ae(e(r))},each:function(e){e(r)},bind:n,exists:n,forall:n,filter:function(e){return e(r)?o:se},toArray:function(){return[r]},toString:function(){return"some("+r+")"},equals:function(e){return e.is(r)},equals_:function(e,n){return e.fold(ue,function(e){return n(r,e)})}};return o},fe={some:ae,none:e,from:function(e){return null===e||e===undefined?se:ae(e)}},le=i("string"),de=i("array"),me=i("boolean"),he=i("function"),ge=i("number"),pe=(Array.prototype.slice,Array.prototype.push),ve=(he(Array.from)&&Array.from,Object.keys),we=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:g(e)}},ye={fromHtml:function(e,n){var r=(n||h.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw h.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return we(r.childNodes[0])},fromTag:function(e,n){var r=(n||h.document).createElement(e);return we(r)},fromText:function(e,n){var r=(n||h.document).createTextNode(e);return we(r)},fromDom:we,fromPoint:function(e,n,r){var t=e.dom();return fe.from(t.elementFromPoint(n,r)).map(we)}},Se=(h.Node.ATTRIBUTE_NODE,h.Node.CDATA_SECTION_NODE,h.Node.COMMENT_NODE,h.Node.DOCUMENT_NODE),Oe=(h.Node.DOCUMENT_TYPE_NODE,h.Node.DOCUMENT_FRAGMENT_NODE,h.Node.ELEMENT_NODE),Ee=h.Node.TEXT_NODE,xe=(h.Node.PROCESSING_INSTRUCTION_NODE,h.Node.ENTITY_REFERENCE_NODE,h.Node.ENTITY_NODE,h.Node.NOTATION_NODE,"undefined"!=typeof h.window?h.window:Function("return this;")(),H=Ee,function(e){return e.dom().nodeType===H}),Te=function(e,n){return d(e)?e.style.getPropertyValue(n):""},Ne=function(){return be(0,0)},be=function(e,n){return{major:e,minor:n}},Ce={nu:be,detect:function(e,n){var r=String(n).toLowerCase();return 0===e.length?Ne():O(e,r)},unknown:Ne},De="Firefox",Ae=function(e){var n=e.current;return{current:n,version:e.version,isEdge:E("Edge",n),isChrome:E("Chrome",n),isIE:E("IE",n),isOpera:E("Opera",n),isFirefox:E(De,n),isSafari:E("Safari",n)}},ke={unknown:function(){return Ae({current:undefined,version:Ce.unknown()})},nu:Ae,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(De),safari:g("Safari")},Me="Windows",Fe="Android",_e="Solaris",Re="FreeBSD",Le="ChromeOS",Pe=function(e){var n=e.current;return{current:n,version:e.version,isWindows:x(Me,n),isiOS:x("iOS",n),isAndroid:x(Fe,n),isOSX:x("OSX",n),isLinux:x("Linux",n),isSolaris:x(_e,n),isFreeBSD:x(Re,n),isChromeOS:x(Le,n)}},Ie={unknown:function(){return Pe({current:undefined,version:Ce.unknown()})},nu:Pe,windows:g(Me),ios:g("iOS"),android:g(Fe),linux:g("Linux"),osx:g("OSX"),solaris:g(_e),freebsd:g(Re),chromeos:g(Le)},He=function(e,r){return T(e,r).map(function(e){var n=Ce.detect(e.versionRegexes,r);return{current:e.name,version:n}})},We=function(e,r){return T(e,r).map(function(e){var n=Ce.detect(e.versionRegexes,r);return{current:e.name,version:n}})},Ue=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,je=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return l(e,"edge/")&&l(e,"chrome")&&l(e,"safari")&&l(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ue],search:function(e){return l(e,"chrome")&&!l(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return l(e,"msie")||l(e,"trident")}},{name:"Opera",versionRegexes:[Ue,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:N("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:N("firefox")},{name:"Safari",versionRegexes:[Ue,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(l(e,"safari")||l(e,"mobile/"))&&l(e,"applewebkit")}}],Be=[{name:"Windows",search:N("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return l(e,"iphone")||l(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:N("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:N("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:N("linux"),versionRegexes:[]},{name:"Solaris",search:N("sunos"),versionRegexes:[]},{name:"FreeBSD",search:N("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:N("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ve={browsers:g(je),oses:g(Be)},qe=te((W=h.navigator.userAgent,U=function(e){return h.window.matchMedia(e).matches},Z=Ve.browsers(),ee=Ve.oses(),ne=He(Z,W).fold(ke.unknown,ke.nu),re=We(ee,W).fold(Ie.unknown,Ie.nu),{browser:ne,os:re,deviceType:(j=re,B=ne,V=W,q=U,X=j.isiOS()&&!0===/ipad/i.test(V),z=j.isiOS()&&!X,Y=j.isiOS()||j.isAndroid(),G=Y||q("(pointer:coarse)"),$=X||!z&&Y&&q("(min-device-width:768px)"),K=z||Y&&!$,J=B.isSafari()&&j.isiOS()&&!1===/safari/i.test(V),Q=!K&&!$&&!J,{isiPad:g(X),isiPhone:g(z),isTablet:g($),isPhone:g(K),isTouch:g(G),isAndroid:j.isAndroid,isiOS:j.isiOS,isWebView:g(J),isDesktop:g(Q)})})),Xe=Oe,ze=Se,Ye=(b().browser.isIE(),function(e){return u(e.dom().childNodes,ye.fromDom)}),Ge=(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}("element","offset"),function(r,t){return{left:g(r),top:g(t),translate:function(e,n){return Ge(r+e,t+n)}}}),$e=Ge,Ke=(b().browser.isSafari(),tinymce.util.Tools.resolve("tinymce.dom.DOMUtils")),Je=tinymce.util.Tools.resolve("tinymce.Env"),Qe=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ze=function(e,n){e.fire("FullscreenStateChanged",{state:n})},en="data-ephox-mobile-fullscreen-style",nn="position:absolute!important;",rn="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",tn=Je.os.isAndroid(),on=function(o,e,n){function r(t){return function(e){var n=p(e,"style"),r=n===undefined?"no-styles":n.trim();r!==t&&(m(e,en,r),w(e,o.parseStyle(t)))}}var t,i,u=(i="*",R(e,function(e){return C(e,i)},void 0)),c=f(u,function(e){return L(e,"*:not(.tox-silver-sink)")}),s=(t=y(n,"background-color"))!==undefined&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;";a(c,r("display:none!important;")),a(u,r(nn+rn+s)),r((!0===tn?"":nn)+rn+s)(e)},un=function(r){a(D("["+en+"]"),function(e){var n=p(e,en);"no-styles"!==n?w(e,r.parseStyle(n)):v(e,"style"),v(e,en)})},cn=Ke.DOM,sn=k().fold(function(){return{bind:t,unbind:t}},function(n){var r,t=(r=te(fe.none()),{clear:function(){r.set(fe.none())},set:function(e){r.set(fe.some(e))},isSet:function(){return r.get().isSome()},on:function(e){r.get().each(e)}}),o=c(),i=c(),u=Qe.throttle(function(){h.document.body.scrollTop=0,h.document.documentElement.scrollTop=0,h.window.requestAnimationFrame(function(){t.on(function(e){return w(e,{top:n.offsetTop+"px",left:n.offsetLeft+"px",height:n.height+"px",width:n.width+"px"})})})},50);return{bind:function(e){t.set(e),u(),o.set(_("resize")),i.set(_("scroll"))},unbind:function(){t.on(function(){o.clear(),i.clear()}),t.clear()}}}),an=function(e,n){var r,t,o,i=h.document.body,u=h.document.documentElement;t=e.getContainer();var c,s,a=ye.fromDom(t),f=n.get(),l=ye.fromDom(e.getBody()),d=Je.deviceType.isTouch();if(r=t.style,o=e.getContentAreaContainer().firstChild.style,f)o.width=f.iframeWidth,o.height=f.iframeHeight,r.width=f.containerWidth,r.height=f.containerHeight,r.top=f.containerTop,r.left=f.containerLeft,d&&un(e.dom),cn.removeClass(i,"tox-fullscreen"),cn.removeClass(u,"tox-fullscreen"),cn.removeClass(t,"tox-fullscreen"),s=f.scrollPos,h.window.scrollTo(s.x,s.y),n.set(null),Ze(e,!1),sn.unbind(),e.off("remove",sn.unbind);else{var m={scrollPos:(c=F(h.window),{x:c.x(),y:c.y()}),containerWidth:r.width,containerHeight:r.height,containerTop:r.top,containerLeft:r.left,iframeWidth:o.width,iframeHeight:o.height};d&&on(e.dom,a,l),o.width=o.height="100%",r.width=r.height="",cn.addClass(i,"tox-fullscreen"),cn.addClass(u,"tox-fullscreen"),cn.addClass(t,"tox-fullscreen"),sn.bind(a),e.on("remove",sn.unbind),n.set(m),Ze(e,!0)}},fn=function(e,n){e.addCommand("mceFullScreen",function(){an(e,n)})},ln=function(e,n){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:P(e,n)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:P(e,n)})};!function dn(){oe.add("fullscreen",function(e){var n=te(null);return e.settings.inline||(fn(e,n),ln(e,n),e.addShortcut("Meta+Shift+F","","mceFullScreen")),ie(n)})}()}(window);