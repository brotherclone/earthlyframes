!function(){"use strict";function a(e){var n=e;return{get:function(){return n},set:function(e){n=e}}}function e(t){return function(e){return r=typeof(n=e),(null===n?"null":"object"==r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===t;var n,r}}function n(n){return function(e){return typeof e===n}}function c(e){return!(null==e)}function s(){}function y(e){return function(){return e}}function r(e){return e}function t(){return Z}function o(e){return e()}function l(e){function n(){return r.get().each(e)}var r=a(ne.none());return{clear:function(){n(),r.set(ne.none())},isSet:function(){return r.get().isSome()},get:function(){return r.get()},set:function(e){n(),r.set(ne.some(e))}}}function f(){return l(function(e){return e.unbind()})}function C(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function D(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function d(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function i(e,n){return function(e,n,r){for(var t=0,o=e.length;t<o;t++){var i=e[t];if(n(i,t))return ne.some(i);if(r(i,t))break}return ne.none()}(e,n,J)}function u(e,n){return-1!==e.indexOf(n)}function m(e){return void 0!==e.style&&Y(e.style.getPropertyValue)}function h(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function v(n){return function(e){return e.dom.nodeType===n}}function b(t,e){return function(e){for(var n=0;n<e.length;n++){var r=function(n){var r=n.brand.toLowerCase();return i(t,function(e){var n;return r===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())}).map(function(e){return{current:e.name,version:he.nu(parseInt(n.version,10),0)}})}(e[n]);if(r.isSome())return r}return ne.none()}(e.brands)}function S(e,n){var r=String(n).toLowerCase();return i(e,function(e){return e.search(r)})}function g(n){return function(e){return u(e,n)}}function x(e){return window.matchMedia(e).matches}function p(e,n){var r=e.dom;if(1!==r.nodeType)return!1;var t=r;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function A(e){return ie.fromDom(e.dom.ownerDocument)}function R(e){var n,r=Re(e);return me(n=r)&&c(n.dom.host)?ne.some(r):ne.none()}function L(e){return ie.fromDom(e.dom.host)}function w(e,n,r){!function(e,n,r){if(!(U(r)||K(r)||G(r)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}(e.dom,n,r)}function P(e,n){var r=e.dom.getAttribute(n);return null===r?void 0:r}function M(e,n){e.dom.removeAttribute(n)}function N(e,n){var u=e.dom;!function(e){for(var n,r=oe(e),t=0,o=r.length;t<o;t++){var i=r[t];n=e[i],function(e,n,r){if(!U(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);m(e)&&e.style.setProperty(n,r)}(u,i,n)}}(n)}function E(e){function n(){return e.stopPropagation()}function r(){return e.preventDefault()}var t,o,i=ie.fromDom(function(e){if(Ae()&&c(e.target)){var n=ie.fromDom(e.target);if(se(n)&&Le(n)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return 0<(t=r).length?ne.some(t[0]):ne.none()}}var t;return ne.from(e.target)}(e).getOr(e.target)),u=(t=r,o=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(o.apply(null,e))});return{target:i,x:e.clientX,y:e.clientY,stop:n,prevent:r,kill:u,raw:e}}function H(e,n,r){return o=n,i=!1,u=He,c=r,a=function(e){u(e)&&c(E(e))},(t=e).dom.addEventListener(o,a,i),{unbind:function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=o.concat(e);return t.apply(null,r)}}(Ne,t,o,a,i)};var t,o,i,u,c,a}function W(e){var n=void 0===e?window:e;return ke().browser.isFirefox()?ne.none():ne.from(n.visualViewport)}function q(e,n,r,t){return{x:e,y:n,width:r,height:t,right:e+r,bottom:n+t}}function O(r,t,e){return W(e).map(function(e){function n(e){return t(E(e))}return e.addEventListener(r,n),{unbind:function(){return e.removeEventListener(r,n)}}}).getOrThunk(function(){return{unbind:s}})}function I(e,n){e.fire("FullscreenStateChanged",{state:n})}function j(e){return e.getParam("fullscreen_native",!1,"boolean")}function B(e){return e.dom===(void 0!==(n=A(e).dom).fullscreenElement?n.fullscreenElement:void 0!==n.msFullscreenElement?n.msFullscreenElement:void 0!==n.webkitFullscreenElement?n.webkitFullscreenElement:null);var n}function F(e,n){return t=function(e){return p(e,n)},d((r=e,ne.from(r.dom.parentNode).map(ie.fromDom).map(Ce).map(function(e){return d(e,function(e){return r.dom!==e.dom})}).getOr([])),t);var r,t}function V(o,e,n){function r(t){return function(e){var n=P(e,"style"),r=void 0===n?"no-styles":n.trim();r===t||(w(e,Ve,r),N(e,o.parseStyle(t)))}}var t,i,u,c,a,s,l=(s=function(e){return p(e,"*")},d(function(e,n){for(var r=Y(n)?n:J,t=e.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=ie.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(e,void 0),s)),f=function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!$(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);te.apply(n,e[r])}return n}(C(l,function(e){return F(e,"*:not(.tox-silver-sink)")})),m=(i="background-color",u=(t=n).dom,void 0!==(a=""!==(c=window.getComputedStyle(u).getPropertyValue(i))||Pe(t)?c:Me(u,i))&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;");D(f,r("display:none!important;")),D(l,r(Xe+_e+m)),r((!0===ze?"":Xe)+_e+m)(e)}function T(r,t){return function(n){function e(e){return n.setActive(e.state)}return n.setActive(null!==t.get()),r.on("FullscreenStateChanged",e),function(){return r.off("FullscreenStateChanged",e)}}}function k(){return de(0,0)}function X(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version;return{current:r,version:t,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(pe),isSafari:n("Safari")}}function _(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version;return{current:r,version:t,isWindows:n(be),isiOS:n("iOS"),isAndroid:n(Se),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(xe),isFreeBSD:n(Ee),isChromeOS:n(Oe)}}var z=tinymce.util.Tools.resolve("tinymce.PluginManager"),U=e("string"),$=e("array"),K=n("boolean"),Y=n("function"),G=n("number"),J=y(!1),Q=y(!0),Z={fold:function(e){return e()},isSome:J,isNone:Q,getOr:r,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:y(null),getOrUndefined:y(void 0),or:r,orThunk:o,map:t,each:s,bind:t,exists:J,forall:Q,filter:function(){return Z},toArray:function(){return[]},toString:y("none()")},ee=function(r){function e(){return o}function n(e){return e(r)}var t=y(r),o={fold:function(e,n){return n(r)},isSome:Q,isNone:J,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(e){return ee(e(r))},each:function(e){e(r)},bind:n,exists:n,forall:n,filter:function(e){return e(r)?o:Z},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o},ne={some:ee,none:t,from:function(e){return null==e?Z:ee(e)}},re=function(){return(re=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},te=Array.prototype.push,oe=Object.keys,ie={fromHtml:function(e,n){var r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return h(r.childNodes[0])},fromTag:function(e,n){return h((n||document).createElement(e))},fromText:function(e,n){return h((n||document).createTextNode(e))},fromDom:h,fromPoint:function(e,n,r){return ne.from(e.dom.elementFromPoint(n,r)).map(h)}};"undefined"!=typeof window||Function("return this;")();var ue,ce,ae,se=v(1),le=v(3),fe=v(9),me=v(11),de=function(e,n){return{major:e,minor:n}},he={nu:de,detect:function(e,n){function r(e){return Number(t.replace(o,"$"+e))}var t,o,i=String(n).toLowerCase();return 0===e.length?k():(o=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,t=i))?de(r(1),r(2)):{major:0,minor:0}},unknown:k},ve=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ge={browsers:y([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return u(e,"edge/")&&u(e,"chrome")&&u(e,"safari")&&u(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ve],search:function(e){return u(e,"chrome")&&!u(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return u(e,"msie")||u(e,"trident")}},{name:"Opera",versionRegexes:[ve,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:g("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:g("firefox")},{name:"Safari",versionRegexes:[ve,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(u(e,"safari")||u(e,"mobile/"))&&u(e,"applewebkit")}}]),oses:y([{name:"Windows",search:g("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return u(e,"iphone")||u(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:g("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:g("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:g("linux"),versionRegexes:[]},{name:"Solaris",search:g("sunos"),versionRegexes:[]},{name:"FreeBSD",search:g("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:g("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},pe="Firefox",we=function(){return X({current:void 0,version:he.unknown()})},ye=X,be=(y("Edge"),y("Chrome"),y("IE"),y("Opera"),y(pe),y("Safari"),"Windows"),Se="Android",xe="Solaris",Ee="FreeBSD",Oe="ChromeOS",Fe=function(){return _({current:void 0,version:he.unknown()})},Te=_,ke=(y(be),y("iOS"),y(Se),y("Linux"),y("OSX"),y(xe),y(Ee),y(Oe),ae=!(ue=function(){return e=navigator.userAgent,n=ne.from(navigator.userAgentData),r=x,v=ge.browsers(),g=ge.oses(),{browser:p=n.bind(function(e){return b(v,e)}).orThunk(function(){return S(v,r=e).map(function(e){var n=he.detect(e.versionRegexes,r);return{current:e.name,version:n}});var r}).fold(we,ye),os:w=S(g,t=e).map(function(e){var n=he.detect(e.versionRegexes,t);return{current:e.name,version:n}}).fold(Fe,Te),deviceType:(i=p,u=e,c=r,a=(o=w).isiOS()&&!0===/ipad/i.test(u),s=o.isiOS()&&!a,f=(l=o.isiOS()||o.isAndroid())||c("(pointer:coarse)"),m=a||!s&&l&&c("(min-device-width:768px)"),d=s||l&&!m,h=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),{isiPad:y(a),isiPhone:y(s),isTablet:y(m),isPhone:y(d),isTouch:y(f),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:y(h),isDesktop:y(!d&&!m&&!h)})};var e,n,r,t,o,i,u,c,a,s,l,f,m,d,h,v,g,p,w}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ae||(ae=!0,ce=ue.apply(null,e)),ce}),Ce=function(e){return C(e.dom.childNodes,ie.fromDom)},De=Y(Element.prototype.attachShadow)&&Y(Node.prototype.getRootNode),Ae=y(De),Re=De?function(e){return ie.fromDom(e.dom.getRootNode())}:function(e){return fe(e)?e:A(e)},Le=function(e){return c(e.dom.shadowRoot)},Pe=function(e){var n=le(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var r,t,o=n.ownerDocument;return R(ie.fromDom(n)).fold(function(){return o.body.contains(n)},(r=Pe,t=L,function(e){return r(t(e))}))},Me=function(e,n){return m(e)?e.style.getPropertyValue(n):""},Ne=function(e,n,r,t){e.dom.removeEventListener(n,r,t)},He=Q,We=function(r,t){return{left:r,top:t,translate:function(e,n){return We(r+e,t+n)}}},qe=We,Ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),je=tinymce.util.Tools.resolve("tinymce.Env"),Be=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ve="data-ephox-mobile-fullscreen-style",Xe="position:absolute!important;",_e="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ze=je.os.isAndroid(),Ue=Ie.DOM,$e=W().fold(function(){return{bind:s,unbind:s}},function(n){var r,t=(r=l(s),re(re({},r),{on:function(e){return r.get().each(e)}})),o=f(),i=f(),u=Be.throttle(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(function(){t.on(function(e){return N(e,{top:n.offsetTop+"px",left:n.offsetLeft+"px",height:n.height+"px",width:n.width+"px"})})})},50);return{bind:function(e){t.set(e),u(),o.set(O("resize",u)),i.set(O("scroll",u))},unbind:function(){t.on(function(){o.clear(),i.clear()}),t.clear()}}}),Ke=function(o,i){function u(n){n(w,"tox-fullscreen"),n(y,"tox-fullscreen"),n(b,"tox-fullscreen"),R(S).map(function(e){return L(e).dom}).each(function(e){n(e,"tox-fullscreen"),n(e,"tox-shadowhost")})}function e(){var r,e,n,t;F&&(r=o.dom,e="["+Ve+"]",D(1!==(n=t=document).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:C(t.querySelectorAll(e),ie.fromDom),function(e){var n=P(e,Ve);"no-styles"!==n?N(e,r.parseStyle(n)):M(e,"style"),M(e,Ve)})),u(Ue.removeClass),$e.unbind(),ne.from(i.get()).each(function(e){return e.fullscreenChangeHandler.unbind()})}var n,r,t,c,a,s,l,f,m,d,h,v,g,p,w=document.body,y=document.documentElement,b=o.getContainer(),S=ie.fromDom(b),x=R(s=ie.fromDom(o.getElement())).map(L).getOrThunk(function(){var e=A(s).dom.body;if(null==e)throw new Error("Body is not available yet");return ie.fromDom(e)}),E=i.get(),O=ie.fromDom(o.getBody()),F=je.deviceType.isTouch(),T=b.style,k=o.iframeElement.style;E?(E.fullscreenChangeHandler.unbind(),j(o)&&B(x)&&((c=A(x).dom).exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.webkitCancelFullScreen&&c.webkitCancelFullScreen()),k.width=E.iframeWidth,k.height=E.iframeHeight,T.width=E.containerWidth,T.height=E.containerHeight,T.top=E.containerTop,T.left=E.containerLeft,t=E.scrollPos,window.scrollTo(t.x,t.y),i.set(null),I(o,!1),e(),o.off("remove",e)):(n=H(A(x),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",function(){j(o)&&(B(x)||null===i.get()||Ke(o,i))}),r={scrollPos:(l=window,v=void 0===l?window:l,g=v.document,d=(m=void 0!==(f=ie.fromDom(g))?f.dom:document).body.scrollLeft||m.documentElement.scrollLeft,h=m.body.scrollTop||m.documentElement.scrollTop,p=qe(d,h),W(v).fold(function(){var e=v.document.documentElement,n=e.clientWidth,r=e.clientHeight;return q(p.left,p.top,n,r)},function(e){return q(Math.max(e.pageLeft,p.left),Math.max(e.pageTop,p.top),e.width,e.height)})),containerWidth:T.width,containerHeight:T.height,containerTop:T.top,containerLeft:T.left,iframeWidth:k.width,iframeHeight:k.height,fullscreenChangeHandler:n},F&&V(o.dom,S,O),k.width=k.height="100%",T.width=T.height="",u(Ue.addClass),$e.bind(S),o.on("remove",e),i.set(r),j(o)&&((a=x.dom).requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()),I(o,!0))};z.add("fullscreen",function(e){function n(){return o.execCommand("mceFullScreen")}var r,t,o,i,u,c=a(null);return e.inline||(t=c,(r=e).addCommand("mceFullScreen",function(){Ke(r,t)}),(o=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:T(o,i=c)}),o.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:T(o,i)}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),u=c,{isFullscreen:function(){return null!==u.get()}}})}();