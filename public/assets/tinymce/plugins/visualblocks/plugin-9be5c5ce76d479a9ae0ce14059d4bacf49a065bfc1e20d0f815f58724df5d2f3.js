!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(t,o,e){var n,i;t.dom.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),n=t,i=e.get(),n.fire("VisualBlocks",{state:i})},r=function(e,n){return function(o){o.setActive(n.get());var t=function(t){return o.setActive(t.state)};return e.on("VisualBlocks",t),function(){return e.off("VisualBlocks",t)}}};t.add("visualblocks",function(t){var o,e,n,i,s,c,u,l=(o=!1,{get:function(){return o},set:function(t){o=t}});n=l,(e=t).addCommand("mceVisualBlocks",function(){a(e,0,n)}),s=l,(i=t).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return i.execCommand("mceVisualBlocks")},onSetup:r(i,s)}),i.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return i.execCommand("mceVisualBlocks")},onSetup:r(i,s)}),u=l,(c=t).on("PreviewFormats AfterPreviewFormats",function(t){u.get()&&c.dom.toggleClass(c.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),c.on("init",function(){c.getParam("visualblocks_default_state",!1,"boolean")&&a(c,0,u)})})}();