!function(){"use strict";function e(r){return function(e){return t=typeof(n=e),(null===n?"null":"object"==t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t)===r;var n,t}}function n(n){return function(e){return typeof e===n}}function t(n){return function(e){return n===e}}function l(e){return!(null==e)}function M(){}function C(e){return function(){return e}}function S(e){return e}function r(e,n){return e===n}function E(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=o.concat(e);return r.apply(null,t)}}function g(n){return function(e){return!n(e)}}function o(){return ul}function u(e){return e()}function y(e,n){return-1<al.call(e,n)}function T(e,n){for(var t=0,r=e.length;t<r;t++)if(n(e[t],t))return!0;return!1}function x(e,n){for(var t=[],r=0;r<e;r++)t.push(n(r));return t}function R(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;o++){var u=e[o];r[o]=n(u,o)}return r}function D(e,n){for(var t=0,r=e.length;t<r;t++)n(e[t],t)}function m(e,n){for(var t=[],r=[],o=0,u=e.length;o<u;o++){var i=e[o];(n(i,o)?t:r).push(i)}return{pass:t,fail:r}}function O(e,n){for(var t=[],r=0,o=e.length;r<o;r++){var u=e[r];n(u,r)&&t.push(u)}return t}function A(e,r,o){return function(e){for(var n,t=e.length-1;0<=t;t--)n=e[t],o=r(o,n,t)}(e),o}function k(e,t,r){return D(e,function(e,n){r=t(r,e,n)}),r}function w(e,n){return function(e,n,t){for(var r=0,o=e.length;r<o;r++){var u=e[r];if(n(u,r))return cl.some(u);if(t(u,r))break}return cl.none()}(e,n,rl)}function f(e,n){for(var t=0,r=e.length;t<r;t++)if(n(e[t],t))return cl.some(t);return cl.none()}function i(e){for(var n=[],t=0,r=e.length;t<r;++t){if(!Jc(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);fl.apply(n,e[t])}return n}function P(e,n){return i(R(e,n))}function I(e,n){for(var t=0,r=e.length;t<r;++t)if(!0!==n(e[t],t))return!1;return!0}function B(e,n){for(var t={},r=0,o=e.length;r<o;r++){var u=e[r];t[String(u)]=n(u,r)}return t}function c(e){return[e]}function a(e,n){return 0<=n&&n<e.length?cl.some(e[n]):cl.none()}function p(e){return a(e,0)}function d(e){return a(e,e.length-1)}function N(e,n){for(var t=0;t<e.length;t++){var r=n(e[t],t);if(r.isSome())return r}return cl.none()}function z(e,n,t){if(t||2===arguments.length)for(var r,o=0,u=n.length;o<u;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}function h(t){var r,o=!1;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o||(o=!0,r=t.apply(null,e)),r}}function L(e,n){var t=String(n).toLowerCase();return w(e,function(e){return e.search(t)})}function s(e,n,t){return""===n||e.length>=n.length&&e.substr(t,t+n.length)===n}function b(e,n){return-1!==e.indexOf(n)}function _(e,n){return s(e,n,e.length-n.length)}function W(e){return 0<e.length}function v(n){return function(e){return b(e,n)}}function j(e){return window.matchMedia(e).matches}function F(e,n){var t=e.dom;if(1!==t.nodeType)return!1;var r=t;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function H(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount}function V(e,n){var t=void 0===n?document:n.dom;return H(t)?cl.none():cl.from(t.querySelector(e)).map(kl.fromDom)}function q(e,n){return e.dom===n.dom}function U(e,n){return Al().browser.isIE()?(t=e.dom,r=n.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(t.compareDocumentPosition(r)&o)):(u=e.dom)!==(i=n.dom)&&u.contains(i);var t,r,o,u,i}function G(e,n){for(var t=Bl(e),r=0,o=t.length;r<o;r++){var u=t[r];n(e[u],u)}}function $(e,t){return El(e,function(e,n){return{k:n,v:t(e,n)}})}function K(e,n){var t={},r=n,o=t,u=function(e,n){o[n]=e},i=M;return G(e,function(e,n){(r(e,n)?u:i)(e,n)}),t}function X(e,t){var r=[];return G(e,function(e,n){r.push(t(e,n))}),r}function Y(e){return X(e,S)}function J(e){return Bl(e).length}function Q(e,n){return Pl(e,n)?cl.from(e[n]):cl.none()}function Z(e,n){return Pl(e,n)&&void 0!==e[n]&&null!==e[n]}function ee(e,n,t){return{element:e,rowspan:n,colspan:t}}function ne(e,n,t){return{element:e,cells:n,section:t}}function te(e,n,t){return{element:e,isNew:n,isLocked:t}}function re(e,n,t,r){return{element:e,cells:n,section:t,isNew:r}}function oe(){return ml(0,0)}function ue(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version;return{current:t,version:r,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(vl),isSafari:n("Safari")}}function ie(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version;return{current:t,version:r,isWindows:n(Cl),isiOS:n("iOS"),isAndroid:n(Sl),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(Tl),isFreeBSD:n(xl),isChromeOS:n(Rl)}}function ce(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function le(e){return e.dom.nodeName.toLowerCase()}function ae(e){return e.dom.nodeType}function fe(n){return function(e){return ae(e)===n}}function se(e){return 8===ae(e)||"#comment"===le(e)}function me(n){return function(e){return Fl(e)&&le(e)===n}}function de(e){return kl.fromDom(e.dom.ownerDocument)}function ge(e){return Vl(e)?e:de(e)}function pe(e){return cl.from(e.dom.parentNode).map(kl.fromDom)}function be(e,n){for(var t=nl(n)?n:rl,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=kl.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}function he(e){return cl.from(e.dom.previousSibling).map(kl.fromDom)}function ve(e){return cl.from(e.dom.nextSibling).map(kl.fromDom)}function we(e){return R(e.dom.childNodes,kl.fromDom)}function ye(e,n){var t=e.dom.childNodes;return cl.from(t[n]).map(kl.fromDom)}function Ce(e){return kl.fromDom(e.dom.host)}function Se(e,n,t){return r=function(e){return F(e,n)},O(be(e,t),r);var r}function Te(e,n){return t=function(e){return F(e,n)},O(we(e),t);var t}function xe(e,n){return H(t=void 0===e?document:e.dom)?[]:R(t.querySelectorAll(n),kl.fromDom);var t}function Re(e,n,t,r,o){return e(t,r)?cl.some(t):nl(o)&&o(t)?cl.none():n(t,r,o)}function De(e,n,t){for(var r=e.dom,o=nl(t)?t:rl;r.parentNode;){r=r.parentNode;var u=kl.fromDom(r);if(n(u))return cl.some(u);if(o(u))break}return cl.none()}function Oe(e,n,t){return De(e,function(e){return F(e,n)},t)}function Ae(e,n){return t=function(e){return F(e,n)},w(e.dom.childNodes,function(e){return t(kl.fromDom(e))}).map(kl.fromDom);var t}function ke(e,n){return V(n,e)}function Ie(e,n,t){return Re(F,Oe,e,n,t)}function Be(e,n,t){if(!(Xc(t)||Zc(t)||tl(t)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,t+"")}function Me(e,n,t){Be(e.dom,n,t)}function Ee(e,n){var t=e.dom;G(n,function(e,n){Be(t,n,e)})}function Pe(e,n){var t=e.dom.getAttribute(n);return null===t?void 0:t}function Ne(e,n){return cl.from(Pe(e,n))}function ze(e){return k(e.dom.attributes,function(e,n){return e[n.name]=n.value,e},{})}function Le(e,n,t){return void 0===t&&(t=r),e.exists(function(e){return t(e,n)})}function _e(e){for(var n=[],t=function(e){n.push(e)},r=0;r<e.length;r++)e[r].each(t);return n}function We(e,n,t){return e.isSome()&&n.isSome()?cl.some(t(e.getOrDie(),n.getOrDie())):cl.none()}function je(e,n){return e?cl.some(n):cl.none()}function Fe(e){return void 0!==e.style&&nl(e.style.getPropertyValue)}function He(e,n,t){if(!Xc(t))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",t,":: Element ",e),new Error("CSS value must be a string: "+t);Fe(e)&&e.style.setProperty(n,t)}function Ve(e,n,t){He(e.dom,n,t)}function qe(e,n){var t=e.dom;G(n,function(e,n){He(t,n,e)})}function Ue(e,n){var t=e.dom,r=window.getComputedStyle(t).getPropertyValue(n);return""!==r||Xl(e)?r:Zl(t,n)}function Ge(e,n){var t=e.dom,r=Zl(t,n);return cl.from(r).filter(function(e){return 0<e.length})}function $e(e,n){var t,r=n;Fe(t=e.dom)&&t.style.removeProperty(r),Le(Ne(e,"style").map(pl),"")&&Ql(e,"style")}function Ke(e,n,t){return void 0===t&&(t=0),Ne(e,n).map(function(e){return parseInt(e,10)}).getOr(t)}function Xe(e,n){return Ke(e,n,1)}function Ye(e){return me("col")(e)?1<Ke(e,"span",1):1<Xe(e,"colspan")}function Je(e){return 1<Xe(e,"rowspan")}function Qe(e,n){return parseInt(Ue(e,n),10)}function Ze(e,n){return ta(e,n,ol)}function en(e,n){return t=["td","th"],(o=void 0===(o=n)?rl:n)(r=e)?cl.none():y(t,le(r))?cl.some(r):Oe(r,t.join(","),function(e){return F(e,"table")||o(e)});var t,r,o}function nn(e){return Ze(e,"th,td")}function tn(e){return F(e,"colgroup")?Te(e,"col"):P(ra(e),function(e){return Te(e,"col")})}function rn(e,n){return Ie(e,"table",n)}function on(e){return Ze(e,"tr")}function un(e,t){return R(e,function(e){if("colgroup"!==le(e))return ne(e,n=R(nn(e),function(e){return ee(e,Ke(e,"rowspan",1),Ke(e,"colspan",1))}),t(e));var n=R(tn(e),function(e){return ee(e,1,Ke(e,"span",1))});return ne(e,n,"colgroup")})}function cn(e){return pe(e).map(function(e){var n=le(e);return y(Nl,n)?n:"tbody"}).getOr("tbody")}function ln(e){var n=on(e);return un(z(z([],ra(e),!0),n,!0),cn)}function an(e,n,t){var r=e.cells,o=r.slice(0,n),u=r.slice(n),i=o.concat(t).concat(u);return oa(e,i)}function fn(e,n,t){return an(e,n,[t])}function sn(e,n,t){e.cells[n]=t}function mn(e,n){return e.cells[n]}function dn(e,n){return mn(e,n).element}function gn(e){return e.cells.length}function pn(e){var n=m(e,function(e){return"colgroup"===e.section});return{rows:n.fail,cols:n.pass}}function bn(e,n,t){var r=R(e.cells,t);return re(n(e.element),r,e.section,!0)}function hn(e){return Ne(e,ua).bind(function(e){return cl.from(e.match(/\d+/g))}).map(function(e){return B(e,ol)})}function vn(e){var n,t=X(k(pn(e).rows,function(t,e){return D(e.cells,function(e,n){e.isLocked&&(t[n]=!0)}),t},{}),function(e,n){return parseInt(n,10)});return(n=ll.call(t,0)).sort(void 0),n}function wn(e){var l={},n=[],a=p(e).map(function(e){return e.element}).bind(rn).bind(hn).getOr({}),t=0,f=0,s=0,r=m(e,function(e){return"colgroup"===e.section}),o=r.pass;D(r.fail,function(e){var c=[];D(e.cells,function(e){for(var n=0;void 0!==l[s+","+n];)n++;for(var t=Z(a,n.toString()),r={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:s,column:n,isLocked:t},o=0;o<e.colspan;o++)for(var u=0;u<e.rowspan;u++){var i=n+o;l[s+u+","+i]=r,f=Math.max(f,i+1)}c.push(r)}),t++,n.push(ne(e.element,c,e.section)),s++});var u=d(o).map(function(e){var o,u,n=(o={},u=0,D(e.cells,function(t){var r=t.colspan;x(r,function(e){var n=u+e;o[n]={element:t.element,colspan:r,column:n}}),u+=r}),o);return{colgroups:[{element:e.element,columns:Y(n)}],columns:n}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),i=u.columns,c=u.colgroups;return{grid:{rows:t,columns:f},access:l,all:n,columns:i,colgroups:c}}function yn(e,n){var t=n.column,r=n.column+n.colspan-1,o=n.row,u=n.row+n.rowspan-1;return t<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&u>=e.startRow}function Cn(e,n){return n.column>=e.startCol&&n.column+n.colspan-1<=e.finishCol&&n.row>=e.startRow&&n.row+n.rowspan-1<=e.finishRow}function Sn(e,n,t){var r=ia.findItem(e,n,q),o=ia.findItem(e,t,q);return r.bind(function(r){return o.map(function(e){return n=r,t=e,{startRow:Math.min(n.row,t.row),startCol:Math.min(n.column,t.column),finishRow:Math.max(n.row+n.rowspan-1,t.row+t.rowspan-1),finishCol:Math.max(n.column+n.colspan-1,t.column+t.colspan-1)};var n,t})})}function Tn(n,e,t){return Sn(n,e,t).map(function(e){return R(ia.filterItems(n,E(yn,e)),function(e){return e.element})})}function xn(e,n){return ia.findItem(e,n,function(e,n){return U(n,e)}).map(function(e){return e.element})}function Rn(e,n,t,r,o){var u=ca(e),i=q(e,t)?cl.some(n):xn(u,n),c=q(e,o)?cl.some(r):xn(u,r);return i.bind(function(n){return c.bind(function(e){return Tn(u,n,e)})})}function Dn(n,t){pe(n).each(function(e){e.dom.insertBefore(t.dom,n.dom)})}function On(e,n){ve(e).fold(function(){pe(e).each(function(e){la(e,n)})},function(e){Dn(e,n)})}function An(n,t){ye(n,0).fold(function(){la(n,t)},function(e){n.dom.insertBefore(t.dom,e.dom)})}function kn(e,n){Dn(e,n),la(n,e)}function In(t,r){D(r,function(e,n){On(0===n?t:r[n-1],e)})}function Bn(n,e){D(e,function(e){la(n,e)})}function Mn(e){e.dom.textContent="",D(we(e),function(e){aa(e)})}function En(e){var n,t=we(e);0<t.length&&(n=e,D(t,function(e){Dn(n,e)})),aa(e)}function Pn(e){return fa.get(e)}function Nn(e){return fa.getOption(e)}function zn(e,n){return fa.set(e,n)}function Ln(e,n){return O(P(e.all,function(e){return e.cells}),n)}function _n(){return{up:C({selector:Oe,closest:Ie,predicate:De,all:be}),down:C({selector:xe,predicate:Jl}),styles:C({get:Ue,getRaw:Ge,set:Ve,remove:$e}),attrs:C({get:Pe,set:Me,remove:Ql,copyTo:function(e,n){Ee(n,ze(e))}}),insert:C({before:Dn,after:On,afterAll:In,append:la,appendAll:Bn,prepend:An,wrap:kn}),remove:C({unwrap:En,remove:aa}),create:C({nu:kl.fromTag,clone:function(e){return kl.fromDom(e.dom.cloneNode(!1))},text:kl.fromText}),query:C({comparePosition:function(e,n){return e.dom.compareDocumentPosition(n.dom)},prevSibling:he,nextSibling:ve}),property:C({children:we,name:le,parent:pe,document:function(e){return ge(e).dom},isText:Hl,isComment:se,isElement:Fl,isSpecial:function(e){return y(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],le(e))},getLanguage:function(e){return Fl(e)?Ne(e,"lang"):cl.none()},getText:Pn,setText:zn,isBoundary:function(e){return!!Fl(e)&&("body"===le(e)||y(sa,le(e)))},isEmptyTag:function(e){return!!Fl(e)&&y(["br","img","hr","input"],le(e))},isNonEditable:function(e){return Fl(e)&&"false"===Pe(e,"contenteditable")}}),eq:q,is:Il}}function Wn(t,e){return da(pa,function(e,n){return t(n)},e)}function jn(e){return Oe(e,"table")}function Fn(c,l,a){function f(n){return function(e){return void 0!==a&&a(e)||q(e,n)}}return q(c,l)?cl.some({boxes:cl.some([c]),start:c,finish:l}):jn(c).bind(function(i){return jn(l).bind(function(u){if(q(i,u))return cl.some({boxes:(r=c,o=l,Tn(ca(i),r,o)),start:c,finish:l});if(U(i,u)){var e=0<(n=Se(l,"td,th",f(i))).length?n[n.length-1]:l;return cl.some({boxes:Rn(i,c,i,l,u),start:c,finish:e})}if(U(u,i)){var n,t=0<(n=Se(c,"td,th",f(u))).length?n[n.length-1]:c;return cl.some({boxes:Rn(u,c,i,l,u),start:c,finish:t})}return ga(pa,c,l,void 0).shared.bind(function(e){return Ie(e,"table",a).bind(function(e){var n=Se(l,"td,th",f(e)),t=0<n.length?n[n.length-1]:l,r=Se(c,"td,th",f(e)),o=0<r.length?r[r.length-1]:c;return cl.some({boxes:Rn(e,c,i,l,u),start:o,finish:t})})});var r,o})})}function Hn(e,n){var t=xe(e,n);return 0<t.length?cl.some(t):cl.none()}function Vn(e,n,r){return ke(e,n).bind(function(t){return ke(e,r).bind(function(n){return Wn(jn,[t,n]).map(function(e){return{first:t,last:n,table:e}})})})}function qn(e,r,o,u,n){return t=n,w(e,function(e){return F(e,t)}).bind(function(e){return t=r,i=o,rn(n=e).bind(function(e){var r=ca(e),o=t,u=i;return ia.findItem(r,n,q).bind(function(e){var n=0<o?e.row+e.rowspan-1:e.row,t=0<u?e.column+e.colspan-1:e.column;return ia.getAt(r,n+o,t+u).map(function(e){return e.element})})}).bind(function(e){return t=u,Oe(n=e,"table").bind(function(e){return ke(e,t).bind(function(e){return Fn(e,n).bind(function(n){return n.boxes.map(function(e){return{boxes:e,start:n.start,finish:n.finish}})})})});var n,t});var n,t,i});var t}function Un(o,e,n){return Vn(o,e,n).bind(function(c){function e(e){return q(o,e)}var n="thead,tfoot,tbody,table",t=Oe(c.first,n,e),r=Oe(c.last,n,e);return t.bind(function(i){return r.bind(function(e){return q(i,e)?(t=c.table,r=c.first,o=c.last,u=ca(t),Sn(n=u,r,o).bind(function(e){return function(e,n){for(var t=!0,r=E(Cn,n),o=n.startRow;o<=n.finishRow;o++)for(var u=n.startCol;u<=n.finishCol;u++)t=t&&ia.getAt(e,o,u).exists(r);return t?cl.some(n):cl.none()}(n,e)})):cl.none();var n,t,r,o,u})})})}function Gn(e,n,t,r){return e.fold(n,t,r)}function $n(e,n){return kl.fromDom(e.dom.cloneNode(n))}function Kn(e){return $n(e,!1)}function Xn(e){return $n(e,!0)}function Yn(e,n){var t=kl.fromTag(n);return Ee(t,ze(e)),t}function Jn(r,o){function e(e){var n=o(e);if(n<=0||null===n){var t=Ue(e,r);return parseFloat(t)||0}return n}function u(o,e){return k(e,function(e,n){var t=Ue(o,n),r=void 0===t?0:parseInt(t,10);return isNaN(r)?e:e+r},0)}return{set:function(e,n){if(!tl(n)&&!n.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+n);var t=e.dom;Fe(t)&&(t.style[r]=n+"px")},get:e,getOuter:e,aggregate:u,max:function(e,n,t){var r=u(e,t);return r<n?n-r:0}}}function Qn(){var e=Al().browser;return e.isIE()||e.isEdge()}function Zn(e,n,t){return r=Ue(e,n),o=t,u=parseFloat(r),(isNaN(u)?cl.none():cl.some(u)).getOr(o);var r,o,u}function et(e){return Ue(e,"box-sizing")}function nt(e,n,t,r){return n-Zn(e,"padding-"+t,0)-Zn(e,"padding-"+r,0)-Zn(e,"border-"+t+"-width",0)-Zn(e,"border-"+r+"-width",0)}function tt(e,n){var t=e.dom,r=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===n?r:nt(e,r,"left","right")}function rt(e){return Sa.get(e)}function ot(e){return Sa.getOuter(e)}function ut(t,r){void 0===r&&(r=ol);var e=t.grid,n=x(e.columns,S),o=x(e.rows,S);return R(n,function(n){return Ra(function(){return P(o,function(e){return ia.getAt(t,e,n).filter(function(e){return e.column===n}).toArray()})},function(e){return 1===e.colspan&&r(e.element)},function(){return ia.getAt(t,0,n)})})}function it(t){var e=t.grid,n=x(e.rows,S),r=x(e.columns,S);return R(n,function(n){return Ra(function(){return P(r,function(e){return ia.getAt(t,n,e).filter(function(e){return e.row===n}).fold(C([]),function(e){return[e]})})},function(e){return 1===e.rowspan},function(){return ia.getAt(t,n,0)})})}function ct(n,t){return function(e){return"rtl"===Da(e)?t:n}}function lt(e){return Oa.get(e)}function at(e){return Oa.getOuter(e)}function ft(e,n){return void 0!==e?e:void 0!==n?n:0}function st(e){var n=e.dom.ownerDocument,t=n.body,r=n.defaultView,o=n.documentElement;if(t===e.dom)return Ia(t.offsetLeft,t.offsetTop);var u=ft(null==r?void 0:r.pageYOffset,o.scrollTop),i=ft(null==r?void 0:r.pageXOffset,o.scrollLeft),c=ft(o.clientTop,t.clientTop),l=ft(o.clientLeft,t.clientLeft);return Ba(e).translate(i-l,u-c)}function mt(e,n){return{row:e,y:n}}function dt(e,n){return{col:e,x:n}}function gt(e){return st(e).left+ot(e)}function pt(e){return st(e).left}function bt(e,n){return dt(e,pt(n))}function ht(e,n){return dt(e,gt(n))}function vt(e){return st(e).top}function wt(e,n){return mt(e,vt(n))}function yt(e,n){return mt(e,vt(n)+at(n))}function Ct(t,n,r){if(0===r.length)return[];var e=R(r.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),o=r[r.length-1].map(function(e){return n(r.length-1,e)});return e.concat([o])}function St(i){if(!Jc(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],t={};return D(i,function(e,r){var n=Bl(e);if(1!==n.length)throw new Error("one and only one name per case");var o=n[0],u=e[o];if(void 0!==t[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!Jc(u))throw new Error("case arguments must be an array");c.push(o),t[o]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(n!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+n);return{fold:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+e.length);return e[r].apply(null,t)},match:function(e){var n=Bl(e);if(c.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+n.join(","));if(!I(c,function(e){return y(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+c.join(", "));return e[o].apply(null,t)},log:function(e){console.log(e,{constructors:c,constructor:o,params:t})}}}}),t}function Tt(e){return"(?:"+e+")?"}function xt(e,n,t){var r=cl.from(e.dom.parentElement).map(kl.fromDom).getOrThunk(function(){return Yl(de(e))});return n(e)/t(r)*100}function Rt(e,n){Ve(e,"width",n+"px")}function Dt(e,n){Ve(e,"width",n+"%")}function Ot(e,n){Ve(e,"height",n+"px")}function At(e){var n,t,r,o,u,i,c,l,a,f=Aa(e)+"px";return f?(n=f,t=e,r=lt,o=Ot,a=parseFloat(n),_(n,"%")&&"table"!==le(t)?(i=a,c=r,o(u,l=rn(u=t).map(function(e){var n=c(e);return Math.floor(i/100*n)}).getOr(i)),l):a):lt(e)}function kt(e,n){return Ge(e,n).orThunk(function(){return Ne(e,n).map(function(e){return e+"px"})})}function It(e){return kt(e,"width")}function Bt(e){return xt(e,rt,Ta)}function Mt(e){return(Wa(e)?rt:xa)(e)}function Et(e){return At(n=e)/Xe(n,"rowspan");var n}function Pt(e,n,t){Ve(e,"width",n+t)}function Nt(e){return xt(e,rt,Ta)+"%"}function zt(e){return It(e).getOrThunk(function(){return Mt(e)+"px"})}function Lt(e){return kt(e,"height").getOrThunk(function(){return Et(e)+"px"})}function _t(e,n,t,r,o,u){return e.filter(r).fold(function(){return u(function(t,r){if(r<0||r>=t.length-1)return cl.none();var e=t[r].fold(function(){var e,n;return N((e=t.slice(0,r),(n=ll.call(e,0)).reverse(),n),function(e,n){return e.map(function(e){return{value:e,delta:n+1}})})},function(e){return cl.some({value:e,delta:0})}),n=t[r+1].fold(function(){return N(t.slice(r+1),function(e,n){return e.map(function(e){return{value:e,delta:n+1}})})},function(e){return cl.some({value:e,delta:1})});return e.bind(function(t){return n.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})}(t,n))},function(e){return o(e)})}function Wt(e,n,i,c){var l=ut(e),t=ia.hasColumns(e)?R(ia.justColumns(e),function(e){return cl.from(e.element)}):l,a=[cl.some(Pa.edge(n))].concat(R(Pa.positions(l,n),function(e){return e.map(function(e){return e.x})})),f=g(Ye);return R(t,function(e,u){return _t(e,u,a,f,function(e){return t=e,o=(r=Al().browser).isChrome()||r.isFirefox(),!Fa(t)||o?i(e):_t(null!=(n=l[u])?S(n):cl.none(),u,a,f,function(e){return c(cl.some(rt(e)))},c);var n,t,r,o},c)})}function jt(e){return e.map(function(e){return e+"px"}).getOr("")}function Ft(e,n,t){return Wt(e,n,Mt,function(e){return e.getOrThunk(t.minCellWidth)})}function Ht(e,n,t,r,o){var u=it(e),i=[cl.some(t.edge(n))].concat(R(t.positions(u,n),function(e){return e.map(function(e){return e.y})}));return R(u,function(e,n){return _t(e,n,i,g(Je),r,o)})}function Vt(e,n){return function(){return Xl(e)?n(e):parseFloat(Ge(e,"width").getOr("0"))}}function qt(r){var t=Vt(r,function(e){return parseFloat(Nt(e))}),n=Vt(r,rt);return{width:t,pixelWidth:n,getWidths:function(e,n){return t=n,Wt(e,r,Bt,function(e){return e.fold(function(){return t.minCellWidth()},function(e){return e/t.pixelWidth()*100})});var t},getCellDelta:function(e){return e/n()*100},singleColumnWidth:function(e){return[100-e]},minCellWidth:function(){return ea()/n()*100},setElementWidth:Dt,adjustTableWidth:function(e){var n=t();Dt(r,n+e/100*n)},isRelative:!0,label:"percent"}}function Ut(t){var r=Vt(t,rt);return{width:r,pixelWidth:r,getWidths:function(e,n){return Ft(e,t,n)},getCellDelta:S,singleColumnWidth:function(e,n){return[Math.max(ea(),e+n)-e]},minCellWidth:ea,setElementWidth:Rt,adjustTableWidth:function(e){var n=r()+e;Rt(t,n)},isRelative:!1,label:"pixel"}}function Gt(e,n){function t(e){return F(e.element,n)}var u,r,i,c,l,a,f,s,o,m,d,g,p=Xn(e),b=ln(p),h=Ha(e),v=ia.generate(b),w=(u=t,r=v.grid.columns,i=v.grid.rows,c=r,a=l=0,f=[],s=[],G(v.access,function(e){var n,t,r,o;f.push(e),u(e)&&(s.push(e),t=(n=e.row)+e.rowspan-1,o=(r=e.column)+e.colspan-1,n<i?i=n:l<t&&(l=t),r<c?c=r:a<o&&(a=o))}),{minRow:i,minCol:c,maxRow:l,maxCol:a,allCells:f,selectedCells:s}),y="th:not("+n+"),td:not("+n+")";return D(ta(p,"th,td",function(e){return F(e,y)}),aa),function(e,n,t,r){for(var o,u,i,c=n.grid.columns,l=n.grid.rows,a=0;a<l;a++)for(var f=!1,s=0;s<c;s++)a<t.minRow||a>t.maxRow||s<t.minCol||s>t.maxCol||(ia.getAt(n,a,s).filter(r).isNone()?(o=f,u=e[a].element,i=kl.fromTag("td"),la(i,kl.fromTag("br")),(o?la:An)(u,i)):f=!0)}(b,v,w,t),o=p,m=w,d=v,g=function(e,n,t,r){if(0===r.minCol&&n.grid.columns===r.maxCol+1)return 0;var o=Ft(n,e,t),u=k(o,function(e,n){return e+n},0),i=k(o.slice(r.minCol,r.maxCol+1),function(e,n){return e+n},0)/u*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(i)}(e,ia.fromTable(e),h,w),G(d.columns,function(e){(e.column<m.minCol||e.column>m.maxCol)&&aa(e.element)}),D(O(Ze(o,"tr"),function(e){return 0===e.dom.childElementCount}),aa),m.minCol!==m.maxCol&&m.minRow!==m.maxRow||D(Ze(o,"th,td"),function(e){Ql(e,"rowspan"),Ql(e,"colspan")}),Ql(o,ua),Ql(o,"data-snooker-col-series"),Ha(o).adjustTableWidth(g),p}function $t(e){return"img"===le(e)?1:Nn(e).fold(function(){return we(e).length},function(e){return e.length})}function Kt(e){return Nn(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf("\xa0")}).isSome()||y(Ua,le(e))}function Xt(e){return o=Kt,(u=function(e){for(var n=0;n<e.childNodes.length;n++){var t=kl.fromDom(e.childNodes[n]);if(o(t))return cl.some(t);var r=u(e.childNodes[n]);if(r.isSome())return r}return cl.none()})(e.dom);var o,u}function Yt(e){return Ga(e,Kt)}function Jt(n){return function(){var e=kl.fromTag("td",n.dom);return la(e,kl.fromTag("br",n.dom)),e}}function Qt(e){return function(){return kl.fromTag("col",e.dom)}}function Zt(e){return function(){return kl.fromTag("colgroup",e.dom)}}function er(e){return function(){return kl.fromTag("tr",e.dom)}}function nr(e,n,t){var r,o,u=(Bn(o=Yn(r=e,n),we(Xn(r))),o);return G(t,function(e,n){null===e?Ql(u,n):Me(u,n,e)}),u}function tr(e){return e}function rr(a,f,s){function m(e,n){var t=e.element.dom,r=n.dom;Fe(t)&&Fe(r)&&(r.style.cssText=t.style.cssText),$e(n,"height"),1!==e.colspan&&$e(n,"width")}return{col:function(e){var n=kl.fromTag(le(e.element),f.dom);return m(e,n),a(e.element,n),n},colgroup:Zt(f),row:er(f),cell:function(e){var n,t,r,o,u,i=kl.fromTag(le(e.element),f.dom),c=s.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=0<c.length?(n=e.element,t=i,r=c,Xt(n).map(function(e){return A(Se(e,r.join(","),function(e){return q(e,n)}),function(e,n){var t=Kn(n);return Ql(t,"contenteditable"),la(e,t),t},t)}).getOr(t)):i;return la(l,kl.fromTag("br")),m(e,i),o=e.element,u=i,G($a,function(n,t){return Ne(o,t).filter(function(e){return y(n,e)}).each(function(e){return Me(u,t,e)})}),a(e.element,i),i},replace:nr,colGap:Qt(f),gap:Jt(f)}}function or(e){return{col:Qt(e),colgroup:Zt(e),row:er(e),cell:Jt(e),replace:tr,colGap:Qt(e),gap:Jt(e)}}function ur(e){return R(e,kl.fromDom)}function ir(e){return kl.fromDom(e.getBody())}function cr(e){return e.getBoundingClientRect().width}function lr(e){return e.getBoundingClientRect().height}function ar(n){return function(e){return q(e,ir(n))}}function fr(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e}function sr(e){function n(e){return Ql(e,"data-mce-style")}Ql(e,"data-mce-style"),D(nn(e),n),D(tn(e),n),D(on(e),n)}function mr(e){return kl.fromDom(e.selection.getStart())}function dr(e){return Gn(e.get(),C([]),S,c)}function gr(e,n,t){function r(e,n){return Ne(e,n).exists(function(e){return 1<parseInt(e,10)})}return{element:t,mergable:(u=n,i=Ka,Gn(e.get(),cl.none,function(n){return n.length<=1?cl.none():Un(u,i.firstSelectedSelector,i.lastSelectedSelector).map(function(e){return{bounds:e,cells:n}})},cl.none)),unmergable:0<(o=dr(e)).length&&I(o,function(e){return r(e,"rowspan")||r(e,"colspan")})?cl.some(o):cl.none(),selection:dr(e)};var o,u,i}function pr(o){return function(e,n){var t,r=le(e);return Ie("col"===r||"colgroup"===r?rn(t=e).bind(function(e){return ba(e,Ka.firstSelectedSelector)}).fold(C(t),function(e){return e[0]}):e,o,n)}}function br(a,e,f){a.on("BeforeGetContent",function(t){!0===t.selection&&Gn(e.get(),M,function(e){t.preventDefault(),rn(e[0]).map(function(e){var n=Gt(e,"[data-mce-selected]");return sr(n),[n]}).each(function(e){var n;t.content="text"===t.format?R(e,function(e){return e.dom.innerText}).join(""):(n=a,R(e,function(e){return n.selection.serializer.serialize(e.dom,{})}).join(""))})},M)}),a.on("BeforeSetContent",function(l){!0===l.selection&&!0===l.paste&&p(Ja(e)).each(function(c){rn(c).each(function(e){var n,t,r,o,u=O((n=l.content,(t=document.createElement("div")).innerHTML=n,we(kl.fromDom(t))),function(e){return"meta"!==le(e)}),i=me("table");1===u.length&&i(u[0])&&(l.preventDefault(),r=or(kl.fromDom(a.getDoc())),o={element:c,clipboard:u[0],generators:r},f.pasteCells(e,o).each(function(){a.focus()}))})})})}function hr(e,n,t){for(var r=0,o=e;o<n;o++)r+=void 0!==t[o]?t[o]:0;return r}function vr(e,n,t){var r,o,u,i;D((r=e,o=n,ia.hasColumns(r)?(i=o,R(ia.justColumns(r),function(e,n){return{element:e.element,width:i[n],colspan:e.colspan}})):(u=o,R(ia.justCells(r),function(e){var n=hr(e.column,e.column+e.colspan,u);return{element:e.element,width:n,colspan:e.colspan}}))),function(e){t.setElementWidth(e.element,e.width)})}function wr(e,n,t,r,o){var u,i,c,l,a,f,s,m,d,g,p=ia.fromTable(e),b=o.getCellDelta(n),h=o.getWidths(p,o),v=t===p.grid.columns-1,w=r.clampTableDelta(h,t,b,o.minCellWidth(),v);vr(p,R((i=t,c=w,l=o,a=r,m=(u=h).slice(0),s=i,d=0===(f=u).length?Za.none():1===f.length?Za.only(0):0===s?Za.left(0,1):s===f.length-1?Za.right(s-1,s):0<s&&s<f.length-1?Za.middle(s-1,s,s+1):Za.none(),g=C(R(m,C(0))),d.fold(g,function(e){return l.singleColumnWidth(m[e],c)},function(e,n){return a.calcLeftEdgeDeltas(m,e,n,c,l.minCellWidth(),l.isRelative)},function(e,n,t){return a.calcMiddleDeltas(m,e,n,t,c,l.minCellWidth(),l.isRelative)},function(e,n){return a.calcRightEdgeDeltas(m,e,n,c,l.minCellWidth(),l.isRelative)})),function(e,n){return e+h[n]}),o),r.resizeTable(o.adjustTableWidth,w,v)}function yr(e){return R(e,C(0))}function Cr(e,n,t,r,o){return o(e.slice(0,n)).concat(r).concat(o(e.slice(t)))}function Sr(i){return function(e,n,t,r){if(i(t)){var o=Math.max(r,e[n]-Math.abs(t)),u=Math.abs(o-e[n]);return 0<=t?u:-u}return t}}function Tr(){function l(e,t,n,r){var o=(100+n)/100,u=Math.max(r,(e[t]+n)/o);return R(e,function(e,n){return(n===t?u:e/o)-e})}function c(e,n,t,r,o,u){return u?l(e,n,r,o):Cr(i,c,t+1,[ef(i=e,c=n,r,o),0],yr);var i,c}return{resizeTable:function(e,n){return e(n)},clampTableDelta:ef,calcLeftEdgeDeltas:c,calcMiddleDeltas:function(e,n,t,r,o,u,i){return c(e,t,r,o,u,i)},calcRightEdgeDeltas:function(e,n,t,r,o,u){if(u)return l(e,t,r,o);var i=ef(e,t,r,o);return yr(e.slice(0,t)).concat([i])},calcRedestributedWidths:function(e,n,t,r){if(r){var o=(n+t)/n,u=R(e,function(e){return e/o});return{delta:100*o-100,newSizes:u}}return{delta:t,newSizes:e}}}}function xr(){function i(e,n,t,r,o){var u=nf(e,0<=r?t:n,r,o);return Cr(e,n,t+1,[u,-u],yr)}return{resizeTable:function(e,n,t){t&&e(n)},clampTableDelta:function(e,n,t,r,o){if(o){if(0<=t)return t;var u=k(e,function(e,n){return e+n-r},0);return Math.max(-u,t)}return ef(e,n,t,r)},calcLeftEdgeDeltas:i,calcMiddleDeltas:function(e,n,t,r,o,u){return i(e,t,r,o,u)},calcRightEdgeDeltas:function(e,n,t,r,o,u){return u?yr(e):R(e,C(r/e.length))},calcRedestributedWidths:function(e){return{delta:0,newSizes:e}}}}function Rr(e,n,t){var r=t.substring(0,t.length-e.length),o=parseFloat(r);return r===o.toString()?n(o):tf.invalid(t)}function Dr(e,n,t){var r,o,u,i,c=rf.from(t),l=I(e,function(e){return"0px"===e})?(r=e.length,o=c.fold(function(){return C("")},function(e){return C(e/r+"px")},function(){return C(100/r+"%")}),x(r,o)):(u=e,i=n,c.fold(function(){return u},function(e){return t=(n=e)/i,R(u,function(e){return rf.from(e).fold(function(){return e},function(e){return e*t+"px"},function(e){return e/100*n+"px"})});var n,t},function(){return n=i,R(u,function(e){return rf.from(e).fold(function(){return e},function(e){return e/n*100+"%"},function(e){return e+"%"})});var n}));return of(l)}function Or(e,n){return 0===e.length?n:A(e,function(e,n){return rf.from(n).fold(C(0),S,S)+e},0)}function Ar(e){return uf(e).fold(C("px"),C("px"),C("%"))}function kr(l,e,n){var a=ia.fromTable(l),i=a.all,f=ia.justCells(a),s=ia.justColumns(a);e.each(function(e){var t,r,o,u,n=Ar(e),i=rt(l),c=Dr(Wt(a,l,zt,jt),i,e);ia.hasColumns(a)?(o=c,u=n,D(s,function(e,n){var t=Or([o[n]],ea());Ve(e.element,"width",t+u)})):(t=c,r=n,D(f,function(e){var n=Or(t.slice(e.column,e.colspan+e.column),ea());Ve(e.element,"width",n+r)})),Ve(l,"width",e)}),n.each(function(e){var n=Ar(e),t=lt(l),r=Dr(Ht(a,l,Ma,Lt,jt),t,e),o=i,u=n;D(f,function(e){var n=Or(r.slice(e.row,e.rowspan+e.row),na());Ve(e.element,"height",n+u)}),D(o,function(e,n){Ve(e.element,"height",r[n])}),Ve(l,"height",e)})}function Ir(e){
return ia.fromTable(e).grid}function Br(n){var o=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");o.push(e)},unbind:function(n){o=O(o,function(e){return e!==n})},trigger:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r={};D(n,function(e,n){r[e]=t[n]}),D(o,function(e){e(r)})}}}function Mr(e){return{registry:$(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:$(e,function(e){return e.trigger})}}function Er(e){return e.slice(0).sort()}function Pr(n,e){var t=O(e,function(e){return!y(n,e)});0<t.length&&function(){throw new Error("Unsupported keys for object: "+Er(t).join(", "))}()}function Nr(e){return function(r,o,u){if(0===o.length)throw new Error("You must specify at least one required field.");var t;return function(n,e){if(!Jc(e))throw new Error("The "+n+" fields must be an array. Was: "+e+".");D(e,function(e){if(!Xc(e))throw new Error("The value "+e+" in the "+n+" fields was not a string.")})}("required",o),w(t=Er(o),function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}),function(n){var t=Bl(n);I(o,function(e){return y(t,e)})||function(e,n){throw new Error("All required keys ("+Er(o).join(", ")+") were not specified. Specified keys were: "+Er(n).join(", ")+".")}(0,t),r(o,t);var e=O(o,function(e){return!u.validate(n[e],e)});return 0<e.length&&function(e,n){throw new Error("All values need to be of type: "+n+". Keys ("+Er(e).join(", ")+") were not.")}(e,u.label),n}}(Pr,e,{validate:nl,label:"function"})}function zr(){var u,i,e={onEvent:M,reset:M,events:Mr({move:Br(["info"])}).registry},n=(u=cl.none(),{onEvent:function(e,o){o.extract(e).each(function(e){var n=o,t=e,r=u.map(function(e){return n.compare(e,t)});u=cl.some(t),r.each(function(e){i.trigger.move(e)})})},reset:function(){u=cl.none()},events:(i=Mr({move:Br(["info"])})).registry}),t=e;return{on:function(){t.reset(),t=n},off:function(){t.reset(),t=e},isOn:function(){return t===n},onEvent:function(e,n){t.onEvent(e,n)},events:n.events}}function Lr(e){function n(){return e.stopPropagation()}function t(){return e.preventDefault()}var r,o,u=kl.fromDom(function(e){if(Gl()&&l(e.target)){var n=kl.fromDom(e.target);if(Fl(n)&&Kl(n)&&e.composed&&e.composedPath){var t=e.composedPath();if(t)return p(t)}}return cl.from(e.target)}(e).getOr(e.target)),i=(r=t,o=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r(o.apply(null,e))});return{target:u,x:e.clientX,y:e.clientY,stop:n,prevent:t,kill:i,raw:e}}function _r(e,n,t){return o=n,u=!1,i=sf,c=t,l=function(e){i(e)&&c(Lr(e))},(r=e).dom.addEventListener(o,l,u),{unbind:E(ff,r,o,l,u)};var r,o,u,i,c,l}function Wr(e){return void 0!==e.dom.classList}function jr(e,n){return o=n,Me(e,t="class",(void 0===(r=Pe(e,t))||""===r?[]:r.split(" ")).concat([o]).join(" ")),1;var t,r,o}function Fr(e,n){Wr(e)?e.dom.classList.add(n):jr(e,n)}function Hr(e,n){return Wr(e)&&e.dom.classList.contains(n)}function Vr(e){var n=e.replace(/\./g,"-");return{resolve:function(e){return n+"-"+e}}}function qr(e){return Ie(e,"[contenteditable]")}function Ur(e,n){return void 0===n&&(n=!1),!Al().browser.isIE()&&Xl(e)?e.dom.isContentEditable:qr(e).fold(C(n),function(e){return"true"===pf(e)})}function Gr(e){D(xe(e.parent(),"."+hf),aa)}function $r(t,e,r){var o=t.origin();D(e,function(e){e.each(function(e){var n=r(o,e);Fr(n,hf),la(t.parent(),n)})})}function Kr(e,n,t,r,o){var u,i,c,l,a,f=st(t),s=n.isResizable,m=0<r.length?Ma.positions(r,t):[],d=0<m.length?(u=s,P(e.all,function(e,n){return u(e.element)?[n]:[]})):[];i=n,c=O(m,function(e,n){return T(d,function(e){return n===e})}),l=f,a=ot(t),$r(i,c,function(e,n){var t,r,o,u,i,c=(t=n.row,r=l.left-e.left,o=n.y-e.top,u=a,qe(i=kl.fromTag("div"),{position:"absolute",left:r+"px",top:o-3.5+"px",height:"7px",width:u+"px"}),Ee(i,{"data-row":t,role:"presentation"}),i);return Fr(c,vf),c});var g,p,b,h,v,w,y,C=0<o.length?Pa.positions(o,t):[],S=0<C.length?(p=s,b=[],x((g=e).grid.columns,function(e){ia.getColumnAt(g,e).map(function(e){return e.element}).forall(p)&&b.push(e)}),O(b,function(n){return I(ia.filterItems(g,function(e){return e.column===n}),function(e){return p(e.element)})})):[];h=n,v=O(C,function(e,n){return T(S,function(e){return n===e})}),w=f,y=at(t),$r(h,v,function(e,n){var t,r,o,u,i,c=(t=n.col,r=n.x-e.left,o=w.top-e.top,u=y,qe(i=kl.fromTag("div"),{position:"absolute",left:r-3.5+"px",top:o+"px",height:u+"px",width:"7px"}),Ee(i,{"data-column":t,role:"presentation"}),i);return Fr(c,wf),c})}function Xr(e,n){var t;Gr(e),e.isResizable(n)&&Kr(t=ia.fromTable(n),e,n,it(t),ut(t))}function Yr(e,n){D(xe(e.parent(),"."+hf),n)}function Jr(e){Yr(e,function(e){Ve(e,"display","none")})}function Qr(e){Yr(e,function(e){Ve(e,"display","block")})}function Zr(o){function e(e,n){return cl.from(Pe(e,n))}function u(e,n){return Qe(e,n)-Ke(e,"data-initial-"+n,0)}function n(e,n){b.trigger.startAdjust(),s.assign(e),Me(e,"data-initial-"+n,Qe(e,n)),Fr(e,yf),Ve(e,"opacity","0.2"),m.go(o.parent())}function t(e){return q(e,o.view())}var r,i,c,l,a,f,s=(l=Mr({drag:Br(["xDelta","yDelta","target"])}),a=cl.none(),(f={mutate:function(e,n){c.trigger.drag(e,n)},events:(c=Mr({drag:Br(["xDelta","yDelta"])})).registry}).events.drag.bind(function(n){a.each(function(e){l.trigger.drag(n.xDelta,n.yDelta,e)})}),{assign:function(e){a=cl.some(e)},get:function(){return a},mutate:f.mutate,events:l.registry}),m=(i=void 0!==(r={}).mode?r.mode:gf,function(n,t,e){function r(){m.stop(),f.isOn()&&(f.off(),a.trigger.stop())}function o(){Qc(c)||(clearTimeout(c),c=null)}function u(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];l&&t.apply(null,e)}}var i,c,l=!1,a=Mr({start:Br([]),stop:Br([])}),f=zr(),s=(i=r,c=null,{cancel:o,throttle:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o(),c=setTimeout(function(){c=null,i.apply(null,e)},200)}});f.events.move.bind(function(e){t.mutate(n,e.info)});var m=t.sink(af({forceDrop:r,drop:u(r),move:u(function(e){s.cancel(),f.onEvent(e,t)}),delayDrop:u(s.throttle)}),e);return{element:m.element,go:function(e){m.start(e),f.on(),a.trigger.start()},on:function(){l=!0},off:function(){l=!1},destroy:function(){m.destroy()},events:a.registry}}(s,i,r)),d=cl.none();s.events.drag.bind(function(n){e(n.target,"data-row").each(function(){var e=Qe(n.target,"top");Ve(n.target,"top",e+n.yDelta+"px")}),e(n.target,"data-column").each(function(){var e=Qe(n.target,"left");Ve(n.target,"left",e+n.xDelta+"px")})}),m.events.stop.bind(function(){s.get().each(function(r){d.each(function(t){e(r,"data-row").each(function(e){var n=u(r,"top");Ql(r,"data-initial-top"),b.trigger.adjustHeight(t,n,parseInt(e,10))}),e(r,"data-column").each(function(e){var n=u(r,"left");Ql(r,"data-initial-left"),b.trigger.adjustWidth(t,n,parseInt(e,10))}),Xr(o,t)})})});var g=_r(o.parent(),"mousedown",function(e){Hr(e.target,vf)&&n(e.target,"top"),Hr(e.target,wf)&&n(e.target,"left")}),p=_r(o.view(),"mouseover",function(e){Ie(e.target,"table",t).filter(Ur).fold(function(){Xl(e.target)&&Gr(o)},function(e){d=cl.some(e),Xr(o,e)})}),b=Mr({adjustHeight:Br(["table","delta","row"]),adjustWidth:Br(["table","delta","column"]),startAdjust:Br([])});return{destroy:function(){g.unbind(),p.unbind(),m.destroy(),Gr(o)},refresh:function(e){Xr(o,e)},on:m.on,off:m.off,hideBars:E(Jr,o),showBars:E(Qr,o),events:b.registry}}function eo(e,n){return e.fire("newrow",{node:n})}function no(e,n){return e.fire("newcell",{node:n})}function to(e,n,t){e.fire("TableModified",sl(sl({},t),{table:n}))}function ro(e){return e.getParam("table_sizing_mode","auto")}function oo(e){return e.getParam("table_responsive_width")}function uo(e){return e.getParam("table_border_widths",Rf,"array")}function io(e){return e.getParam("table_border_styles",Df,"array")}function co(e){return e.getParam("table_default_attributes",Of,"object")}function lo(e){return e.getParam("table_default_styles",function(e){var n;if(kf(e)){var t=e.dom,r=null!==(n=t.getParent(e.selection.getStart(),t.isBlock))&&void 0!==n?n:e.getBody(),o=Ta(kl.fromDom(r));return sl(sl({},xf),{width:o+"px"})}return If(e)?K(xf,function(e,n){return"width"!==n}):xf}(e),"object")}function ao(e){return e.getParam("table_cell_advtab",!0,"boolean")}function fo(e){return e.getParam("table_row_advtab",!0,"boolean")}function so(e){return e.getParam("table_advtab",!0,"boolean")}function mo(e){return e.getParam("table_style_by_css",!1,"boolean")}function go(e){return e.getParam("table_cell_class_list",[],"array")}function po(e){return e.getParam("table_class_list",[],"array")}function bo(e){return"relative"===ro(e)||!0===oo(e)}function ho(e){var n="section",t=e.getParam("table_header_type",n,"string");return y(["section","cells","sectionCells","auto"],t)?t:n}function vo(e){var n=e.getParam("table_column_resizing",Af,"string");return w(["preservetable","resizetable"],function(e){return e===n}).getOr(Af)}function wo(e){return"preservetable"===vo(e)}function yo(e){return"resizetable"===vo(e)}function Co(e){var n=e.getParam("table_clone_elements");return Xc(n)?cl.some(n.split(/[ ,]/)):Array.isArray(n)?cl.some(n):cl.none()}function So(e){return e.getParam("table_background_color_map",[],"array")}function To(e){return e.getParam("table_border_color_map",[],"array")}function xo(e,n){return(bo(e)?qa:kf(e)?Va:Ha)(n)}function Ro(e){Ql(e,"width")}function Do(e){return"false"!==Pe(e,"data-mce-resize")}function Oo(p){function m(e){return"TABLE"===e.nodeName}function b(e){return xo(p,e)}function h(){return(wo(p)?xr:Tr)()}var d,g,v=cl.none(),w=cl.none(),y=cl.none();return p.on("init",function(){var e,n,t,r,o,u,i,c,l,a,m,f,s,d,g=(n=Do,(e=p).inline?(u=ir(e),qe(c=kl.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),la(Yl(kl.fromDom(document)),c),i=n,{parent:C(c),view:C(u),origin:C(Ia(0,0)),isResizable:i}):Fi(kl.fromDom(e.getDoc()),n));y=cl.some(g),o=p.getParam("object_resizing",!0),(Xc(o)?"table"===o:o)&&p.getParam("table_resize_bars",!0,"boolean")&&(t=h(),l=t,a=b,m=Ma,f=Pa,s=Zr(g),d=Mr({beforeResize:Br(["table","type"]),afterResize:Br(["table","type"]),startDrag:Br([])}),s.events.adjustHeight.bind(function(e){var n=e.table;d.trigger.beforeResize(n,"row");var t,r,o,u,i,c,l,a,f,s=m.delta(e.delta,n);t=n,r=s,o=e.row,u=m,a=R(Ht(l=ia.fromTable(t),t,u,Et,function(e){return e.getOrThunk(na)}),function(e,n){return o===n?Math.max(r+e,na()):e}),i=a,f=R(ia.justCells(l),function(e){var n=hr(e.row,e.row+e.rowspan,i);return{element:e.element,height:n,rowspan:e.rowspan}}),D((c=a,R(l.all,function(e,n){return{element:e.element,height:c[n]}})),function(e){Ot(e.element,e.height)}),D(f,function(e){Ot(e.element,e.height)}),Ot(t,A(a,function(e,n){return e+n},0)),d.trigger.afterResize(n,"row")}),s.events.startAdjust.bind(function(){d.trigger.startDrag()}),s.events.adjustWidth.bind(function(e){var n=e.table;d.trigger.beforeResize(n,"col");var t=f.delta(e.delta,n),r=a(n);wr(n,t,e.column,l,r),d.trigger.afterResize(n,"col")}),(r={on:s.on,off:s.off,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:d.registry}).on(),r.events.startDrag.bind(function(){v=cl.some(p.selection.getRng())}),r.events.beforeResize.bind(function(e){var n,t=e.table.dom,r=p,o=cr(n=t),u=lr(t),i=Pf+e.type;r.fire("ObjectResizeStart",{target:n,width:o,height:u,origin:i})}),r.events.afterResize.bind(function(e){var n,t,r,o,u,i=e.table,c=i.dom;sr(i),v.each(function(e){p.selection.setRng(e),p.focus()}),n=p,r=cr(t=c),o=lr(c),u=Pf+e.type,n.fire("ObjectResized",{target:t,width:r,height:o,origin:u}),p.undoManager.add()}),w=cl.some(r))}),p.on("ObjectResizeStart",function(e){var n,t,r,o,u=e.target;m(u)&&(n=kl.fromDom(u),D(p.dom.select(".mce-clonedresizable"),function(e){p.dom.addClass(e,"mce-"+vo(p)+"-columns")}),!Vi(n)&&kf(p)?Mf(n):!Hi(n)&&bo(p)&&Bf(n),qi(n)&&gl(e.origin,Pf)&&Bf(n),d=e.width,g=If(p)?"":(o=(t=p).dom.getStyle(r=u,"width")||t.dom.getAttrib(r,"width"),cl.from(o).filter(W).getOr("")))}),p.on("ObjectResized",function(e){var n,t,r,o,u,i,c,l,a,f,s=e.target;m(s)&&(n=kl.fromDom(s),t=e.origin,gl(t,"corner-")&&(r=n,o=e.width,f=_(t,"e"),""===g&&Bf(r),o!==d&&""!==g?(Ve(r,"width",g),u=h(),i=b(r),c=wo(p)||f?Ir(r).columns-1:0,wr(r,o-d,c,u,i)):/^(\d+(\.\d+)?)%$/.test(g)&&Ve(r,"width",o*parseFloat(g.replace("%",""))/d+"%"),/^(\d+(\.\d+)?)px$/.test(g)&&(a=ia.fromTable(l=r),ia.hasColumns(a)||D(nn(l),function(e){Ve(e,"width",Ue(e,"width")),Ql(e,"width")}))),sr(n),to(p,n.dom,Cf))}),p.on("SwitchMode",function(){w.each(function(e){p.mode.isReadOnly()?e.hideBars():e.showBars()})}),{lazyResize:function(){return w},lazyWire:function(){return y.getOr(Fi(kl.fromDom(p.getBody()),Do))},destroy:function(){w.each(function(e){e.destroy()}),y.each(function(e){var n=e;p.inline&&aa(n.parent())})}}}function Ao(e,n){return{element:e,offset:n}}function ko(e,n){return(e.property().isText(n)?e.property().getText(n):e.property().children(n)).length}function Io(t,r){1===Xe(t,"colspan")&&It(t).bind(function(e){return o=["fixed","relative","empty"],cl.from(za.exec(e)).bind(function(e){var n=Number(e[1]),t=e[2],r=t;return T(o,function(e){return T(Na[e],function(e){return r===e})})?cl.some({value:n,unit:t}):cl.none()});var o}).each(function(e){var n=e.value/2;Pt(t,n,e.unit),Pt(r,n,e.unit)})}function Bo(e){return I(e,function(e){return Wf(e.element)})}function Mo(e){var n="thead"===e.section,t=Le(jf(e.cells),"th");return n||t?{type:"header",subType:n&&t?"sectionCells":n?"section":"cells"}:"tfoot"===e.section?{type:"footer"}:{type:"body"}}function Eo(e,n,t){return te(t(e.element,n),!0,e.isLocked)}function Po(e,n){return e.section!==n?re(e.element,e.cells,n,e.isNew):e}function No(){return{transformRow:Po,transformCell:function(e,n,t){var r,o,u=t(e.element,n);return te("td"!==le(u)?(Dn(r,o=Yn(r=u,"td")),Bn(o,we(r)),aa(r),o):u,e.isNew,e.isLocked)}}}function zo(){return{transformRow:Po,transformCell:Eo}}function Lo(){return{transformRow:function(e,n){return Po(e,"thead"===n?"tbody":n)},transformCell:Eo}}function _o(e,n,t,r){t===r?Ql(e,n):Me(e,n,t)}function Wo(e,n,t){d(Te(e,n)).fold(function(){return An(e,t)},function(e){return On(e,t)})}function jo(u,e){function t(e,n){var t,r,o;Bn((Mn(o=Ae(t=u,r=n).getOrThunk(function(){var e=kl.fromTag(r,de(t).dom);return"thead"===r?Wo(t,"caption,colgroup",e):"colgroup"===r?Wo(t,"caption",e):la(t,e),e})),o),("colgroup"===n?function(e){return P(e,function(e){return R(e.cells,function(e){return _o(e.element,"span",e.colspan,1),e.element})})}:function(e){return R(e,function(e){e.isNew&&i.push(e.element);var n=e.element;return Mn(n),D(e.cells,function(e){e.isNew&&c.push(e.element),_o(e.element,"colspan",e.colspan,1),_o(e.element,"rowspan",e.rowspan,1),la(n,e.element)}),n})})(e))}function n(e,n){0<e.length?t(e,n):Ae(u,n).each(aa)}var i=[],c=[],r=[],o=[],l=[],a=[];return D(e,function(e){switch(e.section){case"thead":r.push(e);break;case"tbody":o.push(e);break;case"tfoot":l.push(e);break;case"colgroup":a.push(e)}}),n(a,"colgroup"),n(r,"thead"),n(o,"tbody"),n(l,"tfoot"),{newRows:i,newCells:c}}function Fo(e,n){if(0===e.length)return 0;var t=e[0];return f(e,function(e){return!n(t.element,e.element)}).getOr(e.length)}function Ho(m,d){var g=R(m,function(e){return R(e.cells,rl)});return R(m,function(e,s){var n=P(e.cells,function(e,n){if(!1!==g[s][n])return[];var t,r,o,u,i,c,l,a,f=(o=n,u=d,a="colgroup"===(l=(t=m)[r=s]).section,{colspan:Fo(l.cells.slice(o),u),rowspan:a?1:Fo((i=t.slice(r),c=o,R(i,function(e){return mn(e,c)})),u)});return function(e,n,t,r){for(var o=e;o<e+t;o++)for(var u=n;u<n+r;u++)g[o][u]=!0}(s,n,f.rowspan,f.colspan),[{element:e.element,rowspan:f.rowspan,colspan:f.colspan,isNew:e.isNew}]});return{element:e.element,cells:n,section:e.section,isNew:e.isNew}})}function Vo(o,u,i){var c=[];D(o.colgroups,function(e){for(var n=[],t=0;t<o.grid.columns;t++){var r=ia.getColumnAt(o,t).map(function(e){return te(e.element,i,!1)}).getOrThunk(function(){return te(u.colGap(),!0,!1)});n.push(r)}c.push(re(e.element,n,"colgroup",i))});for(var e=0;e<o.grid.rows;e++){for(var n=[],t=0;t<o.grid.columns;t++){var r=ia.getAt(o,e,t).map(function(e){return te(e.element,i,e.isLocked)}).getOrThunk(function(){return te(u.gap(),!0,!1)});n.push(r)}var l=o.all[e],a=re(l.element,n,l.section,i);c.push(a)}return c}function qo(e){return Ho(e,q)}function Uo(e,n){return N(e.all,function(e){return w(e.cells,function(e){return q(n,e.element)})})}function Go(n,e,t){var r=_e(R(e.selection,function(e){return en(e).bind(function(e){return Uo(n,e)}).filter(t)}));return je(0<r.length,r)}function $o(f,n,s,m,d){return function(o,u,e,i,c){var l=ia.fromTable(u),a=cl.from(null==c?void 0:c.section).getOrThunk(Ui);return n(l,e).map(function(e){var n=Vo(l,i,!1),t=f(n,e,q,d(i),a),r=vn(t.grid);return{info:e,grid:qo(t.grid),cursor:t.cursor,lockedColumns:r}}).bind(function(e){var n=jo(u,e.grid),t=cl.from(null==c?void 0:c.sizing).getOrThunk(function(){return Ha(u)}),r=cl.from(null==c?void 0:c.resize).getOrThunk(xr);return s(u,e.grid,e.info,{sizing:t,resize:r,section:a}),m(u),Xr(o,u),Ql(u,ua),0<e.lockedColumns.length&&Me(u,ua,e.lockedColumns.join(",")),cl.some({cursor:e.cursor,newRows:n.newRows,newCells:n.newCells})})}}function Ko(e,n){return Go(e,n,ol).map(function(e){return{cells:e,generators:n.generators,clipboard:n.clipboard}})}function Xo(e,n){return Go(e,n,ol)}function Yo(e,n){return Go(e,n,function(e){return!e.isLocked})}function Jo(n,e){return I(e,function(e){return Uo(n,e).exists(function(e){return!e.isLocked})})}function Qo(n,e){return e.mergable.filter(function(e){return Jo(n,e.cells)})}function Zo(n,e){return e.unmergable.filter(function(e){return Jo(n,e)})}function eu(e,n,t,r){for(var o=pn(e).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<gn(o[0]);c++){var l=o[i],a=mn(l,c),f=t(a.element,n);!0===f&&!1===u?sn(l,c,te(r(),!0,a.isLocked)):!0===f&&(u=!1)}return e}function nu(e,t,i,c){var n,r,l=pn(e).rows;return 0<t&&t<l.length&&(n=l[t-1].cells,r=i,D(k(n,function(e,n){return T(e,function(e){return r(e.element,n.element)})?e:e.concat([n])},[]),function(e){for(var o=cl.none(),u=t;u<l.length;u++)for(var n=0;n<gn(l[0]);n++)!function(n){var t=l[u],r=mn(t,n);i(r.element,e.element)&&(o=o.isNone()?cl.some(c()):o).each(function(e){sn(t,n,te(e,!0,r.isLocked))})}(n)})),e}function tu(e,n){return{rowDelta:0,colDelta:gn(e[0])-gn(n[0])}}function ru(e,n){return{rowDelta:e.length-n.length,colDelta:0}}function ou(e,n,t,r){var o="colgroup"===n.section?t.col:t.cell;return x(e,function(e){return te(o(),!0,r(e))})}function uu(e,n,r,o){var u=e[e.length-1];return e.concat(x(n,function(){var e="colgroup"===u.section?r.colgroup:r.row,n=bn(u,e,S),t=ou(n.cells.length,n,r,function(e){return Pl(o,e.toString())});return oa(n,t)}))}function iu(e,t,r,o){return R(e,function(e){var n=ou(t,e,r,rl);return an(e,o,n)})}function cu(e,n,t){var r=n.colDelta<0?iu:S,o=n.rowDelta<0?uu:S,u=vn(e),i=gn(e[0]),c=T(u,function(e){return e===i-1}),l=r(e,Math.abs(n.colDelta),t,c?i-1:i),a=vn(l);return o(l,Math.abs(n.rowDelta),t,B(a,ol))}function lu(n,t,e){return O(e,function(e){return e>=n.column&&e<=gn(t[0])+n.column})}function au(e,u,n,i,c){var t,r,o,l=vn(u),a=(t=e,r=l,o=gn(u[0]),{row:pn(u).cols.length+t.row,column:w(x(o-t.column,function(e){return e+t.column}),function(n){return I(r,function(e){return e!==n})}).getOr(o-1)}),f=pn(n).rows,s=lu(a,f,l);return function(e,n,t){if(e.row>=n.length||e.column>gn(n[0]))return Gf.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var r=n.slice(e.row),o=r[0].cells.slice(e.column),u=gn(t[0]),i=t.length;return Gf.value({rowDelta:r.length-i,colDelta:o.length-u})}(a,u,f).map(function(e){var n=sl(sl({},e),{colDelta:e.colDelta-s.length}),t=cu(u,n,i),r=vn(t),o=lu(a,f,r);return function(e,n,t,r,o,u){for(var i,c,l,a,f,s=e.row,m=e.column,d=s+t.length,g=m+gn(t[0])+u.length,p=B(u,ol),b=s;b<d;b++)for(var h,v,w,y=0,C=m;C<g;C++)p[C]?y++:(l=C,a=void 0,a=E(o,mn((i=n)[c=b],l).element),f=i[c],1<i.length&&1<gn(f)&&(0<l&&a(dn(f,l-1))||l<f.cells.length-1&&a(dn(f,l+1))||0<c&&a(dn(i[c-1],l))||c<i.length-1&&a(dn(i[c+1],l)))&&eu(n,dn(n[b],C),o,r.cell),v=(h=mn(t[b-s],C-m-y)).element,w=r.replace(v),sn(n[b],C,te(w,!0,h.isLocked)));return n}(a,t,f,i,c,o)})}function fu(t,e,n,r,o){var u=t,i=o,c=r.cell;0<u&&u<e[0].cells.length&&D(e,function(e){var n=e.cells[u-1],t=e.cells[u];i(t.element,n.element)&&sn(e,u,te(c(),!0,t.isLocked))});var l=cu(n,ru(n,e),r);return R(cu(e,ru(e,l),r),function(e,n){return an(e,t,l[n].cells)})}function su(e,n,t,r,o){nu(n,e,o,r.cell);var u,i,c=vn(n),l=tu(n,t),a=cu(n,sl(sl({},l),{colDelta:l.colDelta-c.length}),r),f=pn(a),s=f.cols,m=f.rows,d=vn(a),g=tu(t,n),p=sl(sl({},g),{colDelta:g.colDelta+d.length}),b=cu((u=r,i=d,R(t,function(t){return k(i,function(e,n){return fn(e,n,ou(1,t,u,ol)[0])},t)})),p,r);return s.concat(m.slice(0,e)).concat(b).concat(m.slice(e,m.length))}function mu(e,t,n,r,o){var u,i,c,l,a=pn(e),f=a.rows,s=a.cols,m=f.slice(0,t),d=f.slice(t),g=(u=f[n],i=function(e,n){return 0<t&&t<f.length&&r(dn(f[t-1],n),dn(f[t],n))?mn(f[t],n):te(o(e.element,r),!0,e.isLocked)},c=r,l=o,bn(u,function(e){return l(e,c)},i));return s.concat(m).concat([g]).concat(d)}function du(e,u,i,c,l){return R(e,function(e){var n,t,r=0<u&&u<gn(e)&&c(dn(e,u-1),dn(e,u)),o=(n=e.section,t=l,"colgroup"!==n&&r?mn(e,u):te(t(mn(e,i).element,c),!0,!1));return fn(e,u,o)})}function gu(e,n,t,r){return void 0!==dn((u=e)[i=n],t)&&0<i&&r(dn(u[i-1],t),dn(u[i],t))||(o=e[n],0<t&&r(dn(o,t-1),dn(o,t)));var o,u,i}function pu(e,n,t,r){function o(e){return("row"===e?Je:Ye)(n)?e+"group":e}return e?Wf(n)?o(t):null:r&&Wf(n)?o("row"===t?"col":"row"):null}function bu(e,n,t){return te(t(e.element,n),!0,e.isLocked)}function hu(e,u,i,c,l,a,f){return R(e,function(e,o){return t=function(e,n){if(t=e,T(u,function(e){return i(t.element,e.element)})){var r=f(e,o,n)?l(e,i,c):e;return a(r,o,n).each(function(e){var t=r.element;G({scope:cl.from(e)},function(e,n){e.fold(function(){Ql(t,n)},function(e){Be(t.dom,n,e)})})}),r}return e;var t},r=R((n=e).cells,t),re(n.element,r,n.section,n.isNew);var n,t,r})}function vu(t,r,o){return P(t,function(e,n){return gu(t,n,r,o)?[]:[mn(e,r)]})}function wu(e,n,t,r,o){var u,i,c,l,a=pn(e).rows,f=P(n,function(e){return vu(a,e,r)}),s=R(e,function(e){return Bo(e.cells)}),m=(u=f,I(i=s,S)&&Bo(u)?ol:function(e,n){return!("th"===le(e.element)&&i[n])}),d=(c=t,l=s,function(e,n){return cl.some(pu(c,e.element,"row",l[n]))});return hu(e,f,r,o,bu,d,m)}function yu(e,n,t,r){var o=pn(e).rows;return hu(e,R(n,function(e){return mn(o[e.row],e.column)}),t,r,bu,cl.none,ol)}function Cu(e){return k(e,function(e,n){return T(e,function(e){return e.column===n.column})?e:e.concat([n])},[]).sort(function(e,n){return e.column-n.column})}function Su(e){return"tr"===le(e)||Kf(e)}function Tu(e){return{element:e,colspan:Ke(e,"colspan",1),rowspan:Ke(e,"rowspan",1)}}function xu(e){return Ne(e,"scope").map(function(e){return e.substr(0,3)})}function Ru(e){return n=e,t=Yf.property().name(n),y(Xf,t);var n,t}function Du(e){return n=e,y(["ol","ul"],Yf.property().name(n));var n}function Ou(e){function u(e){return"br"===le(e)}function t(o){return Yt(o).bind(function(t){var r=ve(t).map(function(e){return!!Ru(e)||(n=e,!!y(["br","img","hr","input"],Yf.property().name(n))&&"img"!==le(e));var n}).getOr(!1);return pe(t).map(function(e){return!0===r||"li"===le(n=e)||De(n,Du).isSome()||u(t)||Ru(e)&&!q(o,e)?[]:[kl.fromTag("br")];var n})}).getOr([])}var n,r=0===(n=P(e,function(e){var n=we(e);return I(n,function(e){return u(e)||Hl(e)&&0===Pn(e).trim().length})?[]:n.concat(t(e))})).length?[kl.fromTag("br")]:n;Mn(e[0]),Bn(e[0],r)}function Au(e){return Ur(e,!0)}function ku(e){0===nn(e).length&&aa(e)}function Iu(e,n){return{grid:e,cursor:n}}function Bu(e,n,t){var r,o,u,i,c;return Iu(e,(r=n,o=t,c=pn(e).rows,cl.from(null===(i=null===(u=c[r])||void 0===u?void 0:u.cells[o])||void 0===i?void 0:i.element).filter(Au).orThunk(function(){return N(c,function(e){return N(e.cells,function(e){var n=e.element;return je(Au(n),n)})})})))}function Mu(e){return k(e,function(e,n){return T(e,function(e){return e.row===n.row})?e:e.concat([n])},[]).sort(function(e,n){return e.row-n.row})}function Eu(u,i){return function(e,n,t,r,o){return Bu(function(e,n,t,r,u,o,i){var c=pn(e),l=c.cols,a=c.rows,f=a[n[0]],s=P(n,function(e){return o=u,P((t=a)[r=e].cells,function(e,n){return gu(t,r,n,o)?[]:[e]});var t,r,o}),m=R(f.cells,function(e,n){return Bo(vu(a,n,u))}),d=z([],a,!0);D(n,function(e){d[e]=i.transformRow(a[e],t)});var g,p,b,h,v=l.concat(d),w=(g=f,I(p=m,S)&&Bo(g.cells)?ol:function(e,n,t){return!("th"===le(e.element)&&p[t])}),y=(b=r,h=m,function(e,n,t){return cl.some(pu(b,e.element,"col",h[t]))});return hu(v,s,u,o,i.transformCell,y,w)}(e,R(Mu(n),function(e){return e.row}),u,i,t,r.replaceOrInit,o),n[0].row,n[0].column)}}function Pu(e,n,t){var r,o=(r=t.section,un(e,function(){return r}));return Vo(ia.generate(o),n,!0)}function Nu(e,n,t,r){var o=r.sizing,u=ia.generate(n);vr(u,o.getWidths(u,o),o)}function zu(e,n,t,r){var o=t,u=r.sizing,i=r.resize,c=ia.generate(n),l=u.getWidths(c,u),a=u.pixelWidth(),f=i.calcRedestributedWidths(l,a,o.pixelDelta,u.isRelative),s=f.newSizes,m=f.delta;vr(c,s,u),u.adjustTableWidth(m)}function Lu(e,n){return T(n,function(e){return 0===e.column&&e.isLocked})}function _u(n,e){return T(e,function(e){return e.column+e.colspan>=n.grid.columns&&e.isLocked})}function Wu(e,n){var t=ut(e);return k(Cu(n),function(e,n){return e+t[n.column].map(ot).getOr(0)},0)}function ju(t){return function(n,e){return Xo(n,e).filter(function(e){return!(t?Lu:_u)(n,e)}).map(function(e){return{details:e,pixelDelta:Wu(n,e)}})}}function Fu(t){return function(n,e){return Ko(n,e).filter(function(e){return!(t?Lu:_u)(n,e.cells)})}}function Hu(e,n){var u=ia.fromTable(e);return Xo(u,n).bind(function(e){var n=e[e.length-1],t=e[0].column,r=n.column+n.colspan,o=i(R(u.all,function(e){return O(e.cells,function(e){return e.column>=t&&e.column<r})}));return jf(o)}).getOr("")}function Vu(e,n){return Xo(ia.fromTable(e),n).bind(jf).getOr("")}function qu(m,d,e){function n(e){return"table"===le(ir(e))}function t(c,l,a,f,s){return function(t,e,o){void 0===o&&(o=!1),sr(t);var n=f(),r=kl.fromDom(m.getDoc()),u=rr(a,r,g),i={sizing:xo(m,t),resize:(yo(m)?Tr:xr)(),section:function(e){switch(ho(m)){case"section":return Ff();case"sectionCells":return Hf();case"cells":return Vf();default:return function(e,n){switch(N(ia.fromTable(e).all,function(e){var n=Mo(e);return"header"===n.type?cl.from(n.subType):cl.none()}).getOr(n)){case"section":return No();case"sectionCells":return zo();case"cells":return Lo()}}(e,"section")}}(t)};return l(t)?c(n,t,e,u,i).bind(function(e){D(e.newRows,function(e){eo(m,e.dom)}),D(e.newCells,function(e){no(m,e.dom)});var r,n=(r=t,e.cursor.fold(function(){return p(nn(r)).filter(Xl).map(function(e){d.clear(r);var n=m.dom.createRng();return n.selectNode(e.dom),m.selection.setRng(n),Me(e,"data-mce-selected","1"),n})},function(e){var n=Lf(_f,e),t=m.dom.createRng();return t.setStart(n.element.dom,n.offset),t.setEnd(n.element.dom,n.offset),m.selection.setRng(t),d.clear(r),cl.some(t)}));return Xl(t)&&(sr(t),o||to(m,t.dom,s)),n.map(function(e){return{rng:e,effect:s}})}):cl.none()}}var g=Co(m),r=yo(m)?M:Io;return{deleteRow:t(cs,function(e){return!1===n(m)||1<Ir(e).rows},M,e,Sf),deleteColumn:t(is,function(e){return!1===n(m)||1<Ir(e).columns},M,e,Sf),insertRowsBefore:t(ts,ol,M,e,Sf),insertRowsAfter:t(rs,ol,M,e,Sf),insertColumnsBefore:t(os,ol,r,e,Sf),insertColumnsAfter:t(us,ol,r,e,Sf),mergeCells:t(ps,ol,M,e,Sf),unmergeCells:t(bs,ol,M,e,Sf),pasteColsBefore:t(vs,ol,M,e,Sf),pasteColsAfter:t(ws,ol,M,e,Sf),pasteRowsBefore:t(ys,ol,M,e,Sf),pasteRowsAfter:t(Cs,ol,M,e,Sf),pasteCells:t(hs,ol,M,e,Tf),makeCellsHeader:t(ds,ol,M,e,Sf),unmakeCellsHeader:t(gs,ol,M,e,Sf),makeColumnsHeader:t(ls,ol,M,e,Sf),unmakeColumnsHeader:t(as,ol,M,e,Sf),makeRowsHeader:t(fs,ol,M,e,Sf),makeRowsBody:t(ss,ol,M,e,Sf),makeRowsFooter:t(ms,ol,M,e,Sf),getTableRowType:Ss,getTableCellType:Vu,getTableColType:Hu}}function Uu(e,n,t,r){return x(e,function(e){return function(e,n,t,r){for(var o=kl.fromTag("tr"),u=0;u<e;u++){var i=r<n||u<t?kl.fromTag("th"):kl.fromTag("td");u<t&&Me(i,"scope","row"),r<n&&Me(i,"scope","col"),la(i,kl.fromTag("br")),la(o,i)}return o}(n,t,r,e)})}function Gu(e,n){e.selection.select(n.dom,!0),e.selection.collapse(!0)}function $u(u,i,c,l,a){var o=lo(u),f={styles:o,attributes:co(u),colGroups:u.getParam("table_use_colgroups",!1,"boolean")};return u.undoManager.ignore(function(){var e=function(e,n,t,r,o,u){void 0===u&&(u=Ts);var i,c,l=kl.fromTag("table"),a="cells"!==o;qe(l,u.styles),Ee(l,u.attributes),u.colGroups&&la(l,(i=n,c=kl.fromTag("colgroup"),x(i,function(){return la(c,kl.fromTag("col"))}),c));var f,s=Math.min(e,t);a&&0<t&&(f=kl.fromTag("thead"),la(l,f),Bn(f,Uu(t,n,"sectionCells"===o?s:0,r)));var m=kl.fromTag("tbody");return la(l,m),Bn(m,Uu(a?e-s:e,n,a?0:t,r)),l}(c,i,a,l,ho(u),f);Me(e,"data-mce-id","__mce");var n,t,r,o=(n=e,t=kl.fromTag("div"),r=kl.fromDom(n.dom.cloneNode(!0)),la(t,r),t.dom.innerHTML);u.insertContent(o),u.addVisual()}),ke(ir(u),'table[data-mce-id="__mce"]').map(function(e){var n,t,r;return kf(u)?Mf(e):If(u)?Ef(e):(bo(u)||(n=o.width,Xc(n)&&-1!==n.indexOf("%")))&&Bf(e),sr(e),Ql(e,"data-mce-id"),t=u,D(xe(e,"tr"),function(e){eo(t,e.dom),D(xe(e,"th,td"),function(e){no(t,e.dom)})}),r=u,ke(e,"td,th").each(E(Gu,r)),e.dom}).getOr(null)}function Ku(e,n,t,r,o){function u(e){return tl(e)&&0<e}if(void 0===r&&(r={}),u(n)&&u(t)){var i=r.headerRows||0;return $u(e,t,n,r.headerColumns||0,i)}return console.error(o),null}function Xu(e){return function(){return e().fold(function(){return[]},function(e){return R(e,function(e){return e.dom})})}}function Yu(t){return function(e){var n=0<e.length?cl.some(ur(e)):cl.none();t(n)}}function Ju(e,n,t){var r=Ke(e,n,1);1===t||r<=1?Ql(e,n):Me(e,n,Math.min(t,r))}function Qu(o,e,u){return function(e,n){for(var t=0;t<n.length;t++){var r=o.getStyle(n[t],u);if((e=void 0===e?r:e)!==r)return""}return e}(void 0,o.select("td,th",e))}function Zu(e,n,t){t&&e.formatter.apply("align"+t,{},n)}function ei(n,t){xs.each("left center right".split(" "),function(e){n.formatter.remove("align"+e,{},t)})}function ni(e){return Ds.test(t=e)||Os.test(t)?cl.some({value:(gl(n=e,"#")?n.substring("#".length):n).toUpperCase()}):cl.none();var n,t}function ti(e){var n=e.toString(16);return(1===n.length?"0"+n:n).toUpperCase()}function ri(e){return{value:ti(e.red)+ti(e.green)+ti(e.blue)}}function oi(e,n,t,r){return{red:e,green:n,blue:t,alpha:r}}function ui(e,n,t,r){return oi(parseInt(e,10),parseInt(n,10),parseInt(t,10),parseFloat(r))}function ii(e){var n=e;return{get:function(){return n},set:function(e){n=e}}}function ci(e){function n(){return t.get().each(e)}var t=ii(cl.none());return{clear:function(){n(),t.set(cl.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){n(),t.set(cl.some(e))}}}function li(){var n=ci(M);return sl(sl({},n),{on:function(e){return n.get().each(e)}})}function ai(e){return Z(e,"menu")}function fi(t,r){return function(e){var n;t.execCommand("mceTableApplyCellStyle",!1,((n={})[r]=e,n))}}function si(n,t,r,o,u){return function(e){return e(Bs(n,t,r,o,u))}}function mi(r,e,o){var n=R(e,function(e){return{text:e.title,value:"#"+ni(r=e.value).orThunk(function(){return function(e){if("transparent"===e)return cl.some(oi(0,0,0,0));var n=As.exec(e);if(null!==n)return cl.some(ui(n[1],n[2],n[3],"1"));var t=ks.exec(e);return null!==t?cl.some(ui(t[1],t[2],t[3],t[4])):cl.none()}(r).map(ri)}).getOrThunk(function(){var e=document.createElement("canvas");e.height=1,e.width=1;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.fillStyle="#FFFFFF",n.fillStyle=r,n.fillRect(0,0,1,1);var t=n.getImageData(0,0,1,1).data;return ri(oi(t[0],t[1],t[2],t[3]))}).value,type:"choiceitem"};var r});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<n.length?n:void 0,allowCustomColors:!1},onAction:function(e){var n,t="remove"===e.value?"":e.value;r.execCommand("mceTableApplyCellStyle",!1,((n={})[o]=t,n))}}]}function di(n){return function(){var e=n.queryCommandValue("mceTableRowType");n.execCommand("mceTableRowType",!1,{type:"header"===e?"body":"header"})}}function gi(n){return function(){var e=n.queryCommandValue("mceTableColType");n.execCommand("mceTableColType",!1,{type:"th"===e?"td":"th"})}}function pi(e){return Es.concat((0<(n=Is(go(e))).length?cl.some({name:"class",type:"listbox",label:"Class",items:n}):cl.none()).toArray());var n}function bi(e,n){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Is(io(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}}function hi(u){
return function(t,r){var o=t.dom;return{setAttrib:function(e,n){u&&!n||o.setAttrib(r,e,n)},setStyle:function(e,n){u&&!n||o.setStyle(r,e,n)},setFormat:function(e,n){u&&!n||(""===n?t.formatter.remove(e,{value:null},r,!0):t.formatter.apply(e,{value:n},r))}}}}function vi(n){return function(e){return gl(e,"rgb")?n.toHex(e):e}}function wi(e,n){var t=kl.fromDom(n);return{borderwidth:Ge(t,"border-width").getOr(""),borderstyle:Ge(t,"border-style").getOr(""),bordercolor:Ge(t,"border-color").map(vi(e)).getOr(""),backgroundcolor:Ge(t,"background-color").map(vi(e)).getOr("")}}function yi(e){var o=e[0];return D(e.slice(1),function(e){D(Bl(o),function(r){G(e,function(e,n){var t=o[r];""!==t&&r===n&&t!==e&&(o[r]="")})})}),o}function Ci(e,n,t,r){return w(e,function(e){return!el(t.formatter.matchNode(r,n+e))}).getOr("")}function Si(e,t){var n=ia.fromTable(e);return R(O(ia.justCells(n),function(n){return T(t,function(e){return q(n.element,e)})}),function(e){return{element:e.element.dom,column:ia.getColumnAt(n,e.column).map(function(e){return e.element.dom})}})}function Ti(e,n,r,t){var l=t.getData();t.close(),e.undoManager.transact(function(){var o,u=e,i=n,t=r,c=K(o=l,function(e,n){return t[n]!==e});0<J(c)&&1<=i.length&&rn(i[0]).each(function(e){var s,m,d,n=Si(e,i),t=0<J(K(c,function(e,n){return"scope"!==n&&"celltype"!==n})),r=Pl(c,"celltype");(t||Pl(c,"scope"))&&(s=u,m=o,d=1===n.length,D(n,function(e){var n,t,r,o,u,i,c=e.element,l=d?Ps.normal(s,c):Ps.ifTruthy(s,c),a=e.column.map(function(e){return d?Ps.normal(s,e):Ps.ifTruthy(s,e)}).getOr(l),f=m;(n=l).setAttrib("scope",f.scope),n.setAttrib("class",f["class"]),n.setStyle("height",fr(f.height)),a.setStyle("width",fr(f.width)),ao(s)&&((t=l).setFormat("tablecellbackgroundcolor",(r=m).backgroundcolor),t.setFormat("tablecellbordercolor",r.bordercolor),t.setFormat("tablecellborderstyle",r.borderstyle),t.setFormat("tablecellborderwidth",fr(r.borderwidth))),d&&(ei(s,c),o=s,u=c,xs.each("top middle bottom".split(" "),function(e){o.formatter.remove("valign"+e,{},u)})),m.halign&&Zu(s,c,m.halign),!m.valign||(i=m.valign)&&s.formatter.apply("valign"+i,{},c)})),r&&u.execCommand("mceTableCellType",!1,{type:o.celltype,no_events:!0}),to(u,e.dom,{structure:r,style:t})}),e.focus()})}function xi(e,n){var t,l,r,o,u,i=Ja(n);0!==i.length&&(l=e,t=yi(rn((r=i)[0]).map(function(e){return R(Si(e,r),function(e){function n(e,n){return i.getStyle(e,n)||i.getAttrib(e,n)}return t=l,r=e.element,o=ao(l),u=e.column,i=t.dom,c=u.getOr(r),sl({width:n(c,"width"),height:n(r,"height"),scope:i.getAttrib(r,"scope"),celltype:r.nodeName.toLowerCase(),"class":i.getAttrib(r,"class",""),halign:Ns(t,r),valign:zs(t,r)},o?wi(i,r):{});var t,r,o,u,i,c})}).getOrDie()),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:pi(e)},bi(e,"cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:pi(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:ao(e)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:E(Ti,e,i,t)}))}function Ri(e){return Ls.concat((0<(n=Is(e.getParam("table_row_class_list",[],"array"))).length?cl.some({name:"class",type:"listbox",label:"Class",items:n}):cl.none()).toArray());var n}function Di(s,m,d,e){var g=e.getData();e.close(),s.undoManager.transact(function(){var e,n,t,i,c,l,a,r=s,o=m,u=d,f=K(e=g,function(e,n){return u[n]!==e});0<J(f)&&(n=Pl(f,"type"),(t=!n||1<J(f))&&(i=r,c=e,l=u,a=1===o.length,D(o,function(e){var n,t,r,o=a?Ps.normal(i,e):Ps.ifTruthy(i,e),u=c;(n=o).setAttrib("class",u["class"]),n.setStyle("height",fr(u.height)),fo(i)&&((t=o).setStyle("background-color",(r=c).backgroundcolor),t.setStyle("border-color",r.bordercolor),t.setStyle("border-style",r.borderstyle)),c.align!==l.align&&(ei(i,e),Zu(i,e,c.align))})),n&&r.execCommand("mceTableRowType",!1,{type:e.type,no_events:!0}),rn(kl.fromDom(o[0])).each(function(e){return to(r,e.dom,{structure:n,style:t})})),s.focus()})}function Oi(i){var e,t,n,r,o,u,c=(e=mr(i),t=Ka.selected,We(n,(n=Ya(e)).bind(function(e){return rn(e)}).map(on),function(n,e){return O(e,function(e){return T(ur(e.dom.cells),function(e){return"1"===Pe(e,t)||q(e,n)})})}).getOr([]));0!==c.length&&(r=yi(R(c,function(e){return n=i,t=e.dom,r=fo(i),u=n.dom,sl({height:u.getStyle(t,"height")||u.getAttrib(t,"height"),"class":u.getAttrib(t,"class",""),type:rn(kl.fromDom(o=t)).map(function(e){var n={selection:ur(o.cells)};return Ss(e,n)}).getOr(""),align:Ns(n,t)},r?wi(u,t):{});var n,t,r,o,u})),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ri(i)},bi(i,"row")]},u={type:"panel",items:[{type:"grid",columns:2,items:Ri(i)}]},i.windowManager.open({title:"Row Properties",size:"normal",body:fo(i)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:E(Di,i,R(c,function(e){return e.dom}),r)}))}function Ai(u,i,t,e){var c=u.dom,l=e.getData(),a=K(l,function(e,n){return t[n]!==e});e.close(),""===l["class"]&&delete l["class"],u.undoManager.transact(function(){var e,n,t,r,o;i||(e=parseInt(l.cols,10)||1,n=parseInt(l.rows,10)||1,i=$u(u,e,n,0,0)),0<J(a)&&(function(e,n,t){var r,o=e.dom,u={},i={};if(u["class"]=t["class"],i.height=fr(t.height),o.getAttrib(n,"width")&&!mo(e)?u.width=(r=t.width)?r.replace(/px$/,""):"":i.width=fr(t.width),mo(e)?(i["border-width"]=fr(t.border),i["border-spacing"]=fr(t.cellspacing)):(u.border=t.border,u.cellpadding=t.cellpadding,u.cellspacing=t.cellspacing),mo(e)&&n.children)for(var c=0;c<n.children.length;c++)_s(o,n.children[c],{"border-width":fr(t.border),padding:fr(t.cellpadding)}),so(e)&&_s(o,n.children[c],{"border-color":t.bordercolor});so(e)&&(i["background-color"]=t.backgroundcolor,i["border-color"]=t.bordercolor,i["border-style"]=t.borderstyle),u.style=o.serializeStyle(sl(sl({},lo(e)),i)),o.setAttribs(n,sl(sl({},co(e)),u))}(u,i,l),((t=c.select("caption",i)[0])&&!l.caption||!t&&l.caption)&&u.execCommand("mceTableToggleCaption"),""===l.align?ei(u,i):Zu(u,i,l.align)),u.focus(),u.addVisual(),0<J(a)&&(o=!(r=Pl(a,"caption"))||1<J(a),to(u,i,{structure:r,style:o}))})}function ki(e,n){var t,r,o,u,i,c,l,a,f,s,m,d,g,p,b,h,v,w,y,C=e.dom,S=(o=so(r=e),a=lo(r),f=co(r),s=o?(u=r.dom,{borderstyle:Q(a,"border-style").getOr(""),bordercolor:vi(u)(Q(a,"border-color").getOr("")),backgroundcolor:vi(u)(Q(a,"background-color").getOr(""))}):{},sl(sl(sl(sl(sl(sl({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,"class":"",align:"",border:""}),a),f),s),(l=a["border-width"],mo(r)&&l?{border:l}:Q(f,"border").fold(function(){return{}},function(e){return{border:e}}))),(i=Q(a,"border-spacing").or(Q(f,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),c=Q(a,"border-padding").or(Q(f,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),sl(sl({},i),c))));!1===n?(t=C.getParent(e.selection.getStart(),"table",e.getBody()))?(d=t,g=so(m=e),v=m.dom,w=mo(m)?v.getStyle(d,"border-spacing")||v.getAttrib(d,"cellspacing"):v.getAttrib(d,"cellspacing")||v.getStyle(d,"border-spacing"),y=mo(m)?Qu(v,d,"padding")||v.getAttrib(d,"cellpadding"):v.getAttrib(d,"cellpadding")||Qu(v,d,"padding"),S=sl({width:v.getStyle(d,"width")||v.getAttrib(d,"width"),height:v.getStyle(d,"height")||v.getAttrib(d,"height"),cellspacing:w,cellpadding:y,border:(p=v,h=Ge(kl.fromDom(b=d),"border-width"),mo(m)&&h.isSome()?h.getOr(""):p.getAttrib(b,"border")||Qu(m.dom,b,"border-width")||Qu(m.dom,b,"border")),caption:!!v.select("caption",d)[0],"class":v.getAttrib(d,"class",""),align:Ns(m,d)},g?wi(v,d):{})):so(e)&&(S.borderstyle="",S.bordercolor="",S.backgroundcolor=""):(S.cols="1",S.rows="1",so(e)&&(S.borderstyle="",S.bordercolor="",S.backgroundcolor=""));var T=Is(po(e));0<T.length&&S["class"]&&(S["class"]=S["class"].replace(/\s*mce\-item\-table\s*/g,""));var x,R,D,O,A={type:"grid",columns:2,items:(x=T,R=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],D=e.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],O=0<x.length?[{type:"listbox",name:"class",label:"Class",items:x}]:[],R.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(D).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(O))},k=so(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[A]},bi(e,"table")]}:{type:"panel",items:[A]};e.windowManager.open({title:"Table Properties",size:"normal",body:k,onSubmit:E(Ai,e,t,S),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:S})}function Ii(e){return Xa(mr(e),ar(e))}function Bi(c,n,e,a,t){function u(e){return rn(e,d)}function l(t){return Ya(mr(e=c),ar(e)).bind(function(n){return u(n).map(function(e){return t(e,n)})});var e}function f(){c.focus()}function r(r,o){return void 0===o&&(o=!1),l(function(e,n){var t=gr(a,e,n);r(e,t,o).each(f)})}function o(){return l(function(e,n){var t,r,o,u=gr(a,e,n),i=rr(M,kl.fromDom(c.getDoc()),cl.none());return t=u,r=i,Xo(o=ia.fromTable(e),t).bind(function(e){var n=qo(P(pn(Vo(o,r,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),function(e){var n=O(e.cells,function(e){return!e.isLocked});return 0<n.length?[sl(sl({},e),{cells:n})]:[]}));return je(0<n.length,n)}).map(function(e){return R(e,function(e){var t=Kn(e.element);return D(e.cells,function(e){var n=Xn(e.element);_o(n,"colspan",e.colspan,1),_o(n,"rowspan",e.rowspan,1),la(t,n)}),t})})})}function i(){return l(function(e,n){var t,l;return t=gr(a,e,n),Yo(l=ia.fromTable(e),t).map(function(e){var r,o,n=e[e.length-1],t=e[0].column,u=n.column+n.colspan,i=function(e,t,r){if(ia.hasColumns(e)){var n=R(O(ia.justColumns(e),function(e){return e.column>=t&&e.column<r}),function(e){var n=Xn(e.element);return Ju(n,"span",r-t),n}),o=kl.fromTag("colgroup");return Bn(o,n),[o]}return[]}(l,t,u),c=(r=t,o=u,R(l.all,function(e){var n=R(O(e.cells,function(e){return e.column>=r&&e.column<o}),function(e){var n=Xn(e.element);return Ju(n,"colspan",o-r),n}),t=kl.fromTag("tr");return Bn(t,n),t}));return z(z([],i,!0),c,!0)})})}function s(i,e){return e().each(function(e){var u=R(e,Xn);l(function(e){var n,t,r=or(kl.fromDom(c.getDoc())),o=(n=u,t=r,{selection:dr(a),clipboard:n,generators:t});i(e,o).each(f)})})}function m(t){return function(e,n){return Q(n,"type").each(function(e){r(t(e),n.no_events)})}}var d=ar(c);G({mceTableSplitCells:function(){return r(n.unmergeCells)},mceTableMergeCells:function(){return r(n.mergeCells)},mceTableInsertRowBefore:function(){return r(n.insertRowsBefore)},mceTableInsertRowAfter:function(){return r(n.insertRowsAfter)},mceTableInsertColBefore:function(){return r(n.insertColumnsBefore)},mceTableInsertColAfter:function(){return r(n.insertColumnsAfter)},mceTableDeleteCol:function(){return r(n.deleteColumn)},mceTableDeleteRow:function(){return r(n.deleteRow)},mceTableCutCol:function(){return i().each(function(e){t.setColumns(e),r(n.deleteColumn)})},mceTableCutRow:function(){return o().each(function(e){t.setRows(e),r(n.deleteRow)})},mceTableCopyCol:function(){return i().each(function(e){return t.setColumns(e)})},mceTableCopyRow:function(){return o().each(function(e){return t.setRows(e)})},mceTablePasteColBefore:function(){return s(n.pasteColsBefore,t.getColumns)},mceTablePasteColAfter:function(){return s(n.pasteColsAfter,t.getColumns)},mceTablePasteRowBefore:function(){return s(n.pasteRowsBefore,t.getRows)},mceTablePasteRowAfter:function(){return s(n.pasteRowsAfter,t.getRows)},mceTableDelete:function(){return Ii(c).each(function(e){rn(e,d).filter(g(d)).each(function(e){var n,t=kl.fromText("");On(e,t),aa(e),c.dom.isEmpty(c.getBody())?(c.setContent(""),c.selection.setCursorLocation()):((n=c.dom.createRng()).setStart(t.dom,0),n.setEnd(t.dom,0),c.selection.setRng(n),c.nodeChanged())})})},mceTableCellToggleClass:function(e,r){l(function(e){var n=Ja(a),t=I(n,function(e){return c.formatter.match("tablecellclass",{value:r},e.dom)})?c.formatter.remove:c.formatter.apply;D(n,function(e){return t("tablecellclass",{value:r},e.dom)}),to(c,e.dom,Cf)})},mceTableToggleClass:function(e,n){l(function(e){c.formatter.toggle("tableclass",{value:n},e.dom),to(c,e.dom,Cf)})},mceTableToggleCaption:function(){Ii(c).each(function(n){rn(n,d).each(function(r){Ae(r,"caption").fold(function(){var e,n,t=kl.fromTag("caption");la(t,kl.fromText("Caption")),n=t,ye(e=r,0).fold(function(){la(e,n)},function(e){Dn(e,n)}),c.selection.setCursorLocation(t.dom,0)},function(e){me("caption")(n)&&V("td",r).each(function(e){return c.selection.setCursorLocation(e.dom,0)}),aa(e)}),to(c,r.dom,Sf)})})},mceTableSizingMode:function(e,n){return t=n,Ii(c).each(function(e){If(c)||kf(c)||bo(c)||rn(e,d).each(function(e){"relative"!==t||Hi(e)?"fixed"!==t||Vi(e)?"responsive"!==t||qi(e)||Ef(e):Mf(e):Bf(e),sr(e),to(c,e.dom,Sf)})});var t},mceTableCellType:m(function(e){return"th"===e?n.makeCellsHeader:n.unmakeCellsHeader}),mceTableColType:m(function(e){return"th"===e?n.makeColumnsHeader:n.unmakeColumnsHeader}),mceTableRowType:m(function(e){switch(e){case"header":return n.makeRowsHeader;case"footer":return n.makeRowsFooter;default:return n.makeRowsBody}})},function(e,n){return c.addCommand(n,e)}),G({mceTableProps:E(ki,c,!1),mceTableRowProps:E(Oi,c),mceTableCellProps:E(xi,c,a)},function(e,n){return c.addCommand(n,function(){return e()})}),c.addCommand("mceInsertTable",function(e,n){Yc(n)&&0<Bl(n).length?Ku(c,n.rows,n.columns,n.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):ki(c,!0)}),c.addCommand("mceTableApplyCellStyle",function(e,n){function r(e){return"tablecell"+e.toLowerCase().replace("-","")}var o,t;!Yc(n)||0!==(o=Ja(a)).length&&(function(e){for(var n in e)if(Ml.call(e,n))return;return 1}(t=K(n,function(e,n){return c.formatter.has(r(n))&&Xc(e)}))||(G(t,function(n,t){D(o,function(e){Ps.normal(c,e.dom).setFormat(r(t),n)})}),u(o[0]).each(function(e){return to(c,e.dom,Cf)})))})}function Mi(t,e){return rn(t,e).bind(function(e){var n=nn(e);return f(n,function(e){return q(t,e)}).map(function(e){return{index:e,all:n}})})}function Ei(e,n){var t=e.document.createRange();return t.selectNode(n.dom),t}function Pi(e,n){var t=e.document.createRange();return Ys(t,n),t}function Ni(e,n,t){var r,o=e.document.createRange(),u=o;return n.fold(function(e){u.setStartBefore(e.dom)},function(e,n){u.setStart(e.dom,n)},function(e){u.setStartAfter(e.dom)}),r=o,t.fold(function(e){r.setEndBefore(e.dom)},function(e,n){r.setEnd(e.dom,n)},function(e){r.setEndAfter(e.dom)}),o}function zi(e,n,t,r,o){var u=e.document.createRange();return u.setStart(n.dom,t),u.setEnd(r.dom,o),u}function Li(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}function _i(e,n,t){return n(kl.fromDom(t.startContainer),t.startOffset,kl.fromDom(t.endContainer),t.endOffset)}function Wi(e,n){var o,t,r,u=(o=e,n.match({domRange:function(e){return{ltr:C(e),rtl:cl.none}},relative:function(e,n){return{ltr:h(function(){return Ni(o,e,n)}),rtl:h(function(){return cl.some(Ni(o,n,e))})}},exact:function(e,n,t,r){return{ltr:h(function(){return zi(o,e,n,t,r)}),rtl:h(function(){return cl.some(zi(o,t,r,e,n))})}}}));return(r=(t=u).ltr()).collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Js.rtl(kl.fromDom(e.endContainer),e.endOffset,kl.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return _i(0,Js.ltr,r)}):_i(0,Js.ltr,r)}function ji(u,e){return Wi(u,e).match({ltr:function(e,n,t,r){var o=u.document.createRange();return o.setStart(e.dom,n),o.setEnd(t.dom,r),o},rtl:function(e,n,t,r){var o=u.document.createRange();return o.setStart(t.dom,r),o.setEnd(e.dom,n),o}})}function Fi(e,n){return{parent:C(cl.from(e.dom.documentElement).map(kl.fromDom).getOr(e)),view:C(e),origin:C(Ia(0,0)),isResizable:n}}function Hi(e){return It(e).exists(function(e){return La.test(e)})}function Vi(e){return It(e).exists(function(e){return _a.test(e)})}function qi(e){return It(e).isNone()}function Ui(){return{transformRow:S,transformCell:Eo}}function Gi(o,u){function r(e){if(Su(e))return Kf((t={element:e}).element)?o.colgroup(t):o.row(t);var n,t,r=(n=u(e),$f(n.element)?o.col(n):o.cell(n));return i=cl.some({item:e,replacement:r}),r}void 0===u&&(u=Tu);var i=cl.none();return{getOrInit:function(n,t){return i.fold(function(){return r(n)},function(e){return t(n,e.item)?e.replacement:r(n)})}}}function $i(r){return function(t){function u(e){var n=t.replace(e,r,"td"===r?{scope:null}:{});return i.push({item:e,sub:n}),n}var i=[];return{replaceOrInit:function(n,t){return Su(n)||$f(n)?n:(r=n,o=t,w(i,function(e){return o(e.item,r)}).fold(function(){return u(n)},function(e){return t(n,e.item)?e.sub:u(n)}));var r,o}}}}function Ki(r){return{unmerge:function(t){var e=xu(t);return e.each(function(e){return Me(t,"scope",e)}),function(){var n=r.cell({element:t,colspan:1,rowspan:1});return $e(n,"width"),$e(t,"width"),e.each(function(e){return Me(n,"scope",e)}),n}},merge:function(r){return $e(r[0],"width"),function(){var e=_e(R(r,xu));if(0===e.length)return cl.none();var n=e[0],t=["row","col"];return T(e,function(e){return e!==n&&y(t,e)})?cl.none():cl.from(n)}().fold(function(){return Ql(r[0],"scope")},function(e){return Me(r[0],"scope",e+"group")}),C(r[0])}}}function Xi(e,n,t){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}function Yi(t,r,e,n,o){function l(e){var n=t.dom.createRange();return n.setStart(r.dom,e),n.collapse(!0),n}var u=Pn(r).length;return l(function(e,n,t,r){if(0===r)return 0;if(e===t)return r-1;for(var o=t,u=1;u<r;u++){var i=l(u).getBoundingClientRect(),c=Math.abs(e-i.left);if(n<=i.bottom){if(n<i.top||o<c)return u-1;o=c}}return 0}(e,n,o.right,u))}function Ji(e,n){return n-e.left<e.right-n}function Qi(e,n,t){var r=e.dom.createRange();return r.selectNode(n.dom),r.collapse(t),r}function Zi(n,e,t){var r=n.dom.createRange();r.selectNode(e.dom);var o=Ji(r.getBoundingClientRect(),t);return(!0===o?Xt:Yt)(e).map(function(e){return Qi(n,e,o)})}function ec(e,n,t){var r=Ji(n.dom.getBoundingClientRect(),t);return cl.some(Qi(e,n,r))}function nc(e,n){var t=le(e);return"input"===t?$s.after(e):y(["br","img"],t)?0===n?$s.before(e):$s.after(e):$s.on(e,n)}function tc(e,n){var t=e.fold($s.before,nc,$s.after),r=n.fold($s.before,nc,$s.after);return Xs.relative(t,r)}function rc(e,n,t,r){var o=nc(e,n),u=nc(t,r);return Xs.relative(o,u)}function oc(e){return cl.from(e.getSelection())}function uc(e,n){oc(e).each(function(e){e.removeAllRanges(),e.addRange(n)})}function ic(e,n,t,r,o){uc(e,zi(e,n,t,r,o))}function cc(l,e){return Wi(l,e).match({ltr:function(e,n,t,r){ic(l,e,n,t,r)},rtl:function(o,u,i,c){oc(l).each(function(e){if(e.setBaseAndExtent)e.setBaseAndExtent(o.dom,u,i.dom,c);else if(e.extend)try{t=i,r=c,(n=e).collapse(o.dom,u),n.extend(t.dom,r)}catch(e){ic(l,i,c,o,u)}else ic(l,i,c,o,u);var n,t,r})}})}function lc(e,n,t,r,o){cc(e,rc(n,t,r,o))}function ac(e,n,t){cc(e,tc(n,t))}function fc(e){if(0<e.rangeCount){var n=e.getRangeAt(0),t=e.getRangeAt(e.rangeCount-1);return cl.some(Us(kl.fromDom(n.startContainer),n.startOffset,kl.fromDom(t.endContainer),t.endOffset))}return cl.none()}function sc(e){if(null===e.anchorNode||null===e.focusNode)return fc(e);var n,t,r,o,u,i,c,l,a,f,s,m=kl.fromDom(e.anchorNode),d=kl.fromDom(e.focusNode);return n=m,i=t=e.anchorOffset,c=r=d,l=o=e.focusOffset,(a=de(u=n).dom.createRange()).setStart(u.dom,i),a.setEnd(c.dom,l),f=a,s=q(n,r)&&t===o,f.collapsed&&!s?cl.some(Us(m,e.anchorOffset,d,e.focusOffset)):fc(e)}function mc(e,n,t){uc(e,((t=void 0===t||t)?Pi:Ei)(e,n))}function dc(e){return oc(e).filter(function(e){return 0<e.rangeCount}).bind(sc).map(function(e){return Xs.exact(e.start,e.soffset,e.finish,e.foffset)})}function gc(e,n,t){return nm(e,n,(o=Ur,Mi(r=t,void 0).fold(function(){return Vs.none(r)},function(e){return qs(e.all,r,e.index,1,o)})));var r,o}function pc(e,n){var t=ji(e,n);return Us(kl.fromDom(t.startContainer),t.startOffset,kl.fromDom(t.endContainer),t.endOffset)}function bc(e,n){return{item:e,mode:n}}function hc(e,n,t,r){return void 0===r&&(r=qc),e.property().parent(n).map(function(e){return bc(e,r)})}function vc(n){return function(e){return 0===n.property().children(e).length}}function wc(e,n){return sm(dm,e,vc(dm),n)}function yc(e,n){return mm(dm,e,vc(dm),n)}function Cc(e){return Ie(e,"tr")}function Sc(e){return"br"===le(e)}function Tc(e,n,t,r){var o,u,i,c,l,a,f;return(Sc(n)?(o=e,(i=r).traverse(u=n).orThunk(function(){return hm(u,i.gather,o)}).map(i.relative)):(c=e,l=r,ye(a=n,f=t).filter(Sc).orThunk(function(){return ye(a,f-1).filter(Sc)}).bind(function(e){return l.traverse(e).fold(function(){return hm(e,l.gather,c).map(l.relative)},function(e){return pe(r=e).bind(function(n){var t=we(n);return bm(t,r).map(function(e){return{parent:n,children:t,element:r,index:e}})}).map(function(e){return $s.on(e.parent,e.index)});var r})}))).map(function(e){return{start:e,finish:e}})}function xc(e,n){return{left:e.left,top:e.top+n,right:e.right,bottom:e.bottom+n}}function Rc(e,n){return{left:e.left,top:e.top-n,right:e.right,bottom:e.bottom-n}}function Dc(e,n,t){return{left:e.left+n,top:e.top+t,right:e.right+n,bottom:e.bottom+t}}function Oc(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Ac(e,n){return cl.some(e.getRect(n))}function kc(e,n,t){return Fl(n)?Ac(e,n).map(Oc):Hl(n)?(r=e,o=n,(0<=(u=t)&&u<$t(o)?r.getRangedRect(o,u,o,u+1):0<u?r.getRangedRect(o,u-1,o,u):cl.none()).map(Oc)):cl.none();var r,o,u}function Ic(e,n){return Fl(n)?Ac(e,n).map(Oc):Hl(n)?e.getRangedRect(n,0,n,$t(n)).map(Oc):cl.none()}function Bc(n,e,r){return Re(function(e,n){return n(e)},De,e,Ru,void 0).fold(rl,function(e){return Ic(n,e).exists(function(e){return(n=r).left<(t=e).left||Math.abs(t.right-n.left)<1||n.left>t.right;var n,t})})}function Mc(n,t,e){var r,o=n.move(e,5),u=ym(t,n,e,o,100).getOr(o),i=u,c=t;return((r=n).point(i)>c.getInnerHeight()?cl.some(r.point(i)-c.getInnerHeight()):r.point(i)<0?cl.some(-r.point(i)):cl.none()).fold(function(){return t.situsFromPoint(u.left,n.point(u))},function(e){return t.scrollBy(0,e),t.situsFromPoint(u.left,n.point(u)-e)})}function Ec(a,f,s,e,m){return Ie(e,"td,th",f).bind(function(l){return Ie(l,"table",f).bind(function(e){return n=e,De(m,function(e){return pe(e).exists(function(e){return q(e,n)})},void 0).isSome()?(o=t=a,u=r=f,i=c=s,o.getSelection().bind(function(r){return Tc(u,r.finish,r.foffset,i).fold(function(){return cl.some(Ao(r.finish,r.foffset))},function(e){var n=o.fromSitus(e),t=pm.verify(o,r.finish,r.foffset,n.finish,n.foffset,i.failure,u);return pm.cata(t,function(){return cl.none()},function(){return cl.none()},function(e){return cl.some(Ao(e,0))},function(e){return cl.some(Ao(e,$t(e)))})})}).bind(function(e){return Sm(t,r,e.element,e.offset,c,20).map(t.fromSitus)}).bind(function(n){return Ie(n.finish,"td,th",f).map(function(e){return{start:l,finish:e,range:n}})})):cl.none();var o,u,i,n,t,r,c})})}function Pc(e,n,t,r,o,u){return Al().browser.isIE()?cl.none():u(r,n).orThunk(function(){return Ec(e,n,t,r,o).map(function(e){var n=e.range;return rm(cl.some(um(n.start,n.soffset,n.finish,n.foffset)),!0)})})}function Nc(e,r){return Ie(e,"tr",r).bind(function(t){return Ie(t,"table",r).bind(function(e){var n=xe(e,"tr");return q(t,n[0])?sm(dm,e,function(e){return Yt(e).isSome()},r).map(function(e){var n=$t(e);return rm(cl.some(um(e,n,e,n)),!0)}):cl.none()})})}function zc(e,r){return Ie(e,"tr",r).bind(function(t){return Ie(t,"table",r).bind(function(e){var n=xe(e,"tr");return q(t,n[n.length-1])?mm(dm,e,function(e){return Xt(e).isSome()},r).map(function(e){return rm(cl.some(um(e,0,e,0)),!0)}):cl.none()})})}function Lc(e,n,t,r,o,u,i){return Ec(e,t,r,o,u).bind(function(e){return im(n,t,e.start,e.finish,i)})}function _c(e,n){return Ie(e,"td,th",n)}function Wc(n){return function(e){return e===n}}function jc(e){return 37<=e&&e<=40}function Fc(l){return{elementFromPoint:function(e,n){return kl.fromPoint(kl.fromDom(l.document),e,n)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(e,n,t,r){var o,u,i,c=Xs.exact(e,n,t,r);return 0<(u=0<(i=(o=ji(l,c)).getClientRects()).length?i[0]:o.getBoundingClientRect()).width||0<u.height?cl.some(u).map(Li):cl.none()},getSelection:function(){return dc(l).map(function(e){return pc(l,e)})},fromSitus:function(e){var n=Xs.relative(e.start,e.finish);return pc(l,n)},situsFromPoint:function(e,n){return t=e,r=n,o=kl.fromDom(l.document),Zs(o,t,r).map(function(e){return Us(kl.fromDom(e.startContainer),e.startOffset,kl.fromDom(e.endContainer),e.endOffset)}).map(function(e){return om(e.start,e.soffset,e.finish,e.foffset)});var t,r,o},clearSelection:function(){oc(l).each(function(e){return e.removeAllRanges()})},collapseSelection:function(i){void 0===i&&(i=!1),dc(l).each(function(e){return e.fold(function(e){return e.collapse(i)},function(e,n){var t=i?e:n;ac(l,t,t)},function(e,n,t,r){var o=i?e:t,u=i?n:r;lc(l,o,u,o,u)})})},setSelection:function(e){lc(l,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:function(e,n){ac(l,e,n)},selectNode:function(e){mc(l,e,!1)},selectContents:function(e){mc(l,e)},getInnerHeight:function(){return l.innerHeight},getScrollY:function(){var e=kl.fromDom(l.document),n=void 0!==e?e.dom:document,t=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Ia(t,r).top},scrollBy:function(e,n){var t,r=e,o=n,u=kl.fromDom(l.document);(t=(void 0!==u?u.dom:document).defaultView)&&t.scrollBy(r,o)}}}function Hc(e,n){return{rows:e,cols:n}}function Vc(e){return!1===Hr(kl.fromDom(e.target),"ephox-snooker-resizer-bar")}function qc(e,n,t,r){return void 0===r&&(r=cm),t.sibling(e,n).map(function(e){return bc(e,r)})}function Uc(o,u,n){function t(e){Ql(e,o.selected),Ql(e,o.firstSelected),Ql(e,o.lastSelected)}function i(e){Me(e,o.selected,"1")}function c(e){r(e),n()}function r(e){D(xe(e,o.selectedSelector+","+o.firstSelectedSelector+","+o.lastSelectedSelector),t)}return{clearBeforeUpdate:r,clear:c,selectRange:function(e,n,t,r){c(e),D(n,i),Me(t,o.firstSelected,"1"),Me(r,o.lastSelected,"1"),u(n,t,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}function Gc(k,I,e){var B=Uc(Ka,function(l,a,f){e.targets().each(function(c){rn(a).each(function(e){var n,o,u,t=Co(k),r=rr(M,kl.fromDom(k.getDoc()),t),i=(n=c,o=r,Xo(u=ia.fromTable(e),n).map(function(e){var n,t,r=Vo(u,o,!1);return{upOrLeftCells:P(qo(r.slice(0,(n=e)[n.length-1].row+1)),function(e){return R(e.cells.slice(0,n[n.length-1].column+1),function(e){return e.element})}),downOrRightCells:P(qo(r.slice((t=e)[0].row+t[0].rowspan-1,r.length)),function(e){return R(e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length),function(e){return e.element})})}}));k.fire("TableSelectionChange",{cells:l,start:a,finish:f,otherCells:i})})})},function(){k.fire("TableSelectionClear")});return k.on("init",function(){function a(){return g.clear(m),cl.none()}function n(i){v.on(function(e){h.clearBeforeUpdate(p),_c(i.target,b).each(function(u){Fn(e,u,b).each(function(e){var n,t,r,o=e.boxes.getOr([]);1===o.length?(n=o[0],t="false"===pf(n),r=Le(qr(i.target),n,q),t&&r&&(h.selectRange(p,o,n,n),s.selectContents(n))):1<o.length&&(h.selectRange(p,o,e.start,e.finish),s.selectContents(u))})})})}function i(e,n){!0===e.raw.shiftKey&&(n.kill&&e.kill(),n.selection.each(function(e){var n=Xs.relative(e.start,e.finish),t=ji(y,n);k.selection.setRng(t)}))}function t(e){return 0===e.button}var e,r,o,u,c,l,m,d,g,f,s,p,b,h,v,w,y=k.getWin(),C=ir(k),S=ar(k),T=(e=Fc(y),{clearstate:(s=e,p=C,b=S,h=B,v=li(),(r={clearstate:w=v.clear,mousedown:function(e){h.clear(p),_c(e.target,b).each(v.set)},mouseover:function(e){n(e)},mouseup:function(e){n(e),w()}}).clearstate),mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}),x=(f=Fc(y),{keydown:function(e,n,t,r,o,i){var u=e.raw,c=u.which,l=!0===u.shiftKey;return Hn(m,g.selectedSelector).fold(function(){return jc(c)&&!l&&g.clearBeforeUpdate(m),km(c)&&l?E(Lc,f,m,d,Dm,r,n,g.selectRange):Am(c)&&l?E(Lc,f,m,d,Om,r,n,g.selectRange):km(c)?E(Pc,f,d,Dm,r,n,zc):Am(c)?E(Pc,f,d,Om,r,n,Nc):cl.none},function(u){function e(e){return function(){return N(e,function(e){return n=e.rows,t=e.cols,r=m,qn(u,n,t,(o=g).firstSelectedSelector,o.lastSelectedSelector).map(function(e){return o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes});var n,t,r,o}).fold(function(){return Vn(m,g.firstSelectedSelector,g.lastSelectedSelector).map(function(e){var n=km(c)||i.isForward(c)?$s.after:$s.before;return f.setRelativeSelection($s.on(e.first,0),n(e.table)),g.clear(m),rm(cl.none(),!0)})},function(){return cl.some(rm(cl.none(),!0))})}}return km(c)&&l?e([Hc(1,0)]):Am(c)&&l?e([Hc(-1,0)]):i.isBackward(c)&&l?e([Hc(0,-1),Hc(-1,0)]):i.isForward(c)&&l?e([Hc(0,1),Hc(1,0)]):jc(c)&&!l?a:cl.none})()},keyup:function(c,l,a,f,s){return Hn(m,g.selectedSelector).fold(function(){var t,r,e,o,u,n=c.raw,i=n.which;return!0===n.shiftKey&&jc(i)?(t=m,r=d,u=g.selectRange,q(e=l,o=f)&&a===s?cl.none():Ie(e,"td,th",r).bind(function(n){return Ie(o,"td,th",r).bind(function(e){return im(t,r,n,e,u)})})):cl.none()},cl.none)}}),R=(o=m=C,u=d=S,c=g=B,l=Fc(y),function(e,t){c.clearBeforeUpdate(o),Fn(e,t,u).each(function(e){var n=e.boxes.getOr([]);c.selectRange(o,n,e.start,e.finish),l.selectContents(t),l.collapseSelection()})});k.on("TableSelectorChange",function(e){return R(e.start,e.finish)});var D,O,A=(D=ii(kl.fromDom(C)),O=ii(0),{touchEnd:function(e){var n,t,r=kl.fromDom(e.target);"td"!==le(r)&&"th"!==le(r)||(n=D.get(),t=O.get(),q(n,r)&&e.timeStamp-t<300&&(e.preventDefault(),R(r,r))),D.set(r),O.set(e.timeStamp)}});k.on("dragstart",function(){T.clearstate()}),k.on("mousedown",function(e){t(e)&&Vc(e)&&T.mousedown(mf(e))}),k.on("mouseover",function(e){var n;(void 0===(n=e).buttons||Mm.browser.isEdge()&&0===n.buttons||0!=(1&n.buttons))&&Vc(e)&&T.mouseover(mf(e))}),k.on("mouseup",function(e){t(e)&&Vc(e)&&T.mouseup(mf(e))}),k.on("touchend",A.touchEnd),k.on("keyup",function(e){var n,t,r,o=mf(e);o.raw.shiftKey&&jc(o.raw.which)&&(n=k.selection.getRng(),t=kl.fromDom(n.startContainer),r=kl.fromDom(n.endContainer),x.keyup(o,t,n.startOffset,r,n.endOffset).each(function(e){i(o,e)}))}),k.on("keydown",function(e){var n=mf(e);I().each(function(e){return e.hideBars()});var t=k.selection.getRng(),r=kl.fromDom(t.startContainer),o=kl.fromDom(t.endContainer),u=ct(Im,Bm)(kl.fromDom(k.selection.getStart()));x.keydown(n,r,t.startOffset,o,t.endOffset,u).each(function(e){i(n,e)}),I().each(function(e){return e.showBars()})}),k.on("NodeChange",function(){var e=k.selection;Wn(rn,[kl.fromDom(e.getStart()),kl.fromDom(e.getEnd())]).fold(function(){return B.clear(C)},M)})}),{clear:B.clear}}function $c(o,u){function n(n){return d.forall(function(e){return!e[n]})}function e(){return Xa(mr(o),ar(o)).bind(function(r){return We(rn(r),Xa(kl.fromDom(o.selection.getEnd()),ar(o)).bind(rn),function(e,n){return q(e,n)?g(r)?cl.some({element:t=r,mergable:cl.none(),unmergable:cl.none(),selection:[t]}):cl.some(gr(u,e,r)):cl.none();var t}).bind(S)})}function t(r){return rn(r.element).map(function(e){var t=ia.fromTable(e),n=k(Xo(t,r).getOr([]),function(e,n){return n.isLocked&&(e.onAny=!0,0===n.column?e.onFirst=!0:n.column+n.colspan>=t.grid.columns&&(e.onLast=!0)),e},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Qo(t,r).isSome(),unmergeable:Zo(t,r).isSome(),locked:n}})}function r(){s.set(h(e)()),d=s.get().bind(t),D(m.get(),function(e){return e()})}function i(n){return n(),m.set(m.get().concat([n])),function(){m.set(O(m.get(),function(e){return e!==n}))}}function c(n,t){return i(function(){return s.get().fold(function(){n.setDisabled(!0)},function(e){n.setDisabled(t(e))})})}function l(n,t,r){return i(function(){return s.get().fold(function(){n.setDisabled(!0),n.setActive(!1)},function(e){n.setDisabled(t(e)),n.setActive(r(e))})})}function a(n){return d.exists(function(e){return e.locked[n]})}function f(n,t){return function(e){return l(e,function(e){return g(e.element)},function(){return o.queryCommandValue(n)===t})}}var s=ii(cl.none()),m=ii([]),d=cl.none(),g=me("caption"),p=f("mceTableRowType","header"),b=f("mceTableColType","th");return o.on("NodeChange ExecCommand TableSelectorChange",r),{onSetupTable:function(e){return c(e,function(){return!1})},onSetupCellOrRow:function(e){return c(e,function(e){return g(e.element)})},onSetupColumn:function(n){return function(e){return c(e,function(e){
return g(e.element)||a(n)})}},onSetupPasteable:function(n){return function(e){return c(e,function(e){return g(e.element)||n().isNone()})}},onSetupPasteableColumn:function(n,t){return function(e){return c(e,function(e){return g(e.element)||n().isNone()||a(t)})}},onSetupMergeable:function(e){return c(e,function(){return n("mergeable")})},onSetupUnmergeable:function(e){return c(e,function(){return n("unmergeable")})},resetTargets:r,onSetupTableWithCaption:function(e){return l(e,rl,function(e){return rn(e.element,ar(o)).exists(function(e){return Ae(e,"caption").isSome()})})},onSetupTableRowHeaders:p,onSetupTableColumnHeaders:b,targets:s.get}}var Kc,Xc=e("string"),Yc=e("object"),Jc=e("array"),Qc=t(null),Zc=n("boolean"),el=t(void 0),nl=n("function"),tl=n("number"),rl=C(!1),ol=C(!0),ul={fold:function(e){return e()},isSome:rl,isNone:ol,getOr:S,getOrThunk:u,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:C(null),getOrUndefined:C(void 0),or:S,orThunk:u,map:o,each:M,bind:o,exists:rl,forall:ol,filter:function(){return ul},toArray:function(){return[]},toString:C("none()")},il=function(t){function e(){return o}function n(e){return e(t)}var r=C(t),o={fold:function(e,n){return n(t)},isSome:ol,isNone:rl,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return il(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?o:ul},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},cl={some:il,none:o,from:function(e){return null==e?ul:il(e)}},ll=Array.prototype.slice,al=Array.prototype.indexOf,fl=Array.prototype.push,sl=function(){return(sl=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},ml=function(e,n){return{major:e,minor:n}},dl={nu:ml,detect:function(e,n){function t(e){return Number(r.replace(o,"$"+e))}var r,o,u=String(n).toLowerCase();return 0===e.length?oe():(o=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}}(e,r=u))?ml(t(1),t(2)):{major:0,minor:0}},unknown:oe},gl=function(e,n){return s(e,n,0)},pl=(Kc=/^\s+|\s+$/g,function(e){return e.replace(Kc,"")}),bl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hl={browsers:C([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return b(e,"edge/")&&b(e,"chrome")&&b(e,"safari")&&b(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bl],search:function(e){return b(e,"chrome")&&!b(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return b(e,"msie")||b(e,"trident")}},{name:"Opera",versionRegexes:[bl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:v("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:v("firefox")},{name:"Safari",versionRegexes:[bl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(b(e,"safari")||b(e,"mobile/"))&&b(e,"applewebkit")}}]),oses:C([{name:"Windows",search:v("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return b(e,"iphone")||b(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:v("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:v("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:v("linux"),versionRegexes:[]},{name:"Solaris",search:v("sunos"),versionRegexes:[]},{name:"FreeBSD",search:v("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:v("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},vl="Firefox",wl=function(){return ue({current:void 0,version:dl.unknown()})},yl=ue,Cl=(C("Edge"),C("Chrome"),C("IE"),C("Opera"),C(vl),C("Safari"),"Windows"),Sl="Android",Tl="Solaris",xl="FreeBSD",Rl="ChromeOS",Dl=function(){return ie({current:void 0,version:dl.unknown()})},Ol=ie,Al=(C(Cl),C("iOS"),C(Sl),C("Linux"),C("OSX"),C(Tl),C(xl),C(Rl),h(function(){return e=navigator.userAgent,n=cl.from(navigator.userAgentData),t=j,p=hl.browsers(),b=hl.oses(),{browser:h=n.bind(function(e){return r=p,N(e.brands,function(n){var t=n.brand.toLowerCase();return w(r,function(e){var n;return t===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())}).map(function(e){return{current:e.name,version:dl.nu(parseInt(n.version,10),0)}})});var r}).orThunk(function(){return L(p,t=e).map(function(e){var n=dl.detect(e.versionRegexes,t);return{current:e.name,version:n}});var t}).fold(wl,yl),os:v=L(b,r=e).map(function(e){var n=dl.detect(e.versionRegexes,r);return{current:e.name,version:n}}).fold(Dl,Ol),deviceType:(u=h,i=e,c=t,l=(o=v).isiOS()&&!0===/ipad/i.test(i),a=o.isiOS()&&!l,s=(f=o.isiOS()||o.isAndroid())||c("(pointer:coarse)"),m=l||!a&&f&&c("(min-device-width:768px)"),d=a||f&&!m,g=u.isSafari()&&o.isiOS()&&!1===/safari/i.test(i),{isiPad:C(l),isiPhone:C(a),isTablet:C(m),isPhone:C(d),isTouch:C(s),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:C(g),isDesktop:C(!d&&!m&&!g)})};var e,n,t,r,o,u,i,c,l,a,f,s,m,d,g,p,b,h,v})),kl={fromHtml:function(e,n){var t=(n||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ce(t.childNodes[0])},fromTag:function(e,n){return ce((n||document).createElement(e))},fromText:function(e,n){return ce((n||document).createTextNode(e))},fromDom:ce,fromPoint:function(e,n,t){return cl.from(e.dom.elementFromPoint(n,t)).map(ce)}},Il=F,Bl=Object.keys,Ml=Object.hasOwnProperty,El=function(e,r){var o={};return G(e,function(e,n){var t=r(e,n);o[t.k]=t.v}),o},Pl=function(e,n){return Ml.call(e,n)},Nl=["tfoot","thead","tbody","colgroup"];"undefined"!=typeof window||Function("return this;")();var zl,Ll,_l,Wl,jl,Fl=fe(1),Hl=fe(3),Vl=fe(9),ql=fe(11),Ul=nl(Element.prototype.attachShadow)&&nl(Node.prototype.getRootNode),Gl=C(Ul),$l=Ul?function(e){return kl.fromDom(e.dom.getRootNode())}:ge,Kl=function(e){return l(e.dom.shadowRoot)},Xl=function(e){var n=Hl(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var t,r,o,u,i,c=n.ownerDocument;return o=kl.fromDom(n),i=$l(o),(ql(u=i)&&l(u.dom.host)?cl.some(i):cl.none()).fold(function(){return c.body.contains(n)},(t=Xl,r=Ce,function(e){return t(r(e))}))},Yl=function(e){var n=e.dom.body;if(null==n)throw new Error("Body is not available yet");return kl.fromDom(n)},Jl=function(e,n){var t=[];return D(we(e),function(e){t=(t=n(e)?t.concat([e]):t).concat(Jl(e,n))}),t},Ql=function(e,n){e.dom.removeAttribute(n)},Zl=function(e,n){return Fe(e)?e.style.getPropertyValue(n):""},ea=C(10),na=C(10),ta=function(e,n,t){return P(we(e),function(e){return F(e,n)?t(e)?[e]:[]:ta(e,n,t)})},ra=function(e){return rn(e).fold(C([]),function(e){return Te(e,"colgroup")})},oa=function(e,n){return re(e.element,n,e.section,e.isNew)},ua="data-snooker-locked-cols",ia={fromTable:function(e){return wn(ln(e))},generate:wn,getAt:function(e,n,t){return cl.from(e.access[n+","+t])},findItem:function(e,n,t){var r=Ln(e,function(e){return t(n,e.element)});return 0<r.length?cl.some(r[0]):cl.none()},filterItems:Ln,justCells:function(e){return P(e.all,function(e){return e.cells})},justColumns:function(e){return Y(e.columns)},hasColumns:function(e){return 0<Bl(e.columns).length},getColumnAt:function(e,n){return cl.from(e.columns[n])}},ca=ia.fromTable,la=function(e,n){e.dom.appendChild(n.dom)},aa=function(e){var n=e.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},fa=(zl=Hl,{get:function(e){if(!zl(e))throw new Error("Can only get text value of a text node");return Ll(e).getOr("")},getOption:Ll=function(e){return zl(e)?cl.from(e.dom.nodeValue):cl.none()},set:function(e,n){if(!zl(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=n}}),sa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ma=function(n,e,t){return e.bind(function(e){return t.filter(E(n.eq,e))})},da=function(e,n,t){return 0<t.length?(r=e,o=n,u=t[0],A(t.slice(1),function(e,n){var t=o(r,n);return ma(r,e,t)},o(r,u))):cl.none();var r,o,u},ga=function(n,e,t,r){function o(n){return f(n,r).fold(function(){return n},function(e){return n.slice(0,e+1)})}void 0===r&&(r=rl);var u=[e].concat(n.up().all(e)),i=[t].concat(n.up().all(t)),c=o(u),l=o(i),a=w(c,function(e){return T(l,E(n.eq,e))});return{firstpath:c,secondpath:l,shared:a}},pa=_n(),ba=Hn,ha=St([{none:[]},{multiple:["elements"]},{single:["element"]}]),va=ha.none,wa=ha.multiple,ya=ha.single,Ca=tinymce.util.Tools.resolve("tinymce.PluginManager"),Sa=Jn("width",function(e){return e.dom.offsetWidth}),Ta=function(e){return tt(e,"content-box")},xa=function(e){return Qn()?tt(e,et(e)):Zn(e,"width",e.dom.offsetWidth)},Ra=function(e,n,t){var r=e();return w(r,n).orThunk(function(){return cl.from(r[0]).orThunk(t)}).map(function(e){return e.element})},Da=function(e){return"rtl"===Ue(e,"direction")?"rtl":"ltr"},Oa=Jn("height",function(e){var n=e.dom;return Xl(e)?n.getBoundingClientRect().height:n.offsetHeight}),Aa=function(e){return Qn()?(t=et(n=e),o=(r=n.dom).getBoundingClientRect().height||r.offsetHeight,"border-box"===t?o:nt(n,o,"top","bottom")):Zn(e,"height",e.dom.offsetHeight);var n,t,r,o},ka=function(t,r){return{left:t,top:r,translate:function(e,n){return ka(t+e,r+n)}}},Ia=ka,Ba=function(e){var n,t=e.dom,r=t.ownerDocument.body;return r===t?Ia(r.offsetLeft,r.offsetTop):Xl(e)?(n=t.getBoundingClientRect(),Ia(n.left,n.top)):Ia(0,0)},Ma={delta:S,positions:function(e){return Ct(wt,yt,e)},edge:vt},Ea=ct({delta:S,edge:pt,positions:function(e){return Ct(bt,ht,e)}},{delta:function(e){return-e},edge:gt,positions:function(e){return Ct(ht,bt,e)}}),Pa={delta:function(e,n){return Ea(n).delta(e,n)},positions:function(e,n){return Ea(n).positions(e,n)},edge:function(e){return Ea(e).edge(e)}},Na={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},za=(jl=["Infinity",(_l="[0-9]+")+"\\."+Tt(_l)+Tt(Wl="[eE][+-]?[0-9]+"),"\\."+_l+Tt(Wl),_l+Tt(Wl)].join("|"),new RegExp("^([+-]?(?:"+jl+"))(.*)$")),La=/(\d+(\.\d+)?)%/,_a=/(\d+(\.\d+)?)px|em/,Wa=me("col"),ja=C(La),Fa=me("col"),Ha=function(r){return It(r).fold(function(){return{width:e=Vt(t=r,rt),pixelWidth:e,getWidths:function(e,n){return Ft(e,t,n)},getCellDelta:n=C(0),singleColumnWidth:C([0]),minCellWidth:n,setElementWidth:M,adjustTableWidth:M,isRelative:!0,label:"none"};var t,e,n},function(e){return n=r,t=e,(null!==ja().exec(t)?qt:Ut)(n);var n,t})},Va=Ut,qa=qt,Ua=["img","br"],Ga=function(e,u){var i=function(e){for(var n=we(e),t=n.length-1;0<=t;t--){var r=n[t];if(u(r))return cl.some(r);var o=i(r);if(o.isSome())return o}return cl.none()};return i(e)},$a={scope:["row","col"]},Ka={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Xa=pr("th,td,caption"),Ya=pr("th,td"),Ja=dr,Qa=St([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Za=sl({},Qa),ef=Sr(function(e){return e<0}),nf=Sr(ol),tf=St([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rf=sl(sl({},tf),{from:function(e){return _(e,"%")?Rr("%",tf.percent,e):_(e,"px")?Rr("px",tf.pixels,e):tf.invalid(e)}}),of=function(e){if(0===e.length)return e;var n,t,r=A(e,function(e,n){var t=rf.from(n).fold(function(){return{value:n,remainder:0}},function(e){return n=e,{value:(t=Math.floor(n))+"px",remainder:n-t};var n,t},function(e){return{value:e+"%",remainder:0}});return{output:[t.value].concat(e.output),remainder:e.remainder+t.remainder}},{output:[],remainder:0}),o=r.output;return o.slice(0,o.length-1).concat([(n=o[o.length-1],t=Math.round(r.remainder),rf.from(n).fold(C(n),function(e){return e+t+"px"},function(e){return e+t+"%"}))])},uf=rf.from,cf=Nr(["compare","extract","mutate","sink"]),lf=Nr(["element","start","stop","destroy"]),af=Nr(["forceDrop","drop","move","delayDrop"]),ff=function(e,n,t,r){e.dom.removeEventListener(n,t,r)},sf=ol,mf=Lr,df=Vr("ephox-dragster").resolve,gf=cf({compare:function(e,n){return Ia(n.left-e.left,n.top-e.top)},extract:function(e){return cl.some(Ia(e.x,e.y))},sink:function(e,n){var t,r,o,u=(t=n,r=sl({layerClass:df("blocker")},t),Me(o=kl.fromTag("div"),"role","presentation"),qe(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Fr(o,df("blocker")),Fr(o,r.layerClass),{element:C(o),destroy:function(){aa(o)}}),i=_r(u.element(),"mousedown",e.forceDrop),c=_r(u.element(),"mouseup",e.drop),l=_r(u.element(),"mousemove",e.move),a=_r(u.element(),"mouseout",e.delayDrop);return lf({element:u.element,start:function(e){la(e,u.element())},stop:function(){aa(u.element())},destroy:function(){u.destroy(),c.unbind(),l.unbind(),a.unbind(),i.unbind()}})},mutate:function(e,n){e.mutate(n.left,n.top)}}),pf=function(e){return e.dom.contentEditable},bf=Vr("ephox-snooker").resolve,hf=bf("resizer-bar"),vf=bf("resizer-rows"),wf=bf("resizer-cols"),yf=bf("resizer-bar-dragging"),Cf={structure:!1,style:!0},Sf={structure:!0,style:!1},Tf={structure:!0,style:!0},xf={"border-collapse":"collapse",width:"100%"},Rf=x(5,function(e){var n=e+1+"px";return{title:n,value:n}}),Df=R(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(e){return{title:e,value:e.toLowerCase()}}),Of={border:"1"},Af="preservetable",kf=function(e){return"fixed"===ro(e)||!1===oo(e)},If=function(e){return"responsive"===ro(e)},Bf=function(e){var n=Nt(e);kr(e,cl.some(n),cl.none()),Ro(e)},Mf=function(e){var n=rt(e)+"px";kr(e,cl.some(n),cl.none()),Ro(e)},Ef=function(e){$e(e,"width");var n=tn(e);D(0<n.length?n:nn(e),function(e){$e(e,"width"),Ro(e)}),Ro(e)},Pf="bar-",Nf=function(n,e,t){return n.property().isText(e)&&0===n.property().getText(e).trim().length||n.property().isComment(e)?t(e).bind(function(e){return Nf(n,e,t).orThunk(function(){return cl.some(e)})}):cl.none()},zf=function(e,n){var t=Nf(e,n,e.query().prevSibling).getOr(n);if(e.property().isText(t))return Ao(t,ko(e,t));var r=e.property().children(t);return 0<r.length?zf(e,r[r.length-1]):Ao(t,ko(e,t))},Lf=zf,_f=_n(),Wf=me("th"),jf=function(e){var n=O(e,function(e){return Wf(e.element)});return 0===n.length?cl.some("td"):n.length===e.length?cl.some("th"):cl.none()},Ff=No,Hf=zo,Vf=Lo,qf=function(t){return{isValue:ol,isError:rl,getOr:C(t),getOrThunk:C(t),getOrDie:C(t),or:function(){return qf(t)},orThunk:function(){return qf(t)},fold:function(e,n){return n(t)},map:function(e){return qf(e(t))},mapError:function(){return qf(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOptional:function(){return cl.some(t)}}},Uf=function(n){return{isValue:rl,isError:ol,getOr:S,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:S,orThunk:function(e){return e()},fold:function(e){return e(n)},map:function(){return Uf(n)},mapError:function(e){return Uf(e(n))},each:M,bind:function(){return Uf(n)},exists:rl,forall:ol,toOptional:cl.none}},Gf={value:qf,error:Uf,fromOption:function(e,n){return e.fold(function(){return Uf(n)},qf)}},$f=me("col"),Kf=me("colgroup"),Xf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Yf=_n(),Jf=Eu("thead",!0),Qf=Eu("tbody",!1),Zf=Eu("tfoot",!1),es=$i("th"),ns=$i("td"),ts=$o(function(e,n,t,r){var o=n[0].row;return Bu(A(Mu(n),function(e,n){return{grid:mu(e.grid,o,n.row+e.delta,t,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid,o,n[0].column)},Xo,M,M,Gi),rs=$o(function(e,n,t,r){var o=Mu(n),u=o[o.length-1],i=u.row+u.rowspan;return Bu(A(o,function(e,n){return mu(e,i,n.row,t,r.getOrInit)},e),i,n[0].column)},Xo,M,M,Gi),os=$o(function(e,n,t,r){var o=n.details,u=Cu(o),i=u[0].column;return Bu(A(u,function(e,n){return{grid:du(e.grid,i,n.column+e.delta,t,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid,o[0].row,i)},ju(!0),zu,M,Gi),us=$o(function(e,n,t,r){var o=n.details,u=o[o.length-1],i=u.column+u.colspan;return Bu(A(Cu(o),function(e,n){return du(e,i,n.column,t,r.getOrInit)},e),o[0].row,i)},ju(!1),zu,M,Gi),is=$o(function(e,n){var t,r,o=Cu(n.details),u=(t=e,r=R(o,function(e){return e.column}),P(t,function(e){var n=e.cells,t=A(r,function(e,n){return 0<=n&&n<e.length?e.slice(0,n).concat(e.slice(n+1)):e},n);return 0<t.length?[re(e.element,t,e.section,e.isNew)]:[]})),i=0<u.length?u[0].cells.length-1:0;return Bu(u,o[0].row,Math.min(o[0].column,i))},function(n,e){return Yo(n,e).map(function(e){return{details:e,pixelDelta:-Wu(n,e)}})},zu,ku,Gi),cs=$o(function(e,n){var t,r,o,u,i=Mu(n),c=(t=i[0].row,r=i[i.length-1].row,u=(o=pn(e)).rows,o.cols.concat(u.slice(0,t)).concat(u.slice(r+1))),l=0<c.length?c.length-1:0;return Bu(c,Math.min(n[0].row,l),n[0].column)},Xo,M,ku,Gi),ls=$o(function(e,n,t,r){return Bu(wu(e,R(Cu(n),function(e){return e.column}),!0,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,M,M,es),as=$o(function(e,n,t,r){return Bu(wu(e,R(Cu(n),function(e){return e.column}),!1,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,M,M,ns),fs=$o(Jf,Yo,M,M,es),ss=$o(Qf,Yo,M,M,ns),ms=$o(Zf,Yo,M,M,ns),ds=$o(function(e,n,t,r){return Bu(yu(e,n,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,M,M,es),gs=$o(function(e,n,t,r){return Bu(yu(e,n,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,M,M,ns),ps=$o(function(e,n,t,r){var o=n.cells;return Ou(o),Iu(function(e,n,t){var r=pn(e).rows;if(0===r.length)return e;for(var o=n.startRow;o<=n.finishRow;o++)for(var u=n.startCol;u<=n.finishCol;u++){var i=r[o],c=mn(i,u).isLocked;sn(i,u,te(t(),!1,c))}return e}(e,n.bounds,r.merge(o)),cl.from(o[0]))},Qo,Nu,M,Ki),bs=$o(function(e,n,t,r){return Iu(A(n,function(e,n){return eu(e,n,t,r.unmerge(n))},e),cl.from(n[0]))},Zo,Nu,M,Ki),hs=$o(function(e,n,t){var r,o,u=(r=n.clipboard,o=n.generators,Vo(ia.fromTable(r),o,!0));return au({row:n.row,column:n.column},e,u,n.generators,t).fold(function(){return Iu(e,cl.some(n.element))},function(e){return Bu(e,n.row,n.column)})},function(n,t){return en(t.element).bind(function(e){return Uo(n,e).map(function(e){return sl(sl({},e),{generators:t.generators,clipboard:t.clipboard})})})},Nu,M,Gi),vs=$o(function(e,n,t){var r=pn(e).rows,o=n.cells[0].column,u=r[n.cells[0].row];return Bu(fu(o,e,Pu(n.clipboard,n.generators,u),n.generators,t),n.cells[0].row,n.cells[0].column)},Fu(!0),M,M,Gi),ws=$o(function(e,n,t){var r=pn(e).rows,o=n.cells[n.cells.length-1].column+n.cells[n.cells.length-1].colspan,u=r[n.cells[0].row];return Bu(fu(o,e,Pu(n.clipboard,n.generators,u),n.generators,t),n.cells[0].row,n.cells[0].column)},Fu(!1),M,M,Gi),ys=$o(function(e,n,t){var r=pn(e).rows,o=n.cells[0].row,u=r[o];return Bu(su(o,e,Pu(n.clipboard,n.generators,u),n.generators,t),n.cells[0].row,n.cells[0].column)},Ko,M,M,Gi),Cs=$o(function(e,n,t){var r=pn(e).rows,o=n.cells[n.cells.length-1].row+n.cells[n.cells.length-1].rowspan,u=r[n.cells[0].row];return Bu(su(o,e,Pu(n.clipboard,n.generators,u),n.generators,t),n.cells[0].row,n.cells[0].column)},Ko,M,M,Gi),Ss=function(e,n){var i=ia.fromTable(e);return Xo(i,n).bind(function(e){var n=e[e.length-1],o=e[0].row,u=n.row+n.rowspan;return function(){var e=R(i.all.slice(o,u),function(e){return Mo(e).type}),n=y(e,"header"),t=y(e,"footer");if(n||t){var r=y(e,"body");return!n||r||t?n||r||!t?cl.none():cl.some("footer"):cl.some("header")}return cl.some("body")}()}).getOr("")},Ts={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},xs=tinymce.util.Tools.resolve("tinymce.util.Tools"),Rs=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ds=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Os=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,As=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,ks=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Is=function(e){return R(e,function(e){var n=e.text||e.title;return ai(e)?{text:n,items:Is(e.menu)}:{text:n,value:e.value}})},Bs=function(t,r,e,o,a){return R(e,function(e){var u,i,c,l,n=e.text||e.title;return ai(e)?{type:"nestedmenuitem",text:n,getSubmenuItems:function(){return Bs(t,r,e.menu,o,a)}}:{text:n,type:"togglemenuitem",onAction:function(){return a(e.value)},onSetup:(u=t,i=r,c=o,l=e.value,function(t){function e(){function e(e){return u.formatter.match(c,{value:l},e.dom,o)}var n=Ja(i);o?(t.setActive(!T(n,e)),r.set(u.formatter.formatChanged(c,function(e){return t.setActive(!e)},!0))):(t.setActive(I(n,e)),r.set(u.formatter.formatChanged(c,t.setActive,!1,{value:l})))}var r=ci(function(e){return e.unbind()}),o=!W(l);return u.initialized?e():u.on("init",e),r.clear})}})},Ms=function(e){return P(e,function(e){return ai(e)?[sl(sl({},e),{menu:Ms(e.menu)})]:W(e.value)?[e]:[]})},Es=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Rs}],Ps={normal:hi(!1),ifTruthy:hi(!0)},Ns=E(Ci,["left","center","right"],"align"),zs=E(Ci,["top","middle","bottom"],"valign"),Ls=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],_s=function(e,n,t,r){if("TD"===n.tagName||"TH"===n.tagName)Xc(t)?e.setStyle(n,t,r):e.setStyle(n,t);else if(n.children)for(var o=0;o<n.children.length;o++)_s(e,n.children[o],t,r)},Ws={remove_similar:!0,inherit:!1},js=sl({selector:"td,th"},Ws),Fs={tablecellbackgroundcolor:sl({styles:{backgroundColor:"%value"}},js),tablecellverticalalign:sl({styles:{"vertical-align":"%value"}},js),tablecellbordercolor:sl({styles:{borderColor:"%value"}},js),tablecellclass:sl({classes:["%value"]},js),tableclass:sl({selector:"table",classes:["%value"]},Ws),tablecellborderstyle:sl({styles:{borderStyle:"%value"}},js),tablecellborderwidth:sl({styles:{borderWidth:"%value"}},js)},Hs=St([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Vs=sl(sl({},Hs),{none:function(e){return Hs.none(e=void 0===e?void 0:e)}}),qs=function(e,n,t,r,o){void 0===o&&(o=ol);var u=1===r;if(!u&&t<=0)return Vs.first(e[0]);if(u&&t>=e.length-1)return Vs.last(e[e.length-1]);var i=t+r,c=e[i];return o(c)?Vs.middle(n,c):qs(e,n,i,r,o)},Us=function(e,n,t,r){return{start:e,soffset:n,finish:t,foffset:r}},Gs=St([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$s={before:Gs.before,on:Gs.on,after:Gs.after,cata:function(e,n,t,r){return e.fold(n,t,r)},getStart:function(e){return e.fold(S,S,S)}},Ks=St([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xs={domRange:Ks.domRange,relative:Ks.relative,exact:Ks.exact,exactFromRange:function(e){return Ks.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var n=e.match({domRange:function(e){return kl.fromDom(e.startContainer)},relative:function(e){return $s.getStart(e)},exact:function(e){return e}});return kl.fromDom(ge(n).dom.defaultView)},range:Us},Ys=function(e,n){return e.selectNodeContents(n.dom)},Js=St([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);Js.ltr,Js.rtl;var Qs=function(e,n,t,r){return Hl(n)?(u=n,i=t,c=r,(l=(o=e).dom.createRange()).selectNode(u.dom),N(l.getClientRects(),function(e){return Xi(e,i,c)?cl.some(e):cl.none()}).map(function(e){return Yi(o,u,i,c,e)})):(f=n,s=t,m=r,d=(a=e).dom.createRange(),N(we(f),function(e){return d.selectNode(e.dom),Xi(d.getBoundingClientRect(),s,m)?Qs(a,e,s,m):cl.none()}));var o,u,i,c,l,a,f,s,m,d},Zs=document.caretPositionFromPoint?function(t,e,n){var r,o;return cl.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(function(e){if(null===e.offsetNode)return cl.none();var n=t.dom.createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),cl.some(n)})}:document.caretRangeFromPoint?function(e,n,t){var r,o;return cl.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,n,t))}:function(o,u,n){return kl.fromPoint(o,u,n).bind(function(r){function e(){return e=o,t=u,(0===we(n=r).length?ec:Zi)(e,n,t);var e,n,t}return 0===we(r).length?e():function(e,n,t,r){var o=e.dom.createRange();o.selectNode(n.dom);var u=o.getBoundingClientRect();return function(e,n,t,r){var o=e.dom.createRange();o.selectNode(n.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return Qs(e,n,i,c)}(e,n,Math.max(u.left,Math.min(u.right,t)),Math.max(u.top,Math.min(u.bottom,r)))}(o,r,u,n).orThunk(e)})},em=tinymce.util.Tools.resolve("tinymce.util.VK"),nm=function(n,t,e){return e.fold(cl.none,cl.none,function(e,n){return Xt(n).map(function(e){function n(e,n,t,r){return zi(o,e,n,t,r)}return t=Xs.exact(e,0,e,0),o=Xs.getWin(t).dom,r=t.match({domRange:function(e){var n=kl.fromDom(e.startContainer),t=kl.fromDom(e.endContainer);return rc(n,e.startOffset,t,e.endOffset)},relative:tc,exact:rc}),Wi(o,r).match({ltr:n,rtl:n});var t,o,r})},function(e){return n.execCommand("mceTableInsertRowAfter"),gc(n,t,e)})},tm=["table","li","dl"],rm=function(e,n){return{selection:e,kill:n}},om=function(e,n,t,r){return{start:$s.on(e,n),finish:$s.on(t,r)}},um=om,im=function(t,e,r,n,o){return q(r,n)?cl.none():Fn(r,n,e).bind(function(e){var n=e.boxes.getOr([]);return 1<n.length?(o(t,n,e.start,e.finish),cl.some(rm(cl.some(um(r,0,r,$t(r))),!0))):cl.none()})},cm=function(e,n,t,r){void 0===r&&(r=cm);var o=e.property().children(n);return t.first(o).map(function(e){return bc(e,r)})},lm=[{current:hc,next:qc,fallback:cl.none()},{current:qc,next:cm,fallback:cl.some(hc)},{current:cm,next:cm,fallback:cl.some(qc)}],am=function(n,t,r,o,e){return w(e=void 0===e?lm:e,function(e){return e.current===r}).bind(function(e){return e.current(n,t,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return am(n,t,e,o)})})})},fm=function(n,e,t,r,o,u){return am(n,e,r,o).bind(function(e){return u(e.item)?cl.none():t(e.item)?cl.some(e.item):fm(n,e.item,t,e.mode,o,u)})},sm=function(e,n,t,r){return fm(e,n,t,qc,{sibling:function(e,n){return e.query().prevSibling(n)},first:function(e){return 0<e.length?cl.some(e[e.length-1]):cl.none()}},r)},mm=function(e,n,t,r){return fm(e,n,t,qc,{sibling:function(e,n){return e.query().nextSibling(n)},first:function(e){return 0<e.length?cl.some(e[0]):cl.none()}},r)},dm=_n(),gm=St([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),pm=sl(sl({},gm),{verify:function(i,e,n,t,r,c,o){return Ie(t,"td,th",o).bind(function(u){return Ie(e,"td,th",o).map(function(o){return q(u,o)?q(t,u)&&$t(u)===r?c(o):gm.none("in same cell"):Wn(Cc,[u,o]).fold(function(){return n=u,t=(e=i).getRect(o),(r=e.getRect(n)).right>t.left&&r.left<t.right?gm.success():c(o);var e,n,t,r},function(){return c(o)})})}).getOr(gm.none("default"))},cata:function(e,n,t,r,o){return e.fold(n,t,r,o)}}),bm=function(e,n){return f(e,E(q,n))},hm=function(e,n,t){return n(e,t).bind(function(e){return Hl(e)&&0===Pn(e).trim().length?hm(e,n,t):cl.some(e)})},vm=St([{none:[]},{retry:["caret"]}]),wm={point:function(e){return e.bottom},adjuster:function(e,n,t,r,o){var u=xc(o,5);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?vm.retry(u):t.top===o.bottom?vm.retry(xc(o,1)):Bc(e,n,o)?vm.retry(Dc(u,5,0)):vm.none()},move:xc,gather:yc},ym=function(t,r,o,u,i){return 0===i?cl.some(u):(n=t,c=u.left,l=r.point(u),n.elementFromPoint(c,l).filter(function(e){return"table"===le(e)}).isSome()?(e=i-1,ym(t,r,o,r.move(u,5),e)):t.situsFromPoint(u.left,r.point(u)).bind(function(e){return e.start.fold(cl.none,function(n){return Ic(t,n).bind(function(e){return r.adjuster(t,n,e,o,u).fold(cl.none,function(e){return ym(t,r,o,e,i-1)})}).orThunk(function(){return cl.some(u)})},cl.none)}));var e,n,c,l},Cm={tryUp:E(Mc,{point:function(e){return e.top},adjuster:function(e,n,t,r,o){var u=Rc(o,5);return Math.abs(t.top-r.top)<1||t.bottom<o.top?vm.retry(u):t.bottom===o.top?vm.retry(Rc(o,1)):Bc(e,n,o)?vm.retry(Dc(u,5,0)):vm.none()},move:Rc,gather:wc}),tryDown:E(Mc,wm),ieTryUp:function(e,n){return e.situsFromPoint(n.left,n.top-5)},ieTryDown:function(e,n){return e.situsFromPoint(n.left,n.bottom+5)},getJumpSize:C(5)},Sm=function(r,o,u,i,c,l){return 0===l?cl.none():Rm(r,o,u,i,c).bind(function(e){var n=r.fromSitus(e),t=pm.verify(r,u,i,n.finish,n.foffset,c.failure,o);return pm.cata(t,function(){return cl.none()},function(){return cl.some(e)},function(e){return q(u,e)&&0===i?Tm(r,u,i,Rc,c):Sm(r,o,e,0,c,l-1)},function(e){return q(u,e)&&i===$t(e)?Tm(r,u,i,xc,c):Sm(r,o,e,$t(e),c,l-1)})})},Tm=function(n,e,t,r,o){return kc(n,e,t).bind(function(e){return xm(n,o,r(e,Cm.getJumpSize()))})},xm=function(e,n,t){var r=Al().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?n.otherRetry(e,t):r.isIE()?n.ieRetry(e,t):cl.none()},Rm=function(n,e,t,r,o){return kc(n,t,r).bind(function(e){return xm(n,o,e)})},Dm={traverse:ve,gather:yc,relative:$s.before,otherRetry:Cm.tryDown,ieRetry:Cm.ieTryDown,failure:pm.failedDown},Om={traverse:he,gather:wc,relative:$s.before,otherRetry:Cm.tryUp,ieRetry:Cm.ieTryUp,failure:pm.failedUp},Am=Wc(38),km=Wc(40),Im={isBackward:Wc(37),isForward:Wc(39)},Bm={isBackward:Wc(39),isForward:Wc(37)},Mm=tinymce.util.Tools.resolve("tinymce.Env");Ca.add("table",function(c){function e(r){return Ya(mr(f)).bind(function(t){return rn(t,d).map(function(e){var n=gr(m,e,t);return r(e,n)})}).getOr("")}var n,t,r,o,u,i,l,a,f,s,m,d,g=(n=function(){return ir(c)},t=function(){return Ya(mr(c),ar(c))},r=Ka.selectedSelector,{get:function(){return ba(n(),r).fold(function(){return t().fold(va,ya)},function(e){return wa(e)})}}),p=$c(c,g),b=Oo(c),h=Gc(c,b.lazyResize,p),v=qu(c,h,b.lazyWire),w=(o=li(),u=li(),{getRows:o.get,setRows:function(e){e.fold(o.clear,o.set),u.clear()},clearRows:o.clear,getColumns:u.get,setColumns:function(e){e.fold(u.clear,u.set),o.clear()},clearColumns:u.clear});return Bi(c,v,0,g,w),s=v,m=g,d=ar(f=c),G({mceTableRowType:function(){return e(s.getTableRowType)},mceTableCellType:function(){return e(s.getTableCellType)},mceTableColType:function(){return e(s.getTableColType)}},function(e,n){return f.addQueryValueHandler(n,e)}),br(c,g,v),function(n,e,t,r){function o(e){return function(){return n.execCommand(e)}}function u(e){n.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})}var i={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),
onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)});var l={type:"nestedmenuitem",text:"Row",getSubmenuItems:C("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")});var a={type:"nestedmenuitem",text:"Column",getSubmenuItems:C("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:C("tablecellprops tablemergecells tablesplitcells")};!1===n.getParam("table_grid",!0,"boolean")?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",l),n.ui.registry.addNestedMenuItem("column",a),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(C(""),function(e){return"caption"===le(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var s=Ms(po(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Bs(n,e,s,"tableclass",function(e){return n.execCommand("mceTableToggleClass",!1,e)})},onSetup:t.onSetupTable});var m=Ms(go(n));0!==m.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Bs(n,e,m,"tablecellclass",function(e){return n.execCommand("mceTableCellToggleClass",!1,e)})},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Bs(n,e,Rs,"tablecellverticalalign",fi(n,"vertical-align"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Bs(n,e,uo(n),"tablecellborderwidth",fi(n,"border-width"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Bs(n,e,io(n),"tablecellborderstyle",fi(n,"border-style"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return mi(n,So(n),"background-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return mi(n,To(n),"border-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:di(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:gi(n),onSetup:t.onSetupTableColumnHeaders})}(c,g,p,w),function(n,e,t,r){function o(e){return function(){return n.execCommand(e)}}n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}}),n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=Ms(po(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:si(n,e,u,"tableclass",function(e){return n.execCommand("mceTableToggleClass",!1,e)}),onSetup:t.onSetupTable});var i=Ms(go(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:si(n,e,i,"tablecellclass",function(e){return n.execCommand("mceTableCellToggleClass",!1,e)}),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:si(n,e,Rs,"tablecellverticalalign",fi(n,"vertical-align")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:si(n,e,uo(n),"tablecellborderwidth",fi(n,"border-width")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:si(n,e,io(n),"tablecellborderstyle",fi(n,"border-style")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(e){return e(mi(n,So(n),"background-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(e){return e(mi(n,To(n),"border-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:di(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:gi(n),onSetup:t.onSetupTableColumnHeaders})}(c,g,p,w),0<(a=(l=c).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&l.ui.registry.addContextToolbar("table",{predicate:function(e){return l.dom.is(e,"table")&&l.getBody().contains(e)},items:a,scope:"node",position:"node"}),c.on("PreInit",function(){c.serializer.addTempAttr(Ka.firstSelected),c.serializer.addTempAttr(Ka.lastSelected),c.formatter.register(Fs)}),c.getParam("table_tab_navigation",!0,"boolean")&&c.on("keydown",function(e){var n,t,r,o,u=c,i=h;(n=e).keyCode===em.TAB&&(t=ir(u),r=function(e){var n=le(e);return q(e,t)||y(tm,n)},o=u.selection.getRng(),en(kl.fromDom(n.shiftKey?o.startContainer:o.endContainer),r).each(function(e){n.preventDefault(),rn(e,r).each(i.clear),u.selection.collapse(n.shiftKey),(n.shiftKey?function(e,n,t){return nm(e,n,(o=Ur,Mi(r=t,void 0).fold(function(){return Vs.none()},function(e){return qs(e.all,r,e.index,-1,o)})));var r,o}:gc)(u,r,e).each(function(e){u.selection.setRng(e)})}))}),c.on("remove",function(){b.destroy()}),{insertTable:(i=c,function(e,n,t){var r=Ku(i,n,e,t=void 0===t?{}:t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return i.undoManager.add(),r}),setClipboardRows:Yu(w.setRows),getClipboardRows:Xu(w.getRows),setClipboardCols:Yu(w.setColumns),getClipboardCols:Xu(w.getColumns),resizeHandler:b,selectionTargets:p}})}();